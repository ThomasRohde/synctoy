var US=Object.defineProperty;var MS=(r,n,i)=>n in r?US(r,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):r[n]=i;var Sa=(r,n,i)=>MS(r,typeof n!="symbol"?n+"":n,i);(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const p of u.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&a(p)}).observe(document,{childList:!0,subtree:!0});function i(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function a(o){if(o.ep)return;o.ep=!0;const u=i(o);fetch(o.href,u)}})();var RS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function S0(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var sp={exports:{}},iu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xg;function zS(){if(Xg)return iu;Xg=1;var r=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function i(a,o,u){var p=null;if(u!==void 0&&(p=""+u),o.key!==void 0&&(p=""+o.key),"key"in o){u={};for(var y in o)y!=="key"&&(u[y]=o[y])}else u=o;return o=u.ref,{$$typeof:r,type:a,key:p,ref:o!==void 0?o:null,props:u}}return iu.Fragment=n,iu.jsx=i,iu.jsxs=i,iu}var Qg;function BS(){return Qg||(Qg=1,sp.exports=zS()),sp.exports}var T=BS(),op={exports:{}},lu={},up={exports:{}},cp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zg;function LS(){return Zg||(Zg=1,(function(r){function n(K,re){var se=K.length;K.push(re);e:for(;0<se;){var Oe=se-1>>>1,ze=K[Oe];if(0<o(ze,re))K[Oe]=re,K[se]=ze,se=Oe;else break e}}function i(K){return K.length===0?null:K[0]}function a(K){if(K.length===0)return null;var re=K[0],se=K.pop();if(se!==re){K[0]=se;e:for(var Oe=0,ze=K.length,N=ze>>>1;Oe<N;){var J=2*(Oe+1)-1,he=K[J],Se=J+1,Ne=K[Se];if(0>o(he,se))Se<ze&&0>o(Ne,he)?(K[Oe]=Ne,K[Se]=se,Oe=Se):(K[Oe]=he,K[J]=se,Oe=J);else if(Se<ze&&0>o(Ne,se))K[Oe]=Ne,K[Se]=se,Oe=Se;else break e}}return re}function o(K,re){var se=K.sortIndex-re.sortIndex;return se!==0?se:K.id-re.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;r.unstable_now=function(){return u.now()}}else{var p=Date,y=p.now();r.unstable_now=function(){return p.now()-y}}var g=[],m=[],b=1,x=null,S=3,A=!1,C=!1,U=!1,X=!1,ie=typeof setTimeout=="function"?setTimeout:null,W=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;function fe(K){for(var re=i(m);re!==null;){if(re.callback===null)a(m);else if(re.startTime<=K)a(m),re.sortIndex=re.expirationTime,n(g,re);else break;re=i(m)}}function xe(K){if(U=!1,fe(K),!C)if(i(g)!==null)C=!0,ye||(ye=!0,ke());else{var re=i(m);re!==null&&He(xe,re.startTime-K)}}var ye=!1,pe=-1,Le=5,Re=-1;function Pe(){return X?!0:!(r.unstable_now()-Re<Le)}function de(){if(X=!1,ye){var K=r.unstable_now();Re=K;var re=!0;try{e:{C=!1,U&&(U=!1,W(pe),pe=-1),A=!0;var se=S;try{t:{for(fe(K),x=i(g);x!==null&&!(x.expirationTime>K&&Pe());){var Oe=x.callback;if(typeof Oe=="function"){x.callback=null,S=x.priorityLevel;var ze=Oe(x.expirationTime<=K);if(K=r.unstable_now(),typeof ze=="function"){x.callback=ze,fe(K),re=!0;break t}x===i(g)&&a(g),fe(K)}else a(g);x=i(g)}if(x!==null)re=!0;else{var N=i(m);N!==null&&He(xe,N.startTime-K),re=!1}}break e}finally{x=null,S=se,A=!1}re=void 0}}finally{re?ke():ye=!1}}}var ke;if(typeof z=="function")ke=function(){z(de)};else if(typeof MessageChannel<"u"){var qe=new MessageChannel,Xe=qe.port2;qe.port1.onmessage=de,ke=function(){Xe.postMessage(null)}}else ke=function(){ie(de,0)};function He(K,re){pe=ie(function(){K(r.unstable_now())},re)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(K){K.callback=null},r.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Le=0<K?Math.floor(1e3/K):5},r.unstable_getCurrentPriorityLevel=function(){return S},r.unstable_next=function(K){switch(S){case 1:case 2:case 3:var re=3;break;default:re=S}var se=S;S=re;try{return K()}finally{S=se}},r.unstable_requestPaint=function(){X=!0},r.unstable_runWithPriority=function(K,re){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var se=S;S=K;try{return re()}finally{S=se}},r.unstable_scheduleCallback=function(K,re,se){var Oe=r.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?Oe+se:Oe):se=Oe,K){case 1:var ze=-1;break;case 2:ze=250;break;case 5:ze=1073741823;break;case 4:ze=1e4;break;default:ze=5e3}return ze=se+ze,K={id:b++,callback:re,priorityLevel:K,startTime:se,expirationTime:ze,sortIndex:-1},se>Oe?(K.sortIndex=se,n(m,K),i(g)===null&&K===i(m)&&(U?(W(pe),pe=-1):U=!0,He(xe,se-Oe))):(K.sortIndex=ze,n(g,K),C||A||(C=!0,ye||(ye=!0,ke()))),K},r.unstable_shouldYield=Pe,r.unstable_wrapCallback=function(K){var re=S;return function(){var se=S;S=re;try{return K.apply(this,arguments)}finally{S=se}}}})(cp)),cp}var $g;function qS(){return $g||($g=1,up.exports=LS()),up.exports}var fp={exports:{}},$e={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jg;function HS(){if(Jg)return $e;Jg=1;var r=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),p=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),S=Symbol.iterator;function A(N){return N===null||typeof N!="object"?null:(N=S&&N[S]||N["@@iterator"],typeof N=="function"?N:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U=Object.assign,X={};function ie(N,J,he){this.props=N,this.context=J,this.refs=X,this.updater=he||C}ie.prototype.isReactComponent={},ie.prototype.setState=function(N,J){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,J,"setState")},ie.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function W(){}W.prototype=ie.prototype;function z(N,J,he){this.props=N,this.context=J,this.refs=X,this.updater=he||C}var fe=z.prototype=new W;fe.constructor=z,U(fe,ie.prototype),fe.isPureReactComponent=!0;var xe=Array.isArray;function ye(){}var pe={H:null,A:null,T:null,S:null},Le=Object.prototype.hasOwnProperty;function Re(N,J,he){var Se=he.ref;return{$$typeof:r,type:N,key:J,ref:Se!==void 0?Se:null,props:he}}function Pe(N,J){return Re(N.type,J,N.props)}function de(N){return typeof N=="object"&&N!==null&&N.$$typeof===r}function ke(N){var J={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(he){return J[he]})}var qe=/\/+/g;function Xe(N,J){return typeof N=="object"&&N!==null&&N.key!=null?ke(""+N.key):J.toString(36)}function He(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then(ye,ye):(N.status="pending",N.then(function(J){N.status==="pending"&&(N.status="fulfilled",N.value=J)},function(J){N.status==="pending"&&(N.status="rejected",N.reason=J)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function K(N,J,he,Se,Ne){var Me=typeof N;(Me==="undefined"||Me==="boolean")&&(N=null);var Qe=!1;if(N===null)Qe=!0;else switch(Me){case"bigint":case"string":case"number":Qe=!0;break;case"object":switch(N.$$typeof){case r:case n:Qe=!0;break;case b:return Qe=N._init,K(Qe(N._payload),J,he,Se,Ne)}}if(Qe)return Ne=Ne(N),Qe=Se===""?"."+Xe(N,0):Se,xe(Ne)?(he="",Qe!=null&&(he=Qe.replace(qe,"$&/")+"/"),K(Ne,J,he,"",function(vt){return vt})):Ne!=null&&(de(Ne)&&(Ne=Pe(Ne,he+(Ne.key==null||N&&N.key===Ne.key?"":(""+Ne.key).replace(qe,"$&/")+"/")+Qe)),J.push(Ne)),1;Qe=0;var ut=Se===""?".":Se+":";if(xe(N))for(var ge=0;ge<N.length;ge++)Se=N[ge],Me=ut+Xe(Se,ge),Qe+=K(Se,J,he,Me,Ne);else if(ge=A(N),typeof ge=="function")for(N=ge.call(N),ge=0;!(Se=N.next()).done;)Se=Se.value,Me=ut+Xe(Se,ge++),Qe+=K(Se,J,he,Me,Ne);else if(Me==="object"){if(typeof N.then=="function")return K(He(N),J,he,Se,Ne);throw J=String(N),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return Qe}function re(N,J,he){if(N==null)return N;var Se=[],Ne=0;return K(N,Se,"","",function(Me){return J.call(he,Me,Ne++)}),Se}function se(N){if(N._status===-1){var J=N._result;J=J(),J.then(function(he){(N._status===0||N._status===-1)&&(N._status=1,N._result=he)},function(he){(N._status===0||N._status===-1)&&(N._status=2,N._result=he)}),N._status===-1&&(N._status=0,N._result=J)}if(N._status===1)return N._result.default;throw N._result}var Oe=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)},ze={map:re,forEach:function(N,J,he){re(N,function(){J.apply(this,arguments)},he)},count:function(N){var J=0;return re(N,function(){J++}),J},toArray:function(N){return re(N,function(J){return J})||[]},only:function(N){if(!de(N))throw Error("React.Children.only expected to receive a single React element child.");return N}};return $e.Activity=x,$e.Children=ze,$e.Component=ie,$e.Fragment=i,$e.Profiler=o,$e.PureComponent=z,$e.StrictMode=a,$e.Suspense=g,$e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=pe,$e.__COMPILER_RUNTIME={__proto__:null,c:function(N){return pe.H.useMemoCache(N)}},$e.cache=function(N){return function(){return N.apply(null,arguments)}},$e.cacheSignal=function(){return null},$e.cloneElement=function(N,J,he){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var Se=U({},N.props),Ne=N.key;if(J!=null)for(Me in J.key!==void 0&&(Ne=""+J.key),J)!Le.call(J,Me)||Me==="key"||Me==="__self"||Me==="__source"||Me==="ref"&&J.ref===void 0||(Se[Me]=J[Me]);var Me=arguments.length-2;if(Me===1)Se.children=he;else if(1<Me){for(var Qe=Array(Me),ut=0;ut<Me;ut++)Qe[ut]=arguments[ut+2];Se.children=Qe}return Re(N.type,Ne,Se)},$e.createContext=function(N){return N={$$typeof:p,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:u,_context:N},N},$e.createElement=function(N,J,he){var Se,Ne={},Me=null;if(J!=null)for(Se in J.key!==void 0&&(Me=""+J.key),J)Le.call(J,Se)&&Se!=="key"&&Se!=="__self"&&Se!=="__source"&&(Ne[Se]=J[Se]);var Qe=arguments.length-2;if(Qe===1)Ne.children=he;else if(1<Qe){for(var ut=Array(Qe),ge=0;ge<Qe;ge++)ut[ge]=arguments[ge+2];Ne.children=ut}if(N&&N.defaultProps)for(Se in Qe=N.defaultProps,Qe)Ne[Se]===void 0&&(Ne[Se]=Qe[Se]);return Re(N,Me,Ne)},$e.createRef=function(){return{current:null}},$e.forwardRef=function(N){return{$$typeof:y,render:N}},$e.isValidElement=de,$e.lazy=function(N){return{$$typeof:b,_payload:{_status:-1,_result:N},_init:se}},$e.memo=function(N,J){return{$$typeof:m,type:N,compare:J===void 0?null:J}},$e.startTransition=function(N){var J=pe.T,he={};pe.T=he;try{var Se=N(),Ne=pe.S;Ne!==null&&Ne(he,Se),typeof Se=="object"&&Se!==null&&typeof Se.then=="function"&&Se.then(ye,Oe)}catch(Me){Oe(Me)}finally{J!==null&&he.types!==null&&(J.types=he.types),pe.T=J}},$e.unstable_useCacheRefresh=function(){return pe.H.useCacheRefresh()},$e.use=function(N){return pe.H.use(N)},$e.useActionState=function(N,J,he){return pe.H.useActionState(N,J,he)},$e.useCallback=function(N,J){return pe.H.useCallback(N,J)},$e.useContext=function(N){return pe.H.useContext(N)},$e.useDebugValue=function(){},$e.useDeferredValue=function(N,J){return pe.H.useDeferredValue(N,J)},$e.useEffect=function(N,J){return pe.H.useEffect(N,J)},$e.useEffectEvent=function(N){return pe.H.useEffectEvent(N)},$e.useId=function(){return pe.H.useId()},$e.useImperativeHandle=function(N,J,he){return pe.H.useImperativeHandle(N,J,he)},$e.useInsertionEffect=function(N,J){return pe.H.useInsertionEffect(N,J)},$e.useLayoutEffect=function(N,J){return pe.H.useLayoutEffect(N,J)},$e.useMemo=function(N,J){return pe.H.useMemo(N,J)},$e.useOptimistic=function(N,J){return pe.H.useOptimistic(N,J)},$e.useReducer=function(N,J,he){return pe.H.useReducer(N,J,he)},$e.useRef=function(N){return pe.H.useRef(N)},$e.useState=function(N){return pe.H.useState(N)},$e.useSyncExternalStore=function(N,J,he){return pe.H.useSyncExternalStore(N,J,he)},$e.useTransition=function(){return pe.H.useTransition()},$e.version="19.2.3",$e}var Fg;function dy(){return Fg||(Fg=1,fp.exports=HS()),fp.exports}var dp={exports:{}},jn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wg;function KS(){if(Wg)return jn;Wg=1;var r=dy();function n(g){var m="https://react.dev/errors/"+g;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)m+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+g+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var a={d:{f:i,r:function(){throw Error(n(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(g,m,b){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:x==null?null:""+x,children:g,containerInfo:m,implementation:b}}var p=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function y(g,m){if(g==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return jn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,jn.createPortal=function(g,m){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(n(299));return u(g,m,null,b)},jn.flushSync=function(g){var m=p.T,b=a.p;try{if(p.T=null,a.p=2,g)return g()}finally{p.T=m,a.p=b,a.d.f()}},jn.preconnect=function(g,m){typeof g=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,a.d.C(g,m))},jn.prefetchDNS=function(g){typeof g=="string"&&a.d.D(g)},jn.preinit=function(g,m){if(typeof g=="string"&&m&&typeof m.as=="string"){var b=m.as,x=y(b,m.crossOrigin),S=typeof m.integrity=="string"?m.integrity:void 0,A=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;b==="style"?a.d.S(g,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:x,integrity:S,fetchPriority:A}):b==="script"&&a.d.X(g,{crossOrigin:x,integrity:S,fetchPriority:A,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},jn.preinitModule=function(g,m){if(typeof g=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var b=y(m.as,m.crossOrigin);a.d.M(g,{crossOrigin:b,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&a.d.M(g)},jn.preload=function(g,m){if(typeof g=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var b=m.as,x=y(b,m.crossOrigin);a.d.L(g,b,{crossOrigin:x,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},jn.preloadModule=function(g,m){if(typeof g=="string")if(m){var b=y(m.as,m.crossOrigin);a.d.m(g,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:b,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else a.d.m(g)},jn.requestFormReset=function(g){a.d.r(g)},jn.unstable_batchedUpdates=function(g,m){return g(m)},jn.useFormState=function(g,m,b){return p.H.useFormState(g,m,b)},jn.useFormStatus=function(){return p.H.useHostTransitionStatus()},jn.version="19.2.3",jn}var Pg;function YS(){if(Pg)return dp.exports;Pg=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(n){console.error(n)}}return r(),dp.exports=KS(),dp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eb;function VS(){if(eb)return lu;eb=1;var r=qS(),n=dy(),i=YS();function a(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var l=2;l<arguments.length;l++)t+="&args[]="+encodeURIComponent(arguments[l])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var t=e,l=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(l=t.return),e=t.return;while(e)}return t.tag===3?l:null}function p(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function y(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function g(e){if(u(e)!==e)throw Error(a(188))}function m(e){var t=e.alternate;if(!t){if(t=u(e),t===null)throw Error(a(188));return t!==e?null:e}for(var l=e,s=t;;){var f=l.return;if(f===null)break;var h=f.alternate;if(h===null){if(s=f.return,s!==null){l=s;continue}break}if(f.child===h.child){for(h=f.child;h;){if(h===l)return g(f),e;if(h===s)return g(f),t;h=h.sibling}throw Error(a(188))}if(l.return!==s.return)l=f,s=h;else{for(var _=!1,O=f.child;O;){if(O===l){_=!0,l=f,s=h;break}if(O===s){_=!0,s=f,l=h;break}O=O.sibling}if(!_){for(O=h.child;O;){if(O===l){_=!0,l=h,s=f;break}if(O===s){_=!0,s=h,l=f;break}O=O.sibling}if(!_)throw Error(a(189))}}if(l.alternate!==s)throw Error(a(190))}if(l.tag!==3)throw Error(a(188));return l.stateNode.current===l?e:t}function b(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=b(e),t!==null)return t;e=e.sibling}return null}var x=Object.assign,S=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),C=Symbol.for("react.portal"),U=Symbol.for("react.fragment"),X=Symbol.for("react.strict_mode"),ie=Symbol.for("react.profiler"),W=Symbol.for("react.consumer"),z=Symbol.for("react.context"),fe=Symbol.for("react.forward_ref"),xe=Symbol.for("react.suspense"),ye=Symbol.for("react.suspense_list"),pe=Symbol.for("react.memo"),Le=Symbol.for("react.lazy"),Re=Symbol.for("react.activity"),Pe=Symbol.for("react.memo_cache_sentinel"),de=Symbol.iterator;function ke(e){return e===null||typeof e!="object"?null:(e=de&&e[de]||e["@@iterator"],typeof e=="function"?e:null)}var qe=Symbol.for("react.client.reference");function Xe(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===qe?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case U:return"Fragment";case ie:return"Profiler";case X:return"StrictMode";case xe:return"Suspense";case ye:return"SuspenseList";case Re:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case C:return"Portal";case z:return e.displayName||"Context";case W:return(e._context.displayName||"Context")+".Consumer";case fe:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case pe:return t=e.displayName||null,t!==null?t:Xe(e.type)||"Memo";case Le:t=e._payload,e=e._init;try{return Xe(e(t))}catch{}}return null}var He=Array.isArray,K=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se={pending:!1,data:null,method:null,action:null},Oe=[],ze=-1;function N(e){return{current:e}}function J(e){0>ze||(e.current=Oe[ze],Oe[ze]=null,ze--)}function he(e,t){ze++,Oe[ze]=e.current,e.current=t}var Se=N(null),Ne=N(null),Me=N(null),Qe=N(null);function ut(e,t){switch(he(Me,t),he(Ne,e),he(Se,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?yg(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=yg(t),e=mg(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}J(Se),he(Se,e)}function ge(){J(Se),J(Ne),J(Me)}function vt(e){e.memoizedState!==null&&he(Qe,e);var t=Se.current,l=mg(t,e.type);t!==l&&(he(Ne,e),he(Se,l))}function Nt(e){Ne.current===e&&(J(Se),J(Ne)),Qe.current===e&&(J(Qe),eu._currentValue=se)}var Ve,it;function tt(e){if(Ve===void 0)try{throw Error()}catch(l){var t=l.stack.trim().match(/\n( *(at )?)/);Ve=t&&t[1]||"",it=-1<l.stack.indexOf(`
    at`)?" (<anonymous>)":-1<l.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ve+e+it}var pt=!1;function yn(e,t){if(!e||pt)return"";pt=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var s={DetermineComponentFrameRoot:function(){try{if(t){var ce=function(){throw Error()};if(Object.defineProperty(ce.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ce,[])}catch(ne){var te=ne}Reflect.construct(e,[],ce)}else{try{ce.call()}catch(ne){te=ne}e.call(ce.prototype)}}else{try{throw Error()}catch(ne){te=ne}(ce=e())&&typeof ce.catch=="function"&&ce.catch(function(){})}}catch(ne){if(ne&&te&&typeof ne.stack=="string")return[ne.stack,te.stack]}return[null,null]}};s.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(s.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(s.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var h=s.DetermineComponentFrameRoot(),_=h[0],O=h[1];if(_&&O){var M=_.split(`
`),P=O.split(`
`);for(f=s=0;s<M.length&&!M[s].includes("DetermineComponentFrameRoot");)s++;for(;f<P.length&&!P[f].includes("DetermineComponentFrameRoot");)f++;if(s===M.length||f===P.length)for(s=M.length-1,f=P.length-1;1<=s&&0<=f&&M[s]!==P[f];)f--;for(;1<=s&&0<=f;s--,f--)if(M[s]!==P[f]){if(s!==1||f!==1)do if(s--,f--,0>f||M[s]!==P[f]){var ae=`
`+M[s].replace(" at new "," at ");return e.displayName&&ae.includes("<anonymous>")&&(ae=ae.replace("<anonymous>",e.displayName)),ae}while(1<=s&&0<=f);break}}}finally{pt=!1,Error.prepareStackTrace=l}return(l=e?e.displayName||e.name:"")?tt(l):""}function oi(e,t){switch(e.tag){case 26:case 27:case 5:return tt(e.type);case 16:return tt("Lazy");case 13:return e.child!==t&&t!==null?tt("Suspense Fallback"):tt("Suspense");case 19:return tt("SuspenseList");case 0:case 15:return yn(e.type,!1);case 11:return yn(e.type.render,!1);case 1:return yn(e.type,!0);case 31:return tt("Activity");default:return""}}function Jn(e){try{var t="",l=null;do t+=oi(e,l),l=e,e=e.return;while(e);return t}catch(s){return`
Error generating stack: `+s.message+`
`+s.stack}}var to=Object.prototype.hasOwnProperty,Kl=r.unstable_scheduleCallback,Hn=r.unstable_cancelCallback,Yu=r.unstable_shouldYield,Yl=r.unstable_requestPaint,On=r.unstable_now,Vl=r.unstable_getCurrentPriorityLevel,Hr=r.unstable_ImmediatePriority,Kr=r.unstable_UserBlockingPriority,Ji=r.unstable_NormalPriority,Il=r.unstable_LowPriority,Na=r.unstable_IdlePriority,Ua=r.log,ui=r.unstable_setDisableYieldValue,Yr=null,mn=null;function vn(e){if(typeof Ua=="function"&&ui(e),mn&&typeof mn.setStrictMode=="function")try{mn.setStrictMode(Yr,e)}catch{}}var Te=Math.clz32?Math.clz32:Ma,Gl=Math.log,ci=Math.LN2;function Ma(e){return e>>>=0,e===0?32:31-(Gl(e)/ci|0)|0}var Ae=256,Fi=262144,Xl=4194304;function jr(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ql(e,t,l){var s=e.pendingLanes;if(s===0)return 0;var f=0,h=e.suspendedLanes,_=e.pingedLanes;e=e.warmLanes;var O=s&134217727;return O!==0?(s=O&~h,s!==0?f=jr(s):(_&=O,_!==0?f=jr(_):l||(l=O&~e,l!==0&&(f=jr(l))))):(O=s&~h,O!==0?f=jr(O):_!==0?f=jr(_):l||(l=s&~e,l!==0&&(f=jr(l)))),f===0?0:t!==0&&t!==f&&(t&h)===0&&(h=f&-f,l=t&-t,h>=l||h===32&&(l&4194048)!==0)?t:f}function fi(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function pd(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Vu(){var e=Xl;return Xl<<=1,(Xl&62914560)===0&&(Xl=4194304),e}function Vr(e){for(var t=[],l=0;31>l;l++)t.push(e);return t}function dr(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function no(e,t,l,s,f,h){var _=e.pendingLanes;e.pendingLanes=l,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=l,e.entangledLanes&=l,e.errorRecoveryDisabledLanes&=l,e.shellSuspendCounter=0;var O=e.entanglements,M=e.expirationTimes,P=e.hiddenUpdates;for(l=_&~l;0<l;){var ae=31-Te(l),ce=1<<ae;O[ae]=0,M[ae]=-1;var te=P[ae];if(te!==null)for(P[ae]=null,ae=0;ae<te.length;ae++){var ne=te[ae];ne!==null&&(ne.lane&=-536870913)}l&=~ce}s!==0&&Zl(e,s,0),h!==0&&f===0&&e.tag!==0&&(e.suspendedLanes|=h&~(_&~t))}function Zl(e,t,l){e.pendingLanes|=t,e.suspendedLanes&=~t;var s=31-Te(t);e.entangledLanes|=t,e.entanglements[s]=e.entanglements[s]|1073741824|l&261930}function Tt(e,t){var l=e.entangledLanes|=t;for(e=e.entanglements;l;){var s=31-Te(l),f=1<<s;f&t|e[s]&t&&(e[s]|=t),l&=~f}}function Kt(e,t){var l=t&-t;return l=(l&42)!==0?1:ro(l),(l&(e.suspendedLanes|t))!==0?0:l}function ro(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Wi(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function $l(){var e=re.p;return e!==0?e:(e=window.event,e===void 0?32:qg(e.type))}function Jl(e,t){var l=re.p;try{return re.p=e,t()}finally{re.p=l}}var Ir=Math.random().toString(36).slice(2),jt="__reactFiber$"+Ir,Yt="__reactProps$"+Ir,zn="__reactContainer$"+Ir,Pi="__reactEvents$"+Ir,yd="__reactListeners$"+Ir,Gr="__reactHandles$"+Ir,io="__reactResources$"+Ir,Fn="__reactMarker$"+Ir;function Ra(e){delete e[jt],delete e[Yt],delete e[Pi],delete e[yd],delete e[Gr]}function Xr(e){var t=e[jt];if(t)return t;for(var l=e.parentNode;l;){if(t=l[zn]||l[jt]){if(l=t.alternate,t.child!==null||l!==null&&l.child!==null)for(e=Sg(e);e!==null;){if(l=e[jt])return l;e=Sg(e)}return t}e=l,l=e.parentNode}return null}function St(e){if(e=e[jt]||e[zn]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Wn(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(a(33))}function Tn(e){var t=e[io];return t||(t=e[io]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Vt(e){e[Fn]=!0}var di=new Set,Fl={};function Nr(e,t){Qr(e,t),Qr(e+"Capture",t)}function Qr(e,t){for(Fl[e]=t,e=0;e<t.length;e++)di.add(t[e])}var hi=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),lo={},Wl={};function Iu(e){return to.call(Wl,e)?!0:to.call(lo,e)?!1:hi.test(e)?Wl[e]=!0:(lo[e]=!0,!1)}function nt(e,t,l){if(Iu(t))if(l===null)e.removeAttribute(t);else{switch(typeof l){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var s=t.toLowerCase().slice(0,5);if(s!=="data-"&&s!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+l)}}function Pl(e,t,l){if(l===null)e.removeAttribute(t);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+l)}}function hr(e,t,l,s){if(s===null)e.removeAttribute(l);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(l);return}e.setAttributeNS(t,l,""+s)}}function gn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function el(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Gu(e,t,l){var s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var f=s.get,h=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return f.call(this)},set:function(_){l=""+_,h.call(this,_)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return l},setValue:function(_){l=""+_},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function za(e){if(!e._valueTracker){var t=el(e)?"checked":"value";e._valueTracker=Gu(e,t,""+e[t])}}function ao(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var l=t.getValue(),s="";return e&&(s=el(e)?e.checked?"true":"false":e.value),e=s,e!==l?(t.setValue(e),!0):!1}function gt(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var ea=/[\n"\\]/g;function sn(e){return e.replace(ea,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Zr(e,t,l,s,f,h,_,O){e.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?e.type=_:e.removeAttribute("type"),t!=null?_==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+gn(t)):e.value!==""+gn(t)&&(e.value=""+gn(t)):_!=="submit"&&_!=="reset"||e.removeAttribute("value"),t!=null?ta(e,_,gn(t)):l!=null?ta(e,_,gn(l)):s!=null&&e.removeAttribute("value"),f==null&&h!=null&&(e.defaultChecked=!!h),f!=null&&(e.checked=f&&typeof f!="function"&&typeof f!="symbol"),O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?e.name=""+gn(O):e.removeAttribute("name")}function Ba(e,t,l,s,f,h,_,O){if(h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"&&(e.type=h),t!=null||l!=null){if(!(h!=="submit"&&h!=="reset"||t!=null)){za(e);return}l=l!=null?""+gn(l):"",t=t!=null?""+gn(t):l,O||t===e.value||(e.value=t),e.defaultValue=t}s=s??f,s=typeof s!="function"&&typeof s!="symbol"&&!!s,e.checked=O?e.checked:!!s,e.defaultChecked=!!s,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(e.name=_),za(e)}function ta(e,t,l){t==="number"&&gt(e.ownerDocument)===e||e.defaultValue===""+l||(e.defaultValue=""+l)}function Ur(e,t,l,s){if(e=e.options,t){t={};for(var f=0;f<l.length;f++)t["$"+l[f]]=!0;for(l=0;l<e.length;l++)f=t.hasOwnProperty("$"+e[l].value),e[l].selected!==f&&(e[l].selected=f),f&&s&&(e[l].defaultSelected=!0)}else{for(l=""+gn(l),t=null,f=0;f<e.length;f++){if(e[f].value===l){e[f].selected=!0,s&&(e[f].defaultSelected=!0);return}t!==null||e[f].disabled||(t=e[f])}t!==null&&(t.selected=!0)}}function so(e,t,l){if(t!=null&&(t=""+gn(t),t!==e.value&&(e.value=t),l==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=l!=null?""+gn(l):""}function na(e,t,l,s){if(t==null){if(s!=null){if(l!=null)throw Error(a(92));if(He(s)){if(1<s.length)throw Error(a(93));s=s[0]}l=s}l==null&&(l=""),t=l}l=gn(t),e.defaultValue=l,s=e.textContent,s===l&&s!==""&&s!==null&&(e.value=s),za(e)}function pi(e,t){if(t){var l=e.firstChild;if(l&&l===e.lastChild&&l.nodeType===3){l.nodeValue=t;return}}e.textContent=t}var md=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ct(e,t,l){var s=t.indexOf("--")===0;l==null||typeof l=="boolean"||l===""?s?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":s?e.setProperty(t,l):typeof l!="number"||l===0||md.has(t)?t==="float"?e.cssFloat=l:e[t]=(""+l).trim():e[t]=l+"px"}function oo(e,t,l){if(t!=null&&typeof t!="object")throw Error(a(62));if(e=e.style,l!=null){for(var s in l)!l.hasOwnProperty(s)||t!=null&&t.hasOwnProperty(s)||(s.indexOf("--")===0?e.setProperty(s,""):s==="float"?e.cssFloat="":e[s]="");for(var f in t)s=t[f],t.hasOwnProperty(f)&&l[f]!==s&&ct(e,f,s)}else for(var h in t)t.hasOwnProperty(h)&&ct(e,h,t[h])}function uo(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Bn=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Mr(e){return Bn.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Kn(){}var pr=null;function La(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var yi=null,Ut=null;function Pn(e){var t=St(e);if(t&&(e=t.stateNode)){var l=e[Yt]||null;e:switch(e=t.stateNode,t.type){case"input":if(Zr(e,l.value,l.defaultValue,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name),t=l.name,l.type==="radio"&&t!=null){for(l=e;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll('input[name="'+sn(""+t)+'"][type="radio"]'),t=0;t<l.length;t++){var s=l[t];if(s!==e&&s.form===e.form){var f=s[Yt]||null;if(!f)throw Error(a(90));Zr(s,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(t=0;t<l.length;t++)s=l[t],s.form===e.form&&ao(s)}break e;case"textarea":so(e,l.value,l.defaultValue);break e;case"select":t=l.value,t!=null&&Ur(e,!!l.multiple,t,!1)}}}var mi=!1;function tl(e,t,l){if(mi)return e(t,l);mi=!0;try{var s=e(t);return s}finally{if(mi=!1,(yi!==null||Ut!==null)&&(Mc(),yi&&(t=yi,e=Ut,Ut=yi=null,Pn(t),e)))for(t=0;t<e.length;t++)Pn(e[t])}}function vi(e,t){var l=e.stateNode;if(l===null)return null;var s=l[Yt]||null;if(s===null)return null;l=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(l&&typeof l!="function")throw Error(a(231,t,typeof l));return l}var on=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),co=!1;if(on)try{var Cn={};Object.defineProperty(Cn,"passive",{get:function(){co=!0}}),window.addEventListener("test",Cn,Cn),window.removeEventListener("test",Cn,Cn)}catch{co=!1}var yr=null,qa=null,nl=null;function rl(){if(nl)return nl;var e,t=qa,l=t.length,s,f="value"in yr?yr.value:yr.textContent,h=f.length;for(e=0;e<l&&t[e]===f[e];e++);var _=l-e;for(s=1;s<=_&&t[l-s]===f[h-s];s++);return nl=f.slice(e,1<s?1-s:void 0)}function il(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ra(){return!0}function Xu(){return!1}function Xt(e){function t(l,s,f,h,_){this._reactName=l,this._targetInst=f,this.type=s,this.nativeEvent=h,this.target=_,this.currentTarget=null;for(var O in e)e.hasOwnProperty(O)&&(l=e[O],this[O]=l?l(h):h[O]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?ra:Xu,this.isPropagationStopped=Xu,this}return x(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=ra)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=ra)},persist:function(){},isPersistent:ra}),t}var gi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ha=Xt(gi),$r=x({},gi,{view:0,detail:0}),Ka=Xt($r),ia,fo,la,Ya=x({},$r,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bi,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==la&&(la&&e.type==="mousemove"?(ia=e.screenX-la.screenX,fo=e.screenY-la.screenY):fo=ia=0,la=e),ia)},movementY:function(e){return"movementY"in e?e.movementY:fo}}),Va=Xt(Ya),ho=x({},Ya,{dataTransfer:0}),Qu=Xt(ho),Ia=x({},$r,{relatedTarget:0}),ll=Xt(Ia),Ga=x({},gi,{animationName:0,elapsedTime:0,pseudoElement:0}),Zu=Xt(Ga),gd=x({},gi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),al=Xt(gd),po=x({},gi,{data:0}),Xa=Xt(po),yo={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mo={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},un={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function aa(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=un[e])?!!t[e]:!1}function bi(){return aa}var $u=x({},$r,{key:function(e){if(e.key){var t=yo[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=il(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?mo[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bi,charCode:function(e){return e.type==="keypress"?il(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?il(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Qa=Xt($u),Ju=x({},Ya,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),vo=Xt(Ju),Za=x({},$r,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bi}),go=Xt(Za),wi=x({},gi,{propertyName:0,elapsedTime:0,pseudoElement:0}),bo=Xt(wi),wo=x({},Ya,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),$a=Xt(wo),_o=x({},gi,{newState:0,oldState:0}),Fu=Xt(_o),bd=[9,13,27,32],sa=on&&"CompositionEvent"in window,Jr=null;on&&"documentMode"in document&&(Jr=document.documentMode);var wd=on&&"TextEvent"in window&&!Jr,Ja=on&&(!sa||Jr&&8<Jr&&11>=Jr),Fa=" ",Wu=!1;function xo(e,t){switch(e){case"keyup":return bd.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Pu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var _i=!1;function ec(e,t){switch(e){case"compositionend":return Pu(t);case"keypress":return t.which!==32?null:(Wu=!0,Fa);case"textInput":return e=t.data,e===Fa&&Wu?null:e;default:return null}}function _d(e,t){if(_i)return e==="compositionend"||!sa&&xo(e,t)?(e=rl(),nl=qa=yr=null,_i=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ja&&t.locale!=="ko"?null:t.data;default:return null}}var tc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wa(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!tc[e.type]:t==="textarea"}function So(e,t,l,s){yi?Ut?Ut.push(s):Ut=[s]:yi=s,t=Kc(t,"onChange"),0<t.length&&(l=new Ha("onChange","change",null,l,s),e.push({event:l,listeners:t}))}var sl=null,oa=null;function xd(e){ug(e,0)}function Pa(e){var t=Wn(e);if(ao(t))return e}function ua(e,t){if(e==="change")return t}var mr=!1;if(on){var Mt;if(on){var ol="oninput"in document;if(!ol){var Ln=document.createElement("div");Ln.setAttribute("oninput","return;"),ol=typeof Ln.oninput=="function"}Mt=ol}else Mt=!1;mr=Mt&&(!document.documentMode||9<document.documentMode)}function nc(){sl&&(sl.detachEvent("onpropertychange",es),oa=sl=null)}function es(e){if(e.propertyName==="value"&&Pa(oa)){var t=[];So(t,oa,e,La(e)),tl(xd,t)}}function rc(e,t,l){e==="focusin"?(nc(),sl=t,oa=l,sl.attachEvent("onpropertychange",es)):e==="focusout"&&nc()}function xi(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Pa(oa)}function Eo(e,t){if(e==="click")return Pa(t)}function ul(e,t){if(e==="input"||e==="change")return Pa(t)}function Fr(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Dn=typeof Object.is=="function"?Object.is:Fr;function c(e,t){if(Dn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var l=Object.keys(e),s=Object.keys(t);if(l.length!==s.length)return!1;for(s=0;s<l.length;s++){var f=l[s];if(!to.call(t,f)||!Dn(e[f],t[f]))return!1}return!0}function d(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function v(e,t){var l=d(e);e=0;for(var s;l;){if(l.nodeType===3){if(s=e+l.textContent.length,e<=t&&s>=t)return{node:l,offset:t-e};e=s}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=d(l)}}function w(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?w(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function E(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=gt(e.document);t instanceof e.HTMLIFrameElement;){try{var l=typeof t.contentWindow.location.href=="string"}catch{l=!1}if(l)e=t.contentWindow;else break;t=gt(e.document)}return t}function k(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var D=on&&"documentMode"in document&&11>=document.documentMode,j=null,B=null,L=null,I=!1;function R(e,t,l){var s=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;I||j==null||j!==gt(s)||(s=j,"selectionStart"in s&&k(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),L&&c(L,s)||(L=s,s=Kc(B,"onSelect"),0<s.length&&(t=new Ha("onSelect","select",null,t,l),e.push({event:t,listeners:s}),t.target=j)))}function Q(e,t){var l={};return l[e.toLowerCase()]=t.toLowerCase(),l["Webkit"+e]="webkit"+t,l["Moz"+e]="moz"+t,l}var q={animationend:Q("Animation","AnimationEnd"),animationiteration:Q("Animation","AnimationIteration"),animationstart:Q("Animation","AnimationStart"),transitionrun:Q("Transition","TransitionRun"),transitionstart:Q("Transition","TransitionStart"),transitioncancel:Q("Transition","TransitionCancel"),transitionend:Q("Transition","TransitionEnd")},Y={},V={};on&&(V=document.createElement("div").style,"AnimationEvent"in window||(delete q.animationend.animation,delete q.animationiteration.animation,delete q.animationstart.animation),"TransitionEvent"in window||delete q.transitionend.transition);function G(e){if(Y[e])return Y[e];if(!q[e])return e;var t=q[e],l;for(l in t)if(t.hasOwnProperty(l)&&l in V)return Y[e]=t[l];return e}var $=G("animationend"),ee=G("animationiteration"),le=G("animationstart"),ue=G("transitionrun"),be=G("transitionstart"),Ee=G("transitioncancel"),me=G("transitionend"),we=new Map,_e="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");_e.push("scrollEnd");function ve(e,t){we.set(e,t),Nr(t,[e])}var Ce=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Ke=[],Ze=0,Je=0;function cn(){for(var e=Ze,t=Je=Ze=0;t<e;){var l=Ke[t];Ke[t++]=null;var s=Ke[t];Ke[t++]=null;var f=Ke[t];Ke[t++]=null;var h=Ke[t];if(Ke[t++]=null,s!==null&&f!==null){var _=s.pending;_===null?f.next=f:(f.next=_.next,_.next=f),s.pending=f}h!==0&&ca(l,f,h)}}function Ge(e,t,l,s){Ke[Ze++]=e,Ke[Ze++]=t,Ke[Ze++]=l,Ke[Ze++]=s,Je|=s,e.lanes|=s,e=e.alternate,e!==null&&(e.lanes|=s)}function Qt(e,t,l,s){return Ge(e,t,l,s),Zt(e)}function Bt(e,t){return Ge(e,null,null,t),Zt(e)}function ca(e,t,l){e.lanes|=l;var s=e.alternate;s!==null&&(s.lanes|=l);for(var f=!1,h=e.return;h!==null;)h.childLanes|=l,s=h.alternate,s!==null&&(s.childLanes|=l),h.tag===22&&(e=h.stateNode,e===null||e._visibility&1||(f=!0)),e=h,h=h.return;return e.tag===3?(h=e.stateNode,f&&t!==null&&(f=31-Te(l),e=h.hiddenUpdates,s=e[f],s===null?e[f]=[t]:s.push(t),t.lane=l|536870912),h):null}function Zt(e){if(50<Qo)throw Qo=0,jh=null,Error(a(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Yn={};function Ao(e,t,l,s){this.tag=e,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function er(e,t,l,s){return new Ao(e,t,l,s)}function Sd(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Si(e,t){var l=e.alternate;return l===null?(l=er(e.tag,t,e.key,e.mode),l.elementType=e.elementType,l.type=e.type,l.stateNode=e.stateNode,l.alternate=e,e.alternate=l):(l.pendingProps=t,l.type=e.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=e.flags&65011712,l.childLanes=e.childLanes,l.lanes=e.lanes,l.child=e.child,l.memoizedProps=e.memoizedProps,l.memoizedState=e.memoizedState,l.updateQueue=e.updateQueue,t=e.dependencies,l.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},l.sibling=e.sibling,l.index=e.index,l.ref=e.ref,l.refCleanup=e.refCleanup,l}function Gy(e,t){e.flags&=65011714;var l=e.alternate;return l===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=l.childLanes,e.lanes=l.lanes,e.child=l.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=l.memoizedProps,e.memoizedState=l.memoizedState,e.updateQueue=l.updateQueue,e.type=l.type,t=l.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function ic(e,t,l,s,f,h){var _=0;if(s=e,typeof e=="function")Sd(e)&&(_=1);else if(typeof e=="string")_=_S(e,l,Se.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case Re:return e=er(31,l,t,f),e.elementType=Re,e.lanes=h,e;case U:return fa(l.children,f,h,t);case X:_=8,f|=24;break;case ie:return e=er(12,l,t,f|2),e.elementType=ie,e.lanes=h,e;case xe:return e=er(13,l,t,f),e.elementType=xe,e.lanes=h,e;case ye:return e=er(19,l,t,f),e.elementType=ye,e.lanes=h,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case z:_=10;break e;case W:_=9;break e;case fe:_=11;break e;case pe:_=14;break e;case Le:_=16,s=null;break e}_=29,l=Error(a(130,e===null?"null":typeof e,"")),s=null}return t=er(_,l,t,f),t.elementType=e,t.type=s,t.lanes=h,t}function fa(e,t,l,s){return e=er(7,e,s,t),e.lanes=l,e}function Ed(e,t,l){return e=er(6,e,null,t),e.lanes=l,e}function Xy(e){var t=er(18,null,null,0);return t.stateNode=e,t}function Ad(e,t,l){return t=er(4,e.children!==null?e.children:[],e.key,t),t.lanes=l,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Qy=new WeakMap;function vr(e,t){if(typeof e=="object"&&e!==null){var l=Qy.get(e);return l!==void 0?l:(t={value:e,source:t,stack:Jn(t)},Qy.set(e,t),t)}return{value:e,source:t,stack:Jn(t)}}var ts=[],ns=0,lc=null,ko=0,gr=[],br=0,cl=null,Wr=1,Pr="";function Ei(e,t){ts[ns++]=ko,ts[ns++]=lc,lc=e,ko=t}function Zy(e,t,l){gr[br++]=Wr,gr[br++]=Pr,gr[br++]=cl,cl=e;var s=Wr;e=Pr;var f=32-Te(s)-1;s&=~(1<<f),l+=1;var h=32-Te(t)+f;if(30<h){var _=f-f%5;h=(s&(1<<_)-1).toString(32),s>>=_,f-=_,Wr=1<<32-Te(t)+f|l<<f|s,Pr=h+e}else Wr=1<<h|l<<f|s,Pr=e}function kd(e){e.return!==null&&(Ei(e,1),Zy(e,1,0))}function Od(e){for(;e===lc;)lc=ts[--ns],ts[ns]=null,ko=ts[--ns],ts[ns]=null;for(;e===cl;)cl=gr[--br],gr[br]=null,Pr=gr[--br],gr[br]=null,Wr=gr[--br],gr[br]=null}function $y(e,t){gr[br++]=Wr,gr[br++]=Pr,gr[br++]=cl,Wr=t.id,Pr=t.overflow,cl=e}var bn=null,Rt=null,ft=!1,fl=null,wr=!1,Td=Error(a(519));function dl(e){var t=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Oo(vr(t,e)),Td}function Jy(e){var t=e.stateNode,l=e.type,s=e.memoizedProps;switch(t[jt]=e,t[Yt]=s,l){case"dialog":at("cancel",t),at("close",t);break;case"iframe":case"object":case"embed":at("load",t);break;case"video":case"audio":for(l=0;l<$o.length;l++)at($o[l],t);break;case"source":at("error",t);break;case"img":case"image":case"link":at("error",t),at("load",t);break;case"details":at("toggle",t);break;case"input":at("invalid",t),Ba(t,s.value,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name,!0);break;case"select":at("invalid",t);break;case"textarea":at("invalid",t),na(t,s.value,s.defaultValue,s.children)}l=s.children,typeof l!="string"&&typeof l!="number"&&typeof l!="bigint"||t.textContent===""+l||s.suppressHydrationWarning===!0||hg(t.textContent,l)?(s.popover!=null&&(at("beforetoggle",t),at("toggle",t)),s.onScroll!=null&&at("scroll",t),s.onScrollEnd!=null&&at("scrollend",t),s.onClick!=null&&(t.onclick=Kn),t=!0):t=!1,t||dl(e,!0)}function Fy(e){for(bn=e.return;bn;)switch(bn.tag){case 5:case 31:case 13:wr=!1;return;case 27:case 3:wr=!0;return;default:bn=bn.return}}function rs(e){if(e!==bn)return!1;if(!ft)return Fy(e),ft=!0,!1;var t=e.tag,l;if((l=t!==3&&t!==27)&&((l=t===5)&&(l=e.type,l=!(l!=="form"&&l!=="button")||Xh(e.type,e.memoizedProps)),l=!l),l&&Rt&&dl(e),Fy(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(a(317));Rt=xg(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(a(317));Rt=xg(e)}else t===27?(t=Rt,kl(e.type)?(e=Fh,Fh=null,Rt=e):Rt=t):Rt=bn?xr(e.stateNode.nextSibling):null;return!0}function da(){Rt=bn=null,ft=!1}function Cd(){var e=fl;return e!==null&&(Xn===null?Xn=e:Xn.push.apply(Xn,e),fl=null),e}function Oo(e){fl===null?fl=[e]:fl.push(e)}var Dd=N(null),ha=null,Ai=null;function hl(e,t,l){he(Dd,t._currentValue),t._currentValue=l}function ki(e){e._currentValue=Dd.current,J(Dd)}function jd(e,t,l){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===l)break;e=e.return}}function Nd(e,t,l,s){var f=e.child;for(f!==null&&(f.return=e);f!==null;){var h=f.dependencies;if(h!==null){var _=f.child;h=h.firstContext;e:for(;h!==null;){var O=h;h=f;for(var M=0;M<t.length;M++)if(O.context===t[M]){h.lanes|=l,O=h.alternate,O!==null&&(O.lanes|=l),jd(h.return,l,e),s||(_=null);break e}h=O.next}}else if(f.tag===18){if(_=f.return,_===null)throw Error(a(341));_.lanes|=l,h=_.alternate,h!==null&&(h.lanes|=l),jd(_,l,e),_=null}else _=f.child;if(_!==null)_.return=f;else for(_=f;_!==null;){if(_===e){_=null;break}if(f=_.sibling,f!==null){f.return=_.return,_=f;break}_=_.return}f=_}}function is(e,t,l,s){e=null;for(var f=t,h=!1;f!==null;){if(!h){if((f.flags&524288)!==0)h=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var _=f.alternate;if(_===null)throw Error(a(387));if(_=_.memoizedProps,_!==null){var O=f.type;Dn(f.pendingProps.value,_.value)||(e!==null?e.push(O):e=[O])}}else if(f===Qe.current){if(_=f.alternate,_===null)throw Error(a(387));_.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(e!==null?e.push(eu):e=[eu])}f=f.return}e!==null&&Nd(t,e,l,s),t.flags|=262144}function ac(e){for(e=e.firstContext;e!==null;){if(!Dn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function pa(e){ha=e,Ai=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function wn(e){return Wy(ha,e)}function sc(e,t){return ha===null&&pa(e),Wy(e,t)}function Wy(e,t){var l=t._currentValue;if(t={context:t,memoizedValue:l,next:null},Ai===null){if(e===null)throw Error(a(308));Ai=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Ai=Ai.next=t;return l}var vx=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(l,s){e.push(s)}};this.abort=function(){t.aborted=!0,e.forEach(function(l){return l()})}},gx=r.unstable_scheduleCallback,bx=r.unstable_NormalPriority,$t={$$typeof:z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ud(){return{controller:new vx,data:new Map,refCount:0}}function To(e){e.refCount--,e.refCount===0&&gx(bx,function(){e.controller.abort()})}var Co=null,Md=0,ls=0,as=null;function wx(e,t){if(Co===null){var l=Co=[];Md=0,ls=Bh(),as={status:"pending",value:void 0,then:function(s){l.push(s)}}}return Md++,t.then(Py,Py),t}function Py(){if(--Md===0&&Co!==null){as!==null&&(as.status="fulfilled");var e=Co;Co=null,ls=0,as=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function _x(e,t){var l=[],s={status:"pending",value:null,reason:null,then:function(f){l.push(f)}};return e.then(function(){s.status="fulfilled",s.value=t;for(var f=0;f<l.length;f++)(0,l[f])(t)},function(f){for(s.status="rejected",s.reason=f,f=0;f<l.length;f++)(0,l[f])(void 0)}),s}var em=K.S;K.S=function(e,t){Bv=On(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&wx(e,t),em!==null&&em(e,t)};var ya=N(null);function Rd(){var e=ya.current;return e!==null?e:Ct.pooledCache}function oc(e,t){t===null?he(ya,ya.current):he(ya,t.pool)}function tm(){var e=Rd();return e===null?null:{parent:$t._currentValue,pool:e}}var ss=Error(a(460)),zd=Error(a(474)),uc=Error(a(542)),cc={then:function(){}};function nm(e){return e=e.status,e==="fulfilled"||e==="rejected"}function rm(e,t,l){switch(l=e[l],l===void 0?e.push(t):l!==t&&(t.then(Kn,Kn),t=l),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,lm(e),e;default:if(typeof t.status=="string")t.then(Kn,Kn);else{if(e=Ct,e!==null&&100<e.shellSuspendCounter)throw Error(a(482));e=t,e.status="pending",e.then(function(s){if(t.status==="pending"){var f=t;f.status="fulfilled",f.value=s}},function(s){if(t.status==="pending"){var f=t;f.status="rejected",f.reason=s}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,lm(e),e}throw va=t,ss}}function ma(e){try{var t=e._init;return t(e._payload)}catch(l){throw l!==null&&typeof l=="object"&&typeof l.then=="function"?(va=l,ss):l}}var va=null;function im(){if(va===null)throw Error(a(459));var e=va;return va=null,e}function lm(e){if(e===ss||e===uc)throw Error(a(483))}var os=null,Do=0;function fc(e){var t=Do;return Do+=1,os===null&&(os=[]),rm(os,e,t)}function jo(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function dc(e,t){throw t.$$typeof===S?Error(a(525)):(e=Object.prototype.toString.call(t),Error(a(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function am(e){function t(Z,H){if(e){var F=Z.deletions;F===null?(Z.deletions=[H],Z.flags|=16):F.push(H)}}function l(Z,H){if(!e)return null;for(;H!==null;)t(Z,H),H=H.sibling;return null}function s(Z){for(var H=new Map;Z!==null;)Z.key!==null?H.set(Z.key,Z):H.set(Z.index,Z),Z=Z.sibling;return H}function f(Z,H){return Z=Si(Z,H),Z.index=0,Z.sibling=null,Z}function h(Z,H,F){return Z.index=F,e?(F=Z.alternate,F!==null?(F=F.index,F<H?(Z.flags|=67108866,H):F):(Z.flags|=67108866,H)):(Z.flags|=1048576,H)}function _(Z){return e&&Z.alternate===null&&(Z.flags|=67108866),Z}function O(Z,H,F,oe){return H===null||H.tag!==6?(H=Ed(F,Z.mode,oe),H.return=Z,H):(H=f(H,F),H.return=Z,H)}function M(Z,H,F,oe){var Ye=F.type;return Ye===U?ae(Z,H,F.props.children,oe,F.key):H!==null&&(H.elementType===Ye||typeof Ye=="object"&&Ye!==null&&Ye.$$typeof===Le&&ma(Ye)===H.type)?(H=f(H,F.props),jo(H,F),H.return=Z,H):(H=ic(F.type,F.key,F.props,null,Z.mode,oe),jo(H,F),H.return=Z,H)}function P(Z,H,F,oe){return H===null||H.tag!==4||H.stateNode.containerInfo!==F.containerInfo||H.stateNode.implementation!==F.implementation?(H=Ad(F,Z.mode,oe),H.return=Z,H):(H=f(H,F.children||[]),H.return=Z,H)}function ae(Z,H,F,oe,Ye){return H===null||H.tag!==7?(H=fa(F,Z.mode,oe,Ye),H.return=Z,H):(H=f(H,F),H.return=Z,H)}function ce(Z,H,F){if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return H=Ed(""+H,Z.mode,F),H.return=Z,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case A:return F=ic(H.type,H.key,H.props,null,Z.mode,F),jo(F,H),F.return=Z,F;case C:return H=Ad(H,Z.mode,F),H.return=Z,H;case Le:return H=ma(H),ce(Z,H,F)}if(He(H)||ke(H))return H=fa(H,Z.mode,F,null),H.return=Z,H;if(typeof H.then=="function")return ce(Z,fc(H),F);if(H.$$typeof===z)return ce(Z,sc(Z,H),F);dc(Z,H)}return null}function te(Z,H,F,oe){var Ye=H!==null?H.key:null;if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return Ye!==null?null:O(Z,H,""+F,oe);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case A:return F.key===Ye?M(Z,H,F,oe):null;case C:return F.key===Ye?P(Z,H,F,oe):null;case Le:return F=ma(F),te(Z,H,F,oe)}if(He(F)||ke(F))return Ye!==null?null:ae(Z,H,F,oe,null);if(typeof F.then=="function")return te(Z,H,fc(F),oe);if(F.$$typeof===z)return te(Z,H,sc(Z,F),oe);dc(Z,F)}return null}function ne(Z,H,F,oe,Ye){if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return Z=Z.get(F)||null,O(H,Z,""+oe,Ye);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case A:return Z=Z.get(oe.key===null?F:oe.key)||null,M(H,Z,oe,Ye);case C:return Z=Z.get(oe.key===null?F:oe.key)||null,P(H,Z,oe,Ye);case Le:return oe=ma(oe),ne(Z,H,F,oe,Ye)}if(He(oe)||ke(oe))return Z=Z.get(F)||null,ae(H,Z,oe,Ye,null);if(typeof oe.then=="function")return ne(Z,H,F,fc(oe),Ye);if(oe.$$typeof===z)return ne(Z,H,F,sc(H,oe),Ye);dc(H,oe)}return null}function je(Z,H,F,oe){for(var Ye=null,yt=null,Ue=H,et=H=0,ot=null;Ue!==null&&et<F.length;et++){Ue.index>et?(ot=Ue,Ue=null):ot=Ue.sibling;var mt=te(Z,Ue,F[et],oe);if(mt===null){Ue===null&&(Ue=ot);break}e&&Ue&&mt.alternate===null&&t(Z,Ue),H=h(mt,H,et),yt===null?Ye=mt:yt.sibling=mt,yt=mt,Ue=ot}if(et===F.length)return l(Z,Ue),ft&&Ei(Z,et),Ye;if(Ue===null){for(;et<F.length;et++)Ue=ce(Z,F[et],oe),Ue!==null&&(H=h(Ue,H,et),yt===null?Ye=Ue:yt.sibling=Ue,yt=Ue);return ft&&Ei(Z,et),Ye}for(Ue=s(Ue);et<F.length;et++)ot=ne(Ue,Z,et,F[et],oe),ot!==null&&(e&&ot.alternate!==null&&Ue.delete(ot.key===null?et:ot.key),H=h(ot,H,et),yt===null?Ye=ot:yt.sibling=ot,yt=ot);return e&&Ue.forEach(function(jl){return t(Z,jl)}),ft&&Ei(Z,et),Ye}function Ie(Z,H,F,oe){if(F==null)throw Error(a(151));for(var Ye=null,yt=null,Ue=H,et=H=0,ot=null,mt=F.next();Ue!==null&&!mt.done;et++,mt=F.next()){Ue.index>et?(ot=Ue,Ue=null):ot=Ue.sibling;var jl=te(Z,Ue,mt.value,oe);if(jl===null){Ue===null&&(Ue=ot);break}e&&Ue&&jl.alternate===null&&t(Z,Ue),H=h(jl,H,et),yt===null?Ye=jl:yt.sibling=jl,yt=jl,Ue=ot}if(mt.done)return l(Z,Ue),ft&&Ei(Z,et),Ye;if(Ue===null){for(;!mt.done;et++,mt=F.next())mt=ce(Z,mt.value,oe),mt!==null&&(H=h(mt,H,et),yt===null?Ye=mt:yt.sibling=mt,yt=mt);return ft&&Ei(Z,et),Ye}for(Ue=s(Ue);!mt.done;et++,mt=F.next())mt=ne(Ue,Z,et,mt.value,oe),mt!==null&&(e&&mt.alternate!==null&&Ue.delete(mt.key===null?et:mt.key),H=h(mt,H,et),yt===null?Ye=mt:yt.sibling=mt,yt=mt);return e&&Ue.forEach(function(NS){return t(Z,NS)}),ft&&Ei(Z,et),Ye}function kt(Z,H,F,oe){if(typeof F=="object"&&F!==null&&F.type===U&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case A:e:{for(var Ye=F.key;H!==null;){if(H.key===Ye){if(Ye=F.type,Ye===U){if(H.tag===7){l(Z,H.sibling),oe=f(H,F.props.children),oe.return=Z,Z=oe;break e}}else if(H.elementType===Ye||typeof Ye=="object"&&Ye!==null&&Ye.$$typeof===Le&&ma(Ye)===H.type){l(Z,H.sibling),oe=f(H,F.props),jo(oe,F),oe.return=Z,Z=oe;break e}l(Z,H);break}else t(Z,H);H=H.sibling}F.type===U?(oe=fa(F.props.children,Z.mode,oe,F.key),oe.return=Z,Z=oe):(oe=ic(F.type,F.key,F.props,null,Z.mode,oe),jo(oe,F),oe.return=Z,Z=oe)}return _(Z);case C:e:{for(Ye=F.key;H!==null;){if(H.key===Ye)if(H.tag===4&&H.stateNode.containerInfo===F.containerInfo&&H.stateNode.implementation===F.implementation){l(Z,H.sibling),oe=f(H,F.children||[]),oe.return=Z,Z=oe;break e}else{l(Z,H);break}else t(Z,H);H=H.sibling}oe=Ad(F,Z.mode,oe),oe.return=Z,Z=oe}return _(Z);case Le:return F=ma(F),kt(Z,H,F,oe)}if(He(F))return je(Z,H,F,oe);if(ke(F)){if(Ye=ke(F),typeof Ye!="function")throw Error(a(150));return F=Ye.call(F),Ie(Z,H,F,oe)}if(typeof F.then=="function")return kt(Z,H,fc(F),oe);if(F.$$typeof===z)return kt(Z,H,sc(Z,F),oe);dc(Z,F)}return typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint"?(F=""+F,H!==null&&H.tag===6?(l(Z,H.sibling),oe=f(H,F),oe.return=Z,Z=oe):(l(Z,H),oe=Ed(F,Z.mode,oe),oe.return=Z,Z=oe),_(Z)):l(Z,H)}return function(Z,H,F,oe){try{Do=0;var Ye=kt(Z,H,F,oe);return os=null,Ye}catch(Ue){if(Ue===ss||Ue===uc)throw Ue;var yt=er(29,Ue,null,Z.mode);return yt.lanes=oe,yt.return=Z,yt}finally{}}}var ga=am(!0),sm=am(!1),pl=!1;function Bd(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ld(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function yl(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ml(e,t,l){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,(bt&2)!==0){var f=s.pending;return f===null?t.next=t:(t.next=f.next,f.next=t),s.pending=t,t=Zt(e),ca(e,null,l),t}return Ge(e,s,t,l),Zt(e)}function No(e,t,l){if(t=t.updateQueue,t!==null&&(t=t.shared,(l&4194048)!==0)){var s=t.lanes;s&=e.pendingLanes,l|=s,t.lanes=l,Tt(e,l)}}function qd(e,t){var l=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,l===s)){var f=null,h=null;if(l=l.firstBaseUpdate,l!==null){do{var _={lane:l.lane,tag:l.tag,payload:l.payload,callback:null,next:null};h===null?f=h=_:h=h.next=_,l=l.next}while(l!==null);h===null?f=h=t:h=h.next=t}else f=h=t;l={baseState:s.baseState,firstBaseUpdate:f,lastBaseUpdate:h,shared:s.shared,callbacks:s.callbacks},e.updateQueue=l;return}e=l.lastBaseUpdate,e===null?l.firstBaseUpdate=t:e.next=t,l.lastBaseUpdate=t}var Hd=!1;function Uo(){if(Hd){var e=as;if(e!==null)throw e}}function Mo(e,t,l,s){Hd=!1;var f=e.updateQueue;pl=!1;var h=f.firstBaseUpdate,_=f.lastBaseUpdate,O=f.shared.pending;if(O!==null){f.shared.pending=null;var M=O,P=M.next;M.next=null,_===null?h=P:_.next=P,_=M;var ae=e.alternate;ae!==null&&(ae=ae.updateQueue,O=ae.lastBaseUpdate,O!==_&&(O===null?ae.firstBaseUpdate=P:O.next=P,ae.lastBaseUpdate=M))}if(h!==null){var ce=f.baseState;_=0,ae=P=M=null,O=h;do{var te=O.lane&-536870913,ne=te!==O.lane;if(ne?(st&te)===te:(s&te)===te){te!==0&&te===ls&&(Hd=!0),ae!==null&&(ae=ae.next={lane:0,tag:O.tag,payload:O.payload,callback:null,next:null});e:{var je=e,Ie=O;te=t;var kt=l;switch(Ie.tag){case 1:if(je=Ie.payload,typeof je=="function"){ce=je.call(kt,ce,te);break e}ce=je;break e;case 3:je.flags=je.flags&-65537|128;case 0:if(je=Ie.payload,te=typeof je=="function"?je.call(kt,ce,te):je,te==null)break e;ce=x({},ce,te);break e;case 2:pl=!0}}te=O.callback,te!==null&&(e.flags|=64,ne&&(e.flags|=8192),ne=f.callbacks,ne===null?f.callbacks=[te]:ne.push(te))}else ne={lane:te,tag:O.tag,payload:O.payload,callback:O.callback,next:null},ae===null?(P=ae=ne,M=ce):ae=ae.next=ne,_|=te;if(O=O.next,O===null){if(O=f.shared.pending,O===null)break;ne=O,O=ne.next,ne.next=null,f.lastBaseUpdate=ne,f.shared.pending=null}}while(!0);ae===null&&(M=ce),f.baseState=M,f.firstBaseUpdate=P,f.lastBaseUpdate=ae,h===null&&(f.shared.lanes=0),_l|=_,e.lanes=_,e.memoizedState=ce}}function om(e,t){if(typeof e!="function")throw Error(a(191,e));e.call(t)}function um(e,t){var l=e.callbacks;if(l!==null)for(e.callbacks=null,e=0;e<l.length;e++)om(l[e],t)}var us=N(null),hc=N(0);function cm(e,t){e=Ri,he(hc,e),he(us,t),Ri=e|t.baseLanes}function Kd(){he(hc,Ri),he(us,us.current)}function Yd(){Ri=hc.current,J(us),J(hc)}var tr=N(null),_r=null;function vl(e){var t=e.alternate;he(It,It.current&1),he(tr,e),_r===null&&(t===null||us.current!==null||t.memoizedState!==null)&&(_r=e)}function Vd(e){he(It,It.current),he(tr,e),_r===null&&(_r=e)}function fm(e){e.tag===22?(he(It,It.current),he(tr,e),_r===null&&(_r=e)):gl()}function gl(){he(It,It.current),he(tr,tr.current)}function nr(e){J(tr),_r===e&&(_r=null),J(It)}var It=N(0);function pc(e){for(var t=e;t!==null;){if(t.tag===13){var l=t.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||$h(l)||Jh(l)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Oi=0,Fe=null,Et=null,Jt=null,yc=!1,cs=!1,ba=!1,mc=0,Ro=0,fs=null,xx=0;function qt(){throw Error(a(321))}function Id(e,t){if(t===null)return!1;for(var l=0;l<t.length&&l<e.length;l++)if(!Dn(e[l],t[l]))return!1;return!0}function Gd(e,t,l,s,f,h){return Oi=h,Fe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,K.H=e===null||e.memoizedState===null?Zm:ah,ba=!1,h=l(s,f),ba=!1,cs&&(h=hm(t,l,s,f)),dm(e),h}function dm(e){K.H=Lo;var t=Et!==null&&Et.next!==null;if(Oi=0,Jt=Et=Fe=null,yc=!1,Ro=0,fs=null,t)throw Error(a(300));e===null||Ft||(e=e.dependencies,e!==null&&ac(e)&&(Ft=!0))}function hm(e,t,l,s){Fe=e;var f=0;do{if(cs&&(fs=null),Ro=0,cs=!1,25<=f)throw Error(a(301));if(f+=1,Jt=Et=null,e.updateQueue!=null){var h=e.updateQueue;h.lastEffect=null,h.events=null,h.stores=null,h.memoCache!=null&&(h.memoCache.index=0)}K.H=$m,h=t(l,s)}while(cs);return h}function Sx(){var e=K.H,t=e.useState()[0];return t=typeof t.then=="function"?zo(t):t,e=e.useState()[0],(Et!==null?Et.memoizedState:null)!==e&&(Fe.flags|=1024),t}function Xd(){var e=mc!==0;return mc=0,e}function Qd(e,t,l){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l}function Zd(e){if(yc){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}yc=!1}Oi=0,Jt=Et=Fe=null,cs=!1,Ro=mc=0,fs=null}function qn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Jt===null?Fe.memoizedState=Jt=e:Jt=Jt.next=e,Jt}function Gt(){if(Et===null){var e=Fe.alternate;e=e!==null?e.memoizedState:null}else e=Et.next;var t=Jt===null?Fe.memoizedState:Jt.next;if(t!==null)Jt=t,Et=e;else{if(e===null)throw Fe.alternate===null?Error(a(467)):Error(a(310));Et=e,e={memoizedState:Et.memoizedState,baseState:Et.baseState,baseQueue:Et.baseQueue,queue:Et.queue,next:null},Jt===null?Fe.memoizedState=Jt=e:Jt=Jt.next=e}return Jt}function vc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function zo(e){var t=Ro;return Ro+=1,fs===null&&(fs=[]),e=rm(fs,e,t),t=Fe,(Jt===null?t.memoizedState:Jt.next)===null&&(t=t.alternate,K.H=t===null||t.memoizedState===null?Zm:ah),e}function gc(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return zo(e);if(e.$$typeof===z)return wn(e)}throw Error(a(438,String(e)))}function $d(e){var t=null,l=Fe.updateQueue;if(l!==null&&(t=l.memoCache),t==null){var s=Fe.alternate;s!==null&&(s=s.updateQueue,s!==null&&(s=s.memoCache,s!=null&&(t={data:s.data.map(function(f){return f.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),l===null&&(l=vc(),Fe.updateQueue=l),l.memoCache=t,l=t.data[t.index],l===void 0)for(l=t.data[t.index]=Array(e),s=0;s<e;s++)l[s]=Pe;return t.index++,l}function Ti(e,t){return typeof t=="function"?t(e):t}function bc(e){var t=Gt();return Jd(t,Et,e)}function Jd(e,t,l){var s=e.queue;if(s===null)throw Error(a(311));s.lastRenderedReducer=l;var f=e.baseQueue,h=s.pending;if(h!==null){if(f!==null){var _=f.next;f.next=h.next,h.next=_}t.baseQueue=f=h,s.pending=null}if(h=e.baseState,f===null)e.memoizedState=h;else{t=f.next;var O=_=null,M=null,P=t,ae=!1;do{var ce=P.lane&-536870913;if(ce!==P.lane?(st&ce)===ce:(Oi&ce)===ce){var te=P.revertLane;if(te===0)M!==null&&(M=M.next={lane:0,revertLane:0,gesture:null,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null}),ce===ls&&(ae=!0);else if((Oi&te)===te){P=P.next,te===ls&&(ae=!0);continue}else ce={lane:0,revertLane:P.revertLane,gesture:null,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null},M===null?(O=M=ce,_=h):M=M.next=ce,Fe.lanes|=te,_l|=te;ce=P.action,ba&&l(h,ce),h=P.hasEagerState?P.eagerState:l(h,ce)}else te={lane:ce,revertLane:P.revertLane,gesture:P.gesture,action:P.action,hasEagerState:P.hasEagerState,eagerState:P.eagerState,next:null},M===null?(O=M=te,_=h):M=M.next=te,Fe.lanes|=ce,_l|=ce;P=P.next}while(P!==null&&P!==t);if(M===null?_=h:M.next=O,!Dn(h,e.memoizedState)&&(Ft=!0,ae&&(l=as,l!==null)))throw l;e.memoizedState=h,e.baseState=_,e.baseQueue=M,s.lastRenderedState=h}return f===null&&(s.lanes=0),[e.memoizedState,s.dispatch]}function Fd(e){var t=Gt(),l=t.queue;if(l===null)throw Error(a(311));l.lastRenderedReducer=e;var s=l.dispatch,f=l.pending,h=t.memoizedState;if(f!==null){l.pending=null;var _=f=f.next;do h=e(h,_.action),_=_.next;while(_!==f);Dn(h,t.memoizedState)||(Ft=!0),t.memoizedState=h,t.baseQueue===null&&(t.baseState=h),l.lastRenderedState=h}return[h,s]}function pm(e,t,l){var s=Fe,f=Gt(),h=ft;if(h){if(l===void 0)throw Error(a(407));l=l()}else l=t();var _=!Dn((Et||f).memoizedState,l);if(_&&(f.memoizedState=l,Ft=!0),f=f.queue,eh(vm.bind(null,s,f,e),[e]),f.getSnapshot!==t||_||Jt!==null&&Jt.memoizedState.tag&1){if(s.flags|=2048,ds(9,{destroy:void 0},mm.bind(null,s,f,l,t),null),Ct===null)throw Error(a(349));h||(Oi&127)!==0||ym(s,t,l)}return l}function ym(e,t,l){e.flags|=16384,e={getSnapshot:t,value:l},t=Fe.updateQueue,t===null?(t=vc(),Fe.updateQueue=t,t.stores=[e]):(l=t.stores,l===null?t.stores=[e]:l.push(e))}function mm(e,t,l,s){t.value=l,t.getSnapshot=s,gm(t)&&bm(e)}function vm(e,t,l){return l(function(){gm(t)&&bm(e)})}function gm(e){var t=e.getSnapshot;e=e.value;try{var l=t();return!Dn(e,l)}catch{return!0}}function bm(e){var t=Bt(e,2);t!==null&&Qn(t,e,2)}function Wd(e){var t=qn();if(typeof e=="function"){var l=e;if(e=l(),ba){vn(!0);try{l()}finally{vn(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ti,lastRenderedState:e},t}function wm(e,t,l,s){return e.baseState=l,Jd(e,Et,typeof s=="function"?s:Ti)}function Ex(e,t,l,s,f){if(xc(e))throw Error(a(485));if(e=t.action,e!==null){var h={payload:f,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){h.listeners.push(_)}};K.T!==null?l(!0):h.isTransition=!1,s(h),l=t.pending,l===null?(h.next=t.pending=h,_m(t,h)):(h.next=l.next,t.pending=l.next=h)}}function _m(e,t){var l=t.action,s=t.payload,f=e.state;if(t.isTransition){var h=K.T,_={};K.T=_;try{var O=l(f,s),M=K.S;M!==null&&M(_,O),xm(e,t,O)}catch(P){Pd(e,t,P)}finally{h!==null&&_.types!==null&&(h.types=_.types),K.T=h}}else try{h=l(f,s),xm(e,t,h)}catch(P){Pd(e,t,P)}}function xm(e,t,l){l!==null&&typeof l=="object"&&typeof l.then=="function"?l.then(function(s){Sm(e,t,s)},function(s){return Pd(e,t,s)}):Sm(e,t,l)}function Sm(e,t,l){t.status="fulfilled",t.value=l,Em(t),e.state=l,t=e.pending,t!==null&&(l=t.next,l===t?e.pending=null:(l=l.next,t.next=l,_m(e,l)))}function Pd(e,t,l){var s=e.pending;if(e.pending=null,s!==null){s=s.next;do t.status="rejected",t.reason=l,Em(t),t=t.next;while(t!==s)}e.action=null}function Em(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Am(e,t){return t}function km(e,t){if(ft){var l=Ct.formState;if(l!==null){e:{var s=Fe;if(ft){if(Rt){t:{for(var f=Rt,h=wr;f.nodeType!==8;){if(!h){f=null;break t}if(f=xr(f.nextSibling),f===null){f=null;break t}}h=f.data,f=h==="F!"||h==="F"?f:null}if(f){Rt=xr(f.nextSibling),s=f.data==="F!";break e}}dl(s)}s=!1}s&&(t=l[0])}}return l=qn(),l.memoizedState=l.baseState=t,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Am,lastRenderedState:t},l.queue=s,l=Gm.bind(null,Fe,s),s.dispatch=l,s=Wd(!1),h=lh.bind(null,Fe,!1,s.queue),s=qn(),f={state:t,dispatch:null,action:e,pending:null},s.queue=f,l=Ex.bind(null,Fe,f,h,l),f.dispatch=l,s.memoizedState=e,[t,l,!1]}function Om(e){var t=Gt();return Tm(t,Et,e)}function Tm(e,t,l){if(t=Jd(e,t,Am)[0],e=bc(Ti)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var s=zo(t)}catch(_){throw _===ss?uc:_}else s=t;t=Gt();var f=t.queue,h=f.dispatch;return l!==t.memoizedState&&(Fe.flags|=2048,ds(9,{destroy:void 0},Ax.bind(null,f,l),null)),[s,h,e]}function Ax(e,t){e.action=t}function Cm(e){var t=Gt(),l=Et;if(l!==null)return Tm(t,l,e);Gt(),t=t.memoizedState,l=Gt();var s=l.queue.dispatch;return l.memoizedState=e,[t,s,!1]}function ds(e,t,l,s){return e={tag:e,create:l,deps:s,inst:t,next:null},t=Fe.updateQueue,t===null&&(t=vc(),Fe.updateQueue=t),l=t.lastEffect,l===null?t.lastEffect=e.next=e:(s=l.next,l.next=e,e.next=s,t.lastEffect=e),e}function Dm(){return Gt().memoizedState}function wc(e,t,l,s){var f=qn();Fe.flags|=e,f.memoizedState=ds(1|t,{destroy:void 0},l,s===void 0?null:s)}function _c(e,t,l,s){var f=Gt();s=s===void 0?null:s;var h=f.memoizedState.inst;Et!==null&&s!==null&&Id(s,Et.memoizedState.deps)?f.memoizedState=ds(t,h,l,s):(Fe.flags|=e,f.memoizedState=ds(1|t,h,l,s))}function jm(e,t){wc(8390656,8,e,t)}function eh(e,t){_c(2048,8,e,t)}function kx(e){Fe.flags|=4;var t=Fe.updateQueue;if(t===null)t=vc(),Fe.updateQueue=t,t.events=[e];else{var l=t.events;l===null?t.events=[e]:l.push(e)}}function Nm(e){var t=Gt().memoizedState;return kx({ref:t,nextImpl:e}),function(){if((bt&2)!==0)throw Error(a(440));return t.impl.apply(void 0,arguments)}}function Um(e,t){return _c(4,2,e,t)}function Mm(e,t){return _c(4,4,e,t)}function Rm(e,t){if(typeof t=="function"){e=e();var l=t(e);return function(){typeof l=="function"?l():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function zm(e,t,l){l=l!=null?l.concat([e]):null,_c(4,4,Rm.bind(null,t,e),l)}function th(){}function Bm(e,t){var l=Gt();t=t===void 0?null:t;var s=l.memoizedState;return t!==null&&Id(t,s[1])?s[0]:(l.memoizedState=[e,t],e)}function Lm(e,t){var l=Gt();t=t===void 0?null:t;var s=l.memoizedState;if(t!==null&&Id(t,s[1]))return s[0];if(s=e(),ba){vn(!0);try{e()}finally{vn(!1)}}return l.memoizedState=[s,t],s}function nh(e,t,l){return l===void 0||(Oi&1073741824)!==0&&(st&261930)===0?e.memoizedState=t:(e.memoizedState=l,e=qv(),Fe.lanes|=e,_l|=e,l)}function qm(e,t,l,s){return Dn(l,t)?l:us.current!==null?(e=nh(e,l,s),Dn(e,t)||(Ft=!0),e):(Oi&42)===0||(Oi&1073741824)!==0&&(st&261930)===0?(Ft=!0,e.memoizedState=l):(e=qv(),Fe.lanes|=e,_l|=e,t)}function Hm(e,t,l,s,f){var h=re.p;re.p=h!==0&&8>h?h:8;var _=K.T,O={};K.T=O,lh(e,!1,t,l);try{var M=f(),P=K.S;if(P!==null&&P(O,M),M!==null&&typeof M=="object"&&typeof M.then=="function"){var ae=_x(M,s);Bo(e,t,ae,lr(e))}else Bo(e,t,s,lr(e))}catch(ce){Bo(e,t,{then:function(){},status:"rejected",reason:ce},lr())}finally{re.p=h,_!==null&&O.types!==null&&(_.types=O.types),K.T=_}}function Ox(){}function rh(e,t,l,s){if(e.tag!==5)throw Error(a(476));var f=Km(e).queue;Hm(e,f,t,se,l===null?Ox:function(){return Ym(e),l(s)})}function Km(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:se,baseState:se,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ti,lastRenderedState:se},next:null};var l={};return t.next={memoizedState:l,baseState:l,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ti,lastRenderedState:l},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function Ym(e){var t=Km(e);t.next===null&&(t=e.alternate.memoizedState),Bo(e,t.next.queue,{},lr())}function ih(){return wn(eu)}function Vm(){return Gt().memoizedState}function Im(){return Gt().memoizedState}function Tx(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var l=lr();e=yl(l);var s=ml(t,e,l);s!==null&&(Qn(s,t,l),No(s,t,l)),t={cache:Ud()},e.payload=t;return}t=t.return}}function Cx(e,t,l){var s=lr();l={lane:s,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},xc(e)?Xm(t,l):(l=Qt(e,t,l,s),l!==null&&(Qn(l,e,s),Qm(l,t,s)))}function Gm(e,t,l){var s=lr();Bo(e,t,l,s)}function Bo(e,t,l,s){var f={lane:s,revertLane:0,gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null};if(xc(e))Xm(t,f);else{var h=e.alternate;if(e.lanes===0&&(h===null||h.lanes===0)&&(h=t.lastRenderedReducer,h!==null))try{var _=t.lastRenderedState,O=h(_,l);if(f.hasEagerState=!0,f.eagerState=O,Dn(O,_))return Ge(e,t,f,0),Ct===null&&cn(),!1}catch{}finally{}if(l=Qt(e,t,f,s),l!==null)return Qn(l,e,s),Qm(l,t,s),!0}return!1}function lh(e,t,l,s){if(s={lane:2,revertLane:Bh(),gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},xc(e)){if(t)throw Error(a(479))}else t=Qt(e,l,s,2),t!==null&&Qn(t,e,2)}function xc(e){var t=e.alternate;return e===Fe||t!==null&&t===Fe}function Xm(e,t){cs=yc=!0;var l=e.pending;l===null?t.next=t:(t.next=l.next,l.next=t),e.pending=t}function Qm(e,t,l){if((l&4194048)!==0){var s=t.lanes;s&=e.pendingLanes,l|=s,t.lanes=l,Tt(e,l)}}var Lo={readContext:wn,use:gc,useCallback:qt,useContext:qt,useEffect:qt,useImperativeHandle:qt,useLayoutEffect:qt,useInsertionEffect:qt,useMemo:qt,useReducer:qt,useRef:qt,useState:qt,useDebugValue:qt,useDeferredValue:qt,useTransition:qt,useSyncExternalStore:qt,useId:qt,useHostTransitionStatus:qt,useFormState:qt,useActionState:qt,useOptimistic:qt,useMemoCache:qt,useCacheRefresh:qt};Lo.useEffectEvent=qt;var Zm={readContext:wn,use:gc,useCallback:function(e,t){return qn().memoizedState=[e,t===void 0?null:t],e},useContext:wn,useEffect:jm,useImperativeHandle:function(e,t,l){l=l!=null?l.concat([e]):null,wc(4194308,4,Rm.bind(null,t,e),l)},useLayoutEffect:function(e,t){return wc(4194308,4,e,t)},useInsertionEffect:function(e,t){wc(4,2,e,t)},useMemo:function(e,t){var l=qn();t=t===void 0?null:t;var s=e();if(ba){vn(!0);try{e()}finally{vn(!1)}}return l.memoizedState=[s,t],s},useReducer:function(e,t,l){var s=qn();if(l!==void 0){var f=l(t);if(ba){vn(!0);try{l(t)}finally{vn(!1)}}}else f=t;return s.memoizedState=s.baseState=f,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:f},s.queue=e,e=e.dispatch=Cx.bind(null,Fe,e),[s.memoizedState,e]},useRef:function(e){var t=qn();return e={current:e},t.memoizedState=e},useState:function(e){e=Wd(e);var t=e.queue,l=Gm.bind(null,Fe,t);return t.dispatch=l,[e.memoizedState,l]},useDebugValue:th,useDeferredValue:function(e,t){var l=qn();return nh(l,e,t)},useTransition:function(){var e=Wd(!1);return e=Hm.bind(null,Fe,e.queue,!0,!1),qn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,l){var s=Fe,f=qn();if(ft){if(l===void 0)throw Error(a(407));l=l()}else{if(l=t(),Ct===null)throw Error(a(349));(st&127)!==0||ym(s,t,l)}f.memoizedState=l;var h={value:l,getSnapshot:t};return f.queue=h,jm(vm.bind(null,s,h,e),[e]),s.flags|=2048,ds(9,{destroy:void 0},mm.bind(null,s,h,l,t),null),l},useId:function(){var e=qn(),t=Ct.identifierPrefix;if(ft){var l=Pr,s=Wr;l=(s&~(1<<32-Te(s)-1)).toString(32)+l,t="_"+t+"R_"+l,l=mc++,0<l&&(t+="H"+l.toString(32)),t+="_"}else l=xx++,t="_"+t+"r_"+l.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:ih,useFormState:km,useActionState:km,useOptimistic:function(e){var t=qn();t.memoizedState=t.baseState=e;var l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=l,t=lh.bind(null,Fe,!0,l),l.dispatch=t,[e,t]},useMemoCache:$d,useCacheRefresh:function(){return qn().memoizedState=Tx.bind(null,Fe)},useEffectEvent:function(e){var t=qn(),l={impl:e};return t.memoizedState=l,function(){if((bt&2)!==0)throw Error(a(440));return l.impl.apply(void 0,arguments)}}},ah={readContext:wn,use:gc,useCallback:Bm,useContext:wn,useEffect:eh,useImperativeHandle:zm,useInsertionEffect:Um,useLayoutEffect:Mm,useMemo:Lm,useReducer:bc,useRef:Dm,useState:function(){return bc(Ti)},useDebugValue:th,useDeferredValue:function(e,t){var l=Gt();return qm(l,Et.memoizedState,e,t)},useTransition:function(){var e=bc(Ti)[0],t=Gt().memoizedState;return[typeof e=="boolean"?e:zo(e),t]},useSyncExternalStore:pm,useId:Vm,useHostTransitionStatus:ih,useFormState:Om,useActionState:Om,useOptimistic:function(e,t){var l=Gt();return wm(l,Et,e,t)},useMemoCache:$d,useCacheRefresh:Im};ah.useEffectEvent=Nm;var $m={readContext:wn,use:gc,useCallback:Bm,useContext:wn,useEffect:eh,useImperativeHandle:zm,useInsertionEffect:Um,useLayoutEffect:Mm,useMemo:Lm,useReducer:Fd,useRef:Dm,useState:function(){return Fd(Ti)},useDebugValue:th,useDeferredValue:function(e,t){var l=Gt();return Et===null?nh(l,e,t):qm(l,Et.memoizedState,e,t)},useTransition:function(){var e=Fd(Ti)[0],t=Gt().memoizedState;return[typeof e=="boolean"?e:zo(e),t]},useSyncExternalStore:pm,useId:Vm,useHostTransitionStatus:ih,useFormState:Cm,useActionState:Cm,useOptimistic:function(e,t){var l=Gt();return Et!==null?wm(l,Et,e,t):(l.baseState=e,[e,l.queue.dispatch])},useMemoCache:$d,useCacheRefresh:Im};$m.useEffectEvent=Nm;function sh(e,t,l,s){t=e.memoizedState,l=l(s,t),l=l==null?t:x({},t,l),e.memoizedState=l,e.lanes===0&&(e.updateQueue.baseState=l)}var oh={enqueueSetState:function(e,t,l){e=e._reactInternals;var s=lr(),f=yl(s);f.payload=t,l!=null&&(f.callback=l),t=ml(e,f,s),t!==null&&(Qn(t,e,s),No(t,e,s))},enqueueReplaceState:function(e,t,l){e=e._reactInternals;var s=lr(),f=yl(s);f.tag=1,f.payload=t,l!=null&&(f.callback=l),t=ml(e,f,s),t!==null&&(Qn(t,e,s),No(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var l=lr(),s=yl(l);s.tag=2,t!=null&&(s.callback=t),t=ml(e,s,l),t!==null&&(Qn(t,e,l),No(t,e,l))}};function Jm(e,t,l,s,f,h,_){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,h,_):t.prototype&&t.prototype.isPureReactComponent?!c(l,s)||!c(f,h):!0}function Fm(e,t,l,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(l,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(l,s),t.state!==e&&oh.enqueueReplaceState(t,t.state,null)}function wa(e,t){var l=t;if("ref"in t){l={};for(var s in t)s!=="ref"&&(l[s]=t[s])}if(e=e.defaultProps){l===t&&(l=x({},l));for(var f in e)l[f]===void 0&&(l[f]=e[f])}return l}function Wm(e){Ce(e)}function Pm(e){console.error(e)}function ev(e){Ce(e)}function Sc(e,t){try{var l=e.onUncaughtError;l(t.value,{componentStack:t.stack})}catch(s){setTimeout(function(){throw s})}}function tv(e,t,l){try{var s=e.onCaughtError;s(l.value,{componentStack:l.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function uh(e,t,l){return l=yl(l),l.tag=3,l.payload={element:null},l.callback=function(){Sc(e,t)},l}function nv(e){return e=yl(e),e.tag=3,e}function rv(e,t,l,s){var f=l.type.getDerivedStateFromError;if(typeof f=="function"){var h=s.value;e.payload=function(){return f(h)},e.callback=function(){tv(t,l,s)}}var _=l.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(e.callback=function(){tv(t,l,s),typeof f!="function"&&(xl===null?xl=new Set([this]):xl.add(this));var O=s.stack;this.componentDidCatch(s.value,{componentStack:O!==null?O:""})})}function Dx(e,t,l,s,f){if(l.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){if(t=l.alternate,t!==null&&is(t,l,f,!0),l=tr.current,l!==null){switch(l.tag){case 31:case 13:return _r===null?Rc():l.alternate===null&&Ht===0&&(Ht=3),l.flags&=-257,l.flags|=65536,l.lanes=f,s===cc?l.flags|=16384:(t=l.updateQueue,t===null?l.updateQueue=new Set([s]):t.add(s),Mh(e,s,f)),!1;case 22:return l.flags|=65536,s===cc?l.flags|=16384:(t=l.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([s])},l.updateQueue=t):(l=t.retryQueue,l===null?t.retryQueue=new Set([s]):l.add(s)),Mh(e,s,f)),!1}throw Error(a(435,l.tag))}return Mh(e,s,f),Rc(),!1}if(ft)return t=tr.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=f,s!==Td&&(e=Error(a(422),{cause:s}),Oo(vr(e,l)))):(s!==Td&&(t=Error(a(423),{cause:s}),Oo(vr(t,l))),e=e.current.alternate,e.flags|=65536,f&=-f,e.lanes|=f,s=vr(s,l),f=uh(e.stateNode,s,f),qd(e,f),Ht!==4&&(Ht=2)),!1;var h=Error(a(520),{cause:s});if(h=vr(h,l),Xo===null?Xo=[h]:Xo.push(h),Ht!==4&&(Ht=2),t===null)return!0;s=vr(s,l),l=t;do{switch(l.tag){case 3:return l.flags|=65536,e=f&-f,l.lanes|=e,e=uh(l.stateNode,s,e),qd(l,e),!1;case 1:if(t=l.type,h=l.stateNode,(l.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||h!==null&&typeof h.componentDidCatch=="function"&&(xl===null||!xl.has(h))))return l.flags|=65536,f&=-f,l.lanes|=f,f=nv(f),rv(f,e,l,s),qd(l,f),!1}l=l.return}while(l!==null);return!1}var ch=Error(a(461)),Ft=!1;function _n(e,t,l,s){t.child=e===null?sm(t,null,l,s):ga(t,e.child,l,s)}function iv(e,t,l,s,f){l=l.render;var h=t.ref;if("ref"in s){var _={};for(var O in s)O!=="ref"&&(_[O]=s[O])}else _=s;return pa(t),s=Gd(e,t,l,_,h,f),O=Xd(),e!==null&&!Ft?(Qd(e,t,f),Ci(e,t,f)):(ft&&O&&kd(t),t.flags|=1,_n(e,t,s,f),t.child)}function lv(e,t,l,s,f){if(e===null){var h=l.type;return typeof h=="function"&&!Sd(h)&&h.defaultProps===void 0&&l.compare===null?(t.tag=15,t.type=h,av(e,t,h,s,f)):(e=ic(l.type,null,s,t,t.mode,f),e.ref=t.ref,e.return=t,t.child=e)}if(h=e.child,!gh(e,f)){var _=h.memoizedProps;if(l=l.compare,l=l!==null?l:c,l(_,s)&&e.ref===t.ref)return Ci(e,t,f)}return t.flags|=1,e=Si(h,s),e.ref=t.ref,e.return=t,t.child=e}function av(e,t,l,s,f){if(e!==null){var h=e.memoizedProps;if(c(h,s)&&e.ref===t.ref)if(Ft=!1,t.pendingProps=s=h,gh(e,f))(e.flags&131072)!==0&&(Ft=!0);else return t.lanes=e.lanes,Ci(e,t,f)}return fh(e,t,l,s,f)}function sv(e,t,l,s){var f=s.children,h=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.mode==="hidden"){if((t.flags&128)!==0){if(h=h!==null?h.baseLanes|l:l,e!==null){for(s=t.child=e.child,f=0;s!==null;)f=f|s.lanes|s.childLanes,s=s.sibling;s=f&~h}else s=0,t.child=null;return ov(e,t,h,l,s)}if((l&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&oc(t,h!==null?h.cachePool:null),h!==null?cm(t,h):Kd(),fm(t);else return s=t.lanes=536870912,ov(e,t,h!==null?h.baseLanes|l:l,l,s)}else h!==null?(oc(t,h.cachePool),cm(t,h),gl(),t.memoizedState=null):(e!==null&&oc(t,null),Kd(),gl());return _n(e,t,f,l),t.child}function qo(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function ov(e,t,l,s,f){var h=Rd();return h=h===null?null:{parent:$t._currentValue,pool:h},t.memoizedState={baseLanes:l,cachePool:h},e!==null&&oc(t,null),Kd(),fm(t),e!==null&&is(e,t,s,!0),t.childLanes=f,null}function Ec(e,t){return t=kc({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function uv(e,t,l){return ga(t,e.child,null,l),e=Ec(t,t.pendingProps),e.flags|=2,nr(t),t.memoizedState=null,e}function jx(e,t,l){var s=t.pendingProps,f=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(ft){if(s.mode==="hidden")return e=Ec(t,s),t.lanes=536870912,qo(null,e);if(Vd(t),(e=Rt)?(e=_g(e,wr),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:cl!==null?{id:Wr,overflow:Pr}:null,retryLane:536870912,hydrationErrors:null},l=Xy(e),l.return=t,t.child=l,bn=t,Rt=null)):e=null,e===null)throw dl(t);return t.lanes=536870912,null}return Ec(t,s)}var h=e.memoizedState;if(h!==null){var _=h.dehydrated;if(Vd(t),f)if(t.flags&256)t.flags&=-257,t=uv(e,t,l);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(a(558));else if(Ft||is(e,t,l,!1),f=(l&e.childLanes)!==0,Ft||f){if(s=Ct,s!==null&&(_=Kt(s,l),_!==0&&_!==h.retryLane))throw h.retryLane=_,Bt(e,_),Qn(s,e,_),ch;Rc(),t=uv(e,t,l)}else e=h.treeContext,Rt=xr(_.nextSibling),bn=t,ft=!0,fl=null,wr=!1,e!==null&&$y(t,e),t=Ec(t,s),t.flags|=4096;return t}return e=Si(e.child,{mode:s.mode,children:s.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Ac(e,t){var l=t.ref;if(l===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof l!="function"&&typeof l!="object")throw Error(a(284));(e===null||e.ref!==l)&&(t.flags|=4194816)}}function fh(e,t,l,s,f){return pa(t),l=Gd(e,t,l,s,void 0,f),s=Xd(),e!==null&&!Ft?(Qd(e,t,f),Ci(e,t,f)):(ft&&s&&kd(t),t.flags|=1,_n(e,t,l,f),t.child)}function cv(e,t,l,s,f,h){return pa(t),t.updateQueue=null,l=hm(t,s,l,f),dm(e),s=Xd(),e!==null&&!Ft?(Qd(e,t,h),Ci(e,t,h)):(ft&&s&&kd(t),t.flags|=1,_n(e,t,l,h),t.child)}function fv(e,t,l,s,f){if(pa(t),t.stateNode===null){var h=Yn,_=l.contextType;typeof _=="object"&&_!==null&&(h=wn(_)),h=new l(s,h),t.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,h.updater=oh,t.stateNode=h,h._reactInternals=t,h=t.stateNode,h.props=s,h.state=t.memoizedState,h.refs={},Bd(t),_=l.contextType,h.context=typeof _=="object"&&_!==null?wn(_):Yn,h.state=t.memoizedState,_=l.getDerivedStateFromProps,typeof _=="function"&&(sh(t,l,_,s),h.state=t.memoizedState),typeof l.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(_=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),_!==h.state&&oh.enqueueReplaceState(h,h.state,null),Mo(t,s,h,f),Uo(),h.state=t.memoizedState),typeof h.componentDidMount=="function"&&(t.flags|=4194308),s=!0}else if(e===null){h=t.stateNode;var O=t.memoizedProps,M=wa(l,O);h.props=M;var P=h.context,ae=l.contextType;_=Yn,typeof ae=="object"&&ae!==null&&(_=wn(ae));var ce=l.getDerivedStateFromProps;ae=typeof ce=="function"||typeof h.getSnapshotBeforeUpdate=="function",O=t.pendingProps!==O,ae||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(O||P!==_)&&Fm(t,h,s,_),pl=!1;var te=t.memoizedState;h.state=te,Mo(t,s,h,f),Uo(),P=t.memoizedState,O||te!==P||pl?(typeof ce=="function"&&(sh(t,l,ce,s),P=t.memoizedState),(M=pl||Jm(t,l,M,s,te,P,_))?(ae||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(t.flags|=4194308)):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=P),h.props=s,h.state=P,h.context=_,s=M):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{h=t.stateNode,Ld(e,t),_=t.memoizedProps,ae=wa(l,_),h.props=ae,ce=t.pendingProps,te=h.context,P=l.contextType,M=Yn,typeof P=="object"&&P!==null&&(M=wn(P)),O=l.getDerivedStateFromProps,(P=typeof O=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(_!==ce||te!==M)&&Fm(t,h,s,M),pl=!1,te=t.memoizedState,h.state=te,Mo(t,s,h,f),Uo();var ne=t.memoizedState;_!==ce||te!==ne||pl||e!==null&&e.dependencies!==null&&ac(e.dependencies)?(typeof O=="function"&&(sh(t,l,O,s),ne=t.memoizedState),(ae=pl||Jm(t,l,ae,s,te,ne,M)||e!==null&&e.dependencies!==null&&ac(e.dependencies))?(P||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(s,ne,M),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(s,ne,M)),typeof h.componentDidUpdate=="function"&&(t.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof h.componentDidUpdate!="function"||_===e.memoizedProps&&te===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&te===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=ne),h.props=s,h.state=ne,h.context=M,s=ae):(typeof h.componentDidUpdate!="function"||_===e.memoizedProps&&te===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&te===e.memoizedState||(t.flags|=1024),s=!1)}return h=s,Ac(e,t),s=(t.flags&128)!==0,h||s?(h=t.stateNode,l=s&&typeof l.getDerivedStateFromError!="function"?null:h.render(),t.flags|=1,e!==null&&s?(t.child=ga(t,e.child,null,f),t.child=ga(t,null,l,f)):_n(e,t,l,f),t.memoizedState=h.state,e=t.child):e=Ci(e,t,f),e}function dv(e,t,l,s){return da(),t.flags|=256,_n(e,t,l,s),t.child}var dh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function hh(e){return{baseLanes:e,cachePool:tm()}}function ph(e,t,l){return e=e!==null?e.childLanes&~l:0,t&&(e|=ir),e}function hv(e,t,l){var s=t.pendingProps,f=!1,h=(t.flags&128)!==0,_;if((_=h)||(_=e!==null&&e.memoizedState===null?!1:(It.current&2)!==0),_&&(f=!0,t.flags&=-129),_=(t.flags&32)!==0,t.flags&=-33,e===null){if(ft){if(f?vl(t):gl(),(e=Rt)?(e=_g(e,wr),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:cl!==null?{id:Wr,overflow:Pr}:null,retryLane:536870912,hydrationErrors:null},l=Xy(e),l.return=t,t.child=l,bn=t,Rt=null)):e=null,e===null)throw dl(t);return Jh(e)?t.lanes=32:t.lanes=536870912,null}var O=s.children;return s=s.fallback,f?(gl(),f=t.mode,O=kc({mode:"hidden",children:O},f),s=fa(s,f,l,null),O.return=t,s.return=t,O.sibling=s,t.child=O,s=t.child,s.memoizedState=hh(l),s.childLanes=ph(e,_,l),t.memoizedState=dh,qo(null,s)):(vl(t),yh(t,O))}var M=e.memoizedState;if(M!==null&&(O=M.dehydrated,O!==null)){if(h)t.flags&256?(vl(t),t.flags&=-257,t=mh(e,t,l)):t.memoizedState!==null?(gl(),t.child=e.child,t.flags|=128,t=null):(gl(),O=s.fallback,f=t.mode,s=kc({mode:"visible",children:s.children},f),O=fa(O,f,l,null),O.flags|=2,s.return=t,O.return=t,s.sibling=O,t.child=s,ga(t,e.child,null,l),s=t.child,s.memoizedState=hh(l),s.childLanes=ph(e,_,l),t.memoizedState=dh,t=qo(null,s));else if(vl(t),Jh(O)){if(_=O.nextSibling&&O.nextSibling.dataset,_)var P=_.dgst;_=P,s=Error(a(419)),s.stack="",s.digest=_,Oo({value:s,source:null,stack:null}),t=mh(e,t,l)}else if(Ft||is(e,t,l,!1),_=(l&e.childLanes)!==0,Ft||_){if(_=Ct,_!==null&&(s=Kt(_,l),s!==0&&s!==M.retryLane))throw M.retryLane=s,Bt(e,s),Qn(_,e,s),ch;$h(O)||Rc(),t=mh(e,t,l)}else $h(O)?(t.flags|=192,t.child=e.child,t=null):(e=M.treeContext,Rt=xr(O.nextSibling),bn=t,ft=!0,fl=null,wr=!1,e!==null&&$y(t,e),t=yh(t,s.children),t.flags|=4096);return t}return f?(gl(),O=s.fallback,f=t.mode,M=e.child,P=M.sibling,s=Si(M,{mode:"hidden",children:s.children}),s.subtreeFlags=M.subtreeFlags&65011712,P!==null?O=Si(P,O):(O=fa(O,f,l,null),O.flags|=2),O.return=t,s.return=t,s.sibling=O,t.child=s,qo(null,s),s=t.child,O=e.child.memoizedState,O===null?O=hh(l):(f=O.cachePool,f!==null?(M=$t._currentValue,f=f.parent!==M?{parent:M,pool:M}:f):f=tm(),O={baseLanes:O.baseLanes|l,cachePool:f}),s.memoizedState=O,s.childLanes=ph(e,_,l),t.memoizedState=dh,qo(e.child,s)):(vl(t),l=e.child,e=l.sibling,l=Si(l,{mode:"visible",children:s.children}),l.return=t,l.sibling=null,e!==null&&(_=t.deletions,_===null?(t.deletions=[e],t.flags|=16):_.push(e)),t.child=l,t.memoizedState=null,l)}function yh(e,t){return t=kc({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function kc(e,t){return e=er(22,e,null,t),e.lanes=0,e}function mh(e,t,l){return ga(t,e.child,null,l),e=yh(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function pv(e,t,l){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),jd(e.return,t,l)}function vh(e,t,l,s,f,h){var _=e.memoizedState;_===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:l,tailMode:f,treeForkCount:h}:(_.isBackwards=t,_.rendering=null,_.renderingStartTime=0,_.last=s,_.tail=l,_.tailMode=f,_.treeForkCount=h)}function yv(e,t,l){var s=t.pendingProps,f=s.revealOrder,h=s.tail;s=s.children;var _=It.current,O=(_&2)!==0;if(O?(_=_&1|2,t.flags|=128):_&=1,he(It,_),_n(e,t,s,l),s=ft?ko:0,!O&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&pv(e,l,t);else if(e.tag===19)pv(e,l,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(f){case"forwards":for(l=t.child,f=null;l!==null;)e=l.alternate,e!==null&&pc(e)===null&&(f=l),l=l.sibling;l=f,l===null?(f=t.child,t.child=null):(f=l.sibling,l.sibling=null),vh(t,!1,f,l,h,s);break;case"backwards":case"unstable_legacy-backwards":for(l=null,f=t.child,t.child=null;f!==null;){if(e=f.alternate,e!==null&&pc(e)===null){t.child=f;break}e=f.sibling,f.sibling=l,l=f,f=e}vh(t,!0,l,null,h,s);break;case"together":vh(t,!1,null,null,void 0,s);break;default:t.memoizedState=null}return t.child}function Ci(e,t,l){if(e!==null&&(t.dependencies=e.dependencies),_l|=t.lanes,(l&t.childLanes)===0)if(e!==null){if(is(e,t,l,!1),(l&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(a(153));if(t.child!==null){for(e=t.child,l=Si(e,e.pendingProps),t.child=l,l.return=t;e.sibling!==null;)e=e.sibling,l=l.sibling=Si(e,e.pendingProps),l.return=t;l.sibling=null}return t.child}function gh(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&ac(e)))}function Nx(e,t,l){switch(t.tag){case 3:ut(t,t.stateNode.containerInfo),hl(t,$t,e.memoizedState.cache),da();break;case 27:case 5:vt(t);break;case 4:ut(t,t.stateNode.containerInfo);break;case 10:hl(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,Vd(t),null;break;case 13:var s=t.memoizedState;if(s!==null)return s.dehydrated!==null?(vl(t),t.flags|=128,null):(l&t.child.childLanes)!==0?hv(e,t,l):(vl(t),e=Ci(e,t,l),e!==null?e.sibling:null);vl(t);break;case 19:var f=(e.flags&128)!==0;if(s=(l&t.childLanes)!==0,s||(is(e,t,l,!1),s=(l&t.childLanes)!==0),f){if(s)return yv(e,t,l);t.flags|=128}if(f=t.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),he(It,It.current),s)break;return null;case 22:return t.lanes=0,sv(e,t,l,t.pendingProps);case 24:hl(t,$t,e.memoizedState.cache)}return Ci(e,t,l)}function mv(e,t,l){if(e!==null)if(e.memoizedProps!==t.pendingProps)Ft=!0;else{if(!gh(e,l)&&(t.flags&128)===0)return Ft=!1,Nx(e,t,l);Ft=(e.flags&131072)!==0}else Ft=!1,ft&&(t.flags&1048576)!==0&&Zy(t,ko,t.index);switch(t.lanes=0,t.tag){case 16:e:{var s=t.pendingProps;if(e=ma(t.elementType),t.type=e,typeof e=="function")Sd(e)?(s=wa(e,s),t.tag=1,t=fv(null,t,e,s,l)):(t.tag=0,t=fh(null,t,e,s,l));else{if(e!=null){var f=e.$$typeof;if(f===fe){t.tag=11,t=iv(null,t,e,s,l);break e}else if(f===pe){t.tag=14,t=lv(null,t,e,s,l);break e}}throw t=Xe(e)||e,Error(a(306,t,""))}}return t;case 0:return fh(e,t,t.type,t.pendingProps,l);case 1:return s=t.type,f=wa(s,t.pendingProps),fv(e,t,s,f,l);case 3:e:{if(ut(t,t.stateNode.containerInfo),e===null)throw Error(a(387));s=t.pendingProps;var h=t.memoizedState;f=h.element,Ld(e,t),Mo(t,s,null,l);var _=t.memoizedState;if(s=_.cache,hl(t,$t,s),s!==h.cache&&Nd(t,[$t],l,!0),Uo(),s=_.element,h.isDehydrated)if(h={element:s,isDehydrated:!1,cache:_.cache},t.updateQueue.baseState=h,t.memoizedState=h,t.flags&256){t=dv(e,t,s,l);break e}else if(s!==f){f=vr(Error(a(424)),t),Oo(f),t=dv(e,t,s,l);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Rt=xr(e.firstChild),bn=t,ft=!0,fl=null,wr=!0,l=sm(t,null,s,l),t.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling}else{if(da(),s===f){t=Ci(e,t,l);break e}_n(e,t,s,l)}t=t.child}return t;case 26:return Ac(e,t),e===null?(l=Og(t.type,null,t.pendingProps,null))?t.memoizedState=l:ft||(l=t.type,e=t.pendingProps,s=Yc(Me.current).createElement(l),s[jt]=t,s[Yt]=e,xn(s,l,e),Vt(s),t.stateNode=s):t.memoizedState=Og(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return vt(t),e===null&&ft&&(s=t.stateNode=Eg(t.type,t.pendingProps,Me.current),bn=t,wr=!0,f=Rt,kl(t.type)?(Fh=f,Rt=xr(s.firstChild)):Rt=f),_n(e,t,t.pendingProps.children,l),Ac(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&ft&&((f=s=Rt)&&(s=oS(s,t.type,t.pendingProps,wr),s!==null?(t.stateNode=s,bn=t,Rt=xr(s.firstChild),wr=!1,f=!0):f=!1),f||dl(t)),vt(t),f=t.type,h=t.pendingProps,_=e!==null?e.memoizedProps:null,s=h.children,Xh(f,h)?s=null:_!==null&&Xh(f,_)&&(t.flags|=32),t.memoizedState!==null&&(f=Gd(e,t,Sx,null,null,l),eu._currentValue=f),Ac(e,t),_n(e,t,s,l),t.child;case 6:return e===null&&ft&&((e=l=Rt)&&(l=uS(l,t.pendingProps,wr),l!==null?(t.stateNode=l,bn=t,Rt=null,e=!0):e=!1),e||dl(t)),null;case 13:return hv(e,t,l);case 4:return ut(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=ga(t,null,s,l):_n(e,t,s,l),t.child;case 11:return iv(e,t,t.type,t.pendingProps,l);case 7:return _n(e,t,t.pendingProps,l),t.child;case 8:return _n(e,t,t.pendingProps.children,l),t.child;case 12:return _n(e,t,t.pendingProps.children,l),t.child;case 10:return s=t.pendingProps,hl(t,t.type,s.value),_n(e,t,s.children,l),t.child;case 9:return f=t.type._context,s=t.pendingProps.children,pa(t),f=wn(f),s=s(f),t.flags|=1,_n(e,t,s,l),t.child;case 14:return lv(e,t,t.type,t.pendingProps,l);case 15:return av(e,t,t.type,t.pendingProps,l);case 19:return yv(e,t,l);case 31:return jx(e,t,l);case 22:return sv(e,t,l,t.pendingProps);case 24:return pa(t),s=wn($t),e===null?(f=Rd(),f===null&&(f=Ct,h=Ud(),f.pooledCache=h,h.refCount++,h!==null&&(f.pooledCacheLanes|=l),f=h),t.memoizedState={parent:s,cache:f},Bd(t),hl(t,$t,f)):((e.lanes&l)!==0&&(Ld(e,t),Mo(t,null,null,l),Uo()),f=e.memoizedState,h=t.memoizedState,f.parent!==s?(f={parent:s,cache:s},t.memoizedState=f,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=f),hl(t,$t,s)):(s=h.cache,hl(t,$t,s),s!==f.cache&&Nd(t,[$t],l,!0))),_n(e,t,t.pendingProps.children,l),t.child;case 29:throw t.pendingProps}throw Error(a(156,t.tag))}function Di(e){e.flags|=4}function bh(e,t,l,s,f){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(f&335544128)===f)if(e.stateNode.complete)e.flags|=8192;else if(Vv())e.flags|=8192;else throw va=cc,zd}else e.flags&=-16777217}function vv(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Ng(t))if(Vv())e.flags|=8192;else throw va=cc,zd}function Oc(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?Vu():536870912,e.lanes|=t,ms|=t)}function Ho(e,t){if(!ft)switch(e.tailMode){case"hidden":t=e.tail;for(var l=null;t!==null;)t.alternate!==null&&(l=t),t=t.sibling;l===null?e.tail=null:l.sibling=null;break;case"collapsed":l=e.tail;for(var s=null;l!==null;)l.alternate!==null&&(s=l),l=l.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function zt(e){var t=e.alternate!==null&&e.alternate.child===e.child,l=0,s=0;if(t)for(var f=e.child;f!==null;)l|=f.lanes|f.childLanes,s|=f.subtreeFlags&65011712,s|=f.flags&65011712,f.return=e,f=f.sibling;else for(f=e.child;f!==null;)l|=f.lanes|f.childLanes,s|=f.subtreeFlags,s|=f.flags,f.return=e,f=f.sibling;return e.subtreeFlags|=s,e.childLanes=l,t}function Ux(e,t,l){var s=t.pendingProps;switch(Od(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zt(t),null;case 1:return zt(t),null;case 3:return l=t.stateNode,s=null,e!==null&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),ki($t),ge(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(e===null||e.child===null)&&(rs(t)?Di(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Cd())),zt(t),null;case 26:var f=t.type,h=t.memoizedState;return e===null?(Di(t),h!==null?(zt(t),vv(t,h)):(zt(t),bh(t,f,null,s,l))):h?h!==e.memoizedState?(Di(t),zt(t),vv(t,h)):(zt(t),t.flags&=-16777217):(e=e.memoizedProps,e!==s&&Di(t),zt(t),bh(t,f,e,s,l)),null;case 27:if(Nt(t),l=Me.current,f=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==s&&Di(t);else{if(!s){if(t.stateNode===null)throw Error(a(166));return zt(t),null}e=Se.current,rs(t)?Jy(t):(e=Eg(f,s,l),t.stateNode=e,Di(t))}return zt(t),null;case 5:if(Nt(t),f=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==s&&Di(t);else{if(!s){if(t.stateNode===null)throw Error(a(166));return zt(t),null}if(h=Se.current,rs(t))Jy(t);else{var _=Yc(Me.current);switch(h){case 1:h=_.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:h=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":h=_.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":h=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":h=_.createElement("div"),h.innerHTML="<script><\/script>",h=h.removeChild(h.firstChild);break;case"select":h=typeof s.is=="string"?_.createElement("select",{is:s.is}):_.createElement("select"),s.multiple?h.multiple=!0:s.size&&(h.size=s.size);break;default:h=typeof s.is=="string"?_.createElement(f,{is:s.is}):_.createElement(f)}}h[jt]=t,h[Yt]=s;e:for(_=t.child;_!==null;){if(_.tag===5||_.tag===6)h.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===t)break e;for(;_.sibling===null;){if(_.return===null||_.return===t)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}t.stateNode=h;e:switch(xn(h,f,s),f){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&Di(t)}}return zt(t),bh(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,l),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==s&&Di(t);else{if(typeof s!="string"&&t.stateNode===null)throw Error(a(166));if(e=Me.current,rs(t)){if(e=t.stateNode,l=t.memoizedProps,s=null,f=bn,f!==null)switch(f.tag){case 27:case 5:s=f.memoizedProps}e[jt]=t,e=!!(e.nodeValue===l||s!==null&&s.suppressHydrationWarning===!0||hg(e.nodeValue,l)),e||dl(t,!0)}else e=Yc(e).createTextNode(s),e[jt]=t,t.stateNode=e}return zt(t),null;case 31:if(l=t.memoizedState,e===null||e.memoizedState!==null){if(s=rs(t),l!==null){if(e===null){if(!s)throw Error(a(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(a(557));e[jt]=t}else da(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;zt(t),e=!1}else l=Cd(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=l),e=!0;if(!e)return t.flags&256?(nr(t),t):(nr(t),null);if((t.flags&128)!==0)throw Error(a(558))}return zt(t),null;case 13:if(s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(f=rs(t),s!==null&&s.dehydrated!==null){if(e===null){if(!f)throw Error(a(318));if(f=t.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(a(317));f[jt]=t}else da(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;zt(t),f=!1}else f=Cd(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=f),f=!0;if(!f)return t.flags&256?(nr(t),t):(nr(t),null)}return nr(t),(t.flags&128)!==0?(t.lanes=l,t):(l=s!==null,e=e!==null&&e.memoizedState!==null,l&&(s=t.child,f=null,s.alternate!==null&&s.alternate.memoizedState!==null&&s.alternate.memoizedState.cachePool!==null&&(f=s.alternate.memoizedState.cachePool.pool),h=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(h=s.memoizedState.cachePool.pool),h!==f&&(s.flags|=2048)),l!==e&&l&&(t.child.flags|=8192),Oc(t,t.updateQueue),zt(t),null);case 4:return ge(),e===null&&Kh(t.stateNode.containerInfo),zt(t),null;case 10:return ki(t.type),zt(t),null;case 19:if(J(It),s=t.memoizedState,s===null)return zt(t),null;if(f=(t.flags&128)!==0,h=s.rendering,h===null)if(f)Ho(s,!1);else{if(Ht!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(h=pc(e),h!==null){for(t.flags|=128,Ho(s,!1),e=h.updateQueue,t.updateQueue=e,Oc(t,e),t.subtreeFlags=0,e=l,l=t.child;l!==null;)Gy(l,e),l=l.sibling;return he(It,It.current&1|2),ft&&Ei(t,s.treeForkCount),t.child}e=e.sibling}s.tail!==null&&On()>Nc&&(t.flags|=128,f=!0,Ho(s,!1),t.lanes=4194304)}else{if(!f)if(e=pc(h),e!==null){if(t.flags|=128,f=!0,e=e.updateQueue,t.updateQueue=e,Oc(t,e),Ho(s,!0),s.tail===null&&s.tailMode==="hidden"&&!h.alternate&&!ft)return zt(t),null}else 2*On()-s.renderingStartTime>Nc&&l!==536870912&&(t.flags|=128,f=!0,Ho(s,!1),t.lanes=4194304);s.isBackwards?(h.sibling=t.child,t.child=h):(e=s.last,e!==null?e.sibling=h:t.child=h,s.last=h)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=On(),e.sibling=null,l=It.current,he(It,f?l&1|2:l&1),ft&&Ei(t,s.treeForkCount),e):(zt(t),null);case 22:case 23:return nr(t),Yd(),s=t.memoizedState!==null,e!==null?e.memoizedState!==null!==s&&(t.flags|=8192):s&&(t.flags|=8192),s?(l&536870912)!==0&&(t.flags&128)===0&&(zt(t),t.subtreeFlags&6&&(t.flags|=8192)):zt(t),l=t.updateQueue,l!==null&&Oc(t,l.retryQueue),l=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(l=e.memoizedState.cachePool.pool),s=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),s!==l&&(t.flags|=2048),e!==null&&J(ya),null;case 24:return l=null,e!==null&&(l=e.memoizedState.cache),t.memoizedState.cache!==l&&(t.flags|=2048),ki($t),zt(t),null;case 25:return null;case 30:return null}throw Error(a(156,t.tag))}function Mx(e,t){switch(Od(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ki($t),ge(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Nt(t),null;case 31:if(t.memoizedState!==null){if(nr(t),t.alternate===null)throw Error(a(340));da()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(nr(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(a(340));da()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return J(It),null;case 4:return ge(),null;case 10:return ki(t.type),null;case 22:case 23:return nr(t),Yd(),e!==null&&J(ya),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return ki($t),null;case 25:return null;default:return null}}function gv(e,t){switch(Od(t),t.tag){case 3:ki($t),ge();break;case 26:case 27:case 5:Nt(t);break;case 4:ge();break;case 31:t.memoizedState!==null&&nr(t);break;case 13:nr(t);break;case 19:J(It);break;case 10:ki(t.type);break;case 22:case 23:nr(t),Yd(),e!==null&&J(ya);break;case 24:ki($t)}}function Ko(e,t){try{var l=t.updateQueue,s=l!==null?l.lastEffect:null;if(s!==null){var f=s.next;l=f;do{if((l.tag&e)===e){s=void 0;var h=l.create,_=l.inst;s=h(),_.destroy=s}l=l.next}while(l!==f)}}catch(O){_t(t,t.return,O)}}function bl(e,t,l){try{var s=t.updateQueue,f=s!==null?s.lastEffect:null;if(f!==null){var h=f.next;s=h;do{if((s.tag&e)===e){var _=s.inst,O=_.destroy;if(O!==void 0){_.destroy=void 0,f=t;var M=l,P=O;try{P()}catch(ae){_t(f,M,ae)}}}s=s.next}while(s!==h)}}catch(ae){_t(t,t.return,ae)}}function bv(e){var t=e.updateQueue;if(t!==null){var l=e.stateNode;try{um(t,l)}catch(s){_t(e,e.return,s)}}}function wv(e,t,l){l.props=wa(e.type,e.memoizedProps),l.state=e.memoizedState;try{l.componentWillUnmount()}catch(s){_t(e,t,s)}}function Yo(e,t){try{var l=e.ref;if(l!==null){switch(e.tag){case 26:case 27:case 5:var s=e.stateNode;break;case 30:s=e.stateNode;break;default:s=e.stateNode}typeof l=="function"?e.refCleanup=l(s):l.current=s}}catch(f){_t(e,t,f)}}function ei(e,t){var l=e.ref,s=e.refCleanup;if(l!==null)if(typeof s=="function")try{s()}catch(f){_t(e,t,f)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof l=="function")try{l(null)}catch(f){_t(e,t,f)}else l.current=null}function _v(e){var t=e.type,l=e.memoizedProps,s=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":l.autoFocus&&s.focus();break e;case"img":l.src?s.src=l.src:l.srcSet&&(s.srcset=l.srcSet)}}catch(f){_t(e,e.return,f)}}function wh(e,t,l){try{var s=e.stateNode;nS(s,e.type,l,t),s[Yt]=t}catch(f){_t(e,e.return,f)}}function xv(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&kl(e.type)||e.tag===4}function _h(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||xv(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&kl(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function xh(e,t,l){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l).insertBefore(e,t):(t=l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,t.appendChild(e),l=l._reactRootContainer,l!=null||t.onclick!==null||(t.onclick=Kn));else if(s!==4&&(s===27&&kl(e.type)&&(l=e.stateNode,t=null),e=e.child,e!==null))for(xh(e,t,l),e=e.sibling;e!==null;)xh(e,t,l),e=e.sibling}function Tc(e,t,l){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?l.insertBefore(e,t):l.appendChild(e);else if(s!==4&&(s===27&&kl(e.type)&&(l=e.stateNode),e=e.child,e!==null))for(Tc(e,t,l),e=e.sibling;e!==null;)Tc(e,t,l),e=e.sibling}function Sv(e){var t=e.stateNode,l=e.memoizedProps;try{for(var s=e.type,f=t.attributes;f.length;)t.removeAttributeNode(f[0]);xn(t,s,l),t[jt]=e,t[Yt]=l}catch(h){_t(e,e.return,h)}}var ji=!1,Wt=!1,Sh=!1,Ev=typeof WeakSet=="function"?WeakSet:Set,fn=null;function Rx(e,t){if(e=e.containerInfo,Ih=$c,e=E(e),k(e)){if("selectionStart"in e)var l={start:e.selectionStart,end:e.selectionEnd};else e:{l=(l=e.ownerDocument)&&l.defaultView||window;var s=l.getSelection&&l.getSelection();if(s&&s.rangeCount!==0){l=s.anchorNode;var f=s.anchorOffset,h=s.focusNode;s=s.focusOffset;try{l.nodeType,h.nodeType}catch{l=null;break e}var _=0,O=-1,M=-1,P=0,ae=0,ce=e,te=null;t:for(;;){for(var ne;ce!==l||f!==0&&ce.nodeType!==3||(O=_+f),ce!==h||s!==0&&ce.nodeType!==3||(M=_+s),ce.nodeType===3&&(_+=ce.nodeValue.length),(ne=ce.firstChild)!==null;)te=ce,ce=ne;for(;;){if(ce===e)break t;if(te===l&&++P===f&&(O=_),te===h&&++ae===s&&(M=_),(ne=ce.nextSibling)!==null)break;ce=te,te=ce.parentNode}ce=ne}l=O===-1||M===-1?null:{start:O,end:M}}else l=null}l=l||{start:0,end:0}}else l=null;for(Gh={focusedElem:e,selectionRange:l},$c=!1,fn=t;fn!==null;)if(t=fn,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,fn=e;else for(;fn!==null;){switch(t=fn,h=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(l=0;l<e.length;l++)f=e[l],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&h!==null){e=void 0,l=t,f=h.memoizedProps,h=h.memoizedState,s=l.stateNode;try{var je=wa(l.type,f);e=s.getSnapshotBeforeUpdate(je,h),s.__reactInternalSnapshotBeforeUpdate=e}catch(Ie){_t(l,l.return,Ie)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,l=e.nodeType,l===9)Zh(e);else if(l===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Zh(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(a(163))}if(e=t.sibling,e!==null){e.return=t.return,fn=e;break}fn=t.return}}function Av(e,t,l){var s=l.flags;switch(l.tag){case 0:case 11:case 15:Ui(e,l),s&4&&Ko(5,l);break;case 1:if(Ui(e,l),s&4)if(e=l.stateNode,t===null)try{e.componentDidMount()}catch(_){_t(l,l.return,_)}else{var f=wa(l.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(f,t,e.__reactInternalSnapshotBeforeUpdate)}catch(_){_t(l,l.return,_)}}s&64&&bv(l),s&512&&Yo(l,l.return);break;case 3:if(Ui(e,l),s&64&&(e=l.updateQueue,e!==null)){if(t=null,l.child!==null)switch(l.child.tag){case 27:case 5:t=l.child.stateNode;break;case 1:t=l.child.stateNode}try{um(e,t)}catch(_){_t(l,l.return,_)}}break;case 27:t===null&&s&4&&Sv(l);case 26:case 5:Ui(e,l),t===null&&s&4&&_v(l),s&512&&Yo(l,l.return);break;case 12:Ui(e,l);break;case 31:Ui(e,l),s&4&&Tv(e,l);break;case 13:Ui(e,l),s&4&&Cv(e,l),s&64&&(e=l.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(l=Ix.bind(null,l),cS(e,l))));break;case 22:if(s=l.memoizedState!==null||ji,!s){t=t!==null&&t.memoizedState!==null||Wt,f=ji;var h=Wt;ji=s,(Wt=t)&&!h?Mi(e,l,(l.subtreeFlags&8772)!==0):Ui(e,l),ji=f,Wt=h}break;case 30:break;default:Ui(e,l)}}function kv(e){var t=e.alternate;t!==null&&(e.alternate=null,kv(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Ra(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Lt=null,Vn=!1;function Ni(e,t,l){for(l=l.child;l!==null;)Ov(e,t,l),l=l.sibling}function Ov(e,t,l){if(mn&&typeof mn.onCommitFiberUnmount=="function")try{mn.onCommitFiberUnmount(Yr,l)}catch{}switch(l.tag){case 26:Wt||ei(l,t),Ni(e,t,l),l.memoizedState?l.memoizedState.count--:l.stateNode&&(l=l.stateNode,l.parentNode.removeChild(l));break;case 27:Wt||ei(l,t);var s=Lt,f=Vn;kl(l.type)&&(Lt=l.stateNode,Vn=!1),Ni(e,t,l),Fo(l.stateNode),Lt=s,Vn=f;break;case 5:Wt||ei(l,t);case 6:if(s=Lt,f=Vn,Lt=null,Ni(e,t,l),Lt=s,Vn=f,Lt!==null)if(Vn)try{(Lt.nodeType===9?Lt.body:Lt.nodeName==="HTML"?Lt.ownerDocument.body:Lt).removeChild(l.stateNode)}catch(h){_t(l,t,h)}else try{Lt.removeChild(l.stateNode)}catch(h){_t(l,t,h)}break;case 18:Lt!==null&&(Vn?(e=Lt,bg(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,l.stateNode),Es(e)):bg(Lt,l.stateNode));break;case 4:s=Lt,f=Vn,Lt=l.stateNode.containerInfo,Vn=!0,Ni(e,t,l),Lt=s,Vn=f;break;case 0:case 11:case 14:case 15:bl(2,l,t),Wt||bl(4,l,t),Ni(e,t,l);break;case 1:Wt||(ei(l,t),s=l.stateNode,typeof s.componentWillUnmount=="function"&&wv(l,t,s)),Ni(e,t,l);break;case 21:Ni(e,t,l);break;case 22:Wt=(s=Wt)||l.memoizedState!==null,Ni(e,t,l),Wt=s;break;default:Ni(e,t,l)}}function Tv(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Es(e)}catch(l){_t(t,t.return,l)}}}function Cv(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Es(e)}catch(l){_t(t,t.return,l)}}function zx(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Ev),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Ev),t;default:throw Error(a(435,e.tag))}}function Cc(e,t){var l=zx(e);t.forEach(function(s){if(!l.has(s)){l.add(s);var f=Gx.bind(null,e,s);s.then(f,f)}})}function In(e,t){var l=t.deletions;if(l!==null)for(var s=0;s<l.length;s++){var f=l[s],h=e,_=t,O=_;e:for(;O!==null;){switch(O.tag){case 27:if(kl(O.type)){Lt=O.stateNode,Vn=!1;break e}break;case 5:Lt=O.stateNode,Vn=!1;break e;case 3:case 4:Lt=O.stateNode.containerInfo,Vn=!0;break e}O=O.return}if(Lt===null)throw Error(a(160));Ov(h,_,f),Lt=null,Vn=!1,h=f.alternate,h!==null&&(h.return=null),f.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Dv(t,e),t=t.sibling}var Rr=null;function Dv(e,t){var l=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:In(t,e),Gn(e),s&4&&(bl(3,e,e.return),Ko(3,e),bl(5,e,e.return));break;case 1:In(t,e),Gn(e),s&512&&(Wt||l===null||ei(l,l.return)),s&64&&ji&&(e=e.updateQueue,e!==null&&(s=e.callbacks,s!==null&&(l=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=l===null?s:l.concat(s))));break;case 26:var f=Rr;if(In(t,e),Gn(e),s&512&&(Wt||l===null||ei(l,l.return)),s&4){var h=l!==null?l.memoizedState:null;if(s=e.memoizedState,l===null)if(s===null)if(e.stateNode===null){e:{s=e.type,l=e.memoizedProps,f=f.ownerDocument||f;t:switch(s){case"title":h=f.getElementsByTagName("title")[0],(!h||h[Fn]||h[jt]||h.namespaceURI==="http://www.w3.org/2000/svg"||h.hasAttribute("itemprop"))&&(h=f.createElement(s),f.head.insertBefore(h,f.querySelector("head > title"))),xn(h,s,l),h[jt]=e,Vt(h),s=h;break e;case"link":var _=Dg("link","href",f).get(s+(l.href||""));if(_){for(var O=0;O<_.length;O++)if(h=_[O],h.getAttribute("href")===(l.href==null||l.href===""?null:l.href)&&h.getAttribute("rel")===(l.rel==null?null:l.rel)&&h.getAttribute("title")===(l.title==null?null:l.title)&&h.getAttribute("crossorigin")===(l.crossOrigin==null?null:l.crossOrigin)){_.splice(O,1);break t}}h=f.createElement(s),xn(h,s,l),f.head.appendChild(h);break;case"meta":if(_=Dg("meta","content",f).get(s+(l.content||""))){for(O=0;O<_.length;O++)if(h=_[O],h.getAttribute("content")===(l.content==null?null:""+l.content)&&h.getAttribute("name")===(l.name==null?null:l.name)&&h.getAttribute("property")===(l.property==null?null:l.property)&&h.getAttribute("http-equiv")===(l.httpEquiv==null?null:l.httpEquiv)&&h.getAttribute("charset")===(l.charSet==null?null:l.charSet)){_.splice(O,1);break t}}h=f.createElement(s),xn(h,s,l),f.head.appendChild(h);break;default:throw Error(a(468,s))}h[jt]=e,Vt(h),s=h}e.stateNode=s}else jg(f,e.type,e.stateNode);else e.stateNode=Cg(f,s,e.memoizedProps);else h!==s?(h===null?l.stateNode!==null&&(l=l.stateNode,l.parentNode.removeChild(l)):h.count--,s===null?jg(f,e.type,e.stateNode):Cg(f,s,e.memoizedProps)):s===null&&e.stateNode!==null&&wh(e,e.memoizedProps,l.memoizedProps)}break;case 27:In(t,e),Gn(e),s&512&&(Wt||l===null||ei(l,l.return)),l!==null&&s&4&&wh(e,e.memoizedProps,l.memoizedProps);break;case 5:if(In(t,e),Gn(e),s&512&&(Wt||l===null||ei(l,l.return)),e.flags&32){f=e.stateNode;try{pi(f,"")}catch(je){_t(e,e.return,je)}}s&4&&e.stateNode!=null&&(f=e.memoizedProps,wh(e,f,l!==null?l.memoizedProps:f)),s&1024&&(Sh=!0);break;case 6:if(In(t,e),Gn(e),s&4){if(e.stateNode===null)throw Error(a(162));s=e.memoizedProps,l=e.stateNode;try{l.nodeValue=s}catch(je){_t(e,e.return,je)}}break;case 3:if(Gc=null,f=Rr,Rr=Vc(t.containerInfo),In(t,e),Rr=f,Gn(e),s&4&&l!==null&&l.memoizedState.isDehydrated)try{Es(t.containerInfo)}catch(je){_t(e,e.return,je)}Sh&&(Sh=!1,jv(e));break;case 4:s=Rr,Rr=Vc(e.stateNode.containerInfo),In(t,e),Gn(e),Rr=s;break;case 12:In(t,e),Gn(e);break;case 31:In(t,e),Gn(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,Cc(e,s)));break;case 13:In(t,e),Gn(e),e.child.flags&8192&&e.memoizedState!==null!=(l!==null&&l.memoizedState!==null)&&(jc=On()),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,Cc(e,s)));break;case 22:f=e.memoizedState!==null;var M=l!==null&&l.memoizedState!==null,P=ji,ae=Wt;if(ji=P||f,Wt=ae||M,In(t,e),Wt=ae,ji=P,Gn(e),s&8192)e:for(t=e.stateNode,t._visibility=f?t._visibility&-2:t._visibility|1,f&&(l===null||M||ji||Wt||_a(e)),l=null,t=e;;){if(t.tag===5||t.tag===26){if(l===null){M=l=t;try{if(h=M.stateNode,f)_=h.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{O=M.stateNode;var ce=M.memoizedProps.style,te=ce!=null&&ce.hasOwnProperty("display")?ce.display:null;O.style.display=te==null||typeof te=="boolean"?"":(""+te).trim()}}catch(je){_t(M,M.return,je)}}}else if(t.tag===6){if(l===null){M=t;try{M.stateNode.nodeValue=f?"":M.memoizedProps}catch(je){_t(M,M.return,je)}}}else if(t.tag===18){if(l===null){M=t;try{var ne=M.stateNode;f?wg(ne,!0):wg(M.stateNode,!1)}catch(je){_t(M,M.return,je)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;l===t&&(l=null),t=t.return}l===t&&(l=null),t.sibling.return=t.return,t=t.sibling}s&4&&(s=e.updateQueue,s!==null&&(l=s.retryQueue,l!==null&&(s.retryQueue=null,Cc(e,l))));break;case 19:In(t,e),Gn(e),s&4&&(s=e.updateQueue,s!==null&&(e.updateQueue=null,Cc(e,s)));break;case 30:break;case 21:break;default:In(t,e),Gn(e)}}function Gn(e){var t=e.flags;if(t&2){try{for(var l,s=e.return;s!==null;){if(xv(s)){l=s;break}s=s.return}if(l==null)throw Error(a(160));switch(l.tag){case 27:var f=l.stateNode,h=_h(e);Tc(e,h,f);break;case 5:var _=l.stateNode;l.flags&32&&(pi(_,""),l.flags&=-33);var O=_h(e);Tc(e,O,_);break;case 3:case 4:var M=l.stateNode.containerInfo,P=_h(e);xh(e,P,M);break;default:throw Error(a(161))}}catch(ae){_t(e,e.return,ae)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function jv(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;jv(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Ui(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Av(e,t.alternate,t),t=t.sibling}function _a(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:bl(4,t,t.return),_a(t);break;case 1:ei(t,t.return);var l=t.stateNode;typeof l.componentWillUnmount=="function"&&wv(t,t.return,l),_a(t);break;case 27:Fo(t.stateNode);case 26:case 5:ei(t,t.return),_a(t);break;case 22:t.memoizedState===null&&_a(t);break;case 30:_a(t);break;default:_a(t)}e=e.sibling}}function Mi(e,t,l){for(l=l&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var s=t.alternate,f=e,h=t,_=h.flags;switch(h.tag){case 0:case 11:case 15:Mi(f,h,l),Ko(4,h);break;case 1:if(Mi(f,h,l),s=h,f=s.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(P){_t(s,s.return,P)}if(s=h,f=s.updateQueue,f!==null){var O=s.stateNode;try{var M=f.shared.hiddenCallbacks;if(M!==null)for(f.shared.hiddenCallbacks=null,f=0;f<M.length;f++)om(M[f],O)}catch(P){_t(s,s.return,P)}}l&&_&64&&bv(h),Yo(h,h.return);break;case 27:Sv(h);case 26:case 5:Mi(f,h,l),l&&s===null&&_&4&&_v(h),Yo(h,h.return);break;case 12:Mi(f,h,l);break;case 31:Mi(f,h,l),l&&_&4&&Tv(f,h);break;case 13:Mi(f,h,l),l&&_&4&&Cv(f,h);break;case 22:h.memoizedState===null&&Mi(f,h,l),Yo(h,h.return);break;case 30:break;default:Mi(f,h,l)}t=t.sibling}}function Eh(e,t){var l=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(l=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==l&&(e!=null&&e.refCount++,l!=null&&To(l))}function Ah(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&To(e))}function zr(e,t,l,s){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Nv(e,t,l,s),t=t.sibling}function Nv(e,t,l,s){var f=t.flags;switch(t.tag){case 0:case 11:case 15:zr(e,t,l,s),f&2048&&Ko(9,t);break;case 1:zr(e,t,l,s);break;case 3:zr(e,t,l,s),f&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&To(e)));break;case 12:if(f&2048){zr(e,t,l,s),e=t.stateNode;try{var h=t.memoizedProps,_=h.id,O=h.onPostCommit;typeof O=="function"&&O(_,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(M){_t(t,t.return,M)}}else zr(e,t,l,s);break;case 31:zr(e,t,l,s);break;case 13:zr(e,t,l,s);break;case 23:break;case 22:h=t.stateNode,_=t.alternate,t.memoizedState!==null?h._visibility&2?zr(e,t,l,s):Vo(e,t):h._visibility&2?zr(e,t,l,s):(h._visibility|=2,hs(e,t,l,s,(t.subtreeFlags&10256)!==0||!1)),f&2048&&Eh(_,t);break;case 24:zr(e,t,l,s),f&2048&&Ah(t.alternate,t);break;default:zr(e,t,l,s)}}function hs(e,t,l,s,f){for(f=f&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var h=e,_=t,O=l,M=s,P=_.flags;switch(_.tag){case 0:case 11:case 15:hs(h,_,O,M,f),Ko(8,_);break;case 23:break;case 22:var ae=_.stateNode;_.memoizedState!==null?ae._visibility&2?hs(h,_,O,M,f):Vo(h,_):(ae._visibility|=2,hs(h,_,O,M,f)),f&&P&2048&&Eh(_.alternate,_);break;case 24:hs(h,_,O,M,f),f&&P&2048&&Ah(_.alternate,_);break;default:hs(h,_,O,M,f)}t=t.sibling}}function Vo(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var l=e,s=t,f=s.flags;switch(s.tag){case 22:Vo(l,s),f&2048&&Eh(s.alternate,s);break;case 24:Vo(l,s),f&2048&&Ah(s.alternate,s);break;default:Vo(l,s)}t=t.sibling}}var Io=8192;function ps(e,t,l){if(e.subtreeFlags&Io)for(e=e.child;e!==null;)Uv(e,t,l),e=e.sibling}function Uv(e,t,l){switch(e.tag){case 26:ps(e,t,l),e.flags&Io&&e.memoizedState!==null&&xS(l,Rr,e.memoizedState,e.memoizedProps);break;case 5:ps(e,t,l);break;case 3:case 4:var s=Rr;Rr=Vc(e.stateNode.containerInfo),ps(e,t,l),Rr=s;break;case 22:e.memoizedState===null&&(s=e.alternate,s!==null&&s.memoizedState!==null?(s=Io,Io=16777216,ps(e,t,l),Io=s):ps(e,t,l));break;default:ps(e,t,l)}}function Mv(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Go(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var l=0;l<t.length;l++){var s=t[l];fn=s,zv(s,e)}Mv(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Rv(e),e=e.sibling}function Rv(e){switch(e.tag){case 0:case 11:case 15:Go(e),e.flags&2048&&bl(9,e,e.return);break;case 3:Go(e);break;case 12:Go(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Dc(e)):Go(e);break;default:Go(e)}}function Dc(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var l=0;l<t.length;l++){var s=t[l];fn=s,zv(s,e)}Mv(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:bl(8,t,t.return),Dc(t);break;case 22:l=t.stateNode,l._visibility&2&&(l._visibility&=-3,Dc(t));break;default:Dc(t)}e=e.sibling}}function zv(e,t){for(;fn!==null;){var l=fn;switch(l.tag){case 0:case 11:case 15:bl(8,l,t);break;case 23:case 22:if(l.memoizedState!==null&&l.memoizedState.cachePool!==null){var s=l.memoizedState.cachePool.pool;s!=null&&s.refCount++}break;case 24:To(l.memoizedState.cache)}if(s=l.child,s!==null)s.return=l,fn=s;else e:for(l=e;fn!==null;){s=fn;var f=s.sibling,h=s.return;if(kv(s),s===l){fn=null;break e}if(f!==null){f.return=h,fn=f;break e}fn=h}}}var Bx={getCacheForType:function(e){var t=wn($t),l=t.data.get(e);return l===void 0&&(l=e(),t.data.set(e,l)),l},cacheSignal:function(){return wn($t).controller.signal}},Lx=typeof WeakMap=="function"?WeakMap:Map,bt=0,Ct=null,lt=null,st=0,wt=0,rr=null,wl=!1,ys=!1,kh=!1,Ri=0,Ht=0,_l=0,xa=0,Oh=0,ir=0,ms=0,Xo=null,Xn=null,Th=!1,jc=0,Bv=0,Nc=1/0,Uc=null,xl=null,en=0,Sl=null,vs=null,zi=0,Ch=0,Dh=null,Lv=null,Qo=0,jh=null;function lr(){return(bt&2)!==0&&st!==0?st&-st:K.T!==null?Bh():$l()}function qv(){if(ir===0)if((st&536870912)===0||ft){var e=Fi;Fi<<=1,(Fi&3932160)===0&&(Fi=262144),ir=e}else ir=536870912;return e=tr.current,e!==null&&(e.flags|=32),ir}function Qn(e,t,l){(e===Ct&&(wt===2||wt===9)||e.cancelPendingCommit!==null)&&(gs(e,0),El(e,st,ir,!1)),dr(e,l),((bt&2)===0||e!==Ct)&&(e===Ct&&((bt&2)===0&&(xa|=l),Ht===4&&El(e,st,ir,!1)),ti(e))}function Hv(e,t,l){if((bt&6)!==0)throw Error(a(327));var s=!l&&(t&127)===0&&(t&e.expiredLanes)===0||fi(e,t),f=s?Kx(e,t):Uh(e,t,!0),h=s;do{if(f===0){ys&&!s&&El(e,t,0,!1);break}else{if(l=e.current.alternate,h&&!qx(l)){f=Uh(e,t,!1),h=!1;continue}if(f===2){if(h=t,e.errorRecoveryDisabledLanes&h)var _=0;else _=e.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){t=_;e:{var O=e;f=Xo;var M=O.current.memoizedState.isDehydrated;if(M&&(gs(O,_).flags|=256),_=Uh(O,_,!1),_!==2){if(kh&&!M){O.errorRecoveryDisabledLanes|=h,xa|=h,f=4;break e}h=Xn,Xn=f,h!==null&&(Xn===null?Xn=h:Xn.push.apply(Xn,h))}f=_}if(h=!1,f!==2)continue}}if(f===1){gs(e,0),El(e,t,0,!0);break}e:{switch(s=e,h=f,h){case 0:case 1:throw Error(a(345));case 4:if((t&4194048)!==t)break;case 6:El(s,t,ir,!wl);break e;case 2:Xn=null;break;case 3:case 5:break;default:throw Error(a(329))}if((t&62914560)===t&&(f=jc+300-On(),10<f)){if(El(s,t,ir,!wl),Ql(s,0,!0)!==0)break e;zi=t,s.timeoutHandle=vg(Kv.bind(null,s,l,Xn,Uc,Th,t,ir,xa,ms,wl,h,"Throttled",-0,0),f);break e}Kv(s,l,Xn,Uc,Th,t,ir,xa,ms,wl,h,null,-0,0)}}break}while(!0);ti(e)}function Kv(e,t,l,s,f,h,_,O,M,P,ae,ce,te,ne){if(e.timeoutHandle=-1,ce=t.subtreeFlags,ce&8192||(ce&16785408)===16785408){ce={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Kn},Uv(t,h,ce);var je=(h&62914560)===h?jc-On():(h&4194048)===h?Bv-On():0;if(je=SS(ce,je),je!==null){zi=h,e.cancelPendingCommit=je($v.bind(null,e,t,h,l,s,f,_,O,M,ae,ce,null,te,ne)),El(e,h,_,!P);return}}$v(e,t,h,l,s,f,_,O,M)}function qx(e){for(var t=e;;){var l=t.tag;if((l===0||l===11||l===15)&&t.flags&16384&&(l=t.updateQueue,l!==null&&(l=l.stores,l!==null)))for(var s=0;s<l.length;s++){var f=l[s],h=f.getSnapshot;f=f.value;try{if(!Dn(h(),f))return!1}catch{return!1}}if(l=t.child,t.subtreeFlags&16384&&l!==null)l.return=t,t=l;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function El(e,t,l,s){t&=~Oh,t&=~xa,e.suspendedLanes|=t,e.pingedLanes&=~t,s&&(e.warmLanes|=t),s=e.expirationTimes;for(var f=t;0<f;){var h=31-Te(f),_=1<<h;s[h]=-1,f&=~_}l!==0&&Zl(e,l,t)}function Mc(){return(bt&6)===0?(Zo(0),!1):!0}function Nh(){if(lt!==null){if(wt===0)var e=lt.return;else e=lt,Ai=ha=null,Zd(e),os=null,Do=0,e=lt;for(;e!==null;)gv(e.alternate,e),e=e.return;lt=null}}function gs(e,t){var l=e.timeoutHandle;l!==-1&&(e.timeoutHandle=-1,lS(l)),l=e.cancelPendingCommit,l!==null&&(e.cancelPendingCommit=null,l()),zi=0,Nh(),Ct=e,lt=l=Si(e.current,null),st=t,wt=0,rr=null,wl=!1,ys=fi(e,t),kh=!1,ms=ir=Oh=xa=_l=Ht=0,Xn=Xo=null,Th=!1,(t&8)!==0&&(t|=t&32);var s=e.entangledLanes;if(s!==0)for(e=e.entanglements,s&=t;0<s;){var f=31-Te(s),h=1<<f;t|=e[f],s&=~h}return Ri=t,cn(),l}function Yv(e,t){Fe=null,K.H=Lo,t===ss||t===uc?(t=im(),wt=3):t===zd?(t=im(),wt=4):wt=t===ch?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,rr=t,lt===null&&(Ht=1,Sc(e,vr(t,e.current)))}function Vv(){var e=tr.current;return e===null?!0:(st&4194048)===st?_r===null:(st&62914560)===st||(st&536870912)!==0?e===_r:!1}function Iv(){var e=K.H;return K.H=Lo,e===null?Lo:e}function Gv(){var e=K.A;return K.A=Bx,e}function Rc(){Ht=4,wl||(st&4194048)!==st&&tr.current!==null||(ys=!0),(_l&134217727)===0&&(xa&134217727)===0||Ct===null||El(Ct,st,ir,!1)}function Uh(e,t,l){var s=bt;bt|=2;var f=Iv(),h=Gv();(Ct!==e||st!==t)&&(Uc=null,gs(e,t)),t=!1;var _=Ht;e:do try{if(wt!==0&&lt!==null){var O=lt,M=rr;switch(wt){case 8:Nh(),_=6;break e;case 3:case 2:case 9:case 6:tr.current===null&&(t=!0);var P=wt;if(wt=0,rr=null,bs(e,O,M,P),l&&ys){_=0;break e}break;default:P=wt,wt=0,rr=null,bs(e,O,M,P)}}Hx(),_=Ht;break}catch(ae){Yv(e,ae)}while(!0);return t&&e.shellSuspendCounter++,Ai=ha=null,bt=s,K.H=f,K.A=h,lt===null&&(Ct=null,st=0,cn()),_}function Hx(){for(;lt!==null;)Xv(lt)}function Kx(e,t){var l=bt;bt|=2;var s=Iv(),f=Gv();Ct!==e||st!==t?(Uc=null,Nc=On()+500,gs(e,t)):ys=fi(e,t);e:do try{if(wt!==0&&lt!==null){t=lt;var h=rr;t:switch(wt){case 1:wt=0,rr=null,bs(e,t,h,1);break;case 2:case 9:if(nm(h)){wt=0,rr=null,Qv(t);break}t=function(){wt!==2&&wt!==9||Ct!==e||(wt=7),ti(e)},h.then(t,t);break e;case 3:wt=7;break e;case 4:wt=5;break e;case 7:nm(h)?(wt=0,rr=null,Qv(t)):(wt=0,rr=null,bs(e,t,h,7));break;case 5:var _=null;switch(lt.tag){case 26:_=lt.memoizedState;case 5:case 27:var O=lt;if(_?Ng(_):O.stateNode.complete){wt=0,rr=null;var M=O.sibling;if(M!==null)lt=M;else{var P=O.return;P!==null?(lt=P,zc(P)):lt=null}break t}}wt=0,rr=null,bs(e,t,h,5);break;case 6:wt=0,rr=null,bs(e,t,h,6);break;case 8:Nh(),Ht=6;break e;default:throw Error(a(462))}}Yx();break}catch(ae){Yv(e,ae)}while(!0);return Ai=ha=null,K.H=s,K.A=f,bt=l,lt!==null?0:(Ct=null,st=0,cn(),Ht)}function Yx(){for(;lt!==null&&!Yu();)Xv(lt)}function Xv(e){var t=mv(e.alternate,e,Ri);e.memoizedProps=e.pendingProps,t===null?zc(e):lt=t}function Qv(e){var t=e,l=t.alternate;switch(t.tag){case 15:case 0:t=cv(l,t,t.pendingProps,t.type,void 0,st);break;case 11:t=cv(l,t,t.pendingProps,t.type.render,t.ref,st);break;case 5:Zd(t);default:gv(l,t),t=lt=Gy(t,Ri),t=mv(l,t,Ri)}e.memoizedProps=e.pendingProps,t===null?zc(e):lt=t}function bs(e,t,l,s){Ai=ha=null,Zd(t),os=null,Do=0;var f=t.return;try{if(Dx(e,f,t,l,st)){Ht=1,Sc(e,vr(l,e.current)),lt=null;return}}catch(h){if(f!==null)throw lt=f,h;Ht=1,Sc(e,vr(l,e.current)),lt=null;return}t.flags&32768?(ft||s===1?e=!0:ys||(st&536870912)!==0?e=!1:(wl=e=!0,(s===2||s===9||s===3||s===6)&&(s=tr.current,s!==null&&s.tag===13&&(s.flags|=16384))),Zv(t,e)):zc(t)}function zc(e){var t=e;do{if((t.flags&32768)!==0){Zv(t,wl);return}e=t.return;var l=Ux(t.alternate,t,Ri);if(l!==null){lt=l;return}if(t=t.sibling,t!==null){lt=t;return}lt=t=e}while(t!==null);Ht===0&&(Ht=5)}function Zv(e,t){do{var l=Mx(e.alternate,e);if(l!==null){l.flags&=32767,lt=l;return}if(l=e.return,l!==null&&(l.flags|=32768,l.subtreeFlags=0,l.deletions=null),!t&&(e=e.sibling,e!==null)){lt=e;return}lt=e=l}while(e!==null);Ht=6,lt=null}function $v(e,t,l,s,f,h,_,O,M){e.cancelPendingCommit=null;do Bc();while(en!==0);if((bt&6)!==0)throw Error(a(327));if(t!==null){if(t===e.current)throw Error(a(177));if(h=t.lanes|t.childLanes,h|=Je,no(e,l,h,_,O,M),e===Ct&&(lt=Ct=null,st=0),vs=t,Sl=e,zi=l,Ch=h,Dh=f,Lv=s,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Xx(Ji,function(){return eg(),null})):(e.callbackNode=null,e.callbackPriority=0),s=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||s){s=K.T,K.T=null,f=re.p,re.p=2,_=bt,bt|=4;try{Rx(e,t,l)}finally{bt=_,re.p=f,K.T=s}}en=1,Jv(),Fv(),Wv()}}function Jv(){if(en===1){en=0;var e=Sl,t=vs,l=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||l){l=K.T,K.T=null;var s=re.p;re.p=2;var f=bt;bt|=4;try{Dv(t,e);var h=Gh,_=E(e.containerInfo),O=h.focusedElem,M=h.selectionRange;if(_!==O&&O&&O.ownerDocument&&w(O.ownerDocument.documentElement,O)){if(M!==null&&k(O)){var P=M.start,ae=M.end;if(ae===void 0&&(ae=P),"selectionStart"in O)O.selectionStart=P,O.selectionEnd=Math.min(ae,O.value.length);else{var ce=O.ownerDocument||document,te=ce&&ce.defaultView||window;if(te.getSelection){var ne=te.getSelection(),je=O.textContent.length,Ie=Math.min(M.start,je),kt=M.end===void 0?Ie:Math.min(M.end,je);!ne.extend&&Ie>kt&&(_=kt,kt=Ie,Ie=_);var Z=v(O,Ie),H=v(O,kt);if(Z&&H&&(ne.rangeCount!==1||ne.anchorNode!==Z.node||ne.anchorOffset!==Z.offset||ne.focusNode!==H.node||ne.focusOffset!==H.offset)){var F=ce.createRange();F.setStart(Z.node,Z.offset),ne.removeAllRanges(),Ie>kt?(ne.addRange(F),ne.extend(H.node,H.offset)):(F.setEnd(H.node,H.offset),ne.addRange(F))}}}}for(ce=[],ne=O;ne=ne.parentNode;)ne.nodeType===1&&ce.push({element:ne,left:ne.scrollLeft,top:ne.scrollTop});for(typeof O.focus=="function"&&O.focus(),O=0;O<ce.length;O++){var oe=ce[O];oe.element.scrollLeft=oe.left,oe.element.scrollTop=oe.top}}$c=!!Ih,Gh=Ih=null}finally{bt=f,re.p=s,K.T=l}}e.current=t,en=2}}function Fv(){if(en===2){en=0;var e=Sl,t=vs,l=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||l){l=K.T,K.T=null;var s=re.p;re.p=2;var f=bt;bt|=4;try{Av(e,t.alternate,t)}finally{bt=f,re.p=s,K.T=l}}en=3}}function Wv(){if(en===4||en===3){en=0,Yl();var e=Sl,t=vs,l=zi,s=Lv;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?en=5:(en=0,vs=Sl=null,Pv(e,e.pendingLanes));var f=e.pendingLanes;if(f===0&&(xl=null),Wi(l),t=t.stateNode,mn&&typeof mn.onCommitFiberRoot=="function")try{mn.onCommitFiberRoot(Yr,t,void 0,(t.current.flags&128)===128)}catch{}if(s!==null){t=K.T,f=re.p,re.p=2,K.T=null;try{for(var h=e.onRecoverableError,_=0;_<s.length;_++){var O=s[_];h(O.value,{componentStack:O.stack})}}finally{K.T=t,re.p=f}}(zi&3)!==0&&Bc(),ti(e),f=e.pendingLanes,(l&261930)!==0&&(f&42)!==0?e===jh?Qo++:(Qo=0,jh=e):Qo=0,Zo(0)}}function Pv(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,To(t)))}function Bc(){return Jv(),Fv(),Wv(),eg()}function eg(){if(en!==5)return!1;var e=Sl,t=Ch;Ch=0;var l=Wi(zi),s=K.T,f=re.p;try{re.p=32>l?32:l,K.T=null,l=Dh,Dh=null;var h=Sl,_=zi;if(en=0,vs=Sl=null,zi=0,(bt&6)!==0)throw Error(a(331));var O=bt;if(bt|=4,Rv(h.current),Nv(h,h.current,_,l),bt=O,Zo(0,!1),mn&&typeof mn.onPostCommitFiberRoot=="function")try{mn.onPostCommitFiberRoot(Yr,h)}catch{}return!0}finally{re.p=f,K.T=s,Pv(e,t)}}function tg(e,t,l){t=vr(l,t),t=uh(e.stateNode,t,2),e=ml(e,t,2),e!==null&&(dr(e,2),ti(e))}function _t(e,t,l){if(e.tag===3)tg(e,e,l);else for(;t!==null;){if(t.tag===3){tg(t,e,l);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(xl===null||!xl.has(s))){e=vr(l,e),l=nv(2),s=ml(t,l,2),s!==null&&(rv(l,s,t,e),dr(s,2),ti(s));break}}t=t.return}}function Mh(e,t,l){var s=e.pingCache;if(s===null){s=e.pingCache=new Lx;var f=new Set;s.set(t,f)}else f=s.get(t),f===void 0&&(f=new Set,s.set(t,f));f.has(l)||(kh=!0,f.add(l),e=Vx.bind(null,e,t,l),t.then(e,e))}function Vx(e,t,l){var s=e.pingCache;s!==null&&s.delete(t),e.pingedLanes|=e.suspendedLanes&l,e.warmLanes&=~l,Ct===e&&(st&l)===l&&(Ht===4||Ht===3&&(st&62914560)===st&&300>On()-jc?(bt&2)===0&&gs(e,0):Oh|=l,ms===st&&(ms=0)),ti(e)}function ng(e,t){t===0&&(t=Vu()),e=Bt(e,t),e!==null&&(dr(e,t),ti(e))}function Ix(e){var t=e.memoizedState,l=0;t!==null&&(l=t.retryLane),ng(e,l)}function Gx(e,t){var l=0;switch(e.tag){case 31:case 13:var s=e.stateNode,f=e.memoizedState;f!==null&&(l=f.retryLane);break;case 19:s=e.stateNode;break;case 22:s=e.stateNode._retryCache;break;default:throw Error(a(314))}s!==null&&s.delete(t),ng(e,l)}function Xx(e,t){return Kl(e,t)}var Lc=null,ws=null,Rh=!1,qc=!1,zh=!1,Al=0;function ti(e){e!==ws&&e.next===null&&(ws===null?Lc=ws=e:ws=ws.next=e),qc=!0,Rh||(Rh=!0,Zx())}function Zo(e,t){if(!zh&&qc){zh=!0;do for(var l=!1,s=Lc;s!==null;){if(e!==0){var f=s.pendingLanes;if(f===0)var h=0;else{var _=s.suspendedLanes,O=s.pingedLanes;h=(1<<31-Te(42|e)+1)-1,h&=f&~(_&~O),h=h&201326741?h&201326741|1:h?h|2:0}h!==0&&(l=!0,ag(s,h))}else h=st,h=Ql(s,s===Ct?h:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),(h&3)===0||fi(s,h)||(l=!0,ag(s,h));s=s.next}while(l);zh=!1}}function Qx(){rg()}function rg(){qc=Rh=!1;var e=0;Al!==0&&iS()&&(e=Al);for(var t=On(),l=null,s=Lc;s!==null;){var f=s.next,h=ig(s,t);h===0?(s.next=null,l===null?Lc=f:l.next=f,f===null&&(ws=l)):(l=s,(e!==0||(h&3)!==0)&&(qc=!0)),s=f}en!==0&&en!==5||Zo(e),Al!==0&&(Al=0)}function ig(e,t){for(var l=e.suspendedLanes,s=e.pingedLanes,f=e.expirationTimes,h=e.pendingLanes&-62914561;0<h;){var _=31-Te(h),O=1<<_,M=f[_];M===-1?((O&l)===0||(O&s)!==0)&&(f[_]=pd(O,t)):M<=t&&(e.expiredLanes|=O),h&=~O}if(t=Ct,l=st,l=Ql(e,e===t?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s=e.callbackNode,l===0||e===t&&(wt===2||wt===9)||e.cancelPendingCommit!==null)return s!==null&&s!==null&&Hn(s),e.callbackNode=null,e.callbackPriority=0;if((l&3)===0||fi(e,l)){if(t=l&-l,t===e.callbackPriority)return t;switch(s!==null&&Hn(s),Wi(l)){case 2:case 8:l=Kr;break;case 32:l=Ji;break;case 268435456:l=Na;break;default:l=Ji}return s=lg.bind(null,e),l=Kl(l,s),e.callbackPriority=t,e.callbackNode=l,t}return s!==null&&s!==null&&Hn(s),e.callbackPriority=2,e.callbackNode=null,2}function lg(e,t){if(en!==0&&en!==5)return e.callbackNode=null,e.callbackPriority=0,null;var l=e.callbackNode;if(Bc()&&e.callbackNode!==l)return null;var s=st;return s=Ql(e,e===Ct?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),s===0?null:(Hv(e,s,t),ig(e,On()),e.callbackNode!=null&&e.callbackNode===l?lg.bind(null,e):null)}function ag(e,t){if(Bc())return null;Hv(e,t,!0)}function Zx(){aS(function(){(bt&6)!==0?Kl(Hr,Qx):rg()})}function Bh(){if(Al===0){var e=ls;e===0&&(e=Ae,Ae<<=1,(Ae&261888)===0&&(Ae=256)),Al=e}return Al}function sg(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Mr(""+e)}function og(e,t){var l=t.ownerDocument.createElement("input");return l.name=t.name,l.value=t.value,e.id&&l.setAttribute("form",e.id),t.parentNode.insertBefore(l,t),e=new FormData(e),l.parentNode.removeChild(l),e}function $x(e,t,l,s,f){if(t==="submit"&&l&&l.stateNode===f){var h=sg((f[Yt]||null).action),_=s.submitter;_&&(t=(t=_[Yt]||null)?sg(t.formAction):_.getAttribute("formAction"),t!==null&&(h=t,_=null));var O=new Ha("action","action",null,s,f);e.push({event:O,listeners:[{instance:null,listener:function(){if(s.defaultPrevented){if(Al!==0){var M=_?og(f,_):new FormData(f);rh(l,{pending:!0,data:M,method:f.method,action:h},null,M)}}else typeof h=="function"&&(O.preventDefault(),M=_?og(f,_):new FormData(f),rh(l,{pending:!0,data:M,method:f.method,action:h},h,M))},currentTarget:f}]})}}for(var Lh=0;Lh<_e.length;Lh++){var qh=_e[Lh],Jx=qh.toLowerCase(),Fx=qh[0].toUpperCase()+qh.slice(1);ve(Jx,"on"+Fx)}ve($,"onAnimationEnd"),ve(ee,"onAnimationIteration"),ve(le,"onAnimationStart"),ve("dblclick","onDoubleClick"),ve("focusin","onFocus"),ve("focusout","onBlur"),ve(ue,"onTransitionRun"),ve(be,"onTransitionStart"),ve(Ee,"onTransitionCancel"),ve(me,"onTransitionEnd"),Qr("onMouseEnter",["mouseout","mouseover"]),Qr("onMouseLeave",["mouseout","mouseover"]),Qr("onPointerEnter",["pointerout","pointerover"]),Qr("onPointerLeave",["pointerout","pointerover"]),Nr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Nr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Nr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Nr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Nr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Nr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $o="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Wx=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat($o));function ug(e,t){t=(t&4)!==0;for(var l=0;l<e.length;l++){var s=e[l],f=s.event;s=s.listeners;e:{var h=void 0;if(t)for(var _=s.length-1;0<=_;_--){var O=s[_],M=O.instance,P=O.currentTarget;if(O=O.listener,M!==h&&f.isPropagationStopped())break e;h=O,f.currentTarget=P;try{h(f)}catch(ae){Ce(ae)}f.currentTarget=null,h=M}else for(_=0;_<s.length;_++){if(O=s[_],M=O.instance,P=O.currentTarget,O=O.listener,M!==h&&f.isPropagationStopped())break e;h=O,f.currentTarget=P;try{h(f)}catch(ae){Ce(ae)}f.currentTarget=null,h=M}}}}function at(e,t){var l=t[Pi];l===void 0&&(l=t[Pi]=new Set);var s=e+"__bubble";l.has(s)||(cg(t,e,2,!1),l.add(s))}function Hh(e,t,l){var s=0;t&&(s|=4),cg(l,e,s,t)}var Hc="_reactListening"+Math.random().toString(36).slice(2);function Kh(e){if(!e[Hc]){e[Hc]=!0,di.forEach(function(l){l!=="selectionchange"&&(Wx.has(l)||Hh(l,!1,e),Hh(l,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Hc]||(t[Hc]=!0,Hh("selectionchange",!1,t))}}function cg(e,t,l,s){switch(qg(t)){case 2:var f=kS;break;case 8:f=OS;break;default:f=np}l=f.bind(null,t,l,e),f=void 0,!co||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(f=!0),s?f!==void 0?e.addEventListener(t,l,{capture:!0,passive:f}):e.addEventListener(t,l,!0):f!==void 0?e.addEventListener(t,l,{passive:f}):e.addEventListener(t,l,!1)}function Yh(e,t,l,s,f){var h=s;if((t&1)===0&&(t&2)===0&&s!==null)e:for(;;){if(s===null)return;var _=s.tag;if(_===3||_===4){var O=s.stateNode.containerInfo;if(O===f)break;if(_===4)for(_=s.return;_!==null;){var M=_.tag;if((M===3||M===4)&&_.stateNode.containerInfo===f)return;_=_.return}for(;O!==null;){if(_=Xr(O),_===null)return;if(M=_.tag,M===5||M===6||M===26||M===27){s=h=_;continue e}O=O.parentNode}}s=s.return}tl(function(){var P=h,ae=La(l),ce=[];e:{var te=we.get(e);if(te!==void 0){var ne=Ha,je=e;switch(e){case"keypress":if(il(l)===0)break e;case"keydown":case"keyup":ne=Qa;break;case"focusin":je="focus",ne=ll;break;case"focusout":je="blur",ne=ll;break;case"beforeblur":case"afterblur":ne=ll;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ne=Va;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ne=Qu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ne=go;break;case $:case ee:case le:ne=Zu;break;case me:ne=bo;break;case"scroll":case"scrollend":ne=Ka;break;case"wheel":ne=$a;break;case"copy":case"cut":case"paste":ne=al;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ne=vo;break;case"toggle":case"beforetoggle":ne=Fu}var Ie=(t&4)!==0,kt=!Ie&&(e==="scroll"||e==="scrollend"),Z=Ie?te!==null?te+"Capture":null:te;Ie=[];for(var H=P,F;H!==null;){var oe=H;if(F=oe.stateNode,oe=oe.tag,oe!==5&&oe!==26&&oe!==27||F===null||Z===null||(oe=vi(H,Z),oe!=null&&Ie.push(Jo(H,oe,F))),kt)break;H=H.return}0<Ie.length&&(te=new ne(te,je,null,l,ae),ce.push({event:te,listeners:Ie}))}}if((t&7)===0){e:{if(te=e==="mouseover"||e==="pointerover",ne=e==="mouseout"||e==="pointerout",te&&l!==pr&&(je=l.relatedTarget||l.fromElement)&&(Xr(je)||je[zn]))break e;if((ne||te)&&(te=ae.window===ae?ae:(te=ae.ownerDocument)?te.defaultView||te.parentWindow:window,ne?(je=l.relatedTarget||l.toElement,ne=P,je=je?Xr(je):null,je!==null&&(kt=u(je),Ie=je.tag,je!==kt||Ie!==5&&Ie!==27&&Ie!==6)&&(je=null)):(ne=null,je=P),ne!==je)){if(Ie=Va,oe="onMouseLeave",Z="onMouseEnter",H="mouse",(e==="pointerout"||e==="pointerover")&&(Ie=vo,oe="onPointerLeave",Z="onPointerEnter",H="pointer"),kt=ne==null?te:Wn(ne),F=je==null?te:Wn(je),te=new Ie(oe,H+"leave",ne,l,ae),te.target=kt,te.relatedTarget=F,oe=null,Xr(ae)===P&&(Ie=new Ie(Z,H+"enter",je,l,ae),Ie.target=F,Ie.relatedTarget=kt,oe=Ie),kt=oe,ne&&je)t:{for(Ie=Px,Z=ne,H=je,F=0,oe=Z;oe;oe=Ie(oe))F++;oe=0;for(var Ye=H;Ye;Ye=Ie(Ye))oe++;for(;0<F-oe;)Z=Ie(Z),F--;for(;0<oe-F;)H=Ie(H),oe--;for(;F--;){if(Z===H||H!==null&&Z===H.alternate){Ie=Z;break t}Z=Ie(Z),H=Ie(H)}Ie=null}else Ie=null;ne!==null&&fg(ce,te,ne,Ie,!1),je!==null&&kt!==null&&fg(ce,kt,je,Ie,!0)}}e:{if(te=P?Wn(P):window,ne=te.nodeName&&te.nodeName.toLowerCase(),ne==="select"||ne==="input"&&te.type==="file")var yt=ua;else if(Wa(te))if(mr)yt=ul;else{yt=xi;var Ue=rc}else ne=te.nodeName,!ne||ne.toLowerCase()!=="input"||te.type!=="checkbox"&&te.type!=="radio"?P&&uo(P.elementType)&&(yt=ua):yt=Eo;if(yt&&(yt=yt(e,P))){So(ce,yt,l,ae);break e}Ue&&Ue(e,te,P),e==="focusout"&&P&&te.type==="number"&&P.memoizedProps.value!=null&&ta(te,"number",te.value)}switch(Ue=P?Wn(P):window,e){case"focusin":(Wa(Ue)||Ue.contentEditable==="true")&&(j=Ue,B=P,L=null);break;case"focusout":L=B=j=null;break;case"mousedown":I=!0;break;case"contextmenu":case"mouseup":case"dragend":I=!1,R(ce,l,ae);break;case"selectionchange":if(D)break;case"keydown":case"keyup":R(ce,l,ae)}var et;if(sa)e:{switch(e){case"compositionstart":var ot="onCompositionStart";break e;case"compositionend":ot="onCompositionEnd";break e;case"compositionupdate":ot="onCompositionUpdate";break e}ot=void 0}else _i?xo(e,l)&&(ot="onCompositionEnd"):e==="keydown"&&l.keyCode===229&&(ot="onCompositionStart");ot&&(Ja&&l.locale!=="ko"&&(_i||ot!=="onCompositionStart"?ot==="onCompositionEnd"&&_i&&(et=rl()):(yr=ae,qa="value"in yr?yr.value:yr.textContent,_i=!0)),Ue=Kc(P,ot),0<Ue.length&&(ot=new Xa(ot,e,null,l,ae),ce.push({event:ot,listeners:Ue}),et?ot.data=et:(et=Pu(l),et!==null&&(ot.data=et)))),(et=wd?ec(e,l):_d(e,l))&&(ot=Kc(P,"onBeforeInput"),0<ot.length&&(Ue=new Xa("onBeforeInput","beforeinput",null,l,ae),ce.push({event:Ue,listeners:ot}),Ue.data=et)),$x(ce,e,P,l,ae)}ug(ce,t)})}function Jo(e,t,l){return{instance:e,listener:t,currentTarget:l}}function Kc(e,t){for(var l=t+"Capture",s=[];e!==null;){var f=e,h=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||h===null||(f=vi(e,l),f!=null&&s.unshift(Jo(e,f,h)),f=vi(e,t),f!=null&&s.push(Jo(e,f,h))),e.tag===3)return s;e=e.return}return[]}function Px(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function fg(e,t,l,s,f){for(var h=t._reactName,_=[];l!==null&&l!==s;){var O=l,M=O.alternate,P=O.stateNode;if(O=O.tag,M!==null&&M===s)break;O!==5&&O!==26&&O!==27||P===null||(M=P,f?(P=vi(l,h),P!=null&&_.unshift(Jo(l,P,M))):f||(P=vi(l,h),P!=null&&_.push(Jo(l,P,M)))),l=l.return}_.length!==0&&e.push({event:t,listeners:_})}var eS=/\r\n?/g,tS=/\u0000|\uFFFD/g;function dg(e){return(typeof e=="string"?e:""+e).replace(eS,`
`).replace(tS,"")}function hg(e,t){return t=dg(t),dg(e)===t}function At(e,t,l,s,f,h){switch(l){case"children":typeof s=="string"?t==="body"||t==="textarea"&&s===""||pi(e,s):(typeof s=="number"||typeof s=="bigint")&&t!=="body"&&pi(e,""+s);break;case"className":Pl(e,"class",s);break;case"tabIndex":Pl(e,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":Pl(e,l,s);break;case"style":oo(e,s,h);break;case"data":if(t!=="object"){Pl(e,"data",s);break}case"src":case"href":if(s===""&&(t!=="a"||l!=="href")){e.removeAttribute(l);break}if(s==null||typeof s=="function"||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(l);break}s=Mr(""+s),e.setAttribute(l,s);break;case"action":case"formAction":if(typeof s=="function"){e.setAttribute(l,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof h=="function"&&(l==="formAction"?(t!=="input"&&At(e,t,"name",f.name,f,null),At(e,t,"formEncType",f.formEncType,f,null),At(e,t,"formMethod",f.formMethod,f,null),At(e,t,"formTarget",f.formTarget,f,null)):(At(e,t,"encType",f.encType,f,null),At(e,t,"method",f.method,f,null),At(e,t,"target",f.target,f,null)));if(s==null||typeof s=="symbol"||typeof s=="boolean"){e.removeAttribute(l);break}s=Mr(""+s),e.setAttribute(l,s);break;case"onClick":s!=null&&(e.onclick=Kn);break;case"onScroll":s!=null&&at("scroll",e);break;case"onScrollEnd":s!=null&&at("scrollend",e);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(a(61));if(l=s.__html,l!=null){if(f.children!=null)throw Error(a(60));e.innerHTML=l}}break;case"multiple":e.multiple=s&&typeof s!="function"&&typeof s!="symbol";break;case"muted":e.muted=s&&typeof s!="function"&&typeof s!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(s==null||typeof s=="function"||typeof s=="boolean"||typeof s=="symbol"){e.removeAttribute("xlink:href");break}l=Mr(""+s),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",l);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(l,""+s):e.removeAttribute(l);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(l,""):e.removeAttribute(l);break;case"capture":case"download":s===!0?e.setAttribute(l,""):s!==!1&&s!=null&&typeof s!="function"&&typeof s!="symbol"?e.setAttribute(l,s):e.removeAttribute(l);break;case"cols":case"rows":case"size":case"span":s!=null&&typeof s!="function"&&typeof s!="symbol"&&!isNaN(s)&&1<=s?e.setAttribute(l,s):e.removeAttribute(l);break;case"rowSpan":case"start":s==null||typeof s=="function"||typeof s=="symbol"||isNaN(s)?e.removeAttribute(l):e.setAttribute(l,s);break;case"popover":at("beforetoggle",e),at("toggle",e),nt(e,"popover",s);break;case"xlinkActuate":hr(e,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":hr(e,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":hr(e,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":hr(e,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":hr(e,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":hr(e,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":hr(e,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":hr(e,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":hr(e,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":nt(e,"is",s);break;case"innerText":case"textContent":break;default:(!(2<l.length)||l[0]!=="o"&&l[0]!=="O"||l[1]!=="n"&&l[1]!=="N")&&(l=vd.get(l)||l,nt(e,l,s))}}function Vh(e,t,l,s,f,h){switch(l){case"style":oo(e,s,h);break;case"dangerouslySetInnerHTML":if(s!=null){if(typeof s!="object"||!("__html"in s))throw Error(a(61));if(l=s.__html,l!=null){if(f.children!=null)throw Error(a(60));e.innerHTML=l}}break;case"children":typeof s=="string"?pi(e,s):(typeof s=="number"||typeof s=="bigint")&&pi(e,""+s);break;case"onScroll":s!=null&&at("scroll",e);break;case"onScrollEnd":s!=null&&at("scrollend",e);break;case"onClick":s!=null&&(e.onclick=Kn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Fl.hasOwnProperty(l))e:{if(l[0]==="o"&&l[1]==="n"&&(f=l.endsWith("Capture"),t=l.slice(2,f?l.length-7:void 0),h=e[Yt]||null,h=h!=null?h[l]:null,typeof h=="function"&&e.removeEventListener(t,h,f),typeof s=="function")){typeof h!="function"&&h!==null&&(l in e?e[l]=null:e.hasAttribute(l)&&e.removeAttribute(l)),e.addEventListener(t,s,f);break e}l in e?e[l]=s:s===!0?e.setAttribute(l,""):nt(e,l,s)}}}function xn(e,t,l){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":at("error",e),at("load",e);var s=!1,f=!1,h;for(h in l)if(l.hasOwnProperty(h)){var _=l[h];if(_!=null)switch(h){case"src":s=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:At(e,t,h,_,l,null)}}f&&At(e,t,"srcSet",l.srcSet,l,null),s&&At(e,t,"src",l.src,l,null);return;case"input":at("invalid",e);var O=h=_=f=null,M=null,P=null;for(s in l)if(l.hasOwnProperty(s)){var ae=l[s];if(ae!=null)switch(s){case"name":f=ae;break;case"type":_=ae;break;case"checked":M=ae;break;case"defaultChecked":P=ae;break;case"value":h=ae;break;case"defaultValue":O=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(a(137,t));break;default:At(e,t,s,ae,l,null)}}Ba(e,h,O,M,P,_,f,!1);return;case"select":at("invalid",e),s=_=h=null;for(f in l)if(l.hasOwnProperty(f)&&(O=l[f],O!=null))switch(f){case"value":h=O;break;case"defaultValue":_=O;break;case"multiple":s=O;default:At(e,t,f,O,l,null)}t=h,l=_,e.multiple=!!s,t!=null?Ur(e,!!s,t,!1):l!=null&&Ur(e,!!s,l,!0);return;case"textarea":at("invalid",e),h=f=s=null;for(_ in l)if(l.hasOwnProperty(_)&&(O=l[_],O!=null))switch(_){case"value":s=O;break;case"defaultValue":f=O;break;case"children":h=O;break;case"dangerouslySetInnerHTML":if(O!=null)throw Error(a(91));break;default:At(e,t,_,O,l,null)}na(e,s,f,h);return;case"option":for(M in l)if(l.hasOwnProperty(M)&&(s=l[M],s!=null))switch(M){case"selected":e.selected=s&&typeof s!="function"&&typeof s!="symbol";break;default:At(e,t,M,s,l,null)}return;case"dialog":at("beforetoggle",e),at("toggle",e),at("cancel",e),at("close",e);break;case"iframe":case"object":at("load",e);break;case"video":case"audio":for(s=0;s<$o.length;s++)at($o[s],e);break;case"image":at("error",e),at("load",e);break;case"details":at("toggle",e);break;case"embed":case"source":case"link":at("error",e),at("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(P in l)if(l.hasOwnProperty(P)&&(s=l[P],s!=null))switch(P){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:At(e,t,P,s,l,null)}return;default:if(uo(t)){for(ae in l)l.hasOwnProperty(ae)&&(s=l[ae],s!==void 0&&Vh(e,t,ae,s,l,void 0));return}}for(O in l)l.hasOwnProperty(O)&&(s=l[O],s!=null&&At(e,t,O,s,l,null))}function nS(e,t,l,s){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,h=null,_=null,O=null,M=null,P=null,ae=null;for(ne in l){var ce=l[ne];if(l.hasOwnProperty(ne)&&ce!=null)switch(ne){case"checked":break;case"value":break;case"defaultValue":M=ce;default:s.hasOwnProperty(ne)||At(e,t,ne,null,s,ce)}}for(var te in s){var ne=s[te];if(ce=l[te],s.hasOwnProperty(te)&&(ne!=null||ce!=null))switch(te){case"type":h=ne;break;case"name":f=ne;break;case"checked":P=ne;break;case"defaultChecked":ae=ne;break;case"value":_=ne;break;case"defaultValue":O=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(a(137,t));break;default:ne!==ce&&At(e,t,te,ne,s,ce)}}Zr(e,_,O,M,P,ae,h,f);return;case"select":ne=_=O=te=null;for(h in l)if(M=l[h],l.hasOwnProperty(h)&&M!=null)switch(h){case"value":break;case"multiple":ne=M;default:s.hasOwnProperty(h)||At(e,t,h,null,s,M)}for(f in s)if(h=s[f],M=l[f],s.hasOwnProperty(f)&&(h!=null||M!=null))switch(f){case"value":te=h;break;case"defaultValue":O=h;break;case"multiple":_=h;default:h!==M&&At(e,t,f,h,s,M)}t=O,l=_,s=ne,te!=null?Ur(e,!!l,te,!1):!!s!=!!l&&(t!=null?Ur(e,!!l,t,!0):Ur(e,!!l,l?[]:"",!1));return;case"textarea":ne=te=null;for(O in l)if(f=l[O],l.hasOwnProperty(O)&&f!=null&&!s.hasOwnProperty(O))switch(O){case"value":break;case"children":break;default:At(e,t,O,null,s,f)}for(_ in s)if(f=s[_],h=l[_],s.hasOwnProperty(_)&&(f!=null||h!=null))switch(_){case"value":te=f;break;case"defaultValue":ne=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(a(91));break;default:f!==h&&At(e,t,_,f,s,h)}so(e,te,ne);return;case"option":for(var je in l)if(te=l[je],l.hasOwnProperty(je)&&te!=null&&!s.hasOwnProperty(je))switch(je){case"selected":e.selected=!1;break;default:At(e,t,je,null,s,te)}for(M in s)if(te=s[M],ne=l[M],s.hasOwnProperty(M)&&te!==ne&&(te!=null||ne!=null))switch(M){case"selected":e.selected=te&&typeof te!="function"&&typeof te!="symbol";break;default:At(e,t,M,te,s,ne)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ie in l)te=l[Ie],l.hasOwnProperty(Ie)&&te!=null&&!s.hasOwnProperty(Ie)&&At(e,t,Ie,null,s,te);for(P in s)if(te=s[P],ne=l[P],s.hasOwnProperty(P)&&te!==ne&&(te!=null||ne!=null))switch(P){case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(a(137,t));break;default:At(e,t,P,te,s,ne)}return;default:if(uo(t)){for(var kt in l)te=l[kt],l.hasOwnProperty(kt)&&te!==void 0&&!s.hasOwnProperty(kt)&&Vh(e,t,kt,void 0,s,te);for(ae in s)te=s[ae],ne=l[ae],!s.hasOwnProperty(ae)||te===ne||te===void 0&&ne===void 0||Vh(e,t,ae,te,s,ne);return}}for(var Z in l)te=l[Z],l.hasOwnProperty(Z)&&te!=null&&!s.hasOwnProperty(Z)&&At(e,t,Z,null,s,te);for(ce in s)te=s[ce],ne=l[ce],!s.hasOwnProperty(ce)||te===ne||te==null&&ne==null||At(e,t,ce,te,s,ne)}function pg(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function rS(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,l=performance.getEntriesByType("resource"),s=0;s<l.length;s++){var f=l[s],h=f.transferSize,_=f.initiatorType,O=f.duration;if(h&&O&&pg(_)){for(_=0,O=f.responseEnd,s+=1;s<l.length;s++){var M=l[s],P=M.startTime;if(P>O)break;var ae=M.transferSize,ce=M.initiatorType;ae&&pg(ce)&&(M=M.responseEnd,_+=ae*(M<O?1:(O-P)/(M-P)))}if(--s,t+=8*(h+_)/(f.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Ih=null,Gh=null;function Yc(e){return e.nodeType===9?e:e.ownerDocument}function yg(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function mg(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Xh(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Qh=null;function iS(){var e=window.event;return e&&e.type==="popstate"?e===Qh?!1:(Qh=e,!0):(Qh=null,!1)}var vg=typeof setTimeout=="function"?setTimeout:void 0,lS=typeof clearTimeout=="function"?clearTimeout:void 0,gg=typeof Promise=="function"?Promise:void 0,aS=typeof queueMicrotask=="function"?queueMicrotask:typeof gg<"u"?function(e){return gg.resolve(null).then(e).catch(sS)}:vg;function sS(e){setTimeout(function(){throw e})}function kl(e){return e==="head"}function bg(e,t){var l=t,s=0;do{var f=l.nextSibling;if(e.removeChild(l),f&&f.nodeType===8)if(l=f.data,l==="/$"||l==="/&"){if(s===0){e.removeChild(f),Es(t);return}s--}else if(l==="$"||l==="$?"||l==="$~"||l==="$!"||l==="&")s++;else if(l==="html")Fo(e.ownerDocument.documentElement);else if(l==="head"){l=e.ownerDocument.head,Fo(l);for(var h=l.firstChild;h;){var _=h.nextSibling,O=h.nodeName;h[Fn]||O==="SCRIPT"||O==="STYLE"||O==="LINK"&&h.rel.toLowerCase()==="stylesheet"||l.removeChild(h),h=_}}else l==="body"&&Fo(e.ownerDocument.body);l=f}while(l);Es(t)}function wg(e,t){var l=e;e=0;do{var s=l.nextSibling;if(l.nodeType===1?t?(l._stashedDisplay=l.style.display,l.style.display="none"):(l.style.display=l._stashedDisplay||"",l.getAttribute("style")===""&&l.removeAttribute("style")):l.nodeType===3&&(t?(l._stashedText=l.nodeValue,l.nodeValue=""):l.nodeValue=l._stashedText||""),s&&s.nodeType===8)if(l=s.data,l==="/$"){if(e===0)break;e--}else l!=="$"&&l!=="$?"&&l!=="$~"&&l!=="$!"||e++;l=s}while(l)}function Zh(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var l=t;switch(t=t.nextSibling,l.nodeName){case"HTML":case"HEAD":case"BODY":Zh(l),Ra(l);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(l.rel.toLowerCase()==="stylesheet")continue}e.removeChild(l)}}function oS(e,t,l,s){for(;e.nodeType===1;){var f=l;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!s&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(s){if(!e[Fn])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(h=e.getAttribute("rel"),h==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(h!==f.rel||e.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||e.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||e.getAttribute("title")!==(f.title==null?null:f.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(h=e.getAttribute("src"),(h!==(f.src==null?null:f.src)||e.getAttribute("type")!==(f.type==null?null:f.type)||e.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&h&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var h=f.name==null?null:""+f.name;if(f.type==="hidden"&&e.getAttribute("name")===h)return e}else return e;if(e=xr(e.nextSibling),e===null)break}return null}function uS(e,t,l){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!l||(e=xr(e.nextSibling),e===null))return null;return e}function _g(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=xr(e.nextSibling),e===null))return null;return e}function $h(e){return e.data==="$?"||e.data==="$~"}function Jh(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function cS(e,t){var l=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||l.readyState!=="loading")t();else{var s=function(){t(),l.removeEventListener("DOMContentLoaded",s)};l.addEventListener("DOMContentLoaded",s),e._reactRetry=s}}function xr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Fh=null;function xg(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var l=e.data;if(l==="/$"||l==="/&"){if(t===0)return xr(e.nextSibling);t--}else l!=="$"&&l!=="$!"&&l!=="$?"&&l!=="$~"&&l!=="&"||t++}e=e.nextSibling}return null}function Sg(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var l=e.data;if(l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"){if(t===0)return e;t--}else l!=="/$"&&l!=="/&"||t++}e=e.previousSibling}return null}function Eg(e,t,l){switch(t=Yc(l),e){case"html":if(e=t.documentElement,!e)throw Error(a(452));return e;case"head":if(e=t.head,!e)throw Error(a(453));return e;case"body":if(e=t.body,!e)throw Error(a(454));return e;default:throw Error(a(451))}}function Fo(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Ra(e)}var Sr=new Map,Ag=new Set;function Vc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Bi=re.d;re.d={f:fS,r:dS,D:hS,C:pS,L:yS,m:mS,X:gS,S:vS,M:bS};function fS(){var e=Bi.f(),t=Mc();return e||t}function dS(e){var t=St(e);t!==null&&t.tag===5&&t.type==="form"?Ym(t):Bi.r(e)}var _s=typeof document>"u"?null:document;function kg(e,t,l){var s=_s;if(s&&typeof t=="string"&&t){var f=sn(t);f='link[rel="'+e+'"][href="'+f+'"]',typeof l=="string"&&(f+='[crossorigin="'+l+'"]'),Ag.has(f)||(Ag.add(f),e={rel:e,crossOrigin:l,href:t},s.querySelector(f)===null&&(t=s.createElement("link"),xn(t,"link",e),Vt(t),s.head.appendChild(t)))}}function hS(e){Bi.D(e),kg("dns-prefetch",e,null)}function pS(e,t){Bi.C(e,t),kg("preconnect",e,t)}function yS(e,t,l){Bi.L(e,t,l);var s=_s;if(s&&e&&t){var f='link[rel="preload"][as="'+sn(t)+'"]';t==="image"&&l&&l.imageSrcSet?(f+='[imagesrcset="'+sn(l.imageSrcSet)+'"]',typeof l.imageSizes=="string"&&(f+='[imagesizes="'+sn(l.imageSizes)+'"]')):f+='[href="'+sn(e)+'"]';var h=f;switch(t){case"style":h=xs(e);break;case"script":h=Ss(e)}Sr.has(h)||(e=x({rel:"preload",href:t==="image"&&l&&l.imageSrcSet?void 0:e,as:t},l),Sr.set(h,e),s.querySelector(f)!==null||t==="style"&&s.querySelector(Wo(h))||t==="script"&&s.querySelector(Po(h))||(t=s.createElement("link"),xn(t,"link",e),Vt(t),s.head.appendChild(t)))}}function mS(e,t){Bi.m(e,t);var l=_s;if(l&&e){var s=t&&typeof t.as=="string"?t.as:"script",f='link[rel="modulepreload"][as="'+sn(s)+'"][href="'+sn(e)+'"]',h=f;switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":h=Ss(e)}if(!Sr.has(h)&&(e=x({rel:"modulepreload",href:e},t),Sr.set(h,e),l.querySelector(f)===null)){switch(s){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(l.querySelector(Po(h)))return}s=l.createElement("link"),xn(s,"link",e),Vt(s),l.head.appendChild(s)}}}function vS(e,t,l){Bi.S(e,t,l);var s=_s;if(s&&e){var f=Tn(s).hoistableStyles,h=xs(e);t=t||"default";var _=f.get(h);if(!_){var O={loading:0,preload:null};if(_=s.querySelector(Wo(h)))O.loading=5;else{e=x({rel:"stylesheet",href:e,"data-precedence":t},l),(l=Sr.get(h))&&Wh(e,l);var M=_=s.createElement("link");Vt(M),xn(M,"link",e),M._p=new Promise(function(P,ae){M.onload=P,M.onerror=ae}),M.addEventListener("load",function(){O.loading|=1}),M.addEventListener("error",function(){O.loading|=2}),O.loading|=4,Ic(_,t,s)}_={type:"stylesheet",instance:_,count:1,state:O},f.set(h,_)}}}function gS(e,t){Bi.X(e,t);var l=_s;if(l&&e){var s=Tn(l).hoistableScripts,f=Ss(e),h=s.get(f);h||(h=l.querySelector(Po(f)),h||(e=x({src:e,async:!0},t),(t=Sr.get(f))&&Ph(e,t),h=l.createElement("script"),Vt(h),xn(h,"link",e),l.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},s.set(f,h))}}function bS(e,t){Bi.M(e,t);var l=_s;if(l&&e){var s=Tn(l).hoistableScripts,f=Ss(e),h=s.get(f);h||(h=l.querySelector(Po(f)),h||(e=x({src:e,async:!0,type:"module"},t),(t=Sr.get(f))&&Ph(e,t),h=l.createElement("script"),Vt(h),xn(h,"link",e),l.head.appendChild(h)),h={type:"script",instance:h,count:1,state:null},s.set(f,h))}}function Og(e,t,l,s){var f=(f=Me.current)?Vc(f):null;if(!f)throw Error(a(446));switch(e){case"meta":case"title":return null;case"style":return typeof l.precedence=="string"&&typeof l.href=="string"?(t=xs(l.href),l=Tn(f).hoistableStyles,s=l.get(t),s||(s={type:"style",instance:null,count:0,state:null},l.set(t,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if(l.rel==="stylesheet"&&typeof l.href=="string"&&typeof l.precedence=="string"){e=xs(l.href);var h=Tn(f).hoistableStyles,_=h.get(e);if(_||(f=f.ownerDocument||f,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},h.set(e,_),(h=f.querySelector(Wo(e)))&&!h._p&&(_.instance=h,_.state.loading=5),Sr.has(e)||(l={rel:"preload",as:"style",href:l.href,crossOrigin:l.crossOrigin,integrity:l.integrity,media:l.media,hrefLang:l.hrefLang,referrerPolicy:l.referrerPolicy},Sr.set(e,l),h||wS(f,e,l,_.state))),t&&s===null)throw Error(a(528,""));return _}if(t&&s!==null)throw Error(a(529,""));return null;case"script":return t=l.async,l=l.src,typeof l=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Ss(l),l=Tn(f).hoistableScripts,s=l.get(t),s||(s={type:"script",instance:null,count:0,state:null},l.set(t,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,e))}}function xs(e){return'href="'+sn(e)+'"'}function Wo(e){return'link[rel="stylesheet"]['+e+"]"}function Tg(e){return x({},e,{"data-precedence":e.precedence,precedence:null})}function wS(e,t,l,s){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?s.loading=1:(t=e.createElement("link"),s.preload=t,t.addEventListener("load",function(){return s.loading|=1}),t.addEventListener("error",function(){return s.loading|=2}),xn(t,"link",l),Vt(t),e.head.appendChild(t))}function Ss(e){return'[src="'+sn(e)+'"]'}function Po(e){return"script[async]"+e}function Cg(e,t,l){if(t.count++,t.instance===null)switch(t.type){case"style":var s=e.querySelector('style[data-href~="'+sn(l.href)+'"]');if(s)return t.instance=s,Vt(s),s;var f=x({},l,{"data-href":l.href,"data-precedence":l.precedence,href:null,precedence:null});return s=(e.ownerDocument||e).createElement("style"),Vt(s),xn(s,"style",f),Ic(s,l.precedence,e),t.instance=s;case"stylesheet":f=xs(l.href);var h=e.querySelector(Wo(f));if(h)return t.state.loading|=4,t.instance=h,Vt(h),h;s=Tg(l),(f=Sr.get(f))&&Wh(s,f),h=(e.ownerDocument||e).createElement("link"),Vt(h);var _=h;return _._p=new Promise(function(O,M){_.onload=O,_.onerror=M}),xn(h,"link",s),t.state.loading|=4,Ic(h,l.precedence,e),t.instance=h;case"script":return h=Ss(l.src),(f=e.querySelector(Po(h)))?(t.instance=f,Vt(f),f):(s=l,(f=Sr.get(h))&&(s=x({},l),Ph(s,f)),e=e.ownerDocument||e,f=e.createElement("script"),Vt(f),xn(f,"link",s),e.head.appendChild(f),t.instance=f);case"void":return null;default:throw Error(a(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(s=t.instance,t.state.loading|=4,Ic(s,l.precedence,e));return t.instance}function Ic(e,t,l){for(var s=l.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=s.length?s[s.length-1]:null,h=f,_=0;_<s.length;_++){var O=s[_];if(O.dataset.precedence===t)h=O;else if(h!==f)break}h?h.parentNode.insertBefore(e,h.nextSibling):(t=l.nodeType===9?l.head:l,t.insertBefore(e,t.firstChild))}function Wh(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Ph(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var Gc=null;function Dg(e,t,l){if(Gc===null){var s=new Map,f=Gc=new Map;f.set(l,s)}else f=Gc,s=f.get(l),s||(s=new Map,f.set(l,s));if(s.has(e))return s;for(s.set(e,null),l=l.getElementsByTagName(e),f=0;f<l.length;f++){var h=l[f];if(!(h[Fn]||h[jt]||e==="link"&&h.getAttribute("rel")==="stylesheet")&&h.namespaceURI!=="http://www.w3.org/2000/svg"){var _=h.getAttribute(t)||"";_=e+_;var O=s.get(_);O?O.push(h):s.set(_,[h])}}return s}function jg(e,t,l){e=e.ownerDocument||e,e.head.insertBefore(l,t==="title"?e.querySelector("head > title"):null)}function _S(e,t,l){if(l===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function Ng(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function xS(e,t,l,s){if(l.type==="stylesheet"&&(typeof s.media!="string"||matchMedia(s.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var f=xs(s.href),h=t.querySelector(Wo(f));if(h){t=h._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Xc.bind(e),t.then(e,e)),l.state.loading|=4,l.instance=h,Vt(h);return}h=t.ownerDocument||t,s=Tg(s),(f=Sr.get(f))&&Wh(s,f),h=h.createElement("link"),Vt(h);var _=h;_._p=new Promise(function(O,M){_.onload=O,_.onerror=M}),xn(h,"link",s),l.instance=h}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(l,t),(t=l.state.preload)&&(l.state.loading&3)===0&&(e.count++,l=Xc.bind(e),t.addEventListener("load",l),t.addEventListener("error",l))}}var ep=0;function SS(e,t){return e.stylesheets&&e.count===0&&Zc(e,e.stylesheets),0<e.count||0<e.imgCount?function(l){var s=setTimeout(function(){if(e.stylesheets&&Zc(e,e.stylesheets),e.unsuspend){var h=e.unsuspend;e.unsuspend=null,h()}},6e4+t);0<e.imgBytes&&ep===0&&(ep=62500*rS());var f=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Zc(e,e.stylesheets),e.unsuspend)){var h=e.unsuspend;e.unsuspend=null,h()}},(e.imgBytes>ep?50:800)+t);return e.unsuspend=l,function(){e.unsuspend=null,clearTimeout(s),clearTimeout(f)}}:null}function Xc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Zc(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Qc=null;function Zc(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Qc=new Map,t.forEach(ES,e),Qc=null,Xc.call(e))}function ES(e,t){if(!(t.state.loading&4)){var l=Qc.get(e);if(l)var s=l.get(null);else{l=new Map,Qc.set(e,l);for(var f=e.querySelectorAll("link[data-precedence],style[data-precedence]"),h=0;h<f.length;h++){var _=f[h];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(l.set(_.dataset.precedence,_),s=_)}s&&l.set(null,s)}f=t.instance,_=f.getAttribute("data-precedence"),h=l.get(_)||s,h===s&&l.set(null,f),l.set(_,f),this.count++,s=Xc.bind(this),f.addEventListener("load",s),f.addEventListener("error",s),h?h.parentNode.insertBefore(f,h.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(f,e.firstChild)),t.state.loading|=4}}var eu={$$typeof:z,Provider:null,Consumer:null,_currentValue:se,_currentValue2:se,_threadCount:0};function AS(e,t,l,s,f,h,_,O,M){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Vr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vr(0),this.hiddenUpdates=Vr(null),this.identifierPrefix=s,this.onUncaughtError=f,this.onCaughtError=h,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=M,this.incompleteTransitions=new Map}function Ug(e,t,l,s,f,h,_,O,M,P,ae,ce){return e=new AS(e,t,l,_,M,P,ae,ce,O),t=1,h===!0&&(t|=24),h=er(3,null,null,t),e.current=h,h.stateNode=e,t=Ud(),t.refCount++,e.pooledCache=t,t.refCount++,h.memoizedState={element:s,isDehydrated:l,cache:t},Bd(h),e}function Mg(e){return e?(e=Yn,e):Yn}function Rg(e,t,l,s,f,h){f=Mg(f),s.context===null?s.context=f:s.pendingContext=f,s=yl(t),s.payload={element:l},h=h===void 0?null:h,h!==null&&(s.callback=h),l=ml(e,s,t),l!==null&&(Qn(l,e,t),No(l,e,t))}function zg(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var l=e.retryLane;e.retryLane=l!==0&&l<t?l:t}}function tp(e,t){zg(e,t),(e=e.alternate)&&zg(e,t)}function Bg(e){if(e.tag===13||e.tag===31){var t=Bt(e,67108864);t!==null&&Qn(t,e,67108864),tp(e,67108864)}}function Lg(e){if(e.tag===13||e.tag===31){var t=lr();t=ro(t);var l=Bt(e,t);l!==null&&Qn(l,e,t),tp(e,t)}}var $c=!0;function kS(e,t,l,s){var f=K.T;K.T=null;var h=re.p;try{re.p=2,np(e,t,l,s)}finally{re.p=h,K.T=f}}function OS(e,t,l,s){var f=K.T;K.T=null;var h=re.p;try{re.p=8,np(e,t,l,s)}finally{re.p=h,K.T=f}}function np(e,t,l,s){if($c){var f=rp(s);if(f===null)Yh(e,t,s,Jc,l),Hg(e,s);else if(CS(f,e,t,l,s))s.stopPropagation();else if(Hg(e,s),t&4&&-1<TS.indexOf(e)){for(;f!==null;){var h=St(f);if(h!==null)switch(h.tag){case 3:if(h=h.stateNode,h.current.memoizedState.isDehydrated){var _=jr(h.pendingLanes);if(_!==0){var O=h;for(O.pendingLanes|=2,O.entangledLanes|=2;_;){var M=1<<31-Te(_);O.entanglements[1]|=M,_&=~M}ti(h),(bt&6)===0&&(Nc=On()+500,Zo(0))}}break;case 31:case 13:O=Bt(h,2),O!==null&&Qn(O,h,2),Mc(),tp(h,2)}if(h=rp(s),h===null&&Yh(e,t,s,Jc,l),h===f)break;f=h}f!==null&&s.stopPropagation()}else Yh(e,t,s,null,l)}}function rp(e){return e=La(e),ip(e)}var Jc=null;function ip(e){if(Jc=null,e=Xr(e),e!==null){var t=u(e);if(t===null)e=null;else{var l=t.tag;if(l===13){if(e=p(t),e!==null)return e;e=null}else if(l===31){if(e=y(t),e!==null)return e;e=null}else if(l===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Jc=e,null}function qg(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Vl()){case Hr:return 2;case Kr:return 8;case Ji:case Il:return 32;case Na:return 268435456;default:return 32}default:return 32}}var lp=!1,Ol=null,Tl=null,Cl=null,tu=new Map,nu=new Map,Dl=[],TS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Hg(e,t){switch(e){case"focusin":case"focusout":Ol=null;break;case"dragenter":case"dragleave":Tl=null;break;case"mouseover":case"mouseout":Cl=null;break;case"pointerover":case"pointerout":tu.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":nu.delete(t.pointerId)}}function ru(e,t,l,s,f,h){return e===null||e.nativeEvent!==h?(e={blockedOn:t,domEventName:l,eventSystemFlags:s,nativeEvent:h,targetContainers:[f]},t!==null&&(t=St(t),t!==null&&Bg(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,f!==null&&t.indexOf(f)===-1&&t.push(f),e)}function CS(e,t,l,s,f){switch(t){case"focusin":return Ol=ru(Ol,e,t,l,s,f),!0;case"dragenter":return Tl=ru(Tl,e,t,l,s,f),!0;case"mouseover":return Cl=ru(Cl,e,t,l,s,f),!0;case"pointerover":var h=f.pointerId;return tu.set(h,ru(tu.get(h)||null,e,t,l,s,f)),!0;case"gotpointercapture":return h=f.pointerId,nu.set(h,ru(nu.get(h)||null,e,t,l,s,f)),!0}return!1}function Kg(e){var t=Xr(e.target);if(t!==null){var l=u(t);if(l!==null){if(t=l.tag,t===13){if(t=p(l),t!==null){e.blockedOn=t,Jl(e.priority,function(){Lg(l)});return}}else if(t===31){if(t=y(l),t!==null){e.blockedOn=t,Jl(e.priority,function(){Lg(l)});return}}else if(t===3&&l.stateNode.current.memoizedState.isDehydrated){e.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Fc(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var l=rp(e.nativeEvent);if(l===null){l=e.nativeEvent;var s=new l.constructor(l.type,l);pr=s,l.target.dispatchEvent(s),pr=null}else return t=St(l),t!==null&&Bg(t),e.blockedOn=l,!1;t.shift()}return!0}function Yg(e,t,l){Fc(e)&&l.delete(t)}function DS(){lp=!1,Ol!==null&&Fc(Ol)&&(Ol=null),Tl!==null&&Fc(Tl)&&(Tl=null),Cl!==null&&Fc(Cl)&&(Cl=null),tu.forEach(Yg),nu.forEach(Yg)}function Wc(e,t){e.blockedOn===t&&(e.blockedOn=null,lp||(lp=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,DS)))}var Pc=null;function Vg(e){Pc!==e&&(Pc=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Pc===e&&(Pc=null);for(var t=0;t<e.length;t+=3){var l=e[t],s=e[t+1],f=e[t+2];if(typeof s!="function"){if(ip(s||l)===null)continue;break}var h=St(l);h!==null&&(e.splice(t,3),t-=3,rh(h,{pending:!0,data:f,method:l.method,action:s},s,f))}}))}function Es(e){function t(M){return Wc(M,e)}Ol!==null&&Wc(Ol,e),Tl!==null&&Wc(Tl,e),Cl!==null&&Wc(Cl,e),tu.forEach(t),nu.forEach(t);for(var l=0;l<Dl.length;l++){var s=Dl[l];s.blockedOn===e&&(s.blockedOn=null)}for(;0<Dl.length&&(l=Dl[0],l.blockedOn===null);)Kg(l),l.blockedOn===null&&Dl.shift();if(l=(e.ownerDocument||e).$$reactFormReplay,l!=null)for(s=0;s<l.length;s+=3){var f=l[s],h=l[s+1],_=f[Yt]||null;if(typeof h=="function")_||Vg(l);else if(_){var O=null;if(h&&h.hasAttribute("formAction")){if(f=h,_=h[Yt]||null)O=_.formAction;else if(ip(f)!==null)continue}else O=_.action;typeof O=="function"?l[s+1]=O:(l.splice(s,3),s-=3),Vg(l)}}}function Ig(){function e(h){h.canIntercept&&h.info==="react-transition"&&h.intercept({handler:function(){return new Promise(function(_){return f=_})},focusReset:"manual",scroll:"manual"})}function t(){f!==null&&(f(),f=null),s||setTimeout(l,20)}function l(){if(!s&&!navigation.transition){var h=navigation.currentEntry;h&&h.url!=null&&navigation.navigate(h.url,{state:h.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var s=!1,f=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(l,100),function(){s=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),f!==null&&(f(),f=null)}}}function ap(e){this._internalRoot=e}ef.prototype.render=ap.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(a(409));var l=t.current,s=lr();Rg(l,s,e,t,null,null)},ef.prototype.unmount=ap.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Rg(e.current,2,null,e,null,null),Mc(),t[zn]=null}};function ef(e){this._internalRoot=e}ef.prototype.unstable_scheduleHydration=function(e){if(e){var t=$l();e={blockedOn:null,target:e,priority:t};for(var l=0;l<Dl.length&&t!==0&&t<Dl[l].priority;l++);Dl.splice(l,0,e),l===0&&Kg(e)}};var Gg=n.version;if(Gg!=="19.2.3")throw Error(a(527,Gg,"19.2.3"));re.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(a(188)):(e=Object.keys(e).join(","),Error(a(268,e)));return e=m(t),e=e!==null?b(e):null,e=e===null?null:e.stateNode,e};var jS={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:K,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var tf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!tf.isDisabled&&tf.supportsFiber)try{Yr=tf.inject(jS),mn=tf}catch{}}return lu.createRoot=function(e,t){if(!o(e))throw Error(a(299));var l=!1,s="",f=Wm,h=Pm,_=ev;return t!=null&&(t.unstable_strictMode===!0&&(l=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onUncaughtError!==void 0&&(f=t.onUncaughtError),t.onCaughtError!==void 0&&(h=t.onCaughtError),t.onRecoverableError!==void 0&&(_=t.onRecoverableError)),t=Ug(e,1,!1,null,null,l,s,null,f,h,_,Ig),e[zn]=t.current,Kh(e),new ap(t)},lu.hydrateRoot=function(e,t,l){if(!o(e))throw Error(a(299));var s=!1,f="",h=Wm,_=Pm,O=ev,M=null;return l!=null&&(l.unstable_strictMode===!0&&(s=!0),l.identifierPrefix!==void 0&&(f=l.identifierPrefix),l.onUncaughtError!==void 0&&(h=l.onUncaughtError),l.onCaughtError!==void 0&&(_=l.onCaughtError),l.onRecoverableError!==void 0&&(O=l.onRecoverableError),l.formState!==void 0&&(M=l.formState)),t=Ug(e,1,!0,t,l??null,s,f,M,h,_,O,Ig),t.context=Mg(null),l=t.current,s=lr(),s=ro(s),f=yl(s),f.callback=null,ml(l,f,s),l=s,t.current.lanes=l,dr(t,l),ti(t),e[zn]=t.current,Kh(e),new ef(t)},lu.version="19.2.3",lu}var tb;function IS(){if(tb)return op.exports;tb=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(n){console.error(n)}}return r(),op.exports=VS(),op.exports}var GS=IS(),Be=dy();const au=S0(Be);var df={exports:{}},XS=df.exports,nb;function QS(){return nb||(nb=1,(function(r,n){(function(i,a){r.exports=a()})(XS,function(){var i=function(c,d){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,w){v.__proto__=w}||function(v,w){for(var E in w)Object.prototype.hasOwnProperty.call(w,E)&&(v[E]=w[E])})(c,d)},a=function(){return(a=Object.assign||function(c){for(var d,v=1,w=arguments.length;v<w;v++)for(var E in d=arguments[v])Object.prototype.hasOwnProperty.call(d,E)&&(c[E]=d[E]);return c}).apply(this,arguments)};function o(c,d,v){for(var w,E=0,k=d.length;E<k;E++)!w&&E in d||((w=w||Array.prototype.slice.call(d,0,E))[E]=d[E]);return c.concat(w||Array.prototype.slice.call(d))}var u=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:RS,p=Object.keys,y=Array.isArray;function g(c,d){return typeof d!="object"||p(d).forEach(function(v){c[v]=d[v]}),c}typeof Promise>"u"||u.Promise||(u.Promise=Promise);var m=Object.getPrototypeOf,b={}.hasOwnProperty;function x(c,d){return b.call(c,d)}function S(c,d){typeof d=="function"&&(d=d(m(c))),(typeof Reflect>"u"?p:Reflect.ownKeys)(d).forEach(function(v){C(c,v,d[v])})}var A=Object.defineProperty;function C(c,d,v,w){A(c,d,g(v&&x(v,"get")&&typeof v.get=="function"?{get:v.get,set:v.set,configurable:!0}:{value:v,configurable:!0,writable:!0},w))}function U(c){return{from:function(d){return c.prototype=Object.create(d.prototype),C(c.prototype,"constructor",c),{extend:S.bind(null,c.prototype)}}}}var X=Object.getOwnPropertyDescriptor,ie=[].slice;function W(c,d,v){return ie.call(c,d,v)}function z(c,d){return d(c)}function fe(c){if(!c)throw new Error("Assertion Failed")}function xe(c){u.setImmediate?setImmediate(c):setTimeout(c,0)}function ye(c,d){if(typeof d=="string"&&x(c,d))return c[d];if(!d)return c;if(typeof d!="string"){for(var v=[],w=0,E=d.length;w<E;++w){var k=ye(c,d[w]);v.push(k)}return v}var D=d.indexOf(".");if(D!==-1){var j=c[d.substr(0,D)];return j==null?void 0:ye(j,d.substr(D+1))}}function pe(c,d,v){if(c&&d!==void 0&&!("isFrozen"in Object&&Object.isFrozen(c)))if(typeof d!="string"&&"length"in d){fe(typeof v!="string"&&"length"in v);for(var w=0,E=d.length;w<E;++w)pe(c,d[w],v[w])}else{var k,D,j=d.indexOf(".");j!==-1?(k=d.substr(0,j),(D=d.substr(j+1))===""?v===void 0?y(c)&&!isNaN(parseInt(k))?c.splice(k,1):delete c[k]:c[k]=v:pe(j=!(j=c[k])||!x(c,k)?c[k]={}:j,D,v)):v===void 0?y(c)&&!isNaN(parseInt(d))?c.splice(d,1):delete c[d]:c[d]=v}}function Le(c){var d,v={};for(d in c)x(c,d)&&(v[d]=c[d]);return v}var Re=[].concat;function Pe(c){return Re.apply([],c)}var Hr="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Pe([8,16,32,64].map(function(c){return["Int","Uint","Float"].map(function(d){return d+c+"Array"})}))).filter(function(c){return u[c]}),de=new Set(Hr.map(function(c){return u[c]})),ke=null;function qe(c){return ke=new WeakMap,c=(function d(v){if(!v||typeof v!="object")return v;var w=ke.get(v);if(w)return w;if(y(v)){w=[],ke.set(v,w);for(var E=0,k=v.length;E<k;++E)w.push(d(v[E]))}else if(de.has(v.constructor))w=v;else{var D,j=m(v);for(D in w=j===Object.prototype?{}:Object.create(j),ke.set(v,w),v)x(v,D)&&(w[D]=d(v[D]))}return w})(c),ke=null,c}var Xe={}.toString;function He(c){return Xe.call(c).slice(8,-1)}var K=typeof Symbol<"u"?Symbol.iterator:"@@iterator",re=typeof K=="symbol"?function(c){var d;return c!=null&&(d=c[K])&&d.apply(c)}:function(){return null};function se(c,d){return d=c.indexOf(d),0<=d&&c.splice(d,1),0<=d}var Oe={};function ze(c){var d,v,w,E;if(arguments.length===1){if(y(c))return c.slice();if(this===Oe&&typeof c=="string")return[c];if(E=re(c)){for(v=[];!(w=E.next()).done;)v.push(w.value);return v}if(c==null)return[c];if(typeof(d=c.length)!="number")return[c];for(v=new Array(d);d--;)v[d]=c[d];return v}for(d=arguments.length,v=new Array(d);d--;)v[d]=arguments[d];return v}var N=typeof Symbol<"u"?function(c){return c[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Vl=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Ln=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Vl),J={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function he(c,d){this.name=c,this.message=d}function Se(c,d){return c+". Errors: "+Object.keys(d).map(function(v){return d[v].toString()}).filter(function(v,w,E){return E.indexOf(v)===w}).join(`
`)}function Ne(c,d,v,w){this.failures=d,this.failedKeys=w,this.successCount=v,this.message=Se(c,d)}function Me(c,d){this.name="BulkError",this.failures=Object.keys(d).map(function(v){return d[v]}),this.failuresByPos=d,this.message=Se(c,this.failures)}U(he).from(Error).extend({toString:function(){return this.name+": "+this.message}}),U(Ne).from(he),U(Me).from(he);var Qe=Ln.reduce(function(c,d){return c[d]=d+"Error",c},{}),ut=he,ge=Ln.reduce(function(c,d){var v=d+"Error";function w(E,k){this.name=v,E?typeof E=="string"?(this.message="".concat(E).concat(k?`
 `+k:""),this.inner=k||null):typeof E=="object"&&(this.message="".concat(E.name," ").concat(E.message),this.inner=E):(this.message=J[d]||v,this.inner=null)}return U(w).from(ut),c[d]=w,c},{});ge.Syntax=SyntaxError,ge.Type=TypeError,ge.Range=RangeError;var vt=Vl.reduce(function(c,d){return c[d+"Error"]=ge[d],c},{}),Nt=Ln.reduce(function(c,d){return["Syntax","Type","Range"].indexOf(d)===-1&&(c[d+"Error"]=ge[d]),c},{});function Ve(){}function it(c){return c}function tt(c,d){return c==null||c===it?d:function(v){return d(c(v))}}function pt(c,d){return function(){c.apply(this,arguments),d.apply(this,arguments)}}function yn(c,d){return c===Ve?d:function(){var v=c.apply(this,arguments);v!==void 0&&(arguments[0]=v);var w=this.onsuccess,E=this.onerror;this.onsuccess=null,this.onerror=null;var k=d.apply(this,arguments);return w&&(this.onsuccess=this.onsuccess?pt(w,this.onsuccess):w),E&&(this.onerror=this.onerror?pt(E,this.onerror):E),k!==void 0?k:v}}function oi(c,d){return c===Ve?d:function(){c.apply(this,arguments);var v=this.onsuccess,w=this.onerror;this.onsuccess=this.onerror=null,d.apply(this,arguments),v&&(this.onsuccess=this.onsuccess?pt(v,this.onsuccess):v),w&&(this.onerror=this.onerror?pt(w,this.onerror):w)}}function Jn(c,d){return c===Ve?d:function(v){var w=c.apply(this,arguments);g(v,w);var E=this.onsuccess,k=this.onerror;return this.onsuccess=null,this.onerror=null,v=d.apply(this,arguments),E&&(this.onsuccess=this.onsuccess?pt(E,this.onsuccess):E),k&&(this.onerror=this.onerror?pt(k,this.onerror):k),w===void 0?v===void 0?void 0:v:g(w,v)}}function to(c,d){return c===Ve?d:function(){return d.apply(this,arguments)!==!1&&c.apply(this,arguments)}}function Kl(c,d){return c===Ve?d:function(){var v=c.apply(this,arguments);if(v&&typeof v.then=="function"){for(var w=this,E=arguments.length,k=new Array(E);E--;)k[E]=arguments[E];return v.then(function(){return d.apply(w,k)})}return d.apply(this,arguments)}}Nt.ModifyError=Ne,Nt.DexieError=he,Nt.BulkError=Me;var Hn=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Yu(c){Hn=c}var Yl={},On=100,Hr=typeof Promise>"u"?[]:(function(){var c=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[c,m(c),c];var d=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[d,m(d),c]})(),Vl=Hr[0],Ln=Hr[1],Hr=Hr[2],Ln=Ln&&Ln.then,Kr=Vl&&Vl.constructor,Ji=!!Hr,Il=function(c,d){Gl.push([c,d]),Ua&&(queueMicrotask(Vu),Ua=!1)},Na=!0,Ua=!0,ui=[],Yr=[],mn=it,vn={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Ve,pgp:!1,env:{},finalize:Ve},Te=vn,Gl=[],ci=0,Ma=[];function Ae(c){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var d=this._PSD=Te;if(typeof c!="function"){if(c!==Yl)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&jr(this,this._value))}this._state=null,this._value=null,++d.ref,(function v(w,E){try{E(function(k){if(w._state===null){if(k===w)throw new TypeError("A promise cannot be resolved with itself.");var D=w._lib&&Vr();k&&typeof k.then=="function"?v(w,function(j,B){k instanceof Ae?k._then(j,B):k.then(j,B)}):(w._state=!0,w._value=k,Ql(w)),D&&dr()}},jr.bind(null,w))}catch(k){jr(w,k)}})(this,c)}var Fi={get:function(){var c=Te,d=Jl;function v(w,E){var k=this,D=!c.global&&(c!==Te||d!==Jl),j=D&&!zn(),B=new Ae(function(L,I){fi(k,new Xl(Ra(w,c,D,j),Ra(E,c,D,j),L,I,c))});return this._consoleTask&&(B._consoleTask=this._consoleTask),B}return v.prototype=Yl,v},set:function(c){C(this,"then",c&&c.prototype===Yl?Fi:{get:function(){return c},set:Fi.set})}};function Xl(c,d,v,w,E){this.onFulfilled=typeof c=="function"?c:null,this.onRejected=typeof d=="function"?d:null,this.resolve=v,this.reject=w,this.psd=E}function jr(c,d){var v,w;Yr.push(d),c._state===null&&(v=c._lib&&Vr(),d=mn(d),c._state=!1,c._value=d,w=c,ui.some(function(E){return E._value===w._value})||ui.push(w),Ql(c),v&&dr())}function Ql(c){var d=c._listeners;c._listeners=[];for(var v=0,w=d.length;v<w;++v)fi(c,d[v]);var E=c._PSD;--E.ref||E.finalize(),ci===0&&(++ci,Il(function(){--ci==0&&no()},[]))}function fi(c,d){if(c._state!==null){var v=c._state?d.onFulfilled:d.onRejected;if(v===null)return(c._state?d.resolve:d.reject)(c._value);++d.psd.ref,++ci,Il(pd,[v,c,d])}else c._listeners.push(d)}function pd(c,d,v){try{var w,E=d._value;!d._state&&Yr.length&&(Yr=[]),w=Hn&&d._consoleTask?d._consoleTask.run(function(){return c(E)}):c(E),d._state||Yr.indexOf(E)!==-1||(function(k){for(var D=ui.length;D;)if(ui[--D]._value===k._value)return ui.splice(D,1)})(d),v.resolve(w)}catch(k){v.reject(k)}finally{--ci==0&&no(),--v.psd.ref||v.psd.finalize()}}function Vu(){Fn(vn,function(){Vr()&&dr()})}function Vr(){var c=Na;return Ua=Na=!1,c}function dr(){var c,d,v;do for(;0<Gl.length;)for(c=Gl,Gl=[],v=c.length,d=0;d<v;++d){var w=c[d];w[0].apply(null,w[1])}while(0<Gl.length);Ua=Na=!0}function no(){var c=ui;ui=[],c.forEach(function(w){w._PSD.onunhandled.call(null,w._value,w)});for(var d=Ma.slice(0),v=d.length;v;)d[--v]()}function Zl(c){return new Ae(Yl,!1,c)}function Tt(c,d){var v=Te;return function(){var w=Vr(),E=Te;try{return Gr(v,!0),c.apply(this,arguments)}catch(k){d&&d(k)}finally{Gr(E,!1),w&&dr()}}}S(Ae.prototype,{then:Fi,_then:function(c,d){fi(this,new Xl(null,null,c,d,Te))},catch:function(c){if(arguments.length===1)return this.then(null,c);var d=c,v=arguments[1];return typeof d=="function"?this.then(null,function(w){return(w instanceof d?v:Zl)(w)}):this.then(null,function(w){return(w&&w.name===d?v:Zl)(w)})},finally:function(c){return this.then(function(d){return Ae.resolve(c()).then(function(){return d})},function(d){return Ae.resolve(c()).then(function(){return Zl(d)})})},timeout:function(c,d){var v=this;return c<1/0?new Ae(function(w,E){var k=setTimeout(function(){return E(new ge.Timeout(d))},c);v.then(w,E).finally(clearTimeout.bind(null,k))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&C(Ae.prototype,Symbol.toStringTag,"Dexie.Promise"),vn.env=io(),S(Ae,{all:function(){var c=ze.apply(null,arguments).map(Pi);return new Ae(function(d,v){c.length===0&&d([]);var w=c.length;c.forEach(function(E,k){return Ae.resolve(E).then(function(D){c[k]=D,--w||d(c)},v)})})},resolve:function(c){return c instanceof Ae?c:c&&typeof c.then=="function"?new Ae(function(d,v){c.then(d,v)}):new Ae(Yl,!0,c)},reject:Zl,race:function(){var c=ze.apply(null,arguments).map(Pi);return new Ae(function(d,v){c.map(function(w){return Ae.resolve(w).then(d,v)})})},PSD:{get:function(){return Te},set:function(c){return Te=c}},totalEchoes:{get:function(){return Jl}},newPSD:jt,usePSD:Fn,scheduler:{get:function(){return Il},set:function(c){Il=c}},rejectionMapper:{get:function(){return mn},set:function(c){mn=c}},follow:function(c,d){return new Ae(function(v,w){return jt(function(E,k){var D=Te;D.unhandleds=[],D.onunhandled=k,D.finalize=pt(function(){var j,B=this;j=function(){B.unhandleds.length===0?E():k(B.unhandleds[0])},Ma.push(function L(){j(),Ma.splice(Ma.indexOf(L),1)}),++ci,Il(function(){--ci==0&&no()},[])},D.finalize),c()},d,v,w)})}}),Kr&&(Kr.allSettled&&C(Ae,"allSettled",function(){var c=ze.apply(null,arguments).map(Pi);return new Ae(function(d){c.length===0&&d([]);var v=c.length,w=new Array(v);c.forEach(function(E,k){return Ae.resolve(E).then(function(D){return w[k]={status:"fulfilled",value:D}},function(D){return w[k]={status:"rejected",reason:D}}).then(function(){return--v||d(w)})})})}),Kr.any&&typeof AggregateError<"u"&&C(Ae,"any",function(){var c=ze.apply(null,arguments).map(Pi);return new Ae(function(d,v){c.length===0&&v(new AggregateError([]));var w=c.length,E=new Array(w);c.forEach(function(k,D){return Ae.resolve(k).then(function(j){return d(j)},function(j){E[D]=j,--w||v(new AggregateError(E))})})})}),Kr.withResolvers&&(Ae.withResolvers=Kr.withResolvers));var Kt={awaits:0,echoes:0,id:0},ro=0,Wi=[],$l=0,Jl=0,Ir=0;function jt(c,d,v,w){var E=Te,k=Object.create(E);return k.parent=E,k.ref=0,k.global=!1,k.id=++Ir,vn.env,k.env=Ji?{Promise:Ae,PromiseProp:{value:Ae,configurable:!0,writable:!0},all:Ae.all,race:Ae.race,allSettled:Ae.allSettled,any:Ae.any,resolve:Ae.resolve,reject:Ae.reject}:{},d&&g(k,d),++E.ref,k.finalize=function(){--this.parent.ref||this.parent.finalize()},w=Fn(k,c,v,w),k.ref===0&&k.finalize(),w}function Yt(){return Kt.id||(Kt.id=++ro),++Kt.awaits,Kt.echoes+=On,Kt.id}function zn(){return!!Kt.awaits&&(--Kt.awaits==0&&(Kt.id=0),Kt.echoes=Kt.awaits*On,!0)}function Pi(c){return Kt.echoes&&c&&c.constructor===Kr?(Yt(),c.then(function(d){return zn(),d},function(d){return zn(),St(d)})):c}function yd(){var c=Wi[Wi.length-1];Wi.pop(),Gr(c,!1)}function Gr(c,d){var v,w=Te;(d?!Kt.echoes||$l++&&c===Te:!$l||--$l&&c===Te)||queueMicrotask(d?(function(E){++Jl,Kt.echoes&&--Kt.echoes!=0||(Kt.echoes=Kt.awaits=Kt.id=0),Wi.push(Te),Gr(E,!0)}).bind(null,c):yd),c!==Te&&(Te=c,w===vn&&(vn.env=io()),Ji&&(v=vn.env.Promise,d=c.env,(w.global||c.global)&&(Object.defineProperty(u,"Promise",d.PromiseProp),v.all=d.all,v.race=d.race,v.resolve=d.resolve,v.reject=d.reject,d.allSettled&&(v.allSettled=d.allSettled),d.any&&(v.any=d.any))))}function io(){var c=u.Promise;return Ji?{Promise:c,PromiseProp:Object.getOwnPropertyDescriptor(u,"Promise"),all:c.all,race:c.race,allSettled:c.allSettled,any:c.any,resolve:c.resolve,reject:c.reject}:{}}function Fn(c,d,v,w,E){var k=Te;try{return Gr(c,!0),d(v,w,E)}finally{Gr(k,!1)}}function Ra(c,d,v,w){return typeof c!="function"?c:function(){var E=Te;v&&Yt(),Gr(d,!0);try{return c.apply(this,arguments)}finally{Gr(E,!1),w&&queueMicrotask(zn)}}}function Xr(c){Promise===Kr&&Kt.echoes===0?$l===0?c():enqueueNativeMicroTask(c):setTimeout(c,0)}(""+Ln).indexOf("[native code]")===-1&&(Yt=zn=Ve);var St=Ae.reject,Wn="",Tn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Vt="String expected.",di=[],Fl="__dbnames",Nr="readonly",Qr="readwrite";function hi(c,d){return c?d?function(){return c.apply(this,arguments)&&d.apply(this,arguments)}:c:d}var lo={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Wl(c){return typeof c!="string"||/\./.test(c)?function(d){return d}:function(d){return d[c]===void 0&&c in d&&delete(d=qe(d))[c],d}}function Iu(){throw ge.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function nt(c,d){try{var v=Pl(c),w=Pl(d);if(v!==w)return v==="Array"?1:w==="Array"?-1:v==="binary"?1:w==="binary"?-1:v==="string"?1:w==="string"?-1:v==="Date"?1:w!=="Date"?NaN:-1;switch(v){case"number":case"Date":case"string":return d<c?1:c<d?-1:0;case"binary":return(function(E,k){for(var D=E.length,j=k.length,B=D<j?D:j,L=0;L<B;++L)if(E[L]!==k[L])return E[L]<k[L]?-1:1;return D===j?0:D<j?-1:1})(hr(c),hr(d));case"Array":return(function(E,k){for(var D=E.length,j=k.length,B=D<j?D:j,L=0;L<B;++L){var I=nt(E[L],k[L]);if(I!==0)return I}return D===j?0:D<j?-1:1})(c,d)}}catch{}return NaN}function Pl(c){var d=typeof c;return d!="object"?d:ArrayBuffer.isView(c)?"binary":(c=He(c),c==="ArrayBuffer"?"binary":c)}function hr(c){return c instanceof Uint8Array?c:ArrayBuffer.isView(c)?new Uint8Array(c.buffer,c.byteOffset,c.byteLength):new Uint8Array(c)}function gn(c,d,v){var w=c.schema.yProps;return w?(d&&0<v.numFailures&&(d=d.filter(function(E,k){return!v.failures[k]})),Promise.all(w.map(function(E){return E=E.updatesTable,d?c.db.table(E).where("k").anyOf(d).delete():c.db.table(E).clear()})).then(function(){return v})):v}var el=(Gu.prototype.execute=function(c){var d=this["@@propmod"];if(d.add!==void 0){var v=d.add;if(y(v))return o(o([],y(c)?c:[],!0),v).sort();if(typeof v=="number")return(Number(c)||0)+v;if(typeof v=="bigint")try{return BigInt(c)+v}catch{return BigInt(0)+v}throw new TypeError("Invalid term ".concat(v))}if(d.remove!==void 0){var w=d.remove;if(y(w))return y(c)?c.filter(function(E){return!w.includes(E)}).sort():[];if(typeof w=="number")return Number(c)-w;if(typeof w=="bigint")try{return BigInt(c)-w}catch{return BigInt(0)-w}throw new TypeError("Invalid subtrahend ".concat(w))}return v=(v=d.replacePrefix)===null||v===void 0?void 0:v[0],v&&typeof c=="string"&&c.startsWith(v)?d.replacePrefix[1]+c.substring(v.length):c},Gu);function Gu(c){this["@@propmod"]=c}function za(c,d){for(var v=p(d),w=v.length,E=!1,k=0;k<w;++k){var D=v[k],j=d[D],B=ye(c,D);j instanceof el?(pe(c,D,j.execute(B)),E=!0):B!==j&&(pe(c,D,j),E=!0)}return E}var ao=(gt.prototype._trans=function(c,d,v){var w=this._tx||Te.trans,E=this.name,k=Hn&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(c==="readonly"?"read":"write"," ").concat(this.name));function D(L,I,R){if(!R.schema[E])throw new ge.NotFound("Table "+E+" not part of transaction");return d(R.idbtrans,R)}var j=Vr();try{var B=w&&w.db._novip===this.db._novip?w===Te.trans?w._promise(c,D,v):jt(function(){return w._promise(c,D,v)},{trans:w,transless:Te.transless||Te}):(function L(I,R,Q,q){if(I.idbdb&&(I._state.openComplete||Te.letThrough||I._vip)){var Y=I._createTransaction(R,Q,I._dbSchema);try{Y.create(),I._state.PR1398_maxLoop=3}catch(V){return V.name===Qe.InvalidState&&I.isOpen()&&0<--I._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),I.close({disableAutoOpen:!1}),I.open().then(function(){return L(I,R,Q,q)})):St(V)}return Y._promise(R,function(V,G){return jt(function(){return Te.trans=Y,q(V,G,Y)})}).then(function(V){if(R==="readwrite")try{Y.idbtrans.commit()}catch{}return R==="readonly"?V:Y._completion.then(function(){return V})})}if(I._state.openComplete)return St(new ge.DatabaseClosed(I._state.dbOpenError));if(!I._state.isBeingOpened){if(!I._state.autoOpen)return St(new ge.DatabaseClosed);I.open().catch(Ve)}return I._state.dbReadyPromise.then(function(){return L(I,R,Q,q)})})(this.db,c,[this.name],D);return k&&(B._consoleTask=k,B=B.catch(function(L){return console.trace(L),St(L)})),B}finally{j&&dr()}},gt.prototype.get=function(c,d){var v=this;return c&&c.constructor===Object?this.where(c).first(d):c==null?St(new ge.Type("Invalid argument to Table.get()")):this._trans("readonly",function(w){return v.core.get({trans:w,key:c}).then(function(E){return v.hook.reading.fire(E)})}).then(d)},gt.prototype.where=function(c){if(typeof c=="string")return new this.db.WhereClause(this,c);if(y(c))return new this.db.WhereClause(this,"[".concat(c.join("+"),"]"));var d=p(c);if(d.length===1)return this.where(d[0]).equals(c[d[0]]);var v=this.schema.indexes.concat(this.schema.primKey).filter(function(j){if(j.compound&&d.every(function(L){return 0<=j.keyPath.indexOf(L)})){for(var B=0;B<d.length;++B)if(d.indexOf(j.keyPath[B])===-1)return!1;return!0}return!1}).sort(function(j,B){return j.keyPath.length-B.keyPath.length})[0];if(v&&this.db._maxKey!==Wn){var k=v.keyPath.slice(0,d.length);return this.where(k).equals(k.map(function(B){return c[B]}))}!v&&Hn&&console.warn("The query ".concat(JSON.stringify(c)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(d.join("+"),"]"));var w=this.schema.idxByName;function E(j,B){return nt(j,B)===0}var D=d.reduce(function(R,B){var L=R[0],I=R[1],R=w[B],Q=c[B];return[L||R,L||!R?hi(I,R&&R.multi?function(q){return q=ye(q,B),y(q)&&q.some(function(Y){return E(Q,Y)})}:function(q){return E(Q,ye(q,B))}):I]},[null,null]),k=D[0],D=D[1];return k?this.where(k.name).equals(c[k.keyPath]).filter(D):v?this.filter(D):this.where(d).equals("")},gt.prototype.filter=function(c){return this.toCollection().and(c)},gt.prototype.count=function(c){return this.toCollection().count(c)},gt.prototype.offset=function(c){return this.toCollection().offset(c)},gt.prototype.limit=function(c){return this.toCollection().limit(c)},gt.prototype.each=function(c){return this.toCollection().each(c)},gt.prototype.toArray=function(c){return this.toCollection().toArray(c)},gt.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},gt.prototype.orderBy=function(c){return new this.db.Collection(new this.db.WhereClause(this,y(c)?"[".concat(c.join("+"),"]"):c))},gt.prototype.reverse=function(){return this.toCollection().reverse()},gt.prototype.mapToClass=function(c){var d,v=this.db,w=this.name;function E(){return d!==null&&d.apply(this,arguments)||this}(this.schema.mappedClass=c).prototype instanceof Iu&&((function(B,L){if(typeof L!="function"&&L!==null)throw new TypeError("Class extends value "+String(L)+" is not a constructor or null");function I(){this.constructor=B}i(B,L),B.prototype=L===null?Object.create(L):(I.prototype=L.prototype,new I)})(E,d=c),Object.defineProperty(E.prototype,"db",{get:function(){return v},enumerable:!1,configurable:!0}),E.prototype.table=function(){return w},c=E);for(var k=new Set,D=c.prototype;D;D=m(D))Object.getOwnPropertyNames(D).forEach(function(B){return k.add(B)});function j(B){if(!B)return B;var L,I=Object.create(c.prototype);for(L in B)if(!k.has(L))try{I[L]=B[L]}catch{}return I}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=j,this.hook("reading",j),c},gt.prototype.defineClass=function(){return this.mapToClass(function(c){g(this,c)})},gt.prototype.add=function(c,d){var v=this,w=this.schema.primKey,E=w.auto,k=w.keyPath,D=c;return k&&E&&(D=Wl(k)(c)),this._trans("readwrite",function(j){return v.core.mutate({trans:j,type:"add",keys:d!=null?[d]:null,values:[D]})}).then(function(j){return j.numFailures?Ae.reject(j.failures[0]):j.lastResult}).then(function(j){if(k)try{pe(c,k,j)}catch{}return j})},gt.prototype.upsert=function(c,d){var v=this,w=this.schema.primKey.keyPath;return this._trans("readwrite",function(E){return v.core.get({trans:E,key:c}).then(function(k){var D=k??{};return za(D,d),w&&pe(D,w,c),v.core.mutate({trans:E,type:"put",values:[D],keys:[c],upsert:!0,updates:{keys:[c],changeSpecs:[d]}}).then(function(j){return j.numFailures?Ae.reject(j.failures[0]):!!k})})})},gt.prototype.update=function(c,d){return typeof c!="object"||y(c)?this.where(":id").equals(c).modify(d):(c=ye(c,this.schema.primKey.keyPath),c===void 0?St(new ge.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(c).modify(d))},gt.prototype.put=function(c,d){var v=this,w=this.schema.primKey,E=w.auto,k=w.keyPath,D=c;return k&&E&&(D=Wl(k)(c)),this._trans("readwrite",function(j){return v.core.mutate({trans:j,type:"put",values:[D],keys:d!=null?[d]:null})}).then(function(j){return j.numFailures?Ae.reject(j.failures[0]):j.lastResult}).then(function(j){if(k)try{pe(c,k,j)}catch{}return j})},gt.prototype.delete=function(c){var d=this;return this._trans("readwrite",function(v){return d.core.mutate({trans:v,type:"delete",keys:[c]}).then(function(w){return gn(d,[c],w)}).then(function(w){return w.numFailures?Ae.reject(w.failures[0]):void 0})})},gt.prototype.clear=function(){var c=this;return this._trans("readwrite",function(d){return c.core.mutate({trans:d,type:"deleteRange",range:lo}).then(function(v){return gn(c,null,v)})}).then(function(d){return d.numFailures?Ae.reject(d.failures[0]):void 0})},gt.prototype.bulkGet=function(c){var d=this;return this._trans("readonly",function(v){return d.core.getMany({keys:c,trans:v}).then(function(w){return w.map(function(E){return d.hook.reading.fire(E)})})})},gt.prototype.bulkAdd=function(c,d,v){var w=this,E=Array.isArray(d)?d:void 0,k=(v=v||(E?void 0:d))?v.allKeys:void 0;return this._trans("readwrite",function(D){var L=w.schema.primKey,j=L.auto,L=L.keyPath;if(L&&E)throw new ge.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(E&&E.length!==c.length)throw new ge.InvalidArgument("Arguments objects and keys must have the same length");var B=c.length,L=L&&j?c.map(Wl(L)):c;return w.core.mutate({trans:D,type:"add",keys:E,values:L,wantResults:k}).then(function(Y){var R=Y.numFailures,Q=Y.results,q=Y.lastResult,Y=Y.failures;if(R===0)return k?Q:q;throw new Me("".concat(w.name,".bulkAdd(): ").concat(R," of ").concat(B," operations failed"),Y)})})},gt.prototype.bulkPut=function(c,d,v){var w=this,E=Array.isArray(d)?d:void 0,k=(v=v||(E?void 0:d))?v.allKeys:void 0;return this._trans("readwrite",function(D){var L=w.schema.primKey,j=L.auto,L=L.keyPath;if(L&&E)throw new ge.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(E&&E.length!==c.length)throw new ge.InvalidArgument("Arguments objects and keys must have the same length");var B=c.length,L=L&&j?c.map(Wl(L)):c;return w.core.mutate({trans:D,type:"put",keys:E,values:L,wantResults:k}).then(function(Y){var R=Y.numFailures,Q=Y.results,q=Y.lastResult,Y=Y.failures;if(R===0)return k?Q:q;throw new Me("".concat(w.name,".bulkPut(): ").concat(R," of ").concat(B," operations failed"),Y)})})},gt.prototype.bulkUpdate=function(c){var d=this,v=this.core,w=c.map(function(D){return D.key}),E=c.map(function(D){return D.changes}),k=[];return this._trans("readwrite",function(D){return v.getMany({trans:D,keys:w,cache:"clone"}).then(function(j){var B=[],L=[];c.forEach(function(R,Q){var q=R.key,Y=R.changes,V=j[Q];if(V){for(var G=0,$=Object.keys(Y);G<$.length;G++){var ee=$[G],le=Y[ee];if(ee===d.schema.primKey.keyPath){if(nt(le,q)!==0)throw new ge.Constraint("Cannot update primary key in bulkUpdate()")}else pe(V,ee,le)}k.push(Q),B.push(q),L.push(V)}});var I=B.length;return v.mutate({trans:D,type:"put",keys:B,values:L,updates:{keys:w,changeSpecs:E}}).then(function(R){var Q=R.numFailures,q=R.failures;if(Q===0)return I;for(var Y=0,V=Object.keys(q);Y<V.length;Y++){var G,$=V[Y],ee=k[Number($)];ee!=null&&(G=q[$],delete q[$],q[ee]=G)}throw new Me("".concat(d.name,".bulkUpdate(): ").concat(Q," of ").concat(I," operations failed"),q)})})})},gt.prototype.bulkDelete=function(c){var d=this,v=c.length;return this._trans("readwrite",function(w){return d.core.mutate({trans:w,type:"delete",keys:c}).then(function(E){return gn(d,c,E)})}).then(function(D){var E=D.numFailures,k=D.lastResult,D=D.failures;if(E===0)return k;throw new Me("".concat(d.name,".bulkDelete(): ").concat(E," of ").concat(v," operations failed"),D)})},gt);function gt(){}function ea(c){function d(D,j){if(j){for(var B=arguments.length,L=new Array(B-1);--B;)L[B-1]=arguments[B];return v[D].subscribe.apply(null,L),c}if(typeof D=="string")return v[D]}var v={};d.addEventType=k;for(var w=1,E=arguments.length;w<E;++w)k(arguments[w]);return d;function k(D,j,B){if(typeof D!="object"){var L;j=j||to;var I={subscribers:[],fire:B=B||Ve,subscribe:function(R){I.subscribers.indexOf(R)===-1&&(I.subscribers.push(R),I.fire=j(I.fire,R))},unsubscribe:function(R){I.subscribers=I.subscribers.filter(function(Q){return Q!==R}),I.fire=I.subscribers.reduce(j,B)}};return v[D]=d[D]=I}p(L=D).forEach(function(R){var Q=L[R];if(y(Q))k(R,L[R][0],L[R][1]);else{if(Q!=="asap")throw new ge.InvalidArgument("Invalid event config");var q=k(R,it,function(){for(var Y=arguments.length,V=new Array(Y);Y--;)V[Y]=arguments[Y];q.subscribers.forEach(function(G){xe(function(){G.apply(null,V)})})})}})}}function sn(c,d){return U(d).from({prototype:c}),d}function Zr(c,d){return!(c.filter||c.algorithm||c.or)&&(d?c.justLimit:!c.replayFilter)}function Ba(c,d){c.filter=hi(c.filter,d)}function ta(c,d,v){var w=c.replayFilter;c.replayFilter=w?function(){return hi(w(),d())}:d,c.justLimit=v&&!w}function Ur(c,d){if(c.isPrimKey)return d.primaryKey;var v=d.getIndexByKeyPath(c.index);if(!v)throw new ge.Schema("KeyPath "+c.index+" on object store "+d.name+" is not indexed");return v}function so(c,d,v){var w=Ur(c,d.schema);return d.openCursor({trans:v,values:!c.keysOnly,reverse:c.dir==="prev",unique:!!c.unique,query:{index:w,range:c.range}})}function na(c,d,v,w){var E=c.replayFilter?hi(c.filter,c.replayFilter()):c.filter;if(c.or){var k={},D=function(j,B,L){var I,R;E&&!E(B,L,function(Q){return B.stop(Q)},function(Q){return B.fail(Q)})||((R=""+(I=B.primaryKey))=="[object ArrayBuffer]"&&(R=""+new Uint8Array(I)),x(k,R)||(k[R]=!0,d(j,B,L)))};return Promise.all([c.or._iterate(D,v),pi(so(c,w,v),c.algorithm,D,!c.keysOnly&&c.valueMapper)])}return pi(so(c,w,v),hi(c.algorithm,E),d,!c.keysOnly&&c.valueMapper)}function pi(c,d,v,w){var E=Tt(w?function(k,D,j){return v(w(k),D,j)}:v);return c.then(function(k){if(k)return k.start(function(){var D=function(){return k.continue()};d&&!d(k,function(j){return D=j},function(j){k.stop(j),D=Ve},function(j){k.fail(j),D=Ve})||E(k.value,k,function(j){return D=j}),D()})})}var md=(ct.prototype._read=function(c,d){var v=this._ctx;return v.error?v.table._trans(null,St.bind(null,v.error)):v.table._trans("readonly",c).then(d)},ct.prototype._write=function(c){var d=this._ctx;return d.error?d.table._trans(null,St.bind(null,d.error)):d.table._trans("readwrite",c,"locked")},ct.prototype._addAlgorithm=function(c){var d=this._ctx;d.algorithm=hi(d.algorithm,c)},ct.prototype._iterate=function(c,d){return na(this._ctx,c,d,this._ctx.table.core)},ct.prototype.clone=function(c){var d=Object.create(this.constructor.prototype),v=Object.create(this._ctx);return c&&g(v,c),d._ctx=v,d},ct.prototype.raw=function(){return this._ctx.valueMapper=null,this},ct.prototype.each=function(c){var d=this._ctx;return this._read(function(v){return na(d,c,v,d.table.core)})},ct.prototype.count=function(c){var d=this;return this._read(function(v){var w=d._ctx,E=w.table.core;if(Zr(w,!0))return E.count({trans:v,query:{index:Ur(w,E.schema),range:w.range}}).then(function(D){return Math.min(D,w.limit)});var k=0;return na(w,function(){return++k,!1},v,E).then(function(){return k})}).then(c)},ct.prototype.sortBy=function(c,d){var v=c.split(".").reverse(),w=v[0],E=v.length-1;function k(B,L){return L?k(B[v[L]],L-1):B[w]}var D=this._ctx.dir==="next"?1:-1;function j(B,L){return nt(k(B,E),k(L,E))*D}return this.toArray(function(B){return B.sort(j)}).then(d)},ct.prototype.toArray=function(c){var d=this;return this._read(function(v){var w=d._ctx;if(w.dir==="next"&&Zr(w,!0)&&0<w.limit){var E=w.valueMapper,k=Ur(w,w.table.core.schema);return w.table.core.query({trans:v,limit:w.limit,values:!0,query:{index:k,range:w.range}}).then(function(j){return j=j.result,E?j.map(E):j})}var D=[];return na(w,function(j){return D.push(j)},v,w.table.core).then(function(){return D})},c)},ct.prototype.offset=function(c){var d=this._ctx;return c<=0||(d.offset+=c,Zr(d)?ta(d,function(){var v=c;return function(w,E){return v===0||(v===1?--v:E(function(){w.advance(v),v=0}),!1)}}):ta(d,function(){var v=c;return function(){return--v<0}})),this},ct.prototype.limit=function(c){return this._ctx.limit=Math.min(this._ctx.limit,c),ta(this._ctx,function(){var d=c;return function(v,w,E){return--d<=0&&w(E),0<=d}},!0),this},ct.prototype.until=function(c,d){return Ba(this._ctx,function(v,w,E){return!c(v.value)||(w(E),d)}),this},ct.prototype.first=function(c){return this.limit(1).toArray(function(d){return d[0]}).then(c)},ct.prototype.last=function(c){return this.reverse().first(c)},ct.prototype.filter=function(c){var d;return Ba(this._ctx,function(v){return c(v.value)}),(d=this._ctx).isMatch=hi(d.isMatch,c),this},ct.prototype.and=function(c){return this.filter(c)},ct.prototype.or=function(c){return new this.db.WhereClause(this._ctx.table,c,this)},ct.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},ct.prototype.desc=function(){return this.reverse()},ct.prototype.eachKey=function(c){var d=this._ctx;return d.keysOnly=!d.isMatch,this.each(function(v,w){c(w.key,w)})},ct.prototype.eachUniqueKey=function(c){return this._ctx.unique="unique",this.eachKey(c)},ct.prototype.eachPrimaryKey=function(c){var d=this._ctx;return d.keysOnly=!d.isMatch,this.each(function(v,w){c(w.primaryKey,w)})},ct.prototype.keys=function(c){var d=this._ctx;d.keysOnly=!d.isMatch;var v=[];return this.each(function(w,E){v.push(E.key)}).then(function(){return v}).then(c)},ct.prototype.primaryKeys=function(c){var d=this._ctx;if(d.dir==="next"&&Zr(d,!0)&&0<d.limit)return this._read(function(w){var E=Ur(d,d.table.core.schema);return d.table.core.query({trans:w,values:!1,limit:d.limit,query:{index:E,range:d.range}})}).then(function(w){return w.result}).then(c);d.keysOnly=!d.isMatch;var v=[];return this.each(function(w,E){v.push(E.primaryKey)}).then(function(){return v}).then(c)},ct.prototype.uniqueKeys=function(c){return this._ctx.unique="unique",this.keys(c)},ct.prototype.firstKey=function(c){return this.limit(1).keys(function(d){return d[0]}).then(c)},ct.prototype.lastKey=function(c){return this.reverse().firstKey(c)},ct.prototype.distinct=function(){var c=this._ctx,c=c.index&&c.table.schema.idxByName[c.index];if(!c||!c.multi)return this;var d={};return Ba(this._ctx,function(E){var w=E.primaryKey.toString(),E=x(d,w);return d[w]=!0,!E}),this},ct.prototype.modify=function(c){var d=this,v=this._ctx;return this._write(function(w){var E=typeof c=="function"?c:function(V){return za(V,c)},k=v.table.core,L=k.schema.primaryKey,D=L.outbound,j=L.extractKey,B=200,L=d.db._options.modifyChunkSize;L&&(B=typeof L=="object"?L[k.name]||L["*"]||200:L);function I(V,ee){var $=ee.failures,ee=ee.numFailures;Q+=V-ee;for(var le=0,ue=p($);le<ue.length;le++){var be=ue[le];R.push($[be])}}var R=[],Q=0,q=[],Y=c===oo;return d.clone().primaryKeys().then(function(V){function G(ee){var le=Math.min(B,V.length-ee),ue=V.slice(ee,ee+le);return(Y?Promise.resolve([]):k.getMany({trans:w,keys:ue,cache:"immutable"})).then(function(be){var Ee=[],me=[],we=D?[]:null,_e=Y?ue:[];if(!Y)for(var ve=0;ve<le;++ve){var Ce=be[ve],Ke={value:qe(Ce),primKey:V[ee+ve]};E.call(Ke,Ke.value,Ke)!==!1&&(Ke.value==null?_e.push(V[ee+ve]):D||nt(j(Ce),j(Ke.value))===0?(me.push(Ke.value),D&&we.push(V[ee+ve])):(_e.push(V[ee+ve]),Ee.push(Ke.value)))}return Promise.resolve(0<Ee.length&&k.mutate({trans:w,type:"add",values:Ee}).then(function(Ze){for(var Je in Ze.failures)_e.splice(parseInt(Je),1);I(Ee.length,Ze)})).then(function(){return(0<me.length||$&&typeof c=="object")&&k.mutate({trans:w,type:"put",keys:we,values:me,criteria:$,changeSpec:typeof c!="function"&&c,isAdditionalChunk:0<ee}).then(function(Ze){return I(me.length,Ze)})}).then(function(){return(0<_e.length||$&&Y)&&k.mutate({trans:w,type:"delete",keys:_e,criteria:$,isAdditionalChunk:0<ee}).then(function(Ze){return gn(v.table,_e,Ze)}).then(function(Ze){return I(_e.length,Ze)})}).then(function(){return V.length>ee+le&&G(ee+B)})})}var $=Zr(v)&&v.limit===1/0&&(typeof c!="function"||Y)&&{index:v.index,range:v.range};return G(0).then(function(){if(0<R.length)throw new Ne("Error modifying one or more objects",R,Q,q);return V.length})})})},ct.prototype.delete=function(){var c=this._ctx,d=c.range;return!Zr(c)||c.table.schema.yProps||!c.isPrimKey&&d.type!==3?this.modify(oo):this._write(function(v){var w=c.table.core.schema.primaryKey,E=d;return c.table.core.count({trans:v,query:{index:w,range:E}}).then(function(k){return c.table.core.mutate({trans:v,type:"deleteRange",range:E}).then(function(B){var j=B.failures,B=B.numFailures;if(B)throw new Ne("Could not delete some values",Object.keys(j).map(function(L){return j[L]}),k-B);return k-B})})})},ct);function ct(){}var oo=function(c,d){return d.value=null};function uo(c,d){return c<d?-1:c===d?0:1}function vd(c,d){return d<c?-1:c===d?0:1}function Bn(c,d,v){return c=c instanceof yi?new c.Collection(c):c,c._ctx.error=new(v||TypeError)(d),c}function Mr(c){return new c.Collection(c,function(){return La("")}).limit(0)}function Kn(c,d,v,w){var E,k,D,j,B,L,I,R=v.length;if(!v.every(function(Y){return typeof Y=="string"}))return Bn(c,Vt);function Q(Y){E=Y==="next"?function(G){return G.toUpperCase()}:function(G){return G.toLowerCase()},k=Y==="next"?function(G){return G.toLowerCase()}:function(G){return G.toUpperCase()},D=Y==="next"?uo:vd;var V=v.map(function(G){return{lower:k(G),upper:E(G)}}).sort(function(G,$){return D(G.lower,$.lower)});j=V.map(function(G){return G.upper}),B=V.map(function(G){return G.lower}),I=(L=Y)==="next"?"":w}Q("next"),c=new c.Collection(c,function(){return pr(j[0],B[R-1]+w)}),c._ondirectionchange=function(Y){Q(Y)};var q=0;return c._addAlgorithm(function(Y,V,G){var $=Y.key;if(typeof $!="string")return!1;var ee=k($);if(d(ee,B,q))return!0;for(var le=null,ue=q;ue<R;++ue){var be=(function(Ee,me,we,_e,ve,Ce){for(var Ke=Math.min(Ee.length,_e.length),Ze=-1,Je=0;Je<Ke;++Je){var cn=me[Je];if(cn!==_e[Je])return ve(Ee[Je],we[Je])<0?Ee.substr(0,Je)+we[Je]+we.substr(Je+1):ve(Ee[Je],_e[Je])<0?Ee.substr(0,Je)+_e[Je]+we.substr(Je+1):0<=Ze?Ee.substr(0,Ze)+me[Ze]+we.substr(Ze+1):null;ve(Ee[Je],cn)<0&&(Ze=Je)}return Ke<_e.length&&Ce==="next"?Ee+we.substr(Ee.length):Ke<Ee.length&&Ce==="prev"?Ee.substr(0,we.length):Ze<0?null:Ee.substr(0,Ze)+_e[Ze]+we.substr(Ze+1)})($,ee,j[ue],B[ue],D,L);be===null&&le===null?q=ue+1:(le===null||0<D(le,be))&&(le=be)}return V(le!==null?function(){Y.continue(le+I)}:G),!1}),c}function pr(c,d,v,w){return{type:2,lower:c,upper:d,lowerOpen:v,upperOpen:w}}function La(c){return{type:1,lower:c,upper:c}}var yi=(Object.defineProperty(Ut.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Ut.prototype.between=function(c,d,v,w){v=v!==!1,w=w===!0;try{return 0<this._cmp(c,d)||this._cmp(c,d)===0&&(v||w)&&(!v||!w)?Mr(this):new this.Collection(this,function(){return pr(c,d,!v,!w)})}catch{return Bn(this,Tn)}},Ut.prototype.equals=function(c){return c==null?Bn(this,Tn):new this.Collection(this,function(){return La(c)})},Ut.prototype.above=function(c){return c==null?Bn(this,Tn):new this.Collection(this,function(){return pr(c,void 0,!0)})},Ut.prototype.aboveOrEqual=function(c){return c==null?Bn(this,Tn):new this.Collection(this,function(){return pr(c,void 0,!1)})},Ut.prototype.below=function(c){return c==null?Bn(this,Tn):new this.Collection(this,function(){return pr(void 0,c,!1,!0)})},Ut.prototype.belowOrEqual=function(c){return c==null?Bn(this,Tn):new this.Collection(this,function(){return pr(void 0,c)})},Ut.prototype.startsWith=function(c){return typeof c!="string"?Bn(this,Vt):this.between(c,c+Wn,!0,!0)},Ut.prototype.startsWithIgnoreCase=function(c){return c===""?this.startsWith(c):Kn(this,function(d,v){return d.indexOf(v[0])===0},[c],Wn)},Ut.prototype.equalsIgnoreCase=function(c){return Kn(this,function(d,v){return d===v[0]},[c],"")},Ut.prototype.anyOfIgnoreCase=function(){var c=ze.apply(Oe,arguments);return c.length===0?Mr(this):Kn(this,function(d,v){return v.indexOf(d)!==-1},c,"")},Ut.prototype.startsWithAnyOfIgnoreCase=function(){var c=ze.apply(Oe,arguments);return c.length===0?Mr(this):Kn(this,function(d,v){return v.some(function(w){return d.indexOf(w)===0})},c,Wn)},Ut.prototype.anyOf=function(){var c=this,d=ze.apply(Oe,arguments),v=this._cmp;try{d.sort(v)}catch{return Bn(this,Tn)}if(d.length===0)return Mr(this);var w=new this.Collection(this,function(){return pr(d[0],d[d.length-1])});w._ondirectionchange=function(k){v=k==="next"?c._ascending:c._descending,d.sort(v)};var E=0;return w._addAlgorithm(function(k,D,j){for(var B=k.key;0<v(B,d[E]);)if(++E===d.length)return D(j),!1;return v(B,d[E])===0||(D(function(){k.continue(d[E])}),!1)}),w},Ut.prototype.notEqual=function(c){return this.inAnyRange([[-1/0,c],[c,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Ut.prototype.noneOf=function(){var c=ze.apply(Oe,arguments);if(c.length===0)return new this.Collection(this);try{c.sort(this._ascending)}catch{return Bn(this,Tn)}var d=c.reduce(function(v,w){return v?v.concat([[v[v.length-1][1],w]]):[[-1/0,w]]},null);return d.push([c[c.length-1],this.db._maxKey]),this.inAnyRange(d,{includeLowers:!1,includeUppers:!1})},Ut.prototype.inAnyRange=function($,d){var v=this,w=this._cmp,E=this._ascending,k=this._descending,D=this._min,j=this._max;if($.length===0)return Mr(this);if(!$.every(function(ee){return ee[0]!==void 0&&ee[1]!==void 0&&E(ee[0],ee[1])<=0}))return Bn(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",ge.InvalidArgument);var B=!d||d.includeLowers!==!1,L=d&&d.includeUppers===!0,I,R=E;function Q(ee,le){return R(ee[0],le[0])}try{(I=$.reduce(function(ee,le){for(var ue=0,be=ee.length;ue<be;++ue){var Ee=ee[ue];if(w(le[0],Ee[1])<0&&0<w(le[1],Ee[0])){Ee[0]=D(Ee[0],le[0]),Ee[1]=j(Ee[1],le[1]);break}}return ue===be&&ee.push(le),ee},[])).sort(Q)}catch{return Bn(this,Tn)}var q=0,Y=L?function(ee){return 0<E(ee,I[q][1])}:function(ee){return 0<=E(ee,I[q][1])},V=B?function(ee){return 0<k(ee,I[q][0])}:function(ee){return 0<=k(ee,I[q][0])},G=Y,$=new this.Collection(this,function(){return pr(I[0][0],I[I.length-1][1],!B,!L)});return $._ondirectionchange=function(ee){R=ee==="next"?(G=Y,E):(G=V,k),I.sort(Q)},$._addAlgorithm(function(ee,le,ue){for(var be,Ee=ee.key;G(Ee);)if(++q===I.length)return le(ue),!1;return!Y(be=Ee)&&!V(be)||(v._cmp(Ee,I[q][1])===0||v._cmp(Ee,I[q][0])===0||le(function(){R===E?ee.continue(I[q][0]):ee.continue(I[q][1])}),!1)}),$},Ut.prototype.startsWithAnyOf=function(){var c=ze.apply(Oe,arguments);return c.every(function(d){return typeof d=="string"})?c.length===0?Mr(this):this.inAnyRange(c.map(function(d){return[d,d+Wn]})):Bn(this,"startsWithAnyOf() only works with strings")},Ut);function Ut(){}function Pn(c){return Tt(function(d){return mi(d),c(d.target.error),!1})}function mi(c){c.stopPropagation&&c.stopPropagation(),c.preventDefault&&c.preventDefault()}var tl="storagemutated",vi="x-storagemutated-1",on=ea(null,tl),co=(Cn.prototype._lock=function(){return fe(!Te.global),++this._reculock,this._reculock!==1||Te.global||(Te.lockOwnerFor=this),this},Cn.prototype._unlock=function(){if(fe(!Te.global),--this._reculock==0)for(Te.global||(Te.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var c=this._blockedFuncs.shift();try{Fn(c[1],c[0])}catch{}}return this},Cn.prototype._locked=function(){return this._reculock&&Te.lockOwnerFor!==this},Cn.prototype.create=function(c){var d=this;if(!this.mode)return this;var v=this.db.idbdb,w=this.db._state.dbOpenError;if(fe(!this.idbtrans),!c&&!v)switch(w&&w.name){case"DatabaseClosedError":throw new ge.DatabaseClosed(w);case"MissingAPIError":throw new ge.MissingAPI(w.message,w);default:throw new ge.OpenFailed(w)}if(!this.active)throw new ge.TransactionInactive;return fe(this._completion._state===null),(c=this.idbtrans=c||(this.db.core||v).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Tt(function(E){mi(E),d._reject(c.error)}),c.onabort=Tt(function(E){mi(E),d.active&&d._reject(new ge.Abort(c.error)),d.active=!1,d.on("abort").fire(E)}),c.oncomplete=Tt(function(){d.active=!1,d._resolve(),"mutatedParts"in c&&on.storagemutated.fire(c.mutatedParts)}),this},Cn.prototype._promise=function(c,d,v){var w=this;if(c==="readwrite"&&this.mode!=="readwrite")return St(new ge.ReadOnly("Transaction is readonly"));if(!this.active)return St(new ge.TransactionInactive);if(this._locked())return new Ae(function(k,D){w._blockedFuncs.push([function(){w._promise(c,d,v).then(k,D)},Te])});if(v)return jt(function(){var k=new Ae(function(D,j){w._lock();var B=d(D,j,w);B&&B.then&&B.then(D,j)});return k.finally(function(){return w._unlock()}),k._lib=!0,k});var E=new Ae(function(k,D){var j=d(k,D,w);j&&j.then&&j.then(k,D)});return E._lib=!0,E},Cn.prototype._root=function(){return this.parent?this.parent._root():this},Cn.prototype.waitFor=function(c){var d,v=this._root(),w=Ae.resolve(c);v._waitingFor?v._waitingFor=v._waitingFor.then(function(){return w}):(v._waitingFor=w,v._waitingQueue=[],d=v.idbtrans.objectStore(v.storeNames[0]),(function k(){for(++v._spinCount;v._waitingQueue.length;)v._waitingQueue.shift()();v._waitingFor&&(d.get(-1/0).onsuccess=k)})());var E=v._waitingFor;return new Ae(function(k,D){w.then(function(j){return v._waitingQueue.push(Tt(k.bind(null,j)))},function(j){return v._waitingQueue.push(Tt(D.bind(null,j)))}).finally(function(){v._waitingFor===E&&(v._waitingFor=null)})})},Cn.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new ge.Abort))},Cn.prototype.table=function(c){var d=this._memoizedTables||(this._memoizedTables={});if(x(d,c))return d[c];var v=this.schema[c];if(!v)throw new ge.NotFound("Table "+c+" not part of transaction");return v=new this.db.Table(c,v,this),v.core=this.db.core.table(c),d[c]=v},Cn);function Cn(){}function yr(c,d,v,w,E,k,D,j){return{name:c,keyPath:d,unique:v,multi:w,auto:E,compound:k,src:(v&&!D?"&":"")+(w?"*":"")+(E?"++":"")+qa(d),type:j}}function qa(c){return typeof c=="string"?c:c?"["+[].join.call(c,"+")+"]":""}function nl(c,d,v){return{name:c,primKey:d,indexes:v,mappedClass:null,idxByName:(w=function(E){return[E.name,E]},v.reduce(function(E,k,D){return D=w(k,D),D&&(E[D[0]]=D[1]),E},{}))};var w}var rl=function(c){try{return c.only([[]]),rl=function(){return[[]]},[[]]}catch{return rl=function(){return Wn},Wn}};function il(c){return c==null?function(){}:typeof c=="string"?(d=c).split(".").length===1?function(v){return v[d]}:function(v){return ye(v,d)}:function(v){return ye(v,c)};var d}function ra(c){return[].slice.call(c)}var Xu=0;function Xt(c){return c==null?":id":typeof c=="string"?c:"[".concat(c.join("+"),"]")}function gi(c,d,B){function w(G){if(G.type===3)return null;if(G.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var q=G.lower,Y=G.upper,V=G.lowerOpen,G=G.upperOpen;return q===void 0?Y===void 0?null:d.upperBound(Y,!!G):Y===void 0?d.lowerBound(q,!!V):d.bound(q,Y,!!V,!!G)}function E(Q){var q,Y=Q.name;return{name:Y,schema:Q,mutate:function(V){var G=V.trans,$=V.type,ee=V.keys,le=V.values,ue=V.range;return new Promise(function(be,Ee){be=Tt(be);var me=G.objectStore(Y),we=me.keyPath==null,_e=$==="put"||$==="add";if(!_e&&$!=="delete"&&$!=="deleteRange")throw new Error("Invalid operation type: "+$);var ve,Ce=(ee||le||{length:1}).length;if(ee&&le&&ee.length!==le.length)throw new Error("Given keys array must have same length as given values array.");if(Ce===0)return be({numFailures:0,failures:{},results:[],lastResult:void 0});function Ke(Zt){++cn,mi(Zt)}var Ze=[],Je=[],cn=0;if($==="deleteRange"){if(ue.type===4)return be({numFailures:cn,failures:Je,results:[],lastResult:void 0});ue.type===3?Ze.push(ve=me.clear()):Ze.push(ve=me.delete(w(ue)))}else{var we=_e?we?[le,ee]:[le,null]:[ee,null],Ge=we[0],Qt=we[1];if(_e)for(var Bt=0;Bt<Ce;++Bt)Ze.push(ve=Qt&&Qt[Bt]!==void 0?me[$](Ge[Bt],Qt[Bt]):me[$](Ge[Bt])),ve.onerror=Ke;else for(Bt=0;Bt<Ce;++Bt)Ze.push(ve=me[$](Ge[Bt])),ve.onerror=Ke}function ca(Zt){Zt=Zt.target.result,Ze.forEach(function(Yn,Ao){return Yn.error!=null&&(Je[Ao]=Yn.error)}),be({numFailures:cn,failures:Je,results:$==="delete"?ee:Ze.map(function(Yn){return Yn.result}),lastResult:Zt})}ve.onerror=function(Zt){Ke(Zt),ca(Zt)},ve.onsuccess=ca})},getMany:function(V){var G=V.trans,$=V.keys;return new Promise(function(ee,le){ee=Tt(ee);for(var ue,be=G.objectStore(Y),Ee=$.length,me=new Array(Ee),we=0,_e=0,ve=function(Ze){Ze=Ze.target,me[Ze._pos]=Ze.result,++_e===we&&ee(me)},Ce=Pn(le),Ke=0;Ke<Ee;++Ke)$[Ke]!=null&&((ue=be.get($[Ke]))._pos=Ke,ue.onsuccess=ve,ue.onerror=Ce,++we);we===0&&ee(me)})},get:function(V){var G=V.trans,$=V.key;return new Promise(function(ee,le){ee=Tt(ee);var ue=G.objectStore(Y).get($);ue.onsuccess=function(be){return ee(be.target.result)},ue.onerror=Pn(le)})},query:(q=L,function(V){return new Promise(function(G,$){G=Tt(G);var ee,le,ue,we=V.trans,be=V.values,Ee=V.limit,ve=V.query,me=Ee===1/0?void 0:Ee,_e=ve.index,ve=ve.range,we=we.objectStore(Y),_e=_e.isPrimaryKey?we:we.index(_e.name),ve=w(ve);if(Ee===0)return G({result:[]});q?((me=be?_e.getAll(ve,me):_e.getAllKeys(ve,me)).onsuccess=function(Ce){return G({result:Ce.target.result})},me.onerror=Pn($)):(ee=0,le=!be&&"openKeyCursor"in _e?_e.openKeyCursor(ve):_e.openCursor(ve),ue=[],le.onsuccess=function(Ce){var Ke=le.result;return Ke?(ue.push(be?Ke.value:Ke.primaryKey),++ee===Ee?G({result:ue}):void Ke.continue()):G({result:ue})},le.onerror=Pn($))})}),openCursor:function(V){var G=V.trans,$=V.values,ee=V.query,le=V.reverse,ue=V.unique;return new Promise(function(be,Ee){be=Tt(be);var _e=ee.index,me=ee.range,we=G.objectStore(Y),we=_e.isPrimaryKey?we:we.index(_e.name),_e=le?ue?"prevunique":"prev":ue?"nextunique":"next",ve=!$&&"openKeyCursor"in we?we.openKeyCursor(w(me),_e):we.openCursor(w(me),_e);ve.onerror=Pn(Ee),ve.onsuccess=Tt(function(Ce){var Ke,Ze,Je,cn,Ge=ve.result;Ge?(Ge.___id=++Xu,Ge.done=!1,Ke=Ge.continue.bind(Ge),Ze=(Ze=Ge.continuePrimaryKey)&&Ze.bind(Ge),Je=Ge.advance.bind(Ge),cn=function(){throw new Error("Cursor not stopped")},Ge.trans=G,Ge.stop=Ge.continue=Ge.continuePrimaryKey=Ge.advance=function(){throw new Error("Cursor not started")},Ge.fail=Tt(Ee),Ge.next=function(){var Qt=this,Bt=1;return this.start(function(){return Bt--?Qt.continue():Qt.stop()}).then(function(){return Qt})},Ge.start=function(Qt){function Bt(){if(ve.result)try{Qt()}catch(Zt){Ge.fail(Zt)}else Ge.done=!0,Ge.start=function(){throw new Error("Cursor behind last entry")},Ge.stop()}var ca=new Promise(function(Zt,Yn){Zt=Tt(Zt),ve.onerror=Pn(Yn),Ge.fail=Yn,Ge.stop=function(Ao){Ge.stop=Ge.continue=Ge.continuePrimaryKey=Ge.advance=cn,Zt(Ao)}});return ve.onsuccess=Tt(function(Zt){ve.onsuccess=Bt,Bt()}),Ge.continue=Ke,Ge.continuePrimaryKey=Ze,Ge.advance=Je,Bt(),ca},be(Ge)):be(null)},Ee)})},count:function(V){var G=V.query,$=V.trans,ee=G.index,le=G.range;return new Promise(function(ue,be){var Ee=$.objectStore(Y),me=ee.isPrimaryKey?Ee:Ee.index(ee.name),Ee=w(le),me=Ee?me.count(Ee):me.count();me.onsuccess=Tt(function(we){return ue(we.target.result)}),me.onerror=Pn(be)})}}}var k,D,j,I=(D=B,j=ra((k=c).objectStoreNames),{schema:{name:k.name,tables:j.map(function(Q){return D.objectStore(Q)}).map(function(Q){var q=Q.keyPath,G=Q.autoIncrement,Y=y(q),V={},G={name:Q.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:q==null,compound:Y,keyPath:q,autoIncrement:G,unique:!0,extractKey:il(q)},indexes:ra(Q.indexNames).map(function($){return Q.index($)}).map(function(ue){var ee=ue.name,le=ue.unique,be=ue.multiEntry,ue=ue.keyPath,be={name:ee,compound:y(ue),keyPath:ue,unique:le,multiEntry:be,extractKey:il(ue)};return V[Xt(ue)]=be}),getIndexByKeyPath:function($){return V[Xt($)]}};return V[":id"]=G.primaryKey,q!=null&&(V[Xt(q)]=G.primaryKey),G})},hasGetAll:0<j.length&&"getAll"in D.objectStore(j[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),B=I.schema,L=I.hasGetAll,I=B.tables.map(E),R={};return I.forEach(function(Q){return R[Q.name]=Q}),{stack:"dbcore",transaction:c.transaction.bind(c),table:function(Q){if(!R[Q])throw new Error("Table '".concat(Q,"' not found"));return R[Q]},MIN_KEY:-1/0,MAX_KEY:rl(d),schema:B}}function Ha(c,d,v,w){var E=v.IDBKeyRange;return v.indexedDB,{dbcore:(w=gi(d,E,w),c.dbcore.reduce(function(k,D){return D=D.create,a(a({},k),D(k))},w))}}function $r(c,w){var v=w.db,w=Ha(c._middlewares,v,c._deps,w);c.core=w.dbcore,c.tables.forEach(function(E){var k=E.name;c.core.schema.tables.some(function(D){return D.name===k})&&(E.core=c.core.table(k),c[k]instanceof c.Table&&(c[k].core=E.core))})}function Ka(c,d,v,w){v.forEach(function(E){var k=w[E];d.forEach(function(D){var j=(function B(L,I){return X(L,I)||(L=m(L))&&B(L,I)})(D,E);(!j||"value"in j&&j.value===void 0)&&(D===c.Transaction.prototype||D instanceof c.Transaction?C(D,E,{get:function(){return this.table(E)},set:function(B){A(this,E,{value:B,writable:!0,configurable:!0,enumerable:!0})}}):D[E]=new c.Table(E,k))})})}function ia(c,d){d.forEach(function(v){for(var w in v)v[w]instanceof c.Table&&delete v[w]})}function fo(c,d){return c._cfg.version-d._cfg.version}function la(c,d,v,w){var E=c._dbSchema;v.objectStoreNames.contains("$meta")&&!E.$meta&&(E.$meta=nl("$meta",Zu("")[0],[]),c._storeNames.push("$meta"));var k=c._createTransaction("readwrite",c._storeNames,E);k.create(v),k._completion.catch(w);var D=k._reject.bind(k),j=Te.transless||Te;jt(function(){return Te.trans=k,Te.transless=j,d!==0?($r(c,v),L=d,((B=k).storeNames.includes("$meta")?B.table("$meta").get("version").then(function(I){return I??L}):Ae.resolve(L)).then(function(I){return Q=I,q=k,Y=v,V=[],I=(R=c)._versions,G=R._dbSchema=ll(0,R.idbdb,Y),(I=I.filter(function($){return $._cfg.version>=Q})).length!==0?(I.forEach(function($){V.push(function(){var ee=G,le=$._cfg.dbschema;Ga(R,ee,Y),Ga(R,le,Y),G=R._dbSchema=le;var ue=Va(ee,le);ue.add.forEach(function(_e){ho(Y,_e[0],_e[1].primKey,_e[1].indexes)}),ue.change.forEach(function(_e){if(_e.recreate)throw new ge.Upgrade("Not yet support for changing primary key");var ve=Y.objectStore(_e.name);_e.add.forEach(function(Ce){return Ia(ve,Ce)}),_e.change.forEach(function(Ce){ve.deleteIndex(Ce.name),Ia(ve,Ce)}),_e.del.forEach(function(Ce){return ve.deleteIndex(Ce)})});var be=$._cfg.contentUpgrade;if(be&&$._cfg.version>Q){$r(R,Y),q._memoizedTables={};var Ee=Le(le);ue.del.forEach(function(_e){Ee[_e]=ee[_e]}),ia(R,[R.Transaction.prototype]),Ka(R,[R.Transaction.prototype],p(Ee),Ee),q.schema=Ee;var me,we=N(be);return we&&Yt(),ue=Ae.follow(function(){var _e;(me=be(q))&&we&&(_e=zn.bind(null,null),me.then(_e,_e))}),me&&typeof me.then=="function"?Ae.resolve(me):ue.then(function(){return me})}}),V.push(function(ee){var le,ue,be=$._cfg.dbschema;le=be,ue=ee,[].slice.call(ue.db.objectStoreNames).forEach(function(Ee){return le[Ee]==null&&ue.db.deleteObjectStore(Ee)}),ia(R,[R.Transaction.prototype]),Ka(R,[R.Transaction.prototype],R._storeNames,R._dbSchema),q.schema=R._dbSchema}),V.push(function(ee){R.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(R.idbdb.version/10)===$._cfg.version?(R.idbdb.deleteObjectStore("$meta"),delete R._dbSchema.$meta,R._storeNames=R._storeNames.filter(function(le){return le!=="$meta"})):ee.objectStore("$meta").put($._cfg.version,"version"))})}),(function $(){return V.length?Ae.resolve(V.shift()(q.idbtrans)).then($):Ae.resolve()})().then(function(){Qu(G,Y)})):Ae.resolve();var R,Q,q,Y,V,G}).catch(D)):(p(E).forEach(function(I){ho(v,I,E[I].primKey,E[I].indexes)}),$r(c,v),void Ae.follow(function(){return c.on.populate.fire(k)}).catch(D));var B,L})}function Ya(c,d){Qu(c._dbSchema,d),d.db.version%10!=0||d.objectStoreNames.contains("$meta")||d.db.createObjectStore("$meta").add(Math.ceil(d.db.version/10-1),"version");var v=ll(0,c.idbdb,d);Ga(c,c._dbSchema,d);for(var w=0,E=Va(v,c._dbSchema).change;w<E.length;w++){var k=(function(D){if(D.change.length||D.recreate)return console.warn("Unable to patch indexes of table ".concat(D.name," because it has changes on the type of index or primary key.")),{value:void 0};var j=d.objectStore(D.name);D.add.forEach(function(B){Hn&&console.debug("Dexie upgrade patch: Creating missing index ".concat(D.name,".").concat(B.src)),Ia(j,B)})})(E[w]);if(typeof k=="object")return k.value}}function Va(c,d){var v,w={del:[],add:[],change:[]};for(v in c)d[v]||w.del.push(v);for(v in d){var E=c[v],k=d[v];if(E){var D={name:v,def:k,recreate:!1,del:[],add:[],change:[]};if(""+(E.primKey.keyPath||"")!=""+(k.primKey.keyPath||"")||E.primKey.auto!==k.primKey.auto)D.recreate=!0,w.change.push(D);else{var j=E.idxByName,B=k.idxByName,L=void 0;for(L in j)B[L]||D.del.push(L);for(L in B){var I=j[L],R=B[L];I?I.src!==R.src&&D.change.push(R):D.add.push(R)}(0<D.del.length||0<D.add.length||0<D.change.length)&&w.change.push(D)}}else w.add.push([v,k])}return w}function ho(c,d,v,w){var E=c.db.createObjectStore(d,v.keyPath?{keyPath:v.keyPath,autoIncrement:v.auto}:{autoIncrement:v.auto});return w.forEach(function(k){return Ia(E,k)}),E}function Qu(c,d){p(c).forEach(function(v){d.db.objectStoreNames.contains(v)||(Hn&&console.debug("Dexie: Creating missing table",v),ho(d,v,c[v].primKey,c[v].indexes))})}function Ia(c,d){c.createIndex(d.name,d.keyPath,{unique:d.unique,multiEntry:d.multi})}function ll(c,d,v){var w={};return W(d.objectStoreNames,0).forEach(function(E){for(var k=v.objectStore(E),D=yr(qa(L=k.keyPath),L||"",!0,!1,!!k.autoIncrement,L&&typeof L!="string",!0),j=[],B=0;B<k.indexNames.length;++B){var I=k.index(k.indexNames[B]),L=I.keyPath,I=yr(I.name,L,!!I.unique,!!I.multiEntry,!1,L&&typeof L!="string",!1);j.push(I)}w[E]=nl(E,D,j)}),w}function Ga(c,d,v){for(var w=v.db.objectStoreNames,E=0;E<w.length;++E){var k=w[E],D=v.objectStore(k);c._hasGetAll="getAll"in D;for(var j=0;j<D.indexNames.length;++j){var B=D.indexNames[j],L=D.index(B).keyPath,I=typeof L=="string"?L:"["+W(L).join("+")+"]";!d[k]||(L=d[k].idxByName[I])&&(L.name=B,delete d[k].idxByName[I],d[k].idxByName[B]=L)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&u.WorkerGlobalScope&&u instanceof u.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(c._hasGetAll=!1)}function Zu(c){return c.split(",").map(function(d,v){var k=d.split(":"),w=(E=k[1])===null||E===void 0?void 0:E.trim(),E=(d=k[0].trim()).replace(/([&*]|\+\+)/g,""),k=/^\[/.test(E)?E.match(/^\[(.*)\]$/)[1].split("+"):E;return yr(E,k||null,/\&/.test(d),/\*/.test(d),/\+\+/.test(d),y(k),v===0,w)})}var gd=(al.prototype._createTableSchema=nl,al.prototype._parseIndexSyntax=Zu,al.prototype._parseStoresSpec=function(c,d){var v=this;p(c).forEach(function(w){if(c[w]!==null){var E=v._parseIndexSyntax(c[w]),k=E.shift();if(!k)throw new ge.Schema("Invalid schema for table "+w+": "+c[w]);if(k.unique=!0,k.multi)throw new ge.Schema("Primary key cannot be multiEntry*");E.forEach(function(D){if(D.auto)throw new ge.Schema("Only primary key can be marked as autoIncrement (++)");if(!D.keyPath)throw new ge.Schema("Index must have a name and cannot be an empty string")}),E=v._createTableSchema(w,k,E),d[w]=E}})},al.prototype.stores=function(v){var d=this.db;this._cfg.storesSource=this._cfg.storesSource?g(this._cfg.storesSource,v):v;var v=d._versions,w={},E={};return v.forEach(function(k){g(w,k._cfg.storesSource),E=k._cfg.dbschema={},k._parseStoresSpec(w,E)}),d._dbSchema=E,ia(d,[d._allTables,d,d.Transaction.prototype]),Ka(d,[d._allTables,d,d.Transaction.prototype,this._cfg.tables],p(E),E),d._storeNames=p(E),this},al.prototype.upgrade=function(c){return this._cfg.contentUpgrade=Kl(this._cfg.contentUpgrade||Ve,c),this},al);function al(){}function po(c,d){var v=c._dbNamesDB;return v||(v=c._dbNamesDB=new mr(Fl,{addons:[],indexedDB:c,IDBKeyRange:d})).version(1).stores({dbnames:"name"}),v.table("dbnames")}function Xa(c){return c&&typeof c.databases=="function"}function yo(c){return jt(function(){return Te.letThrough=!0,c()})}function mo(c){return!("from"in c)}var un=function(c,d){if(!this){var v=new un;return c&&"d"in c&&g(v,c),v}g(this,arguments.length?{d:1,from:c,to:1<arguments.length?d:c}:{d:0})};function aa(c,d,v){var w=nt(d,v);if(!isNaN(w)){if(0<w)throw RangeError();if(mo(c))return g(c,{from:d,to:v,d:1});var E=c.l,w=c.r;if(nt(v,c.from)<0)return E?aa(E,d,v):c.l={from:d,to:v,d:1,l:null,r:null},Ju(c);if(0<nt(d,c.to))return w?aa(w,d,v):c.r={from:d,to:v,d:1,l:null,r:null},Ju(c);nt(d,c.from)<0&&(c.from=d,c.l=null,c.d=w?w.d+1:1),0<nt(v,c.to)&&(c.to=v,c.r=null,c.d=c.l?c.l.d+1:1),v=!c.r,E&&!c.l&&bi(c,E),w&&v&&bi(c,w)}}function bi(c,d){mo(d)||(function v(w,B){var k=B.from,D=B.to,j=B.l,B=B.r;aa(w,k,D),j&&v(w,j),B&&v(w,B)})(c,d)}function $u(c,d){var v=Qa(d),w=v.next();if(w.done)return!1;for(var E=w.value,k=Qa(c),D=k.next(E.from),j=D.value;!w.done&&!D.done;){if(nt(j.from,E.to)<=0&&0<=nt(j.to,E.from))return!0;nt(E.from,j.from)<0?E=(w=v.next(j.from)).value:j=(D=k.next(E.from)).value}return!1}function Qa(c){var d=mo(c)?null:{s:0,n:c};return{next:function(v){for(var w=0<arguments.length;d;)switch(d.s){case 0:if(d.s=1,w)for(;d.n.l&&nt(v,d.n.from)<0;)d={up:d,n:d.n.l,s:1};else for(;d.n.l;)d={up:d,n:d.n.l,s:1};case 1:if(d.s=2,!w||nt(v,d.n.to)<=0)return{value:d.n,done:!1};case 2:if(d.n.r){d.s=3,d={up:d,n:d.n.r,s:0};continue}case 3:d=d.up}return{done:!0}}}}function Ju(c){var d,v,w=(((d=c.r)===null||d===void 0?void 0:d.d)||0)-(((v=c.l)===null||v===void 0?void 0:v.d)||0),E=1<w?"r":w<-1?"l":"";E&&(d=E=="r"?"l":"r",v=a({},c),w=c[E],c.from=w.from,c.to=w.to,c[E]=w[E],v[E]=w[d],(c[d]=v).d=vo(v)),c.d=vo(c)}function vo(v){var d=v.r,v=v.l;return(d?v?Math.max(d.d,v.d):d.d:v?v.d:0)+1}function Za(c,d){return p(d).forEach(function(v){c[v]?bi(c[v],d[v]):c[v]=(function w(E){var k,D,j={};for(k in E)x(E,k)&&(D=E[k],j[k]=!D||typeof D!="object"||de.has(D.constructor)?D:w(D));return j})(d[v])}),c}function go(c,d){return c.all||d.all||Object.keys(c).some(function(v){return d[v]&&$u(d[v],c[v])})}S(un.prototype,((Ln={add:function(c){return bi(this,c),this},addKey:function(c){return aa(this,c,c),this},addKeys:function(c){var d=this;return c.forEach(function(v){return aa(d,v,v)}),this},hasKey:function(c){var d=Qa(this).next(c).value;return d&&nt(d.from,c)<=0&&0<=nt(d.to,c)}})[K]=function(){return Qa(this)},Ln));var wi={},bo={},wo=!1;function $a(c){Za(bo,c),wo||(wo=!0,setTimeout(function(){wo=!1,_o(bo,!(bo={}))},0))}function _o(c,d){d===void 0&&(d=!1);var v=new Set;if(c.all)for(var w=0,E=Object.values(wi);w<E.length;w++)Fu(D=E[w],c,v,d);else for(var k in c){var D,j=/^idb\:\/\/(.*)\/(.*)\//.exec(k);j&&(k=j[1],j=j[2],(D=wi["idb://".concat(k,"/").concat(j)])&&Fu(D,c,v,d))}v.forEach(function(B){return B()})}function Fu(c,d,v,w){for(var E=[],k=0,D=Object.entries(c.queries.query);k<D.length;k++){for(var j=D[k],B=j[0],L=[],I=0,R=j[1];I<R.length;I++){var Q=R[I];go(d,Q.obsSet)?Q.subscribers.forEach(function(G){return v.add(G)}):w&&L.push(Q)}w&&E.push([B,L])}if(w)for(var q=0,Y=E;q<Y.length;q++){var V=Y[q],B=V[0],L=V[1];c.queries.query[B]=L}}function bd(c){var d=c._state,v=c._deps.indexedDB;if(d.isBeingOpened||c.idbdb)return d.dbReadyPromise.then(function(){return d.dbOpenError?St(d.dbOpenError):c});d.isBeingOpened=!0,d.dbOpenError=null,d.openComplete=!1;var w=d.openCanceller,E=Math.round(10*c.verno),k=!1;function D(){if(d.openCanceller!==w)throw new ge.DatabaseClosed("db.open() was cancelled")}function j(){return new Ae(function(Q,q){if(D(),!v)throw new ge.MissingAPI;var Y=c.name,V=d.autoSchema||!E?v.open(Y):v.open(Y,E);if(!V)throw new ge.MissingAPI;V.onerror=Pn(q),V.onblocked=Tt(c._fireOnBlocked),V.onupgradeneeded=Tt(function(G){var $;I=V.transaction,d.autoSchema&&!c._options.allowEmptyDB?(V.onerror=mi,I.abort(),V.result.close(),($=v.deleteDatabase(Y)).onsuccess=$.onerror=Tt(function(){q(new ge.NoSuchDatabase("Database ".concat(Y," doesnt exist")))})):(I.onerror=Pn(q),G=G.oldVersion>Math.pow(2,62)?0:G.oldVersion,R=G<1,c.idbdb=V.result,k&&Ya(c,I),la(c,G/10,I,q))},q),V.onsuccess=Tt(function(){I=null;var G,$,ee,le,ue,be=c.idbdb=V.result,Ee=W(be.objectStoreNames);if(0<Ee.length)try{var me=be.transaction((le=Ee).length===1?le[0]:le,"readonly");if(d.autoSchema)$=be,ee=me,(G=c).verno=$.version/10,ee=G._dbSchema=ll(0,$,ee),G._storeNames=W($.objectStoreNames,0),Ka(G,[G._allTables],p(ee),ee);else if(Ga(c,c._dbSchema,me),((ue=Va(ll(0,(ue=c).idbdb,me),ue._dbSchema)).add.length||ue.change.some(function(we){return we.add.length||we.change.length}))&&!k)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),be.close(),E=be.version+1,k=!0,Q(j());$r(c,me)}catch{}di.push(c),be.onversionchange=Tt(function(we){d.vcFired=!0,c.on("versionchange").fire(we)}),be.onclose=Tt(function(){c.close({disableAutoOpen:!1})}),R&&(ue=c._deps,me=Y,be=ue.indexedDB,ue=ue.IDBKeyRange,Xa(be)||me===Fl||po(be,ue).put({name:me}).catch(Ve)),Q()},q)}).catch(function(Q){switch(Q==null?void 0:Q.name){case"UnknownError":if(0<d.PR1398_maxLoop)return d.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),j();break;case"VersionError":if(0<E)return E=0,j()}return Ae.reject(Q)})}var B,L=d.dbReadyResolve,I=null,R=!1;return Ae.race([w,(typeof navigator>"u"?Ae.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(Q){function q(){return indexedDB.databases().finally(Q)}B=setInterval(q,100),q()}).finally(function(){return clearInterval(B)}):Promise.resolve()).then(j)]).then(function(){return D(),d.onReadyBeingFired=[],Ae.resolve(yo(function(){return c.on.ready.fire(c.vip)})).then(function Q(){if(0<d.onReadyBeingFired.length){var q=d.onReadyBeingFired.reduce(Kl,Ve);return d.onReadyBeingFired=[],Ae.resolve(yo(function(){return q(c.vip)})).then(Q)}})}).finally(function(){d.openCanceller===w&&(d.onReadyBeingFired=null,d.isBeingOpened=!1)}).catch(function(Q){d.dbOpenError=Q;try{I&&I.abort()}catch{}return w===d.openCanceller&&c._close(),St(Q)}).finally(function(){d.openComplete=!0,L()}).then(function(){var Q;return R&&(Q={},c.tables.forEach(function(q){q.schema.indexes.forEach(function(Y){Y.name&&(Q["idb://".concat(c.name,"/").concat(q.name,"/").concat(Y.name)]=new un(-1/0,[[[]]]))}),Q["idb://".concat(c.name,"/").concat(q.name,"/")]=Q["idb://".concat(c.name,"/").concat(q.name,"/:dels")]=new un(-1/0,[[[]]])}),on(tl).fire(Q),_o(Q,!0)),c})}function sa(c){function d(k){return c.next(k)}var v=E(d),w=E(function(k){return c.throw(k)});function E(k){return function(B){var j=k(B),B=j.value;return j.done?B:B&&typeof B.then=="function"?B.then(v,w):y(B)?Promise.all(B).then(v,w):v(B)}}return E(d)()}function Jr(c,d,v){for(var w=y(c)?c.slice():[c],E=0;E<v;++E)w.push(d);return w}var wd={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(c){return a(a({},c),{table:function(d){var v=c.table(d),w=v.schema,E={},k=[];function D(R,Q,q){var Y=Xt(R),V=E[Y]=E[Y]||[],G=R==null?0:typeof R=="string"?1:R.length,$=0<Q,$=a(a({},q),{name:$?"".concat(Y,"(virtual-from:").concat(q.name,")"):q.name,lowLevelIndex:q,isVirtual:$,keyTail:Q,keyLength:G,extractKey:il(R),unique:!$&&q.unique});return V.push($),$.isPrimaryKey||k.push($),1<G&&D(G===2?R[0]:R.slice(0,G-1),Q+1,q),V.sort(function(ee,le){return ee.keyTail-le.keyTail}),$}d=D(w.primaryKey.keyPath,0,w.primaryKey),E[":id"]=[d];for(var j=0,B=w.indexes;j<B.length;j++){var L=B[j];D(L.keyPath,0,L)}function I(R){var Q,q=R.query.index;return q.isVirtual?a(a({},R),{query:{index:q.lowLevelIndex,range:(Q=R.query.range,q=q.keyTail,{type:Q.type===1?2:Q.type,lower:Jr(Q.lower,Q.lowerOpen?c.MAX_KEY:c.MIN_KEY,q),lowerOpen:!0,upper:Jr(Q.upper,Q.upperOpen?c.MIN_KEY:c.MAX_KEY,q),upperOpen:!0})}}):R}return a(a({},v),{schema:a(a({},w),{primaryKey:d,indexes:k,getIndexByKeyPath:function(R){return(R=E[Xt(R)])&&R[0]}}),count:function(R){return v.count(I(R))},query:function(R){return v.query(I(R))},openCursor:function(R){var Q=R.query.index,q=Q.keyTail,Y=Q.isVirtual,V=Q.keyLength;return Y?v.openCursor(I(R)).then(function($){return $&&G($)}):v.openCursor(R);function G($){return Object.create($,{continue:{value:function(ee){ee!=null?$.continue(Jr(ee,R.reverse?c.MAX_KEY:c.MIN_KEY,q)):R.unique?$.continue($.key.slice(0,V).concat(R.reverse?c.MIN_KEY:c.MAX_KEY,q)):$.continue()}},continuePrimaryKey:{value:function(ee,le){$.continuePrimaryKey(Jr(ee,c.MAX_KEY,q),le)}},primaryKey:{get:function(){return $.primaryKey}},key:{get:function(){var ee=$.key;return V===1?ee[0]:ee.slice(0,V)}},value:{get:function(){return $.value}}})}}})}})}};function Ja(c,d,v,w){return v=v||{},w=w||"",p(c).forEach(function(E){var k,D,j;x(d,E)?(k=c[E],D=d[E],typeof k=="object"&&typeof D=="object"&&k&&D?(j=He(k))!==He(D)?v[w+E]=d[E]:j==="Object"?Ja(k,D,v,w+E+"."):k!==D&&(v[w+E]=d[E]):k!==D&&(v[w+E]=d[E])):v[w+E]=void 0}),p(d).forEach(function(E){x(c,E)||(v[w+E]=d[E])}),v}function Fa(c,d){return d.type==="delete"?d.keys:d.keys||d.values.map(c.extractKey)}var Wu={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(c){return a(a({},c),{table:function(d){var v=c.table(d),w=v.schema.primaryKey;return a(a({},v),{mutate:function(E){var k=Te.trans,D=k.table(d).hook,j=D.deleting,B=D.creating,L=D.updating;switch(E.type){case"add":if(B.fire===Ve)break;return k._promise("readwrite",function(){return I(E)},!0);case"put":if(B.fire===Ve&&L.fire===Ve)break;return k._promise("readwrite",function(){return I(E)},!0);case"delete":if(j.fire===Ve)break;return k._promise("readwrite",function(){return I(E)},!0);case"deleteRange":if(j.fire===Ve)break;return k._promise("readwrite",function(){return(function R(Q,q,Y){return v.query({trans:Q,values:!1,query:{index:w,range:q},limit:Y}).then(function(V){var G=V.result;return I({type:"delete",keys:G,trans:Q}).then(function($){return 0<$.numFailures?Promise.reject($.failures[0]):G.length<Y?{failures:[],numFailures:0,lastResult:void 0}:R(Q,a(a({},q),{lower:G[G.length-1],lowerOpen:!0}),Y)})})})(E.trans,E.range,1e4)},!0)}return v.mutate(E);function I(R){var Q,q,Y,V=Te.trans,G=R.keys||Fa(w,R);if(!G)throw new Error("Keys missing");return(R=R.type==="add"||R.type==="put"?a(a({},R),{keys:G}):a({},R)).type!=="delete"&&(R.values=o([],R.values)),R.keys&&(R.keys=o([],R.keys)),Q=v,Y=G,((q=R).type==="add"?Promise.resolve([]):Q.getMany({trans:q.trans,keys:Y,cache:"immutable"})).then(function($){var ee=G.map(function(le,ue){var be,Ee,me,we=$[ue],_e={onerror:null,onsuccess:null};return R.type==="delete"?j.fire.call(_e,le,we,V):R.type==="add"||we===void 0?(be=B.fire.call(_e,le,R.values[ue],V),le==null&&be!=null&&(R.keys[ue]=le=be,w.outbound||pe(R.values[ue],w.keyPath,le))):(be=Ja(we,R.values[ue]),(Ee=L.fire.call(_e,be,le,we,V))&&(me=R.values[ue],Object.keys(Ee).forEach(function(ve){x(me,ve)?me[ve]=Ee[ve]:pe(me,ve,Ee[ve])}))),_e});return v.mutate(R).then(function(le){for(var ue=le.failures,be=le.results,Ee=le.numFailures,le=le.lastResult,me=0;me<G.length;++me){var we=(be||G)[me],_e=ee[me];we==null?_e.onerror&&_e.onerror(ue[me]):_e.onsuccess&&_e.onsuccess(R.type==="put"&&$[me]?R.values[me]:we)}return{failures:ue,results:be,numFailures:Ee,lastResult:le}}).catch(function(le){return ee.forEach(function(ue){return ue.onerror&&ue.onerror(le)}),Promise.reject(le)})})}}})}})}};function xo(c,d,v){try{if(!d||d.keys.length<c.length)return null;for(var w=[],E=0,k=0;E<d.keys.length&&k<c.length;++E)nt(d.keys[E],c[k])===0&&(w.push(v?qe(d.values[E]):d.values[E]),++k);return w.length===c.length?w:null}catch{return null}}var Pu={stack:"dbcore",level:-1,create:function(c){return{table:function(d){var v=c.table(d);return a(a({},v),{getMany:function(w){if(!w.cache)return v.getMany(w);var E=xo(w.keys,w.trans._cache,w.cache==="clone");return E?Ae.resolve(E):v.getMany(w).then(function(k){return w.trans._cache={keys:w.keys,values:w.cache==="clone"?qe(k):k},k})},mutate:function(w){return w.type!=="add"&&(w.trans._cache=null),v.mutate(w)}})}}}};function _i(c,d){return c.trans.mode==="readonly"&&!!c.subscr&&!c.trans.explicit&&c.trans.db._options.cache!=="disabled"&&!d.schema.primaryKey.outbound}function ec(c,d){switch(c){case"query":return d.values&&!d.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var _d={stack:"dbcore",level:0,name:"Observability",create:function(c){var d=c.schema.name,v=new un(c.MIN_KEY,c.MAX_KEY);return a(a({},c),{transaction:function(w,E,k){if(Te.subscr&&E!=="readonly")throw new ge.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Te.querier));return c.transaction(w,E,k)},table:function(w){var E=c.table(w),k=E.schema,D=k.primaryKey,R=k.indexes,j=D.extractKey,B=D.outbound,L=D.autoIncrement&&R.filter(function(q){return q.compound&&q.keyPath.includes(D.keyPath)}),I=a(a({},E),{mutate:function(q){function Y(ve){return ve="idb://".concat(d,"/").concat(w,"/").concat(ve),le[ve]||(le[ve]=new un)}var V,G,$,ee=q.trans,le=q.mutatedParts||(q.mutatedParts={}),ue=Y(""),be=Y(":dels"),Ee=q.type,_e=q.type==="deleteRange"?[q.range]:q.type==="delete"?[q.keys]:q.values.length<50?[Fa(D,q).filter(function(ve){return ve}),q.values]:[],me=_e[0],we=_e[1],_e=q.trans._cache;return y(me)?(ue.addKeys(me),(_e=Ee==="delete"||me.length===we.length?xo(me,_e):null)||be.addKeys(me),(_e||we)&&(V=Y,G=_e,$=we,k.indexes.forEach(function(ve){var Ce=V(ve.name||"");function Ke(Je){return Je!=null?ve.extractKey(Je):null}function Ze(Je){return ve.multiEntry&&y(Je)?Je.forEach(function(cn){return Ce.addKey(cn)}):Ce.addKey(Je)}(G||$).forEach(function(Je,Qt){var Ge=G&&Ke(G[Qt]),Qt=$&&Ke($[Qt]);nt(Ge,Qt)!==0&&(Ge!=null&&Ze(Ge),Qt!=null&&Ze(Qt))})}))):me?(we={from:(we=me.lower)!==null&&we!==void 0?we:c.MIN_KEY,to:(we=me.upper)!==null&&we!==void 0?we:c.MAX_KEY},be.add(we),ue.add(we)):(ue.add(v),be.add(v),k.indexes.forEach(function(ve){return Y(ve.name).add(v)})),E.mutate(q).then(function(ve){return!me||q.type!=="add"&&q.type!=="put"||(ue.addKeys(ve.results),L&&L.forEach(function(Ce){for(var Ke=q.values.map(function(Ge){return Ce.extractKey(Ge)}),Ze=Ce.keyPath.findIndex(function(Ge){return Ge===D.keyPath}),Je=0,cn=ve.results.length;Je<cn;++Je)Ke[Je][Ze]=ve.results[Je];Y(Ce.name).addKeys(Ke)})),ee.mutatedParts=Za(ee.mutatedParts||{},le),ve})}}),R=function(Y){var V=Y.query,Y=V.index,V=V.range;return[Y,new un((Y=V.lower)!==null&&Y!==void 0?Y:c.MIN_KEY,(V=V.upper)!==null&&V!==void 0?V:c.MAX_KEY)]},Q={get:function(q){return[D,new un(q.key)]},getMany:function(q){return[D,new un().addKeys(q.keys)]},count:R,query:R,openCursor:R};return p(Q).forEach(function(q){I[q]=function(Y){var V=Te.subscr,G=!!V,$=_i(Te,E)&&ec(q,Y)?Y.obsSet={}:V;if(G){var ee=function(we){return we="idb://".concat(d,"/").concat(w,"/").concat(we),$[we]||($[we]=new un)},le=ee(""),ue=ee(":dels"),V=Q[q](Y),G=V[0],V=V[1];if((q==="query"&&G.isPrimaryKey&&!Y.values?ue:ee(G.name||"")).add(V),!G.isPrimaryKey){if(q!=="count"){var be=q==="query"&&B&&Y.values&&E.query(a(a({},Y),{values:!1}));return E[q].apply(this,arguments).then(function(we){if(q==="query"){if(B&&Y.values)return be.then(function(Ke){return Ke=Ke.result,le.addKeys(Ke),we});var _e=Y.values?we.result.map(j):we.result;(Y.values?le:ue).addKeys(_e)}else if(q==="openCursor"){var ve=we,Ce=Y.values;return ve&&Object.create(ve,{key:{get:function(){return ue.addKey(ve.primaryKey),ve.key}},primaryKey:{get:function(){var Ke=ve.primaryKey;return ue.addKey(Ke),Ke}},value:{get:function(){return Ce&&le.addKey(ve.primaryKey),ve.value}}})}return we})}ue.add(v)}}return E[q].apply(this,arguments)}}),I}})}};function tc(c,d,v){if(v.numFailures===0)return d;if(d.type==="deleteRange")return null;var w=d.keys?d.keys.length:"values"in d&&d.values?d.values.length:1;return v.numFailures===w?null:(d=a({},d),y(d.keys)&&(d.keys=d.keys.filter(function(E,k){return!(k in v.failures)})),"values"in d&&y(d.values)&&(d.values=d.values.filter(function(E,k){return!(k in v.failures)})),d)}function Wa(c,d){return v=c,((w=d).lower===void 0||(w.lowerOpen?0<nt(v,w.lower):0<=nt(v,w.lower)))&&(c=c,(d=d).upper===void 0||(d.upperOpen?nt(c,d.upper)<0:nt(c,d.upper)<=0));var v,w}function So(c,d,Q,w,E,k){if(!Q||Q.length===0)return c;var D=d.query.index,j=D.multiEntry,B=d.query.range,L=w.schema.primaryKey.extractKey,I=D.extractKey,R=(D.lowLevelIndex||D).extractKey,Q=Q.reduce(function(q,Y){var V=q,G=[];if(Y.type==="add"||Y.type==="put")for(var $=new un,ee=Y.values.length-1;0<=ee;--ee){var le,ue=Y.values[ee],be=L(ue);$.hasKey(be)||(le=I(ue),(j&&y(le)?le.some(function(ve){return Wa(ve,B)}):Wa(le,B))&&($.addKey(be),G.push(ue)))}switch(Y.type){case"add":var Ee=new un().addKeys(d.values?q.map(function(Ce){return L(Ce)}):q),V=q.concat(d.values?G.filter(function(Ce){return Ce=L(Ce),!Ee.hasKey(Ce)&&(Ee.addKey(Ce),!0)}):G.map(function(Ce){return L(Ce)}).filter(function(Ce){return!Ee.hasKey(Ce)&&(Ee.addKey(Ce),!0)}));break;case"put":var me=new un().addKeys(Y.values.map(function(Ce){return L(Ce)}));V=q.filter(function(Ce){return!me.hasKey(d.values?L(Ce):Ce)}).concat(d.values?G:G.map(function(Ce){return L(Ce)}));break;case"delete":var we=new un().addKeys(Y.keys);V=q.filter(function(Ce){return!we.hasKey(d.values?L(Ce):Ce)});break;case"deleteRange":var _e=Y.range;V=q.filter(function(Ce){return!Wa(L(Ce),_e)})}return V},c);return Q===c?c:(Q.sort(function(q,Y){return nt(R(q),R(Y))||nt(L(q),L(Y))}),d.limit&&d.limit<1/0&&(Q.length>d.limit?Q.length=d.limit:c.length===d.limit&&Q.length<d.limit&&(E.dirty=!0)),k?Object.freeze(Q):Q)}function sl(c,d){return nt(c.lower,d.lower)===0&&nt(c.upper,d.upper)===0&&!!c.lowerOpen==!!d.lowerOpen&&!!c.upperOpen==!!d.upperOpen}function oa(c,d){return(function(v,w,E,k){if(v===void 0)return w!==void 0?-1:0;if(w===void 0)return 1;if((w=nt(v,w))===0){if(E&&k)return 0;if(E)return 1;if(k)return-1}return w})(c.lower,d.lower,c.lowerOpen,d.lowerOpen)<=0&&0<=(function(v,w,E,k){if(v===void 0)return w!==void 0?1:0;if(w===void 0)return-1;if((w=nt(v,w))===0){if(E&&k)return 0;if(E)return-1;if(k)return 1}return w})(c.upper,d.upper,c.upperOpen,d.upperOpen)}function xd(c,d,v,w){c.subscribers.add(v),w.addEventListener("abort",function(){var E,k;c.subscribers.delete(v),c.subscribers.size===0&&(E=c,k=d,setTimeout(function(){E.subscribers.size===0&&se(k,E)},3e3))})}var Pa={stack:"dbcore",level:0,name:"Cache",create:function(c){var d=c.schema.name;return a(a({},c),{transaction:function(v,w,E){var k,D,j=c.transaction(v,w,E);return w==="readwrite"&&(D=(k=new AbortController).signal,E=function(B){return function(){if(k.abort(),w==="readwrite"){for(var L=new Set,I=0,R=v;I<R.length;I++){var Q=R[I],q=wi["idb://".concat(d,"/").concat(Q)];if(q){var Y=c.table(Q),V=q.optimisticOps.filter(function(Ce){return Ce.trans===j});if(j._explicit&&B&&j.mutatedParts)for(var G=0,$=Object.values(q.queries.query);G<$.length;G++)for(var ee=0,le=(Ee=$[G]).slice();ee<le.length;ee++)go((me=le[ee]).obsSet,j.mutatedParts)&&(se(Ee,me),me.subscribers.forEach(function(Ce){return L.add(Ce)}));else if(0<V.length){q.optimisticOps=q.optimisticOps.filter(function(Ce){return Ce.trans!==j});for(var ue=0,be=Object.values(q.queries.query);ue<be.length;ue++)for(var Ee,me,we,_e=0,ve=(Ee=be[ue]).slice();_e<ve.length;_e++)(me=ve[_e]).res!=null&&j.mutatedParts&&(B&&!me.dirty?(we=Object.isFrozen(me.res),we=So(me.res,me.req,V,Y,me,we),me.dirty?(se(Ee,me),me.subscribers.forEach(function(Ce){return L.add(Ce)})):we!==me.res&&(me.res=we,me.promise=Ae.resolve({result:we}))):(me.dirty&&se(Ee,me),me.subscribers.forEach(function(Ce){return L.add(Ce)})))}}}L.forEach(function(Ce){return Ce()})}}},j.addEventListener("abort",E(!1),{signal:D}),j.addEventListener("error",E(!1),{signal:D}),j.addEventListener("complete",E(!0),{signal:D})),j},table:function(v){var w=c.table(v),E=w.schema.primaryKey;return a(a({},w),{mutate:function(k){var D=Te.trans;if(E.outbound||D.db._options.cache==="disabled"||D.explicit||D.idbtrans.mode!=="readwrite")return w.mutate(k);var j=wi["idb://".concat(d,"/").concat(v)];return j?(D=w.mutate(k),k.type!=="add"&&k.type!=="put"||!(50<=k.values.length||Fa(E,k).some(function(B){return B==null}))?(j.optimisticOps.push(k),k.mutatedParts&&$a(k.mutatedParts),D.then(function(B){0<B.numFailures&&(se(j.optimisticOps,k),(B=tc(0,k,B))&&j.optimisticOps.push(B),k.mutatedParts&&$a(k.mutatedParts))}),D.catch(function(){se(j.optimisticOps,k),k.mutatedParts&&$a(k.mutatedParts)})):D.then(function(B){var L=tc(0,a(a({},k),{values:k.values.map(function(I,R){var Q;return B.failures[R]?I:(I=(Q=E.keyPath)!==null&&Q!==void 0&&Q.includes(".")?qe(I):a({},I),pe(I,E.keyPath,B.results[R]),I)})}),B);j.optimisticOps.push(L),queueMicrotask(function(){return k.mutatedParts&&$a(k.mutatedParts)})}),D):w.mutate(k)},query:function(k){if(!_i(Te,w)||!ec("query",k))return w.query(k);var D=((L=Te.trans)===null||L===void 0?void 0:L.db._options.cache)==="immutable",R=Te,j=R.requery,B=R.signal,L=(function(Y,V,G,$){var ee=wi["idb://".concat(Y,"/").concat(V)];if(!ee)return[];if(!(V=ee.queries[G]))return[null,!1,ee,null];var le=V[($.query?$.query.index.name:null)||""];if(!le)return[null,!1,ee,null];switch(G){case"query":var ue=le.find(function(be){return be.req.limit===$.limit&&be.req.values===$.values&&sl(be.req.query.range,$.query.range)});return ue?[ue,!0,ee,le]:[le.find(function(be){return("limit"in be.req?be.req.limit:1/0)>=$.limit&&(!$.values||be.req.values)&&oa(be.req.query.range,$.query.range)}),!1,ee,le];case"count":return ue=le.find(function(be){return sl(be.req.query.range,$.query.range)}),[ue,!!ue,ee,le]}})(d,v,"query",k),I=L[0],R=L[1],Q=L[2],q=L[3];return I&&R?I.obsSet=k.obsSet:(R=w.query(k).then(function(Y){var V=Y.result;if(I&&(I.res=V),D){for(var G=0,$=V.length;G<$;++G)Object.freeze(V[G]);Object.freeze(V)}else Y.result=qe(V);return Y}).catch(function(Y){return q&&I&&se(q,I),Promise.reject(Y)}),I={obsSet:k.obsSet,promise:R,subscribers:new Set,type:"query",req:k,dirty:!1},q?q.push(I):(q=[I],(Q=Q||(wi["idb://".concat(d,"/").concat(v)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[k.query.index.name||""]=q)),xd(I,q,j,B),I.promise.then(function(Y){return{result:So(Y.result,k,Q==null?void 0:Q.optimisticOps,w,I,D)}})}})}})}};function ua(c,d){return new Proxy(c,{get:function(v,w,E){return w==="db"?d:Reflect.get(v,w,E)}})}var mr=(Mt.prototype.version=function(c){if(isNaN(c)||c<.1)throw new ge.Type("Given version is not a positive number");if(c=Math.round(10*c)/10,this.idbdb||this._state.isBeingOpened)throw new ge.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,c);var d=this._versions,v=d.filter(function(w){return w._cfg.version===c})[0];return v||(v=new this.Version(c),d.push(v),d.sort(fo),v.stores({}),this._state.autoSchema=!1,v)},Mt.prototype._whenReady=function(c){var d=this;return this.idbdb&&(this._state.openComplete||Te.letThrough||this._vip)?c():new Ae(function(v,w){if(d._state.openComplete)return w(new ge.DatabaseClosed(d._state.dbOpenError));if(!d._state.isBeingOpened){if(!d._state.autoOpen)return void w(new ge.DatabaseClosed);d.open().catch(Ve)}d._state.dbReadyPromise.then(v,w)}).then(c)},Mt.prototype.use=function(c){var d=c.stack,v=c.create,w=c.level,E=c.name;return E&&this.unuse({stack:d,name:E}),c=this._middlewares[d]||(this._middlewares[d]=[]),c.push({stack:d,create:v,level:w??10,name:E}),c.sort(function(k,D){return k.level-D.level}),this},Mt.prototype.unuse=function(c){var d=c.stack,v=c.name,w=c.create;return d&&this._middlewares[d]&&(this._middlewares[d]=this._middlewares[d].filter(function(E){return w?E.create!==w:!!v&&E.name!==v})),this},Mt.prototype.open=function(){var c=this;return Fn(vn,function(){return bd(c)})},Mt.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var c=this._state,d=di.indexOf(this);if(0<=d&&di.splice(d,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}c.isBeingOpened||(c.dbReadyPromise=new Ae(function(v){c.dbReadyResolve=v}),c.openCanceller=new Ae(function(v,w){c.cancelOpen=w}))},Mt.prototype.close=function(v){var d=(v===void 0?{disableAutoOpen:!0}:v).disableAutoOpen,v=this._state;d?(v.isBeingOpened&&v.cancelOpen(new ge.DatabaseClosed),this._close(),v.autoOpen=!1,v.dbOpenError=new ge.DatabaseClosed):(this._close(),v.autoOpen=this._options.autoOpen||v.isBeingOpened,v.openComplete=!1,v.dbOpenError=null)},Mt.prototype.delete=function(c){var d=this;c===void 0&&(c={disableAutoOpen:!0});var v=0<arguments.length&&typeof arguments[0]!="object",w=this._state;return new Ae(function(E,k){function D(){d.close(c);var j=d._deps.indexedDB.deleteDatabase(d.name);j.onsuccess=Tt(function(){var B,L,I;B=d._deps,L=d.name,I=B.indexedDB,B=B.IDBKeyRange,Xa(I)||L===Fl||po(I,B).delete(L).catch(Ve),E()}),j.onerror=Pn(k),j.onblocked=d._fireOnBlocked}if(v)throw new ge.InvalidArgument("Invalid closeOptions argument to db.delete()");w.isBeingOpened?w.dbReadyPromise.then(D):D()})},Mt.prototype.backendDB=function(){return this.idbdb},Mt.prototype.isOpen=function(){return this.idbdb!==null},Mt.prototype.hasBeenClosed=function(){var c=this._state.dbOpenError;return c&&c.name==="DatabaseClosed"},Mt.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Mt.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Mt.prototype,"tables",{get:function(){var c=this;return p(this._allTables).map(function(d){return c._allTables[d]})},enumerable:!1,configurable:!0}),Mt.prototype.transaction=function(){var c=(function(d,v,w){var E=arguments.length;if(E<2)throw new ge.InvalidArgument("Too few arguments");for(var k=new Array(E-1);--E;)k[E-1]=arguments[E];return w=k.pop(),[d,Pe(k),w]}).apply(this,arguments);return this._transaction.apply(this,c)},Mt.prototype._transaction=function(c,d,v){var w=this,E=Te.trans;E&&E.db===this&&c.indexOf("!")===-1||(E=null);var k,D,j=c.indexOf("?")!==-1;c=c.replace("!","").replace("?","");try{if(D=d.map(function(L){if(L=L instanceof w.Table?L.name:L,typeof L!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return L}),c=="r"||c===Nr)k=Nr;else{if(c!="rw"&&c!=Qr)throw new ge.InvalidArgument("Invalid transaction mode: "+c);k=Qr}if(E){if(E.mode===Nr&&k===Qr){if(!j)throw new ge.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");E=null}E&&D.forEach(function(L){if(E&&E.storeNames.indexOf(L)===-1){if(!j)throw new ge.SubTransaction("Table "+L+" not included in parent transaction.");E=null}}),j&&E&&!E.active&&(E=null)}}catch(L){return E?E._promise(null,function(I,R){R(L)}):St(L)}var B=(function L(I,R,Q,q,Y){return Ae.resolve().then(function(){var V=Te.transless||Te,G=I._createTransaction(R,Q,I._dbSchema,q);if(G.explicit=!0,V={trans:G,transless:V},q)G.idbtrans=q.idbtrans;else try{G.create(),G.idbtrans._explicit=!0,I._state.PR1398_maxLoop=3}catch(le){return le.name===Qe.InvalidState&&I.isOpen()&&0<--I._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),I.close({disableAutoOpen:!1}),I.open().then(function(){return L(I,R,Q,null,Y)})):St(le)}var $,ee=N(Y);return ee&&Yt(),V=Ae.follow(function(){var le;($=Y.call(G,G))&&(ee?(le=zn.bind(null,null),$.then(le,le)):typeof $.next=="function"&&typeof $.throw=="function"&&($=sa($)))},V),($&&typeof $.then=="function"?Ae.resolve($).then(function(le){return G.active?le:St(new ge.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):V.then(function(){return $})).then(function(le){return q&&G._resolve(),G._completion.then(function(){return le})}).catch(function(le){return G._reject(le),St(le)})})}).bind(null,this,k,D,E,v);return E?E._promise(k,B,"lock"):Te.trans?Fn(Te.transless,function(){return w._whenReady(B)}):this._whenReady(B)},Mt.prototype.table=function(c){if(!x(this._allTables,c))throw new ge.InvalidTable("Table ".concat(c," does not exist"));return this._allTables[c]},Mt);function Mt(c,d){var v=this;this._middlewares={},this.verno=0;var w=Mt.dependencies;this._options=d=a({addons:Mt.addons,autoOpen:!0,indexedDB:w.indexedDB,IDBKeyRange:w.IDBKeyRange,cache:"cloned"},d),this._deps={indexedDB:d.indexedDB,IDBKeyRange:d.IDBKeyRange},w=d.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var E,k,D,j,B,L={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Ve,dbReadyPromise:null,cancelOpen:Ve,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:d.autoOpen};L.dbReadyPromise=new Ae(function(R){L.dbReadyResolve=R}),L.openCanceller=new Ae(function(R,Q){L.cancelOpen=Q}),this._state=L,this.name=c,this.on=ea(this,"populate","blocked","versionchange","close",{ready:[Kl,Ve]}),this.once=function(R,Q){var q=function(){for(var Y=[],V=0;V<arguments.length;V++)Y[V]=arguments[V];v.on(R).unsubscribe(q),Q.apply(v,Y)};return v.on(R,q)},this.on.ready.subscribe=z(this.on.ready.subscribe,function(R){return function(Q,q){Mt.vip(function(){var Y,V=v._state;V.openComplete?(V.dbOpenError||Ae.resolve().then(Q),q&&R(Q)):V.onReadyBeingFired?(V.onReadyBeingFired.push(Q),q&&R(Q)):(R(Q),Y=v,q||R(function G(){Y.on.ready.unsubscribe(Q),Y.on.ready.unsubscribe(G)}))})}}),this.Collection=(E=this,sn(md.prototype,function($,G){this.db=E;var q=lo,Y=null;if(G)try{q=G()}catch(ee){Y=ee}var V=$._ctx,G=V.table,$=G.hook.reading.fire;this._ctx={table:G,index:V.index,isPrimKey:!V.index||G.schema.primKey.keyPath&&V.index===G.schema.primKey.name,range:q,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:Y,or:V.or,valueMapper:$!==it?$:null}})),this.Table=(k=this,sn(ao.prototype,function(R,Q,q){this.db=k,this._tx=q,this.name=R,this.schema=Q,this.hook=k._allTables[R]?k._allTables[R].hook:ea(null,{creating:[yn,Ve],reading:[tt,it],updating:[Jn,Ve],deleting:[oi,Ve]})})),this.Transaction=(D=this,sn(co.prototype,function(R,Q,q,Y,V){var G=this;R!=="readonly"&&Q.forEach(function($){$=($=q[$])===null||$===void 0?void 0:$.yProps,$&&(Q=Q.concat($.map(function(ee){return ee.updatesTable})))}),this.db=D,this.mode=R,this.storeNames=Q,this.schema=q,this.chromeTransactionDurability=Y,this.idbtrans=null,this.on=ea(this,"complete","error","abort"),this.parent=V||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Ae(function($,ee){G._resolve=$,G._reject=ee}),this._completion.then(function(){G.active=!1,G.on.complete.fire()},function($){var ee=G.active;return G.active=!1,G.on.error.fire($),G.parent?G.parent._reject($):ee&&G.idbtrans&&G.idbtrans.abort(),St($)})})),this.Version=(j=this,sn(gd.prototype,function(R){this.db=j,this._cfg={version:R,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(B=this,sn(yi.prototype,function(R,Q,q){if(this.db=B,this._ctx={table:R,index:Q===":id"?null:Q,or:q},this._cmp=this._ascending=nt,this._descending=function(Y,V){return nt(V,Y)},this._max=function(Y,V){return 0<nt(Y,V)?Y:V},this._min=function(Y,V){return nt(Y,V)<0?Y:V},this._IDBKeyRange=B._deps.IDBKeyRange,!this._IDBKeyRange)throw new ge.MissingAPI})),this.on("versionchange",function(R){0<R.newVersion?console.warn("Another connection wants to upgrade database '".concat(v.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(v.name,"'. Closing db now to resume the delete request.")),v.close({disableAutoOpen:!1})}),this.on("blocked",function(R){!R.newVersion||R.newVersion<R.oldVersion?console.warn("Dexie.delete('".concat(v.name,"') was blocked")):console.warn("Upgrade '".concat(v.name,"' blocked by other connection holding version ").concat(R.oldVersion/10))}),this._maxKey=rl(d.IDBKeyRange),this._createTransaction=function(R,Q,q,Y){return new v.Transaction(R,Q,q,v._options.chromeTransactionDurability,Y)},this._fireOnBlocked=function(R){v.on("blocked").fire(R),di.filter(function(Q){return Q.name===v.name&&Q!==v&&!Q._state.vcFired}).map(function(Q){return Q.on("versionchange").fire(R)})},this.use(Pu),this.use(Pa),this.use(_d),this.use(wd),this.use(Wu);var I=new Proxy(this,{get:function(R,Q,q){if(Q==="_vip")return!0;if(Q==="table")return function(V){return ua(v.table(V),I)};var Y=Reflect.get(R,Q,q);return Y instanceof ao?ua(Y,I):Q==="tables"?Y.map(function(V){return ua(V,I)}):Q==="_createTransaction"?function(){return ua(Y.apply(this,arguments),I)}:Y}});this.vip=I,w.forEach(function(R){return R(v)})}var ol,Ln=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",nc=(es.prototype.subscribe=function(c,d,v){return this._subscribe(c&&typeof c!="function"?c:{next:c,error:d,complete:v})},es.prototype[Ln]=function(){return this},es);function es(c){this._subscribe=c}try{ol={indexedDB:u.indexedDB||u.mozIndexedDB||u.webkitIndexedDB||u.msIndexedDB,IDBKeyRange:u.IDBKeyRange||u.webkitIDBKeyRange}}catch{ol={indexedDB:null,IDBKeyRange:null}}function rc(c){var d,v=!1,w=new nc(function(E){var k=N(c),D,j=!1,B={},L={},I={get closed(){return j},unsubscribe:function(){j||(j=!0,D&&D.abort(),R&&on.storagemutated.unsubscribe(q))}};E.start&&E.start(I);var R=!1,Q=function(){return Xr(Y)},q=function(V){Za(B,V),go(L,B)&&Q()},Y=function(){var V,G,$;!j&&ol.indexedDB&&(B={},V={},D&&D.abort(),D=new AbortController,$=(function(ee){var le=Vr();try{k&&Yt();var ue=jt(c,ee);return ue=k?ue.finally(zn):ue}finally{le&&dr()}})(G={subscr:V,signal:D.signal,requery:Q,querier:c,trans:null}),Promise.resolve($).then(function(ee){v=!0,d=ee,j||G.signal.aborted||(B={},(function(le){for(var ue in le)if(x(le,ue))return;return 1})(L=V)||R||(on(tl,q),R=!0),Xr(function(){return!j&&E.next&&E.next(ee)}))},function(ee){v=!1,["DatabaseClosedError","AbortError"].includes(ee==null?void 0:ee.name)||j||Xr(function(){j||E.error&&E.error(ee)})}))};return setTimeout(Q,0),I});return w.hasValue=function(){return v},w.getValue=function(){return d},w}var xi=mr;function Eo(c){var d=Fr;try{Fr=!0,on.storagemutated.fire(c),_o(c,!0)}finally{Fr=d}}S(xi,a(a({},Nt),{delete:function(c){return new xi(c,{addons:[]}).delete()},exists:function(c){return new xi(c,{addons:[]}).open().then(function(d){return d.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(c){try{return d=xi.dependencies,v=d.indexedDB,d=d.IDBKeyRange,(Xa(v)?Promise.resolve(v.databases()).then(function(w){return w.map(function(E){return E.name}).filter(function(E){return E!==Fl})}):po(v,d).toCollection().primaryKeys()).then(c)}catch{return St(new ge.MissingAPI)}var d,v},defineClass:function(){return function(c){g(this,c)}},ignoreTransaction:function(c){return Te.trans?Fn(Te.transless,c):c()},vip:yo,async:function(c){return function(){try{var d=sa(c.apply(this,arguments));return d&&typeof d.then=="function"?d:Ae.resolve(d)}catch(v){return St(v)}}},spawn:function(c,d,v){try{var w=sa(c.apply(v,d||[]));return w&&typeof w.then=="function"?w:Ae.resolve(w)}catch(E){return St(E)}},currentTransaction:{get:function(){return Te.trans||null}},waitFor:function(c,d){return d=Ae.resolve(typeof c=="function"?xi.ignoreTransaction(c):c).timeout(d||6e4),Te.trans?Te.trans.waitFor(d):d},Promise:Ae,debug:{get:function(){return Hn},set:function(c){Yu(c)}},derive:U,extend:g,props:S,override:z,Events:ea,on,liveQuery:rc,extendObservabilitySet:Za,getByKeyPath:ye,setByKeyPath:pe,delByKeyPath:function(c,d){typeof d=="string"?pe(c,d,void 0):"length"in d&&[].map.call(d,function(v){pe(c,v,void 0)})},shallowClone:Le,deepClone:qe,getObjectDiff:Ja,cmp:nt,asap:xe,minKey:-1/0,addons:[],connections:di,errnames:Qe,dependencies:ol,cache:wi,semVer:"4.2.1",version:"4.2.1".split(".").map(function(c){return parseInt(c)}).reduce(function(c,d,v){return c+d/Math.pow(10,2*v)})})),xi.maxKey=rl(xi.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(on(tl,function(c){Fr||(c=new CustomEvent(vi,{detail:c}),Fr=!0,dispatchEvent(c),Fr=!1)}),addEventListener(vi,function(c){c=c.detail,Fr||Eo(c)}));var ul,Fr=!1,Dn=function(){};return typeof BroadcastChannel<"u"&&((Dn=function(){(ul=new BroadcastChannel(vi)).onmessage=function(c){return c.data&&Eo(c.data)}})(),typeof ul.unref=="function"&&ul.unref(),on(tl,function(c){Fr||ul.postMessage(c)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(c){if(!mr.disableBfCache&&c.persisted){Hn&&console.debug("Dexie: handling persisted pagehide"),ul!=null&&ul.close();for(var d=0,v=di;d<v.length;d++)v[d].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(c){!mr.disableBfCache&&c.persisted&&(Hn&&console.debug("Dexie: handling persisted pageshow"),Dn(),Eo({all:new un(-1/0,[[]])}))})),Ae.rejectionMapper=function(c,d){return!c||c instanceof he||c instanceof TypeError||c instanceof SyntaxError||!c.name||!vt[c.name]?c:(d=new vt[c.name](d||c.message,c),"stack"in c&&C(d,"stack",{get:function(){return this.inner.stack}}),d)},Yu(Hn),a(mr,Object.freeze({__proto__:null,Dexie:mr,liveQuery:rc,Entity:Iu,cmp:nt,PropModification:el,replacePrefix:function(c,d){return new el({replacePrefix:[c,d]})},add:function(c){return new el({add:c})},remove:function(c){return new el({remove:c})},default:mr,RangeSet:un,mergeRanges:bi,rangesOverlap:$u}),{default:mr}),mr})})(df)),df.exports}var ZS=QS();const Bp=S0(ZS),rb=Symbol.for("Dexie"),dt=globalThis[rb]||(globalThis[rb]=Bp);if(Bp.semVer!==dt.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Bp.semVer} and ${dt.semVer}`);const{liveQuery:Ml,mergeRanges:cT,rangesOverlap:fT,RangeSet:$S,cmp:Gf,Entity:dT,PropModification:ib,replacePrefix:hT,add:pT,remove:yT,DexieYProvider:mT}=dt,qr=Math.floor,hf=Math.abs,E0=(r,n)=>r<n?r:n,Gs=(r,n)=>r>n?r:n,A0=r=>r!==0?r<0:1/r<0,lb=1,ab=2,hp=4,pp=8,bu=32,Yi=64,or=128,Xf=31,Lp=63,Aa=127,JS=2147483647,xf=Number.MAX_SAFE_INTEGER,sb=Number.MIN_SAFE_INTEGER,FS=Number.isInteger||(r=>typeof r=="number"&&isFinite(r)&&qr(r)===r),ka=()=>new Set,yp=r=>r[r.length-1],WS=(r,n)=>{for(let i=0;i<n.length;i++)r.push(n[i])},ql=Array.from,hy=(r,n)=>{for(let i=0;i<r.length;i++)if(!n(r[i],i,r))return!1;return!0},k0=(r,n)=>{for(let i=0;i<r.length;i++)if(n(r[i],i,r))return!0;return!1},PS=(r,n)=>{const i=new Array(r);for(let a=0;a<r;a++)i[a]=n(a,i);return i},Qf=Array.isArray,e1=String.fromCharCode,t1=r=>r.toLowerCase(),n1=/^\s*/g,r1=r=>r.replace(n1,""),i1=/([A-Z])/g,ob=(r,n)=>r1(r.replace(i1,i=>`${n}${t1(i)}`)),l1=r=>{const n=unescape(encodeURIComponent(r)),i=n.length,a=new Uint8Array(i);for(let o=0;o<i;o++)a[o]=n.codePointAt(o);return a},wu=typeof TextEncoder<"u"?new TextEncoder:null,a1=r=>wu.encode(r),s1=wu?a1:l1;let du=typeof TextDecoder>"u"?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});du&&du.decode(new Uint8Array).length===1&&(du=null);const o1=(r,n)=>PS(n,()=>r).join("");class Xs{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const Qs=()=>new Xs,u1=r=>{let n=r.cpos;for(let i=0;i<r.bufs.length;i++)n+=r.bufs[i].length;return n},sr=r=>{const n=new Uint8Array(u1(r));let i=0;for(let a=0;a<r.bufs.length;a++){const o=r.bufs[a];n.set(o,i),i+=o.length}return n.set(new Uint8Array(r.cbuf.buffer,0,r.cpos),i),n},c1=(r,n)=>{const i=r.cbuf.length;i-r.cpos<n&&(r.bufs.push(new Uint8Array(r.cbuf.buffer,0,r.cpos)),r.cbuf=new Uint8Array(Gs(i,n)*2),r.cpos=0)},dn=(r,n)=>{const i=r.cbuf.length;r.cpos===i&&(r.bufs.push(r.cbuf),r.cbuf=new Uint8Array(i*2),r.cpos=0),r.cbuf[r.cpos++]=n},qp=dn,We=(r,n)=>{for(;n>Aa;)dn(r,or|Aa&n),n=qr(n/128);dn(r,Aa&n)},py=(r,n)=>{const i=A0(n);for(i&&(n=-n),dn(r,(n>Lp?or:0)|(i?Yi:0)|Lp&n),n=qr(n/64);n>0;)dn(r,(n>Aa?or:0)|Aa&n),n=qr(n/128)},Hp=new Uint8Array(3e4),f1=Hp.length/3,d1=(r,n)=>{if(n.length<f1){const i=wu.encodeInto(n,Hp).written||0;We(r,i);for(let a=0;a<i;a++)dn(r,Hp[a])}else Sn(r,s1(n))},h1=(r,n)=>{const i=unescape(encodeURIComponent(n)),a=i.length;We(r,a);for(let o=0;o<a;o++)dn(r,i.codePointAt(o))},Ar=wu&&wu.encodeInto?d1:h1,p1=(r,n)=>Nu(r,sr(n)),Nu=(r,n)=>{const i=r.cbuf.length,a=r.cpos,o=E0(i-a,n.length),u=n.length-o;r.cbuf.set(n.subarray(0,o),a),r.cpos+=o,u>0&&(r.bufs.push(r.cbuf),r.cbuf=new Uint8Array(Gs(i*2,u)),r.cbuf.set(n.subarray(o)),r.cpos=u)},Sn=(r,n)=>{We(r,n.byteLength),Nu(r,n)},Zf=(r,n)=>{c1(r,n);const i=new DataView(r.cbuf.buffer,r.cpos,n);return r.cpos+=n,i},y1=(r,n)=>Zf(r,4).setFloat32(0,n,!1),m1=(r,n)=>Zf(r,8).setFloat64(0,n,!1),v1=(r,n)=>Zf(r,8).setBigInt64(0,n,!1),ub=(r,n)=>Zf(r,8).setBigUint64(0,n,!1),cb=new DataView(new ArrayBuffer(4)),g1=r=>(cb.setFloat32(0,r),cb.getFloat32(0)===r),Rl=(r,n)=>{switch(typeof n){case"string":dn(r,119),Ar(r,n);break;case"number":FS(n)&&hf(n)<=JS?(dn(r,125),py(r,n)):g1(n)?(dn(r,124),y1(r,n)):(dn(r,123),m1(r,n));break;case"bigint":dn(r,122),v1(r,n);break;case"object":if(n===null)dn(r,126);else if(Qf(n)){dn(r,117),We(r,n.length);for(let i=0;i<n.length;i++)Rl(r,n[i])}else if(n instanceof Uint8Array)dn(r,116),Sn(r,n);else{dn(r,118);const i=Object.keys(n);We(r,i.length);for(let a=0;a<i.length;a++){const o=i[a];Ar(r,o),Rl(r,n[o])}}break;case"boolean":dn(r,n?120:121);break;default:dn(r,127)}};class fb extends Xs{constructor(n){super(),this.w=n,this.s=null,this.count=0}write(n){this.s===n?this.count++:(this.count>0&&We(this,this.count-1),this.count=1,this.w(this,n),this.s=n)}}const db=r=>{r.count>0&&(py(r.encoder,r.count===1?r.s:-r.s),r.count>1&&We(r.encoder,r.count-2))};class pf{constructor(){this.encoder=new Xs,this.s=0,this.count=0}write(n){this.s===n?this.count++:(db(this),this.count=1,this.s=n)}toUint8Array(){return db(this),sr(this.encoder)}}const hb=r=>{if(r.count>0){const n=r.diff*2+(r.count===1?0:1);py(r.encoder,n),r.count>1&&We(r.encoder,r.count-2)}};class mp{constructor(){this.encoder=new Xs,this.s=0,this.count=0,this.diff=0}write(n){this.diff===n-this.s?(this.s=n,this.count++):(hb(this),this.count=1,this.diff=n-this.s,this.s=n)}toUint8Array(){return hb(this),sr(this.encoder)}}class b1{constructor(){this.sarr=[],this.s="",this.lensE=new pf}write(n){this.s+=n,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(n.length)}toUint8Array(){const n=new Xs;return this.sarr.push(this.s),this.s="",Ar(n,this.sarr.join("")),Nu(n,this.lensE.toUint8Array()),sr(n)}}const li=r=>new Error(r),Lr=()=>{throw li("Method unimplemented")},Cr=()=>{throw li("Unexpected case")},O0=li("Unexpected end of array"),T0=li("Integer out of Range");class Zs{constructor(n){this.arr=n,this.pos=0}}const Uu=r=>new Zs(r),C0=r=>r.pos!==r.arr.length,w1=(r,n)=>{const i=new Uint8Array(r.arr.buffer,r.pos+r.arr.byteOffset,n);return r.pos+=n,i},En=r=>w1(r,Ot(r)),Rs=r=>r.arr[r.pos++],Ot=r=>{let n=0,i=1;const a=r.arr.length;for(;r.pos<a;){const o=r.arr[r.pos++];if(n=n+(o&Aa)*i,i*=128,o<or)return n;if(n>xf)throw T0}throw O0},yy=r=>{let n=r.arr[r.pos++],i=n&Lp,a=64;const o=(n&Yi)>0?-1:1;if((n&or)===0)return o*i;const u=r.arr.length;for(;r.pos<u;){if(n=r.arr[r.pos++],i=i+(n&Aa)*a,a*=128,n<or)return o*i;if(i>xf)throw T0}throw O0},_1=r=>{let n=Ot(r);if(n===0)return"";{let i=String.fromCodePoint(Rs(r));if(--n<100)for(;n--;)i+=String.fromCodePoint(Rs(r));else for(;n>0;){const a=n<1e4?n:1e4,o=r.arr.subarray(r.pos,r.pos+a);r.pos+=a,i+=String.fromCodePoint.apply(null,o),n-=a}return decodeURIComponent(escape(i))}},x1=r=>du.decode(En(r)),kr=du?x1:_1,$f=(r,n)=>{const i=new DataView(r.arr.buffer,r.arr.byteOffset+r.pos,n);return r.pos+=n,i},S1=r=>$f(r,4).getFloat32(0,!1),E1=r=>$f(r,8).getFloat64(0,!1),A1=r=>$f(r,8).getBigInt64(0,!1),pb=r=>$f(r,8).getBigUint64(0,!1),k1=[r=>{},r=>null,yy,S1,E1,A1,r=>!1,r=>!0,kr,r=>{const n=Ot(r),i={};for(let a=0;a<n;a++){const o=kr(r);i[o]=zl(r)}return i},r=>{const n=Ot(r),i=[];for(let a=0;a<n;a++)i.push(zl(r));return i},En],zl=r=>k1[127-Rs(r)](r);class yb extends Zs{constructor(n,i){super(n),this.reader=i,this.s=null,this.count=0}read(){return this.count===0&&(this.s=this.reader(this),C0(this)?this.count=Ot(this)+1:this.count=-1),this.count--,this.s}}class yf extends Zs{constructor(n){super(n),this.s=0,this.count=0}read(){if(this.count===0){this.s=yy(this);const n=A0(this.s);this.count=1,n&&(this.s=-this.s,this.count=Ot(this)+2)}return this.count--,this.s}}class vp extends Zs{constructor(n){super(n),this.s=0,this.count=0,this.diff=0}read(){if(this.count===0){const n=yy(this),i=n&1;this.diff=qr(n/2),this.count=1,i&&(this.count=Ot(this)+2)}return this.s+=this.diff,this.count--,this.s}}class O1{constructor(n){this.decoder=new yf(n),this.str=kr(this.decoder),this.spos=0}read(){const n=this.spos+this.decoder.read(),i=this.str.slice(this.spos,n);return this.spos=n,i}}var Kp=function(r,n){return Kp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(i[o]=a[o])},Kp(r,n)};function Gi(r,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");Kp(r,n);function i(){this.constructor=r}r.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}function T1(r,n,i,a){function o(u){return u instanceof i?u:new i(function(p){p(u)})}return new(i||(i=Promise))(function(u,p){function y(b){try{m(a.next(b))}catch(x){p(x)}}function g(b){try{m(a.throw(b))}catch(x){p(x)}}function m(b){b.done?u(b.value):o(b.value).then(y,g)}m((a=a.apply(r,n||[])).next())})}function D0(r,n){var i={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},a,o,u,p=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return p.next=y(0),p.throw=y(1),p.return=y(2),typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function y(m){return function(b){return g([m,b])}}function g(m){if(a)throw new TypeError("Generator is already executing.");for(;p&&(p=0,m[0]&&(i=0)),i;)try{if(a=1,o&&(u=m[0]&2?o.return:m[0]?o.throw||((u=o.return)&&u.call(o),0):o.next)&&!(u=u.call(o,m[1])).done)return u;switch(o=0,u&&(m=[m[0]&2,u.value]),m[0]){case 0:case 1:u=m;break;case 4:return i.label++,{value:m[1],done:!1};case 5:i.label++,o=m[1],m=[0];continue;case 7:m=i.ops.pop(),i.trys.pop();continue;default:if(u=i.trys,!(u=u.length>0&&u[u.length-1])&&(m[0]===6||m[0]===2)){i=0;continue}if(m[0]===3&&(!u||m[1]>u[0]&&m[1]<u[3])){i.label=m[1];break}if(m[0]===6&&i.label<u[1]){i.label=u[1],u=m;break}if(u&&i.label<u[2]){i.label=u[2],i.ops.push(m);break}u[2]&&i.ops.pop(),i.trys.pop();continue}m=n.call(r,i)}catch(b){m=[6,b],o=0}finally{a=u=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}}function zs(r){var n=typeof Symbol=="function"&&Symbol.iterator,i=n&&r[n],a=0;if(i)return i.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&a>=r.length&&(r=void 0),{value:r&&r[a++],done:!r}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function Oa(r,n){var i=typeof Symbol=="function"&&r[Symbol.iterator];if(!i)return r;var a=i.call(r),o,u=[],p;try{for(;(n===void 0||n-- >0)&&!(o=a.next()).done;)u.push(o.value)}catch(y){p={error:y}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(p)throw p.error}}return u}function Bs(r,n,i){if(i||arguments.length===2)for(var a=0,o=n.length,u;a<o;a++)(u||!(a in n))&&(u||(u=Array.prototype.slice.call(n,0,a)),u[a]=n[a]);return r.concat(u||Array.prototype.slice.call(n))}function Cs(r){return this instanceof Cs?(this.v=r,this):new Cs(r)}function C1(r,n,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=i.apply(r,n||[]),o,u=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),y("next"),y("throw"),y("return",p),o[Symbol.asyncIterator]=function(){return this},o;function p(A){return function(C){return Promise.resolve(C).then(A,x)}}function y(A,C){a[A]&&(o[A]=function(U){return new Promise(function(X,ie){u.push([A,U,X,ie])>1||g(A,U)})},C&&(o[A]=C(o[A])))}function g(A,C){try{m(a[A](C))}catch(U){S(u[0][3],U)}}function m(A){A.value instanceof Cs?Promise.resolve(A.value.v).then(b,x):S(u[0][2],A)}function b(A){g("next",A)}function x(A){g("throw",A)}function S(A,C){A(C),u.shift(),u.length&&g(u[0][0],u[0][1])}}function D1(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r[Symbol.asyncIterator],i;return n?n.call(r):(r=typeof zs=="function"?zs(r):r[Symbol.iterator](),i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i);function a(u){i[u]=r[u]&&function(p){return new Promise(function(y,g){p=r[u](p),o(y,g,p.done,p.value)})}}function o(u,p,y,g){Promise.resolve(g).then(function(m){u({value:m,done:y})},p)}}function xt(r){return typeof r=="function"}function my(r){var n=function(a){Error.call(a),a.stack=new Error().stack},i=r(n);return i.prototype=Object.create(Error.prototype),i.prototype.constructor=i,i}var gp=my(function(r){return function(i){r(this),this.message=i?i.length+` errors occurred during unsubscription:
`+i.map(function(a,o){return o+1+") "+a.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=i}});function Sf(r,n){if(r){var i=r.indexOf(n);0<=i&&r.splice(i,1)}}var $s=(function(){function r(n){this.initialTeardown=n,this.closed=!1,this._parentage=null,this._finalizers=null}return r.prototype.unsubscribe=function(){var n,i,a,o,u;if(!this.closed){this.closed=!0;var p=this._parentage;if(p)if(this._parentage=null,Array.isArray(p))try{for(var y=zs(p),g=y.next();!g.done;g=y.next()){var m=g.value;m.remove(this)}}catch(U){n={error:U}}finally{try{g&&!g.done&&(i=y.return)&&i.call(y)}finally{if(n)throw n.error}}else p.remove(this);var b=this.initialTeardown;if(xt(b))try{b()}catch(U){u=U instanceof gp?U.errors:[U]}var x=this._finalizers;if(x){this._finalizers=null;try{for(var S=zs(x),A=S.next();!A.done;A=S.next()){var C=A.value;try{mb(C)}catch(U){u=u??[],U instanceof gp?u=Bs(Bs([],Oa(u)),Oa(U.errors)):u.push(U)}}}catch(U){a={error:U}}finally{try{A&&!A.done&&(o=S.return)&&o.call(S)}finally{if(a)throw a.error}}}if(u)throw new gp(u)}},r.prototype.add=function(n){var i;if(n&&n!==this)if(this.closed)mb(n);else{if(n instanceof r){if(n.closed||n._hasParent(this))return;n._addParent(this)}(this._finalizers=(i=this._finalizers)!==null&&i!==void 0?i:[]).push(n)}},r.prototype._hasParent=function(n){var i=this._parentage;return i===n||Array.isArray(i)&&i.includes(n)},r.prototype._addParent=function(n){var i=this._parentage;this._parentage=Array.isArray(i)?(i.push(n),i):i?[i,n]:n},r.prototype._removeParent=function(n){var i=this._parentage;i===n?this._parentage=null:Array.isArray(i)&&Sf(i,n)},r.prototype.remove=function(n){var i=this._finalizers;i&&Sf(i,n),n instanceof r&&n._removeParent(this)},r.EMPTY=(function(){var n=new r;return n.closed=!0,n})(),r})(),j0=$s.EMPTY;function N0(r){return r instanceof $s||r&&"closed"in r&&xt(r.remove)&&xt(r.add)&&xt(r.unsubscribe)}function mb(r){xt(r)?r():r.unsubscribe()}var j1={Promise:void 0},N1={setTimeout:function(r,n){for(var i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];return setTimeout.apply(void 0,Bs([r,n],Oa(i)))},clearTimeout:function(r){return clearTimeout(r)},delegate:void 0};function U0(r){N1.setTimeout(function(){throw r})}function vb(){}function mf(r){r()}var vy=(function(r){Gi(n,r);function n(i){var a=r.call(this)||this;return a.isStopped=!1,i?(a.destination=i,N0(i)&&i.add(a)):a.destination=R1,a}return n.create=function(i,a,o){return new Ls(i,a,o)},n.prototype.next=function(i){this.isStopped||this._next(i)},n.prototype.error=function(i){this.isStopped||(this.isStopped=!0,this._error(i))},n.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},n.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,r.prototype.unsubscribe.call(this),this.destination=null)},n.prototype._next=function(i){this.destination.next(i)},n.prototype._error=function(i){try{this.destination.error(i)}finally{this.unsubscribe()}},n.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},n})($s),U1=(function(){function r(n){this.partialObserver=n}return r.prototype.next=function(n){var i=this.partialObserver;if(i.next)try{i.next(n)}catch(a){nf(a)}},r.prototype.error=function(n){var i=this.partialObserver;if(i.error)try{i.error(n)}catch(a){nf(a)}else nf(n)},r.prototype.complete=function(){var n=this.partialObserver;if(n.complete)try{n.complete()}catch(i){nf(i)}},r})(),Ls=(function(r){Gi(n,r);function n(i,a,o){var u=r.call(this)||this,p;return xt(i)||!i?p={next:i??void 0,error:a??void 0,complete:o??void 0}:p=i,u.destination=new U1(p),u}return n})(vy);function nf(r){U0(r)}function M1(r){throw r}var R1={closed:!0,next:vb,error:M1,complete:vb},gy=(function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"})();function Js(r){return r}function z1(r){return r.length===0?Js:r.length===1?r[0]:function(i){return r.reduce(function(a,o){return o(a)},i)}}var ln=(function(){function r(n){n&&(this._subscribe=n)}return r.prototype.lift=function(n){var i=new r;return i.source=this,i.operator=n,i},r.prototype.subscribe=function(n,i,a){var o=this,u=L1(n)?n:new Ls(n,i,a);return mf(function(){var p=o,y=p.operator,g=p.source;u.add(y?y.call(u,g):g?o._subscribe(u):o._trySubscribe(u))}),u},r.prototype._trySubscribe=function(n){try{return this._subscribe(n)}catch(i){n.error(i)}},r.prototype.forEach=function(n,i){var a=this;return i=gb(i),new i(function(o,u){var p=new Ls({next:function(y){try{n(y)}catch(g){u(g),p.unsubscribe()}},error:u,complete:o});a.subscribe(p)})},r.prototype._subscribe=function(n){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(n)},r.prototype[gy]=function(){return this},r.prototype.pipe=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return z1(n)(this)},r.prototype.toPromise=function(n){var i=this;return n=gb(n),new n(function(a,o){var u;i.subscribe(function(p){return u=p},function(p){return o(p)},function(){return a(u)})})},r.create=function(n){return new r(n)},r})();function gb(r){var n;return(n=r??j1.Promise)!==null&&n!==void 0?n:Promise}function B1(r){return r&&xt(r.next)&&xt(r.error)&&xt(r.complete)}function L1(r){return r&&r instanceof vy||B1(r)&&N0(r)}function q1(r){return xt(r==null?void 0:r.lift)}function fr(r){return function(n){if(q1(n))return n.lift(function(i){try{return r(i,this)}catch(a){this.error(a)}});throw new TypeError("Unable to lift unknown Observable type")}}function cr(r,n,i,a,o){return new H1(r,n,i,a,o)}var H1=(function(r){Gi(n,r);function n(i,a,o,u,p,y){var g=r.call(this,i)||this;return g.onFinalize=p,g.shouldUnsubscribe=y,g._next=a?function(m){try{a(m)}catch(b){i.error(b)}}:r.prototype._next,g._error=u?function(m){try{u(m)}catch(b){i.error(b)}finally{this.unsubscribe()}}:r.prototype._error,g._complete=o?function(){try{o()}catch(m){i.error(m)}finally{this.unsubscribe()}}:r.prototype._complete,g}return n.prototype.unsubscribe=function(){var i;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var a=this.closed;r.prototype.unsubscribe.call(this),!a&&((i=this.onFinalize)===null||i===void 0||i.call(this))}},n})(vy),K1=my(function(r){return function(){r(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),Ta=(function(r){Gi(n,r);function n(){var i=r.call(this)||this;return i.closed=!1,i.currentObservers=null,i.observers=[],i.isStopped=!1,i.hasError=!1,i.thrownError=null,i}return n.prototype.lift=function(i){var a=new bb(this,this);return a.operator=i,a},n.prototype._throwIfClosed=function(){if(this.closed)throw new K1},n.prototype.next=function(i){var a=this;mf(function(){var o,u;if(a._throwIfClosed(),!a.isStopped){a.currentObservers||(a.currentObservers=Array.from(a.observers));try{for(var p=zs(a.currentObservers),y=p.next();!y.done;y=p.next()){var g=y.value;g.next(i)}}catch(m){o={error:m}}finally{try{y&&!y.done&&(u=p.return)&&u.call(p)}finally{if(o)throw o.error}}}})},n.prototype.error=function(i){var a=this;mf(function(){if(a._throwIfClosed(),!a.isStopped){a.hasError=a.isStopped=!0,a.thrownError=i;for(var o=a.observers;o.length;)o.shift().error(i)}})},n.prototype.complete=function(){var i=this;mf(function(){if(i._throwIfClosed(),!i.isStopped){i.isStopped=!0;for(var a=i.observers;a.length;)a.shift().complete()}})},n.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(n.prototype,"observed",{get:function(){var i;return((i=this.observers)===null||i===void 0?void 0:i.length)>0},enumerable:!1,configurable:!0}),n.prototype._trySubscribe=function(i){return this._throwIfClosed(),r.prototype._trySubscribe.call(this,i)},n.prototype._subscribe=function(i){return this._throwIfClosed(),this._checkFinalizedStatuses(i),this._innerSubscribe(i)},n.prototype._innerSubscribe=function(i){var a=this,o=this,u=o.hasError,p=o.isStopped,y=o.observers;return u||p?j0:(this.currentObservers=null,y.push(i),new $s(function(){a.currentObservers=null,Sf(y,i)}))},n.prototype._checkFinalizedStatuses=function(i){var a=this,o=a.hasError,u=a.thrownError,p=a.isStopped;o?i.error(u):p&&i.complete()},n.prototype.asObservable=function(){var i=new ln;return i.source=this,i},n.create=function(i,a){return new bb(i,a)},n})(ln),bb=(function(r){Gi(n,r);function n(i,a){var o=r.call(this)||this;return o.destination=i,o.source=a,o}return n.prototype.next=function(i){var a,o;(o=(a=this.destination)===null||a===void 0?void 0:a.next)===null||o===void 0||o.call(a,i)},n.prototype.error=function(i){var a,o;(o=(a=this.destination)===null||a===void 0?void 0:a.error)===null||o===void 0||o.call(a,i)},n.prototype.complete=function(){var i,a;(a=(i=this.destination)===null||i===void 0?void 0:i.complete)===null||a===void 0||a.call(i)},n.prototype._subscribe=function(i){var a,o;return(o=(a=this.source)===null||a===void 0?void 0:a.subscribe(i))!==null&&o!==void 0?o:j0},n})(Ta),Br=(function(r){Gi(n,r);function n(i){var a=r.call(this)||this;return a._value=i,a}return Object.defineProperty(n.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),n.prototype._subscribe=function(i){var a=r.prototype._subscribe.call(this,i);return!a.closed&&i.next(this._value),a},n.prototype.getValue=function(){var i=this,a=i.hasError,o=i.thrownError,u=i._value;if(a)throw o;return this._throwIfClosed(),u},n.prototype.next=function(i){r.prototype.next.call(this,this._value=i)},n})(Ta),Y1={now:function(){return Date.now()}},V1=(function(r){Gi(n,r);function n(i,a){return r.call(this)||this}return n.prototype.schedule=function(i,a){return this},n})($s),wb={setInterval:function(r,n){for(var i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];return setInterval.apply(void 0,Bs([r,n],Oa(i)))},clearInterval:function(r){return clearInterval(r)},delegate:void 0},I1=(function(r){Gi(n,r);function n(i,a){var o=r.call(this,i,a)||this;return o.scheduler=i,o.work=a,o.pending=!1,o}return n.prototype.schedule=function(i,a){var o;if(a===void 0&&(a=0),this.closed)return this;this.state=i;var u=this.id,p=this.scheduler;return u!=null&&(this.id=this.recycleAsyncId(p,u,a)),this.pending=!0,this.delay=a,this.id=(o=this.id)!==null&&o!==void 0?o:this.requestAsyncId(p,this.id,a),this},n.prototype.requestAsyncId=function(i,a,o){return o===void 0&&(o=0),wb.setInterval(i.flush.bind(i,this),o)},n.prototype.recycleAsyncId=function(i,a,o){if(o===void 0&&(o=0),o!=null&&this.delay===o&&this.pending===!1)return a;a!=null&&wb.clearInterval(a)},n.prototype.execute=function(i,a){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var o=this._execute(i,a);if(o)return o;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},n.prototype._execute=function(i,a){var o=!1,u;try{this.work(i)}catch(p){o=!0,u=p||new Error("Scheduled action threw falsy error")}if(o)return this.unsubscribe(),u},n.prototype.unsubscribe=function(){if(!this.closed){var i=this,a=i.id,o=i.scheduler,u=o.actions;this.work=this.state=this.scheduler=null,this.pending=!1,Sf(u,this),a!=null&&(this.id=this.recycleAsyncId(o,a,null)),this.delay=null,r.prototype.unsubscribe.call(this)}},n})(V1),_b=(function(){function r(n,i){i===void 0&&(i=r.now),this.schedulerActionCtor=n,this.now=i}return r.prototype.schedule=function(n,i,a){return i===void 0&&(i=0),new this.schedulerActionCtor(this,n).schedule(a,i)},r.now=Y1.now,r})(),G1=(function(r){Gi(n,r);function n(i,a){a===void 0&&(a=_b.now);var o=r.call(this,i,a)||this;return o.actions=[],o._active=!1,o}return n.prototype.flush=function(i){var a=this.actions;if(this._active){a.push(i);return}var o;this._active=!0;do if(o=i.execute(i.state,i.delay))break;while(i=a.shift());if(this._active=!1,o){for(;i=a.shift();)i.unsubscribe();throw o}},n})(_b),by=new G1(I1),X1=by,M0=new ln(function(r){return r.complete()});function R0(r){return r&&xt(r.schedule)}function wy(r){return r[r.length-1]}function Q1(r){return xt(wy(r))?r.pop():void 0}function Mu(r){return R0(wy(r))?r.pop():void 0}function Z1(r,n){return typeof wy(r)=="number"?r.pop():n}var _y=(function(r){return r&&typeof r.length=="number"&&typeof r!="function"});function z0(r){return xt(r==null?void 0:r.then)}function B0(r){return xt(r[gy])}function L0(r){return Symbol.asyncIterator&&xt(r==null?void 0:r[Symbol.asyncIterator])}function q0(r){return new TypeError("You provided "+(r!==null&&typeof r=="object"?"an invalid object":"'"+r+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function $1(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var H0=$1();function K0(r){return xt(r==null?void 0:r[H0])}function Y0(r){return C1(this,arguments,function(){var i,a,o,u;return D0(this,function(p){switch(p.label){case 0:i=r.getReader(),p.label=1;case 1:p.trys.push([1,,9,10]),p.label=2;case 2:return[4,Cs(i.read())];case 3:return a=p.sent(),o=a.value,u=a.done,u?[4,Cs(void 0)]:[3,5];case 4:return[2,p.sent()];case 5:return[4,Cs(o)];case 6:return[4,p.sent()];case 7:return p.sent(),[3,2];case 8:return[3,10];case 9:return i.releaseLock(),[7];case 10:return[2]}})})}function V0(r){return xt(r==null?void 0:r.getReader)}function Dr(r){if(r instanceof ln)return r;if(r!=null){if(B0(r))return J1(r);if(_y(r))return F1(r);if(z0(r))return W1(r);if(L0(r))return I0(r);if(K0(r))return P1(r);if(V0(r))return eE(r)}throw q0(r)}function J1(r){return new ln(function(n){var i=r[gy]();if(xt(i.subscribe))return i.subscribe(n);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function F1(r){return new ln(function(n){for(var i=0;i<r.length&&!n.closed;i++)n.next(r[i]);n.complete()})}function W1(r){return new ln(function(n){r.then(function(i){n.closed||(n.next(i),n.complete())},function(i){return n.error(i)}).then(null,U0)})}function P1(r){return new ln(function(n){var i,a;try{for(var o=zs(r),u=o.next();!u.done;u=o.next()){var p=u.value;if(n.next(p),n.closed)return}}catch(y){i={error:y}}finally{try{u&&!u.done&&(a=o.return)&&a.call(o)}finally{if(i)throw i.error}}n.complete()})}function I0(r){return new ln(function(n){tE(r,n).catch(function(i){return n.error(i)})})}function eE(r){return I0(Y0(r))}function tE(r,n){var i,a,o,u;return T1(this,void 0,void 0,function(){var p,y;return D0(this,function(g){switch(g.label){case 0:g.trys.push([0,5,6,11]),i=D1(r),g.label=1;case 1:return[4,i.next()];case 2:if(a=g.sent(),!!a.done)return[3,4];if(p=a.value,n.next(p),n.closed)return[2];g.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return y=g.sent(),o={error:y},[3,11];case 6:return g.trys.push([6,,9,10]),a&&!a.done&&(u=i.return)?[4,u.call(i)]:[3,8];case 7:g.sent(),g.label=8;case 8:return[3,10];case 9:if(o)throw o.error;return[7];case 10:return[7];case 11:return n.complete(),[2]}})})}function Bl(r,n,i,a,o){a===void 0&&(a=0),o===void 0&&(o=!1);var u=n.schedule(function(){i(),o?r.add(this.schedule(null,a)):this.unsubscribe()},a);if(r.add(u),!o)return u}function G0(r,n){return n===void 0&&(n=0),fr(function(i,a){i.subscribe(cr(a,function(o){return Bl(a,r,function(){return a.next(o)},n)},function(){return Bl(a,r,function(){return a.complete()},n)},function(o){return Bl(a,r,function(){return a.error(o)},n)}))})}function X0(r,n){return n===void 0&&(n=0),fr(function(i,a){a.add(r.schedule(function(){return i.subscribe(a)},n))})}function nE(r,n){return Dr(r).pipe(X0(n),G0(n))}function rE(r,n){return Dr(r).pipe(X0(n),G0(n))}function iE(r,n){return new ln(function(i){var a=0;return n.schedule(function(){a===r.length?i.complete():(i.next(r[a++]),i.closed||this.schedule())})})}function lE(r,n){return new ln(function(i){var a;return Bl(i,n,function(){a=r[H0](),Bl(i,n,function(){var o,u,p;try{o=a.next(),u=o.value,p=o.done}catch(y){i.error(y);return}p?i.complete():i.next(u)},0,!0)}),function(){return xt(a==null?void 0:a.return)&&a.return()}})}function Q0(r,n){if(!r)throw new Error("Iterable cannot be null");return new ln(function(i){Bl(i,n,function(){var a=r[Symbol.asyncIterator]();Bl(i,n,function(){a.next().then(function(o){o.done?i.complete():i.next(o.value)})},0,!0)})})}function aE(r,n){return Q0(Y0(r),n)}function sE(r,n){if(r!=null){if(B0(r))return nE(r,n);if(_y(r))return iE(r,n);if(z0(r))return rE(r,n);if(L0(r))return Q0(r,n);if(K0(r))return lE(r,n);if(V0(r))return aE(r,n)}throw q0(r)}function ur(r,n){return n?sE(r,n):Dr(r)}function Vi(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var i=Mu(r);return ur(r,i)}function xb(r,n){var i=xt(r)?r:function(){return r},a=function(o){return o.error(i())};return new ln(a)}var oE=my(function(r){return function(){r(this),this.name="EmptyError",this.message="no elements in sequence"}});function Ea(r,n){return new Promise(function(i,a){var o=new Ls({next:function(u){i(u),o.unsubscribe()},error:a,complete:function(){a(new oE)}});r.subscribe(o)})}function uE(r){return r instanceof Date&&!isNaN(r)}function ar(r,n){return fr(function(i,a){var o=0;i.subscribe(cr(a,function(u){a.next(r.call(n,u,o++))}))})}var cE=Array.isArray;function fE(r,n){return cE(n)?r.apply(void 0,Bs([],Oa(n))):r(n)}function Z0(r){return ar(function(n){return fE(r,n)})}var dE=Array.isArray,hE=Object.getPrototypeOf,pE=Object.prototype,yE=Object.keys;function mE(r){if(r.length===1){var n=r[0];if(dE(n))return{args:n,keys:null};if(vE(n)){var i=yE(n);return{args:i.map(function(a){return n[a]}),keys:i}}}return{args:r,keys:null}}function vE(r){return r&&typeof r=="object"&&hE(r)===pE}function gE(r,n){return r.reduce(function(i,a,o){return i[a]=n[o],i},{})}function _u(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var i=Mu(r),a=Q1(r),o=mE(r),u=o.args,p=o.keys;if(u.length===0)return ur([],i);var y=new ln(bE(u,i,p?function(g){return gE(p,g)}:Js));return a?y.pipe(Z0(a)):y}function bE(r,n,i){return i===void 0&&(i=Js),function(a){Sb(n,function(){for(var o=r.length,u=new Array(o),p=o,y=o,g=function(b){Sb(n,function(){var x=ur(r[b],n),S=!1;x.subscribe(cr(a,function(A){u[b]=A,S||(S=!0,y--),y||a.next(i(u.slice()))},function(){--p||a.complete()}))},a)},m=0;m<o;m++)g(m)},a)}}function Sb(r,n,i){r?Bl(i,r,n):n()}function wE(r,n,i,a,o,u,p,y){var g=[],m=0,b=0,x=!1,S=function(){x&&!g.length&&!m&&n.complete()},A=function(U){return m<a?C(U):g.push(U)},C=function(U){m++;var X=!1;Dr(i(U,b++)).subscribe(cr(n,function(ie){n.next(ie)},function(){X=!0},void 0,function(){if(X)try{m--;for(var ie=function(){var W=g.shift();p||C(W)};g.length&&m<a;)ie();S()}catch(W){n.error(W)}}))};return r.subscribe(cr(n,A,function(){x=!0,S()})),function(){}}function Ru(r,n,i){return i===void 0&&(i=1/0),xt(n)?Ru(function(a,o){return ar(function(u,p){return n(a,u,o,p)})(Dr(r(a,o)))},i):(typeof n=="number"&&(i=n),fr(function(a,o){return wE(a,o,r,i)}))}function $0(r){return r===void 0&&(r=1/0),Ru(Js,r)}function _E(){return $0(1)}function Eb(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return _E()(ur(r,Mu(r)))}var xE=["addListener","removeListener"],SE=["addEventListener","removeEventListener"],EE=["on","off"];function ii(r,n,i,a){if(xt(i)&&(a=i,i=void 0),a)return ii(r,n,i).pipe(Z0(a));var o=Oa(OE(r)?SE.map(function(y){return function(g){return r[y](n,g,i)}}):AE(r)?xE.map(Ab(r,n)):kE(r)?EE.map(Ab(r,n)):[],2),u=o[0],p=o[1];if(!u&&_y(r))return Ru(function(y){return ii(y,n,i)})(Dr(r));if(!u)throw new TypeError("Invalid event target");return new ln(function(y){var g=function(){for(var m=[],b=0;b<arguments.length;b++)m[b]=arguments[b];return y.next(1<m.length?m:m[0])};return u(g),function(){return p(g)}})}function Ab(r,n){return function(i){return function(a){return r[i](n,a)}}}function AE(r){return xt(r.addListener)&&xt(r.removeListener)}function kE(r){return xt(r.on)&&xt(r.off)}function OE(r){return xt(r.addEventListener)&&xt(r.removeEventListener)}function J0(r,n,i){r===void 0&&(r=0),i===void 0&&(i=X1);var a=-1;return n!=null&&(R0(n)?i=n:a=n),new ln(function(o){var u=uE(r)?+r-i.now():r;u<0&&(u=0);var p=0;return i.schedule(function(){o.closed||(o.next(p++),0<=a?this.schedule(void 0,a):o.complete())},u)})}function Jf(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var i=Mu(r),a=Z1(r,1/0),o=r;return o.length?o.length===1?Dr(o[0]):$0(a)(ur(o,i)):M0}function Er(r,n){return fr(function(i,a){var o=0;i.subscribe(cr(a,function(u){return r.call(n,u,o++)&&a.next(u)}))})}function Yp(r){return fr(function(n,i){var a=null,o=!1,u;a=n.subscribe(cr(i,void 0,void 0,function(p){u=Dr(r(p,Yp(r)(n))),a?(a.unsubscribe(),a=null,u.subscribe(i)):o=!0})),o&&(a.unsubscribe(),a=null,u.subscribe(i))})}function kb(r,n){return n===void 0&&(n=by),fr(function(i,a){var o=null,u=null,p=null,y=function(){if(o){o.unsubscribe(),o=null;var m=u;u=null,a.next(m)}};function g(){var m=p+r,b=n.now();if(b<m){o=this.schedule(void 0,m-b),a.add(o);return}y()}i.subscribe(cr(a,function(m){u=m,p=n.now(),o||(o=n.schedule(g,r),a.add(o))},function(){y(),a.complete()},void 0,function(){u=o=null}))})}function Os(r){return r<=0?function(){return M0}:fr(function(n,i){var a=0;n.subscribe(cr(i,function(o){++a<=r&&(i.next(o),r<=a&&i.complete())}))})}function TE(r){return ar(function(){return r})}function CE(r,n){return Ru(function(i,a){return Dr(r(i,a)).pipe(Os(1),TE(i))})}function F0(r,n){n===void 0&&(n=by);var i=J0(r,n);return CE(function(){return i})}function W0(r,n){return n===void 0&&(n=Js),r=r??DE,fr(function(i,a){var o,u=!0;i.subscribe(cr(a,function(p){var y=n(p);(u||!r(o,y))&&(u=!1,o=y,a.next(p))}))})}function DE(r,n){return r===n}function jE(r){r===void 0&&(r={});var n=r.connector,i=n===void 0?function(){return new Ta}:n,a=r.resetOnError,o=a===void 0?!0:a,u=r.resetOnComplete,p=u===void 0?!0:u,y=r.resetOnRefCountZero,g=y===void 0?!0:y;return function(m){var b,x,S,A=0,C=!1,U=!1,X=function(){x==null||x.unsubscribe(),x=void 0},ie=function(){X(),b=S=void 0,C=U=!1},W=function(){var z=b;ie(),z==null||z.unsubscribe()};return fr(function(z,fe){A++,!U&&!C&&X();var xe=S=S??i();fe.add(function(){A--,A===0&&!U&&!C&&(x=bp(W,g))}),xe.subscribe(fe),!b&&A>0&&(b=new Ls({next:function(ye){return xe.next(ye)},error:function(ye){U=!0,X(),x=bp(ie,o,ye),xe.error(ye)},complete:function(){C=!0,X(),x=bp(ie,p),xe.complete()}}),Dr(z).subscribe(b))})(m)}}function bp(r,n){for(var i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];if(n===!0){r();return}if(n!==!1){var o=new Ls({next:function(){o.unsubscribe(),r()}});return Dr(n.apply(void 0,Bs([],Oa(i)))).subscribe(o)}}function Ob(r){return Er(function(n,i){return r<=i})}function P0(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var i=Mu(r);return fr(function(a,o){(i?Eb(r,a,i):Eb(r,a)).subscribe(o)})}function Nn(r,n){return fr(function(i,a){var o=null,u=0,p=!1,y=function(){return p&&!o&&a.complete()};i.subscribe(cr(a,function(g){o==null||o.unsubscribe();var m=0,b=u++;Dr(r(g,b)).subscribe(o=cr(a,function(x){return a.next(n?n(g,x,b,m++):x)},function(){o=null,y()}))},function(){p=!0,y()}))})}function Vp(r,n,i){var a=xt(r)||n||i?{next:r,error:n,complete:i}:r;return a?fr(function(o,u){var p;(p=a.subscribe)===null||p===void 0||p.call(a);var y=!0;o.subscribe(cr(u,function(g){var m;(m=a.next)===null||m===void 0||m.call(a,g),u.next(g)},function(){var g;y=!1,(g=a.complete)===null||g===void 0||g.call(a),u.complete()},function(g){var m;y=!1,(m=a.error)===null||m===void 0||m.call(a,g),u.error(g)},function(){var g,m;y&&((g=a.unsubscribe)===null||g===void 0||g.call(a)),(m=a.finalize)===null||m===void 0||m.call(a)}))}):Js}const $n=()=>new Map,Ip=r=>{const n=$n();return r.forEach((i,a)=>{n.set(a,i)}),n},Xi=(r,n,i)=>{let a=r.get(n);return a===void 0&&r.set(n,a=i()),a},NE=(r,n)=>{const i=[];for(const[a,o]of r)i.push(n(o,a));return i},UE=(r,n)=>{for(const[i,a]of r)if(n(a,i))return!0;return!1};class ME{constructor(){this._observers=$n()}on(n,i){return Xi(this._observers,n,ka).add(i),i}once(n,i){const a=(...o)=>{this.off(n,a),i(...o)};this.on(n,a)}off(n,i){const a=this._observers.get(n);a!==void 0&&(a.delete(i),a.size===0&&this._observers.delete(n))}emit(n,i){return ql((this._observers.get(n)||$n()).values()).forEach(a=>a(...i))}destroy(){this._observers=$n()}}class RE{constructor(){this._observers=$n()}on(n,i){Xi(this._observers,n,ka).add(i)}once(n,i){const a=(...o)=>{this.off(n,a),i(...o)};this.on(n,a)}off(n,i){const a=this._observers.get(n);a!==void 0&&(a.delete(i),a.size===0&&this._observers.delete(n))}emit(n,i){return ql((this._observers.get(n)||$n()).values()).forEach(a=>a(...i))}destroy(){this._observers=$n()}}const zE=crypto.getRandomValues.bind(crypto),ew=()=>zE(new Uint32Array(1))[0],BE="10000000-1000-4000-8000"+-1e11,LE=()=>BE.replace(/[018]/g,r=>(r^ew()&15>>r/4).toString(16)),Ef=Date.now,Tb=r=>new Promise(r);Promise.all.bind(Promise);const Cb=r=>r===void 0?null:r;class qE{constructor(){this.map=new Map}setItem(n,i){this.map.set(n,i)}getItem(n){return this.map.get(n)}}let tw=new qE,HE=!0;try{typeof localStorage<"u"&&localStorage&&(tw=localStorage,HE=!1)}catch{}const KE=tw,xu=Symbol("Equality"),nw=(r,n)=>{var i;return r===n||((i=r[xu])==null?void 0:i.call(r,n))||!1},YE=r=>typeof r=="object",VE=Object.assign,IE=Object.keys,GE=(r,n)=>{for(const i in r)n(r[i],i)},Af=r=>IE(r).length,XE=r=>{for(const n in r)return!1;return!0},zu=(r,n)=>{for(const i in r)if(!n(r[i],i))return!1;return!0},xy=(r,n)=>Object.prototype.hasOwnProperty.call(r,n),QE=(r,n)=>r===n||Af(r)===Af(n)&&zu(r,(i,a)=>(i!==void 0||xy(n,a))&&nw(n[a],i)),ZE=Object.freeze,rw=r=>{for(const n in r){const i=r[n];(typeof i=="object"||typeof i=="function")&&rw(r[n])}return ZE(r)},Sy=(r,n,i=0)=>{try{for(;i<r.length;i++)r[i](...n)}finally{i<r.length&&Sy(r,n,i+1)}},Ds=(r,n)=>{if(r===n)return!0;if(r==null||n==null||r.constructor!==n.constructor&&(r.constructor||Object)!==(n.constructor||Object))return!1;if(r[xu]!=null)return r[xu](n);switch(r.constructor){case ArrayBuffer:r=new Uint8Array(r),n=new Uint8Array(n);case Uint8Array:{if(r.byteLength!==n.byteLength)return!1;for(let i=0;i<r.length;i++)if(r[i]!==n[i])return!1;break}case Set:{if(r.size!==n.size)return!1;for(const i of r)if(!n.has(i))return!1;break}case Map:{if(r.size!==n.size)return!1;for(const i of r.keys())if(!n.has(i)||!Ds(r.get(i),n.get(i)))return!1;break}case void 0:case Object:if(Af(r)!==Af(n))return!1;for(const i in r)if(!xy(r,i)||!Ds(r[i],n[i]))return!1;break;case Array:if(r.length!==n.length)return!1;for(let i=0;i<r.length;i++)if(!Ds(r[i],n[i]))return!1;break;default:return!1}return!0},$E=(r,n)=>n.includes(r);var iw={};const Su=typeof process<"u"&&process.release&&/node|io\.js/.test(process.release.name)&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]";let ni;const JE=()=>{if(ni===void 0)if(Su){ni=$n();const r=process.argv;let n=null;for(let i=0;i<r.length;i++){const a=r[i];a[0]==="-"?(n!==null&&ni.set(n,""),n=a):n!==null&&(ni.set(n,a),n=null)}n!==null&&ni.set(n,"")}else typeof location=="object"?(ni=$n(),(location.search||"?").slice(1).split("&").forEach(r=>{if(r.length!==0){const[n,i]=r.split("=");ni.set(`--${ob(n,"-")}`,i),ni.set(`-${ob(n,"-")}`,i)}})):ni=$n();return ni},Gp=r=>JE().has(r),kf=r=>Cb(Su?iw[r.toUpperCase().replaceAll("-","_")]:KE.getItem(r)),lw=r=>Gp("--"+r)||kf(r)!==null,FE=lw("production"),WE=Su&&$E(iw.FORCE_COLOR,["true","1","2"]),PE=WE||!Gp("--no-colors")&&!lw("no-color")&&(!Su||process.stdout.isTTY)&&(!Su||Gp("--color")||kf("COLORTERM")!==null||(kf("TERM")||"").includes("color"));class eA{constructor(n,i){this.left=n,this.right=i}}const Li=(r,n)=>new eA(r,n),Db=r=>r.next()>=.5,wp=(r,n,i)=>qr(r.next()*(i+1-n)+n),aw=(r,n,i)=>qr(r.next()*(i+1-n)+n),Ey=(r,n,i)=>aw(r,n,i),tA=r=>e1(Ey(r,97,122)),nA=(r,n=0,i=20)=>{const a=Ey(r,n,i);let o="";for(let u=0;u<a;u++)o+=tA(r);return o},_p=(r,n)=>n[Ey(r,0,n.length-1)],rA=Symbol("0schema");class iA{constructor(){this._rerrs=[]}extend(n,i,a,o=null){this._rerrs.push({path:n,expected:i,has:a,message:o})}toString(){const n=[];for(let i=this._rerrs.length-1;i>0;i--){const a=this._rerrs[i];n.push(o1(" ",(this._rerrs.length-i)*2)+`${a.path!=null?`[${a.path}] `:""}${a.has} doesn't match ${a.expected}. ${a.message}`)}return n.join(`
`)}}const Xp=(r,n)=>r===n?!0:r==null||n==null||r.constructor!==n.constructor?!1:r[xu]?nw(r,n):Qf(r)?hy(r,i=>k0(n,a=>Xp(i,a))):YE(r)?zu(r,(i,a)=>Xp(i,n[a])):!1;class Rn{extends(n){let[i,a]=[this.shape,n.shape];return this.constructor._dilutes&&([a,i]=[i,a]),Xp(i,a)}equals(n){return this.constructor===n.constructor&&Ds(this.shape,n.shape)}[rA](){return!0}[xu](n){return this.equals(n)}validate(n){return this.check(n)}check(n,i){Lr()}get nullable(){return Fs(this,td)}get optional(){return new uw(this)}cast(n){return jb(n,this),n}expect(n){return jb(n,this),n}}Sa(Rn,"_dilutes",!1);class Ay extends Rn{constructor(n,i){super(),this.shape=n,this._c=i}check(n,i=void 0){const a=(n==null?void 0:n.constructor)===this.shape&&(this._c==null||this._c(n));return!a&&(i==null||i.extend(null,this.shape.name,n==null?void 0:n.constructor.name,(n==null?void 0:n.constructor)!==this.shape?"Constructor match failed":"Check failed")),a}}const Pt=(r,n=null)=>new Ay(r,n);Pt(Ay);class ky extends Rn{constructor(n){super(),this.shape=n}check(n,i){const a=this.shape(n);return!a&&(i==null||i.extend(null,"custom prop",n==null?void 0:n.constructor.name,"failed to check custom prop")),a}}const pn=r=>new ky(r);Pt(ky);class Ff extends Rn{constructor(n){super(),this.shape=n}check(n,i){const a=this.shape.some(o=>o===n);return!a&&(i==null||i.extend(null,this.shape.join(" | "),n.toString())),a}}const Wf=(...r)=>new Ff(r),sw=Pt(Ff),lA=RegExp.escape||(r=>r.replace(/[().|&,$^[\]]/g,n=>"\\"+n)),ow=r=>{if(qs.check(r))return[lA(r)];if(sw.check(r))return r.shape.map(n=>n+"");if(gw.check(r))return["[+-]?\\d+.?\\d*"];if(bw.check(r))return[".*"];if(Tf.check(r))return r.shape.map(ow).flat(1);Cr()};class aA extends Rn{constructor(n){super(),this.shape=n,this._r=new RegExp("^"+n.map(ow).map(i=>`(${i.join("|")})`).join("")+"$")}check(n,i){const a=this._r.exec(n)!=null;return!a&&(i==null||i.extend(null,this._r.toString(),n.toString(),"String doesn't match string template.")),a}}Pt(aA);const sA=Symbol("optional");class uw extends Rn{constructor(n){super(),this.shape=n}check(n,i){const a=n===void 0||this.shape.check(n);return!a&&(i==null||i.extend(null,"undefined (optional)","()")),a}get[sA](){return!0}}const oA=Pt(uw);class uA extends Rn{check(n,i){return i==null||i.extend(null,"never",typeof n),!1}}Pt(uA);const If=class If extends Rn{constructor(n,i=!1){super(),this.shape=n,this._isPartial=i}get partial(){return new If(this.shape,!0)}check(n,i){return n==null?(i==null||i.extend(null,"object","null"),!1):zu(this.shape,(a,o)=>{const u=this._isPartial&&!xy(n,o)||a.check(n[o],i);return!u&&(i==null||i.extend(o.toString(),a.toString(),typeof n[o],"Object property does not match")),u})}};Sa(If,"_dilutes",!0);let Of=If;const cA=r=>new Of(r),fA=Pt(Of),dA=pn(r=>r!=null&&(r.constructor===Object||r.constructor==null));class cw extends Rn{constructor(n,i){super(),this.shape={keys:n,values:i}}check(n,i){return n!=null&&zu(n,(a,o)=>{const u=this.shape.keys.check(o,i);return!u&&(i==null||i.extend(o+"","Record",typeof n,u?"Key doesn't match schema":"Value doesn't match value")),u&&this.shape.values.check(a,i)})}}const fw=(r,n)=>new cw(r,n),hA=Pt(cw);class dw extends Rn{constructor(n){super(),this.shape=n}check(n,i){return n!=null&&zu(this.shape,(a,o)=>{const u=a.check(n[o],i);return!u&&(i==null||i.extend(o.toString(),"Tuple",typeof a)),u})}}const pA=(...r)=>new dw(r);Pt(dw);class hw extends Rn{constructor(n){super(),this.shape=n.length===1?n[0]:new Pf(n)}check(n,i){const a=Qf(n)&&hy(n,o=>this.shape.check(o));return!a&&(i==null||i.extend(null,"Array","")),a}}const pw=(...r)=>new hw(r),yA=Pt(hw),mA=pn(r=>Qf(r));class yw extends Rn{constructor(n,i){super(),this.shape=n,this._c=i}check(n,i){const a=n instanceof this.shape&&(this._c==null||this._c(n));return!a&&(i==null||i.extend(null,this.shape.name,n==null?void 0:n.constructor.name)),a}}const vA=(r,n=null)=>new yw(r,n);Pt(yw);const gA=vA(Rn);class bA extends Rn{constructor(n){super(),this.len=n.length-1,this.args=pA(...n.slice(-1)),this.res=n[this.len]}check(n,i){const a=n.constructor===Function&&n.length<=this.len;return!a&&(i==null||i.extend(null,"function",typeof n)),a}}const wA=Pt(bA),_A=pn(r=>typeof r=="function");class xA extends Rn{constructor(n){super(),this.shape=n}check(n,i){const a=hy(this.shape,o=>o.check(n,i));return!a&&(i==null||i.extend(null,"Intersectinon",typeof n)),a}}Pt(xA,r=>r.shape.length>0);class Pf extends Rn{constructor(n){super(),this.shape=n}check(n,i){const a=k0(this.shape,o=>o.check(n,i));return i==null||i.extend(null,"Union",typeof n),a}}Sa(Pf,"_dilutes",!0);const Fs=(...r)=>r.findIndex(n=>Tf.check(n))>=0?Fs(...r.map(n=>Eu(n)).map(n=>Tf.check(n)?n.shape:[n]).flat(1)):r.length===1?r[0]:new Pf(r),Tf=Pt(Pf),mw=()=>!0,Cf=pn(mw),SA=Pt(ky,r=>r.shape===mw),Oy=pn(r=>typeof r=="bigint"),EA=pn(r=>r===Oy),vw=pn(r=>typeof r=="symbol");pn(r=>r===vw);const js=pn(r=>typeof r=="number"),gw=pn(r=>r===js),qs=pn(r=>typeof r=="string"),bw=pn(r=>r===qs),ed=pn(r=>typeof r=="boolean"),AA=pn(r=>r===ed),ww=Wf(void 0);Pt(Ff,r=>r.shape.length===1&&r.shape[0]===void 0);Wf(void 0);const td=Wf(null),kA=Pt(Ff,r=>r.shape.length===1&&r.shape[0]===null);Pt(Uint8Array);Pt(Ay,r=>r.shape===Uint8Array);const OA=Fs(js,qs,td,ww,Oy,ed,vw);(()=>{const r=pw(Cf),n=fw(qs,Cf),i=Fs(js,qs,td,ed,r,n);return r.shape=i,n.shape.values=i,i})();const Eu=r=>{if(gA.check(r))return r;if(dA.check(r)){const n={};for(const i in r)n[i]=Eu(r[i]);return cA(n)}else{if(mA.check(r))return Fs(...r.map(Eu));if(OA.check(r))return Wf(r);if(_A.check(r))return Pt(r)}Cr()},jb=FE?()=>{}:(r,n)=>{const i=new iA;if(!n.check(r,i))throw li(`Expected value to be of type ${n.constructor.name}.
${i.toString()}`)};class TA{constructor(n){this.patterns=[],this.$state=n}if(n,i){return this.patterns.push({if:Eu(n),h:i}),this}else(n){return this.if(Cf,n)}done(){return(n,i)=>{for(let a=0;a<this.patterns.length;a++){const o=this.patterns[a];if(o.if.check(n))return o.h(n,i)}throw li("Unhandled pattern")}}}const CA=r=>new TA(r),_w=CA(Cf).if(gw,(r,n)=>wp(n,sb,xf)).if(bw,(r,n)=>nA(n)).if(AA,(r,n)=>Db(n)).if(EA,(r,n)=>BigInt(wp(n,sb,xf))).if(Tf,(r,n)=>As(n,_p(n,r.shape))).if(fA,(r,n)=>{const i={};for(const a in r.shape){let o=r.shape[a];if(oA.check(o)){if(Db(n))continue;o=o.shape}i[a]=_w(o,n)}return i}).if(yA,(r,n)=>{const i=[],a=aw(n,0,42);for(let o=0;o<a;o++)i.push(As(n,r.shape));return i}).if(sw,(r,n)=>_p(n,r.shape)).if(kA,(r,n)=>null).if(wA,(r,n)=>{const i=As(n,r.res);return()=>i}).if(SA,(r,n)=>As(n,_p(n,[js,qs,td,ww,Oy,ed,pw(js),fw(Fs("a","b","c"),js)]))).if(hA,(r,n)=>{const i={},a=wp(n,0,3);for(let o=0;o<a;o++){const u=As(n,r.shape.keys),p=As(n,r.shape.values);i[u]=p}return i}).done(),As=(r,n)=>_w(Eu(n),r),nd=typeof document<"u"?document:{};pn(r=>r.nodeType===MA);typeof DOMParser<"u"&&new DOMParser;pn(r=>r.nodeType===jA);pn(r=>r.nodeType===NA);const DA=r=>NE(r,(n,i)=>`${i}:${n};`).join(""),jA=nd.ELEMENT_NODE,NA=nd.TEXT_NODE,UA=nd.DOCUMENT_NODE,MA=nd.DOCUMENT_FRAGMENT_NODE;pn(r=>r.nodeType===UA);const Qi=Symbol,xw=Qi(),Sw=Qi(),RA=Qi(),zA=Qi(),BA=Qi(),Ew=Qi(),LA=Qi(),Ty=Qi(),qA=Qi(),HA=r=>{var o;r.length===1&&((o=r[0])==null?void 0:o.constructor)===Function&&(r=r[0]());const n=[],i=[];let a=0;for(;a<r.length;a++){const u=r[a];if(u===void 0)break;if(u.constructor===String||u.constructor===Number)n.push(u);else if(u.constructor===Object)break}for(a>0&&i.push(n.join(""));a<r.length;a++){const u=r[a];u instanceof Symbol||i.push(u)}return i},KA={[xw]:Li("font-weight","bold"),[Sw]:Li("font-weight","normal"),[RA]:Li("color","blue"),[BA]:Li("color","green"),[zA]:Li("color","grey"),[Ew]:Li("color","red"),[LA]:Li("color","purple"),[Ty]:Li("color","orange"),[qA]:Li("color","black")},YA=r=>{var p;r.length===1&&((p=r[0])==null?void 0:p.constructor)===Function&&(r=r[0]());const n=[],i=[],a=$n();let o=[],u=0;for(;u<r.length;u++){const y=r[u],g=KA[y];if(g!==void 0)a.set(g.left,g.right);else{if(y===void 0)break;if(y.constructor===String||y.constructor===Number){const m=DA(a);u>0||m.length>0?(n.push("%c"+y),i.push(m)):n.push(y)}else break}}for(u>0&&(o=i,o.unshift(n.join("")));u<r.length;u++){const y=r[u];y instanceof Symbol||o.push(y)}return o},Aw=PE?YA:HA,VA=(...r)=>{console.log(...Aw(r)),kw.forEach(n=>n.print(r))},IA=(...r)=>{console.warn(...Aw(r)),r.unshift(Ty),kw.forEach(n=>n.print(r))},kw=ka(),Ow=r=>({[Symbol.iterator](){return this},next:r}),GA=(r,n)=>Ow(()=>{let i;do i=r.next();while(!i.done&&!n(i.value));return i}),xp=(r,n)=>Ow(()=>{const{done:i,value:a}=r.next();return{done:i,value:i?void 0:n(a)}});class Tw{constructor(n,i){this.clock=n,this.len=i}}class rd{constructor(){this.clients=new Map}}const Cw=(r,n,i)=>n.clients.forEach((a,o)=>{const u=r.doc.store.clients.get(o);if(u!=null){const p=u[u.length-1],y=p.id.clock+p.length;for(let g=0,m=a[g];g<a.length&&m.clock<y;m=a[++g])Lw(r,u,m.clock,m.len,i)}}),XA=(r,n)=>{let i=0,a=r.length-1;for(;i<=a;){const o=qr((i+a)/2),u=r[o],p=u.clock;if(p<=n){if(n<p+u.len)return o;i=o+1}else a=o-1}return null},Dw=(r,n)=>{const i=r.clients.get(n.client);return i!==void 0&&XA(i,n.clock)!==null},Cy=r=>{r.clients.forEach(n=>{n.sort((o,u)=>o.clock-u.clock);let i,a;for(i=1,a=1;i<n.length;i++){const o=n[a-1],u=n[i];o.clock+o.len>=u.clock?o.len=Gs(o.len,u.clock+u.len-o.clock):(a<i&&(n[a]=u),a++)}n.length=a})},QA=r=>{const n=new rd;for(let i=0;i<r.length;i++)r[i].clients.forEach((a,o)=>{if(!n.clients.has(o)){const u=a.slice();for(let p=i+1;p<r.length;p++)WS(u,r[p].clients.get(o)||[]);n.clients.set(o,u)}});return Cy(n),n},Df=(r,n,i,a)=>{Xi(r.clients,n,()=>[]).push(new Tw(i,a))},Dy=(r,n)=>{We(r.restEncoder,n.clients.size),ql(n.clients.entries()).sort((i,a)=>a[0]-i[0]).forEach(([i,a])=>{r.resetDsCurVal(),We(r.restEncoder,i);const o=a.length;We(r.restEncoder,o);for(let u=0;u<o;u++){const p=a[u];r.writeDsClock(p.clock),r.writeDsLen(p.len)}})},ZA=r=>{const n=new rd,i=Ot(r.restDecoder);for(let a=0;a<i;a++){r.resetDsCurVal();const o=Ot(r.restDecoder),u=Ot(r.restDecoder);if(u>0){const p=Xi(n.clients,o,()=>[]);for(let y=0;y<u;y++)p.push(new Tw(r.readDsClock(),r.readDsLen()))}}return n},Nb=(r,n,i)=>{const a=new rd,o=Ot(r.restDecoder);for(let u=0;u<o;u++){r.resetDsCurVal();const p=Ot(r.restDecoder),y=Ot(r.restDecoder),g=i.clients.get(p)||[],m=hn(i,p);for(let b=0;b<y;b++){const x=r.readDsClock(),S=x+r.readDsLen();if(x<m){m<S&&Df(a,p,m,S-m);let A=ai(g,x),C=g[A];for(!C.deleted&&C.id.clock<x&&(g.splice(A+1,0,Bf(n,C,x-C.id.clock)),A++);A<g.length&&(C=g[A++],C.id.clock<S);)C.deleted||(S<C.id.clock+C.length&&g.splice(A,0,Bf(n,C,S-C.id.clock)),C.delete(n))}else Df(a,p,x,S-x)}}if(a.clients.size>0){const u=new id;return We(u.restEncoder,0),Dy(u,a),u.toUint8Array()}return null},jw=ew;class Ws extends ME{constructor({guid:n=LE(),collectionid:i=null,gc:a=!0,gcFilter:o=()=>!0,meta:u=null,autoLoad:p=!1,shouldLoad:y=!0}={}){super(),this.gc=a,this.gcFilter=o,this.clientID=jw(),this.guid=n,this.collectionid=i,this.share=new Map,this.store=new zw,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=y,this.autoLoad=p,this.meta=u,this.isLoaded=!1,this.isSynced=!1,this.isDestroyed=!1,this.whenLoaded=Tb(m=>{this.on("load",()=>{this.isLoaded=!0,m(this)})});const g=()=>Tb(m=>{const b=x=>{(x===void 0||x===!0)&&(this.off("sync",b),m())};this.on("sync",b)});this.on("sync",m=>{m===!1&&this.isSynced&&(this.whenSynced=g()),this.isSynced=m===void 0||m===!0,this.isSynced&&!this.isLoaded&&this.emit("load",[this])}),this.whenSynced=g()}load(){const n=this._item;n!==null&&!this.shouldLoad&&Dt(n.parent.doc,i=>{i.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(ql(this.subdocs).map(n=>n.guid))}transact(n,i=null){return Dt(this,n,i)}get(n,i=kn){const a=Xi(this.share,n,()=>{const u=new i;return u._integrate(this,null),u}),o=a.constructor;if(i!==kn&&o!==i)if(o===kn){const u=new i;u._map=a._map,a._map.forEach(p=>{for(;p!==null;p=p.left)p.parent=u}),u._start=a._start;for(let p=u._start;p!==null;p=p.right)p.parent=u;return u._length=a._length,this.share.set(n,u),u._integrate(this,null),u}else throw new Error(`Type with the name ${n} has already been defined with a different constructor`);return a}getArray(n=""){return this.get(n,Us)}getText(n=""){return this.get(n,Ks)}getMap(n=""){return this.get(n,Hs)}getXmlElement(n=""){return this.get(n,Ys)}getXmlFragment(n=""){return this.get(n,Ca)}toJSON(){const n={};return this.share.forEach((i,a)=>{n[a]=i.toJSON()}),n}destroy(){this.isDestroyed=!0,ql(this.subdocs).forEach(i=>i.destroy());const n=this._item;if(n!==null){this._item=null;const i=n.content;i.doc=new Ws({guid:this.guid,...i.opts,shouldLoad:!1}),i.doc._item=n,Dt(n.parent.doc,a=>{const o=i.doc;n.deleted||a.subdocsAdded.add(o),a.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}}class $A{constructor(n){this.dsCurrVal=0,this.restDecoder=n}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=Ot(this.restDecoder),this.dsCurrVal}readDsLen(){const n=Ot(this.restDecoder)+1;return this.dsCurrVal+=n,n}}class Au extends $A{constructor(n){super(n),this.keys=[],Ot(n),this.keyClockDecoder=new vp(En(n)),this.clientDecoder=new yf(En(n)),this.leftClockDecoder=new vp(En(n)),this.rightClockDecoder=new vp(En(n)),this.infoDecoder=new yb(En(n),Rs),this.stringDecoder=new O1(En(n)),this.parentInfoDecoder=new yb(En(n),Rs),this.typeRefDecoder=new yf(En(n)),this.lenDecoder=new yf(En(n))}readLeftID(){return new Ns(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new Ns(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return this.parentInfoDecoder.read()===1}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return zl(this.restDecoder)}readBuf(){return En(this.restDecoder)}readJSON(){return zl(this.restDecoder)}readKey(){const n=this.keyClockDecoder.read();if(n<this.keys.length)return this.keys[n];{const i=this.stringDecoder.read();return this.keys.push(i),i}}}class JA{constructor(){this.restEncoder=Qs()}toUint8Array(){return sr(this.restEncoder)}resetDsCurVal(){}writeDsClock(n){We(this.restEncoder,n)}writeDsLen(n){We(this.restEncoder,n)}}class FA extends JA{writeLeftID(n){We(this.restEncoder,n.client),We(this.restEncoder,n.clock)}writeRightID(n){We(this.restEncoder,n.client),We(this.restEncoder,n.clock)}writeClient(n){We(this.restEncoder,n)}writeInfo(n){qp(this.restEncoder,n)}writeString(n){Ar(this.restEncoder,n)}writeParentInfo(n){We(this.restEncoder,n?1:0)}writeTypeRef(n){We(this.restEncoder,n)}writeLen(n){We(this.restEncoder,n)}writeAny(n){Rl(this.restEncoder,n)}writeBuf(n){Sn(this.restEncoder,n)}writeJSON(n){Ar(this.restEncoder,JSON.stringify(n))}writeKey(n){Ar(this.restEncoder,n)}}class Nw{constructor(){this.restEncoder=Qs(),this.dsCurrVal=0}toUint8Array(){return sr(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(n){const i=n-this.dsCurrVal;this.dsCurrVal=n,We(this.restEncoder,i)}writeDsLen(n){n===0&&Cr(),We(this.restEncoder,n-1),this.dsCurrVal+=n}}class id extends Nw{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new mp,this.clientEncoder=new pf,this.leftClockEncoder=new mp,this.rightClockEncoder=new mp,this.infoEncoder=new fb(qp),this.stringEncoder=new b1,this.parentInfoEncoder=new fb(qp),this.typeRefEncoder=new pf,this.lenEncoder=new pf}toUint8Array(){const n=Qs();return We(n,0),Sn(n,this.keyClockEncoder.toUint8Array()),Sn(n,this.clientEncoder.toUint8Array()),Sn(n,this.leftClockEncoder.toUint8Array()),Sn(n,this.rightClockEncoder.toUint8Array()),Sn(n,sr(this.infoEncoder)),Sn(n,this.stringEncoder.toUint8Array()),Sn(n,sr(this.parentInfoEncoder)),Sn(n,this.typeRefEncoder.toUint8Array()),Sn(n,this.lenEncoder.toUint8Array()),Nu(n,sr(this.restEncoder)),sr(n)}writeLeftID(n){this.clientEncoder.write(n.client),this.leftClockEncoder.write(n.clock)}writeRightID(n){this.clientEncoder.write(n.client),this.rightClockEncoder.write(n.clock)}writeClient(n){this.clientEncoder.write(n)}writeInfo(n){this.infoEncoder.write(n)}writeString(n){this.stringEncoder.write(n)}writeParentInfo(n){this.parentInfoEncoder.write(n?1:0)}writeTypeRef(n){this.typeRefEncoder.write(n)}writeLen(n){this.lenEncoder.write(n)}writeAny(n){Rl(this.restEncoder,n)}writeBuf(n){Sn(this.restEncoder,n)}writeJSON(n){Rl(this.restEncoder,n)}writeKey(n){const i=this.keyMap.get(n);i===void 0?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(n)):this.keyClockEncoder.write(i)}}const WA=(r,n,i,a)=>{a=Gs(a,n[0].id.clock);const o=ai(n,a);We(r.restEncoder,n.length-o),r.writeClient(i),We(r.restEncoder,a);const u=n[o];u.write(r,a-u.id.clock);for(let p=o+1;p<n.length;p++)n[p].write(r,0)},Uw=(r,n,i)=>{const a=new Map;i.forEach((o,u)=>{hn(n,u)>o&&a.set(u,o)}),jy(n).forEach((o,u)=>{i.has(u)||a.set(u,0)}),We(r.restEncoder,a.size),ql(a.entries()).sort((o,u)=>u[0]-o[0]).forEach(([o,u])=>{WA(r,n.clients.get(o),o,u)})},PA=(r,n)=>{const i=$n(),a=Ot(r.restDecoder);for(let o=0;o<a;o++){const u=Ot(r.restDecoder),p=new Array(u),y=r.readClient();let g=Ot(r.restDecoder);i.set(y,{i:0,refs:p});for(let m=0;m<u;m++){const b=r.readInfo();switch(Xf&b){case 0:{const x=r.readLen();p[m]=new Or(ht(y,g),x),g+=x;break}case 10:{const x=Ot(r.restDecoder);p[m]=new Tr(ht(y,g),x),g+=x;break}default:{const x=(b&(Yi|or))===0,S=new rn(ht(y,g),null,(b&or)===or?r.readLeftID():null,null,(b&Yi)===Yi?r.readRightID():null,x?r.readParentInfo()?n.get(r.readString()):r.readLeftID():null,x&&(b&bu)===bu?r.readString():null,l_(r,b));p[m]=S,g+=S.length}}}}return i},ek=(r,n,i)=>{const a=[];let o=ql(i.keys()).sort((A,C)=>A-C);if(o.length===0)return null;const u=()=>{if(o.length===0)return null;let A=i.get(o[o.length-1]);for(;A.refs.length===A.i;)if(o.pop(),o.length>0)A=i.get(o[o.length-1]);else return null;return A};let p=u();if(p===null)return null;const y=new zw,g=new Map,m=(A,C)=>{const U=g.get(A);(U==null||U>C)&&g.set(A,C)};let b=p.refs[p.i++];const x=new Map,S=()=>{for(const A of a){const C=A.id.client,U=i.get(C);U?(U.i--,y.clients.set(C,U.refs.slice(U.i)),i.delete(C),U.i=0,U.refs=[]):y.clients.set(C,[A]),o=o.filter(X=>X!==C)}a.length=0};for(;;){if(b.constructor!==Tr){const C=Xi(x,b.id.client,()=>hn(n,b.id.client))-b.id.clock;if(C<0)a.push(b),m(b.id.client,b.id.clock-1),S();else{const U=b.getMissing(r,n);if(U!==null){a.push(b);const X=i.get(U)||{refs:[],i:0};if(X.refs.length===X.i)m(U,hn(n,U)),S();else{b=X.refs[X.i++];continue}}else(C===0||C<b.length)&&(b.integrate(r,C),x.set(b.id.client,b.id.clock+b.length))}}if(a.length>0)b=a.pop();else if(p!==null&&p.i<p.refs.length)b=p.refs[p.i++];else{if(p=u(),p===null)break;b=p.refs[p.i++]}}if(y.clients.size>0){const A=new id;return Uw(A,y,new Map),We(A.restEncoder,0),{missing:g,update:A.toUint8Array()}}return null},tk=(r,n)=>Uw(r,n.doc.store,n.beforeState),nk=(r,n,i,a=new Au(r))=>Dt(n,o=>{o.local=!1;let u=!1;const p=o.doc,y=p.store,g=PA(a,p),m=ek(o,y,g),b=y.pendingStructs;if(b){for(const[S,A]of b.missing)if(A<hn(y,S)){u=!0;break}if(m){for(const[S,A]of m.missing){const C=b.missing.get(S);(C==null||C>A)&&b.missing.set(S,A)}b.update=jf([b.update,m.update])}}else y.pendingStructs=m;const x=Nb(a,o,y);if(y.pendingDs){const S=new Au(Uu(y.pendingDs));Ot(S.restDecoder);const A=Nb(S,o,y);x&&A?y.pendingDs=jf([x,A]):y.pendingDs=x||A}else y.pendingDs=x;if(u){const S=y.pendingStructs.update;y.pendingStructs=null,Mw(o.doc,S)}},i,!1),Mw=(r,n,i,a=Au)=>{const o=Uu(n);nk(o,r,i,new a(o))};class rk{constructor(){this.l=[]}}const Ub=()=>new rk,Mb=(r,n)=>r.l.push(n),Rb=(r,n)=>{const i=r.l,a=i.length;r.l=i.filter(o=>n!==o),a===r.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},Rw=(r,n,i)=>Sy(r.l,[n,i]);class Ns{constructor(n,i){this.client=n,this.clock=i}}const rf=(r,n)=>r===n||r!==null&&n!==null&&r.client===n.client&&r.clock===n.clock,ht=(r,n)=>new Ns(r,n),ik=r=>{for(const[n,i]of r.doc.share.entries())if(i===r)return n;throw Cr()},Ts=(r,n)=>n===void 0?!r.deleted:n.sv.has(r.id.client)&&(n.sv.get(r.id.client)||0)>r.id.clock&&!Dw(n.ds,r.id),Qp=(r,n)=>{const i=Xi(r.meta,Qp,ka),a=r.doc.store;i.has(n)||(n.sv.forEach((o,u)=>{o<hn(a,u)&&Hl(r,ht(u,o))}),Cw(r,n.ds,o=>{}),i.add(n))};class zw{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const jy=r=>{const n=new Map;return r.clients.forEach((i,a)=>{const o=i[i.length-1];n.set(a,o.id.clock+o.length)}),n},hn=(r,n)=>{const i=r.clients.get(n);if(i===void 0)return 0;const a=i[i.length-1];return a.id.clock+a.length},Bw=(r,n)=>{let i=r.clients.get(n.id.client);if(i===void 0)i=[],r.clients.set(n.id.client,i);else{const a=i[i.length-1];if(a.id.clock+a.length!==n.id.clock)throw Cr()}i.push(n)},ai=(r,n)=>{let i=0,a=r.length-1,o=r[a],u=o.id.clock;if(u===n)return a;let p=qr(n/(u+o.length-1)*a);for(;i<=a;){if(o=r[p],u=o.id.clock,u<=n){if(n<u+o.length)return p;i=p+1}else a=p-1;p=qr((i+a)/2)}throw Cr()},lk=(r,n)=>{const i=r.clients.get(n.client);return i[ai(i,n.clock)]},Sp=lk,Zp=(r,n,i)=>{const a=ai(n,i),o=n[a];return o.id.clock<i&&o instanceof rn?(n.splice(a+1,0,Bf(r,o,i-o.id.clock)),a+1):a},Hl=(r,n)=>{const i=r.doc.store.clients.get(n.client);return i[Zp(r,i,n.clock)]},zb=(r,n,i)=>{const a=n.clients.get(i.client),o=ai(a,i.clock),u=a[o];return i.clock!==u.id.clock+u.length-1&&u.constructor!==Or&&a.splice(o+1,0,Bf(r,u,i.clock-u.id.clock+1)),u},ak=(r,n,i)=>{const a=r.clients.get(n.id.client);a[ai(a,n.id.clock)]=i},Lw=(r,n,i,a,o)=>{if(a===0)return;const u=i+a;let p=Zp(r,n,i),y;do y=n[p++],u<y.id.clock+y.length&&Zp(r,n,u),o(y);while(p<n.length&&n[p].id.clock<u)};class sk{constructor(n,i,a){this.doc=n,this.deleteSet=new rd,this.beforeState=jy(n.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=i,this.meta=new Map,this.local=a,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}}const Bb=(r,n)=>n.deleteSet.clients.size===0&&!UE(n.afterState,(i,a)=>n.beforeState.get(a)!==i)?!1:(Cy(n.deleteSet),tk(r,n),Dy(r,n.deleteSet),!0),Lb=(r,n,i)=>{const a=n._item;(a===null||a.id.clock<(r.beforeState.get(a.id.client)||0)&&!a.deleted)&&Xi(r.changed,n,ka).add(i)},vf=(r,n)=>{let i=r[n],a=r[n-1],o=n;for(;o>0;i=a,a=r[--o-1]){if(a.deleted===i.deleted&&a.constructor===i.constructor&&a.mergeWith(i)){i instanceof rn&&i.parentSub!==null&&i.parent._map.get(i.parentSub)===i&&i.parent._map.set(i.parentSub,a);continue}break}const u=n-o;return u&&r.splice(n+1-u,u),u},ok=(r,n,i)=>{for(const[a,o]of r.clients.entries()){const u=n.clients.get(a);for(let p=o.length-1;p>=0;p--){const y=o[p],g=y.clock+y.len;for(let m=ai(u,y.clock),b=u[m];m<u.length&&b.id.clock<g;b=u[++m]){const x=u[m];if(y.clock+y.len<=x.id.clock)break;x instanceof rn&&x.deleted&&!x.keep&&i(x)&&x.gc(n,!1)}}}},uk=(r,n)=>{r.clients.forEach((i,a)=>{const o=n.clients.get(a);for(let u=i.length-1;u>=0;u--){const p=i[u],y=E0(o.length-1,1+ai(o,p.clock+p.len-1));for(let g=y,m=o[g];g>0&&m.id.clock>=p.clock;m=o[g])g-=1+vf(o,g)}})},qw=(r,n)=>{if(n<r.length){const i=r[n],a=i.doc,o=a.store,u=i.deleteSet,p=i._mergeStructs;try{Cy(u),i.afterState=jy(i.doc.store),a.emit("beforeObserverCalls",[i,a]);const y=[];i.changed.forEach((g,m)=>y.push(()=>{(m._item===null||!m._item.deleted)&&m._callObserver(i,g)})),y.push(()=>{i.changedParentTypes.forEach((g,m)=>{m._dEH.l.length>0&&(m._item===null||!m._item.deleted)&&(g=g.filter(b=>b.target._item===null||!b.target._item.deleted),g.forEach(b=>{b.currentTarget=m,b._path=null}),g.sort((b,x)=>b.path.length-x.path.length),Rw(m._dEH,g,i))})}),y.push(()=>a.emit("afterTransaction",[i,a])),Sy(y,[]),i._needFormattingCleanup&&Ok(i)}finally{a.gc&&ok(u,o,a.gcFilter),uk(u,o),i.afterState.forEach((b,x)=>{const S=i.beforeState.get(x)||0;if(S!==b){const A=o.clients.get(x),C=Gs(ai(A,S),1);for(let U=A.length-1;U>=C;)U-=1+vf(A,U)}});for(let b=p.length-1;b>=0;b--){const{client:x,clock:S}=p[b].id,A=o.clients.get(x),C=ai(A,S);C+1<A.length&&vf(A,C+1)>1||C>0&&vf(A,C)}if(!i.local&&i.afterState.get(a.clientID)!==i.beforeState.get(a.clientID)&&(VA(Ty,xw,"[yjs] ",Sw,Ew,"Changed the client-id because another client seems to be using it."),a.clientID=jw()),a.emit("afterTransactionCleanup",[i,a]),a._observers.has("update")){const b=new FA;Bb(b,i)&&a.emit("update",[b.toUint8Array(),i.origin,a,i])}if(a._observers.has("updateV2")){const b=new id;Bb(b,i)&&a.emit("updateV2",[b.toUint8Array(),i.origin,a,i])}const{subdocsAdded:y,subdocsLoaded:g,subdocsRemoved:m}=i;(y.size>0||m.size>0||g.size>0)&&(y.forEach(b=>{b.clientID=a.clientID,b.collectionid==null&&(b.collectionid=a.collectionid),a.subdocs.add(b)}),m.forEach(b=>a.subdocs.delete(b)),a.emit("subdocs",[{loaded:g,added:y,removed:m},a,i]),m.forEach(b=>b.destroy())),r.length<=n+1?(a._transactionCleanups=[],a.emit("afterAllTransactions",[a,r])):qw(r,n+1)}}},Dt=(r,n,i=null,a=!0)=>{const o=r._transactionCleanups;let u=!1,p=null;r._transaction===null&&(u=!0,r._transaction=new sk(r,i,a),o.push(r._transaction),o.length===1&&r.emit("beforeAllTransactions",[r]),r.emit("beforeTransaction",[r._transaction,r]));try{p=n(r._transaction)}finally{if(u){const y=r._transaction===o[0];r._transaction=null,y&&qw(o,0)}}return p};function*ck(r){const n=Ot(r.restDecoder);for(let i=0;i<n;i++){const a=Ot(r.restDecoder),o=r.readClient();let u=Ot(r.restDecoder);for(let p=0;p<a;p++){const y=r.readInfo();if(y===10){const g=Ot(r.restDecoder);yield new Tr(ht(o,u),g),u+=g}else if((Xf&y)!==0){const g=(y&(Yi|or))===0,m=new rn(ht(o,u),null,(y&or)===or?r.readLeftID():null,null,(y&Yi)===Yi?r.readRightID():null,g?r.readParentInfo()?r.readString():r.readLeftID():null,g&&(y&bu)===bu?r.readString():null,l_(r,y));yield m,u+=m.length}else{const g=r.readLen();yield new Or(ht(o,u),g),u+=g}}}}class Hw{constructor(n,i){this.gen=ck(n),this.curr=null,this.done=!1,this.filterSkips=i,this.next()}next(){do this.curr=this.gen.next().value||null;while(this.filterSkips&&this.curr!==null&&this.curr.constructor===Tr);return this.curr}}class fk{constructor(n){this.currClient=0,this.startClock=0,this.written=0,this.encoder=n,this.clientStructs=[]}}const Kw=(r,n=Nw,i=Au)=>{const a=new n,o=new Hw(new i(Uu(r)),!1);let u=o.curr;if(u!==null){let p=0,y=u.id.client,g=u.id.clock!==0,m=g?0:u.id.clock+u.length;for(;u!==null;u=o.next())y!==u.id.client&&(m!==0&&(p++,We(a.restEncoder,y),We(a.restEncoder,m)),y=u.id.client,m=0,g=u.id.clock!==0),u.constructor===Tr&&(g=!0),g||(m=u.id.clock+u.length);m!==0&&(p++,We(a.restEncoder,y),We(a.restEncoder,m));const b=Qs();return We(b,p),p1(b,a.restEncoder),a.restEncoder=b,a.toUint8Array()}else return We(a.restEncoder,0),a.toUint8Array()},dk=(r,n)=>{if(r.constructor===Or){const{client:i,clock:a}=r.id;return new Or(ht(i,a+n),r.length-n)}else if(r.constructor===Tr){const{client:i,clock:a}=r.id;return new Tr(ht(i,a+n),r.length-n)}else{const i=r,{client:a,clock:o}=i.id;return new rn(ht(a,o+n),null,ht(a,o+n-1),null,i.rightOrigin,i.parent,i.parentSub,i.content.splice(n))}},jf=(r,n=Au,i=id)=>{if(r.length===1)return r[0];const a=r.map(b=>new n(Uu(b)));let o=a.map(b=>new Hw(b,!0)),u=null;const p=new i,y=new fk(p);for(;o=o.filter(S=>S.curr!==null),o.sort((S,A)=>{if(S.curr.id.client===A.curr.id.client){const C=S.curr.id.clock-A.curr.id.clock;return C===0?S.curr.constructor===A.curr.constructor?0:S.curr.constructor===Tr?1:-1:C}else return A.curr.id.client-S.curr.id.client}),o.length!==0;){const b=o[0],x=b.curr.id.client;if(u!==null){let S=b.curr,A=!1;for(;S!==null&&S.id.clock+S.length<=u.struct.id.clock+u.struct.length&&S.id.client>=u.struct.id.client;)S=b.next(),A=!0;if(S===null||S.id.client!==x||A&&S.id.clock>u.struct.id.clock+u.struct.length)continue;if(x!==u.struct.id.client)su(y,u.struct,u.offset),u={struct:S,offset:0},b.next();else if(u.struct.id.clock+u.struct.length<S.id.clock)if(u.struct.constructor===Tr)u.struct.length=S.id.clock+S.length-u.struct.id.clock;else{su(y,u.struct,u.offset);const C=S.id.clock-u.struct.id.clock-u.struct.length;u={struct:new Tr(ht(x,u.struct.id.clock+u.struct.length),C),offset:0}}else{const C=u.struct.id.clock+u.struct.length-S.id.clock;C>0&&(u.struct.constructor===Tr?u.struct.length-=C:S=dk(S,C)),u.struct.mergeWith(S)||(su(y,u.struct,u.offset),u={struct:S,offset:0},b.next())}}else u={struct:b.curr,offset:0},b.next();for(let S=b.curr;S!==null&&S.id.client===x&&S.id.clock===u.struct.id.clock+u.struct.length&&S.constructor!==Tr;S=b.next())su(y,u.struct,u.offset),u={struct:S,offset:0}}u!==null&&(su(y,u.struct,u.offset),u=null),hk(y);const g=a.map(b=>ZA(b)),m=QA(g);return Dy(p,m),p.toUint8Array()},Yw=r=>{r.written>0&&(r.clientStructs.push({written:r.written,restEncoder:sr(r.encoder.restEncoder)}),r.encoder.restEncoder=Qs(),r.written=0)},su=(r,n,i)=>{r.written>0&&r.currClient!==n.id.client&&Yw(r),r.written===0&&(r.currClient=n.id.client,r.encoder.writeClient(n.id.client),We(r.encoder.restEncoder,n.id.clock+i)),n.write(r.encoder,i),r.written++},hk=r=>{Yw(r);const n=r.encoder.restEncoder;We(n,r.clientStructs.length);for(let i=0;i<r.clientStructs.length;i++){const a=r.clientStructs[i];We(n,a.written),Nu(n,a.restEncoder)}},qb="You must not compute changes after the event-handler fired.";class ld{constructor(n,i){this.target=n,this.currentTarget=n,this.transaction=i,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=pk(this.currentTarget,this.target))}deletes(n){return Dw(this.transaction.deleteSet,n.id)}get keys(){if(this._keys===null){if(this.transaction.doc._transactionCleanups.length===0)throw li(qb);const n=new Map,i=this.target;this.transaction.changed.get(i).forEach(o=>{if(o!==null){const u=i._map.get(o);let p,y;if(this.adds(u)){let g=u.left;for(;g!==null&&this.adds(g);)g=g.left;if(this.deletes(u))if(g!==null&&this.deletes(g))p="delete",y=yp(g.content.getContent());else return;else g!==null&&this.deletes(g)?(p="update",y=yp(g.content.getContent())):(p="add",y=void 0)}else if(this.deletes(u))p="delete",y=yp(u.content.getContent());else return;n.set(o,{action:p,oldValue:y})}}),this._keys=n}return this._keys}get delta(){return this.changes.delta}adds(n){return n.id.clock>=(this.transaction.beforeState.get(n.id.client)||0)}get changes(){let n=this._changes;if(n===null){if(this.transaction.doc._transactionCleanups.length===0)throw li(qb);const i=this.target,a=ka(),o=ka(),u=[];if(n={added:a,deleted:o,delta:u,keys:this.keys},this.transaction.changed.get(i).has(null)){let y=null;const g=()=>{y&&u.push(y)};for(let m=i._start;m!==null;m=m.right)m.deleted?this.deletes(m)&&!this.adds(m)&&((y===null||y.delete===void 0)&&(g(),y={delete:0}),y.delete+=m.length,o.add(m)):this.adds(m)?((y===null||y.insert===void 0)&&(g(),y={insert:[]}),y.insert=y.insert.concat(m.content.getContent()),a.add(m)):((y===null||y.retain===void 0)&&(g(),y={retain:0}),y.retain+=m.length);y!==null&&y.retain===void 0&&g()}this._changes=n}return n}}const pk=(r,n)=>{const i=[];for(;n._item!==null&&n!==r;){if(n._item.parentSub!==null)i.unshift(n._item.parentSub);else{let a=0,o=n._item.parent._start;for(;o!==n._item&&o!==null;)!o.deleted&&o.countable&&(a+=o.length),o=o.right;i.unshift(a)}n=n._item.parent}return i},Mn=()=>{IA("Invalid access: Add Yjs type to a document before reading data.")},Vw=80;let Ny=0;class yk{constructor(n,i){n.marker=!0,this.p=n,this.index=i,this.timestamp=Ny++}}const mk=r=>{r.timestamp=Ny++},Iw=(r,n,i)=>{r.p.marker=!1,r.p=n,n.marker=!0,r.index=i,r.timestamp=Ny++},vk=(r,n,i)=>{if(r.length>=Vw){const a=r.reduce((o,u)=>o.timestamp<u.timestamp?o:u);return Iw(a,n,i),a}else{const a=new yk(n,i);return r.push(a),a}},ad=(r,n)=>{if(r._start===null||n===0||r._searchMarker===null)return null;const i=r._searchMarker.length===0?null:r._searchMarker.reduce((u,p)=>hf(n-u.index)<hf(n-p.index)?u:p);let a=r._start,o=0;for(i!==null&&(a=i.p,o=i.index,mk(i));a.right!==null&&o<n;){if(!a.deleted&&a.countable){if(n<o+a.length)break;o+=a.length}a=a.right}for(;a.left!==null&&o>n;)a=a.left,!a.deleted&&a.countable&&(o-=a.length);for(;a.left!==null&&a.left.id.client===a.id.client&&a.left.id.clock+a.left.length===a.id.clock;)a=a.left,!a.deleted&&a.countable&&(o-=a.length);return i!==null&&hf(i.index-o)<a.parent.length/Vw?(Iw(i,a,o),i):vk(r._searchMarker,a,o)},ku=(r,n,i)=>{for(let a=r.length-1;a>=0;a--){const o=r[a];if(i>0){let u=o.p;for(u.marker=!1;u&&(u.deleted||!u.countable);)u=u.left,u&&!u.deleted&&u.countable&&(o.index-=u.length);if(u===null||u.marker===!0){r.splice(a,1);continue}o.p=u,u.marker=!0}(n<o.index||i>0&&n===o.index)&&(o.index=Gs(n,o.index+i))}},sd=(r,n,i)=>{const a=r,o=n.changedParentTypes;for(;Xi(o,r,()=>[]).push(i),r._item!==null;)r=r._item.parent;Rw(a._eH,i,n)};class kn{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=Ub(),this._dEH=Ub(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(n,i){this.doc=n,this._item=i}_copy(){throw Lr()}clone(){throw Lr()}_write(n){}get _first(){let n=this._start;for(;n!==null&&n.deleted;)n=n.right;return n}_callObserver(n,i){!n.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(n){Mb(this._eH,n)}observeDeep(n){Mb(this._dEH,n)}unobserve(n){Rb(this._eH,n)}unobserveDeep(n){Rb(this._dEH,n)}toJSON(){}}const Gw=(r,n,i)=>{r.doc??Mn(),n<0&&(n=r._length+n),i<0&&(i=r._length+i);let a=i-n;const o=[];let u=r._start;for(;u!==null&&a>0;){if(u.countable&&!u.deleted){const p=u.content.getContent();if(p.length<=n)n-=p.length;else{for(let y=n;y<p.length&&a>0;y++)o.push(p[y]),a--;n=0}}u=u.right}return o},Xw=r=>{r.doc??Mn();const n=[];let i=r._start;for(;i!==null;){if(i.countable&&!i.deleted){const a=i.content.getContent();for(let o=0;o<a.length;o++)n.push(a[o])}i=i.right}return n},Ou=(r,n)=>{let i=0,a=r._start;for(r.doc??Mn();a!==null;){if(a.countable&&!a.deleted){const o=a.content.getContent();for(let u=0;u<o.length;u++)n(o[u],i++,r)}a=a.right}},Qw=(r,n)=>{const i=[];return Ou(r,(a,o)=>{i.push(n(a,o,r))}),i},gk=r=>{let n=r._start,i=null,a=0;return{[Symbol.iterator](){return this},next:()=>{if(i===null){for(;n!==null&&n.deleted;)n=n.right;if(n===null)return{done:!0,value:void 0};i=n.content.getContent(),a=0,n=n.right}const o=i[a++];return i.length<=a&&(i=null),{done:!1,value:o}}}},Zw=(r,n)=>{r.doc??Mn();const i=ad(r,n);let a=r._start;for(i!==null&&(a=i.p,n-=i.index);a!==null;a=a.right)if(!a.deleted&&a.countable){if(n<a.length)return a.content.getContent()[n];n-=a.length}},Nf=(r,n,i,a)=>{let o=i;const u=r.doc,p=u.clientID,y=u.store,g=i===null?n._start:i.right;let m=[];const b=()=>{m.length>0&&(o=new rn(ht(p,hn(y,p)),o,o&&o.lastId,g,g&&g.id,n,null,new Da(m)),o.integrate(r,0),m=[])};a.forEach(x=>{if(x===null)m.push(x);else switch(x.constructor){case Number:case Object:case Boolean:case Array:case String:m.push(x);break;default:switch(b(),x.constructor){case Uint8Array:case ArrayBuffer:o=new rn(ht(p,hn(y,p)),o,o&&o.lastId,g,g&&g.id,n,null,new Bu(new Uint8Array(x))),o.integrate(r,0);break;case Ws:o=new rn(ht(p,hn(y,p)),o,o&&o.lastId,g,g&&g.id,n,null,new Lu(x)),o.integrate(r,0);break;default:if(x instanceof kn)o=new rn(ht(p,hn(y,p)),o,o&&o.lastId,g,g&&g.id,n,null,new Zi(x)),o.integrate(r,0);else throw new Error("Unexpected content type in insert operation")}}}),b()},$w=()=>li("Length exceeded!"),Jw=(r,n,i,a)=>{if(i>n._length)throw $w();if(i===0)return n._searchMarker&&ku(n._searchMarker,i,a.length),Nf(r,n,null,a);const o=i,u=ad(n,i);let p=n._start;for(u!==null&&(p=u.p,i-=u.index,i===0&&(p=p.prev,i+=p&&p.countable&&!p.deleted?p.length:0));p!==null;p=p.right)if(!p.deleted&&p.countable){if(i<=p.length){i<p.length&&Hl(r,ht(p.id.client,p.id.clock+i));break}i-=p.length}return n._searchMarker&&ku(n._searchMarker,o,a.length),Nf(r,n,p,a)},bk=(r,n,i)=>{let o=(n._searchMarker||[]).reduce((u,p)=>p.index>u.index?p:u,{index:0,p:n._start}).p;if(o)for(;o.right;)o=o.right;return Nf(r,n,o,i)},Fw=(r,n,i,a)=>{if(a===0)return;const o=i,u=a,p=ad(n,i);let y=n._start;for(p!==null&&(y=p.p,i-=p.index);y!==null&&i>0;y=y.right)!y.deleted&&y.countable&&(i<y.length&&Hl(r,ht(y.id.client,y.id.clock+i)),i-=y.length);for(;a>0&&y!==null;)y.deleted||(a<y.length&&Hl(r,ht(y.id.client,y.id.clock+a)),y.delete(r),a-=y.length),y=y.right;if(a>0)throw $w();n._searchMarker&&ku(n._searchMarker,o,-u+a)},Uf=(r,n,i)=>{const a=n._map.get(i);a!==void 0&&a.delete(r)},Uy=(r,n,i,a)=>{const o=n._map.get(i)||null,u=r.doc,p=u.clientID;let y;if(a==null)y=new Da([a]);else switch(a.constructor){case Number:case Object:case Boolean:case Array:case String:case Date:case BigInt:y=new Da([a]);break;case Uint8Array:y=new Bu(a);break;case Ws:y=new Lu(a);break;default:if(a instanceof kn)y=new Zi(a);else throw new Error("Unexpected content type")}new rn(ht(p,hn(u.store,p)),o,o&&o.lastId,null,null,n,i,y).integrate(r,0)},My=(r,n)=>{r.doc??Mn();const i=r._map.get(n);return i!==void 0&&!i.deleted?i.content.getContent()[i.length-1]:void 0},Ww=r=>{const n={};return r.doc??Mn(),r._map.forEach((i,a)=>{i.deleted||(n[a]=i.content.getContent()[i.length-1])}),n},Pw=(r,n)=>{r.doc??Mn();const i=r._map.get(n);return i!==void 0&&!i.deleted},wk=(r,n)=>{const i={};return r._map.forEach((a,o)=>{let u=a;for(;u!==null&&(!n.sv.has(u.id.client)||u.id.clock>=(n.sv.get(u.id.client)||0));)u=u.left;u!==null&&Ts(u,n)&&(i[o]=u.content.getContent()[u.length-1])}),i},lf=r=>(r.doc??Mn(),GA(r._map.entries(),n=>!n[1].deleted));class _k extends ld{}class Us extends kn{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(n){const i=new Us;return i.push(n),i}_integrate(n,i){super._integrate(n,i),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new Us}clone(){const n=new Us;return n.insert(0,this.toArray().map(i=>i instanceof kn?i.clone():i)),n}get length(){return this.doc??Mn(),this._length}_callObserver(n,i){super._callObserver(n,i),sd(this,n,new _k(this,n))}insert(n,i){this.doc!==null?Dt(this.doc,a=>{Jw(a,this,n,i)}):this._prelimContent.splice(n,0,...i)}push(n){this.doc!==null?Dt(this.doc,i=>{bk(i,this,n)}):this._prelimContent.push(...n)}unshift(n){this.insert(0,n)}delete(n,i=1){this.doc!==null?Dt(this.doc,a=>{Fw(a,this,n,i)}):this._prelimContent.splice(n,i)}get(n){return Zw(this,n)}toArray(){return Xw(this)}slice(n=0,i=this.length){return Gw(this,n,i)}toJSON(){return this.map(n=>n instanceof kn?n.toJSON():n)}map(n){return Qw(this,n)}forEach(n){Ou(this,n)}[Symbol.iterator](){return gk(this)}_write(n){n.writeTypeRef(Xk)}}const xk=r=>new Us;class Sk extends ld{constructor(n,i,a){super(n,i),this.keysChanged=a}}class Hs extends kn{constructor(n){super(),this._prelimContent=null,n===void 0?this._prelimContent=new Map:this._prelimContent=new Map(n)}_integrate(n,i){super._integrate(n,i),this._prelimContent.forEach((a,o)=>{this.set(o,a)}),this._prelimContent=null}_copy(){return new Hs}clone(){const n=new Hs;return this.forEach((i,a)=>{n.set(a,i instanceof kn?i.clone():i)}),n}_callObserver(n,i){sd(this,n,new Sk(this,n,i))}toJSON(){this.doc??Mn();const n={};return this._map.forEach((i,a)=>{if(!i.deleted){const o=i.content.getContent()[i.length-1];n[a]=o instanceof kn?o.toJSON():o}}),n}get size(){return[...lf(this)].length}keys(){return xp(lf(this),n=>n[0])}values(){return xp(lf(this),n=>n[1].content.getContent()[n[1].length-1])}entries(){return xp(lf(this),n=>[n[0],n[1].content.getContent()[n[1].length-1]])}forEach(n){this.doc??Mn(),this._map.forEach((i,a)=>{i.deleted||n(i.content.getContent()[i.length-1],a,this)})}[Symbol.iterator](){return this.entries()}delete(n){this.doc!==null?Dt(this.doc,i=>{Uf(i,this,n)}):this._prelimContent.delete(n)}set(n,i){return this.doc!==null?Dt(this.doc,a=>{Uy(a,this,n,i)}):this._prelimContent.set(n,i),i}get(n){return My(this,n)}has(n){return Pw(this,n)}clear(){this.doc!==null?Dt(this.doc,n=>{this.forEach(function(i,a,o){Uf(n,o,a)})}):this._prelimContent.clear()}_write(n){n.writeTypeRef(Qk)}}const Ek=r=>new Hs,Nl=(r,n)=>r===n||typeof r=="object"&&typeof n=="object"&&r&&n&&QE(r,n);class $p{constructor(n,i,a,o){this.left=n,this.right=i,this.index=a,this.currentAttributes=o}forward(){switch(this.right===null&&Cr(),this.right.content.constructor){case an:this.right.deleted||Ps(this.currentAttributes,this.right.content);break;default:this.right.deleted||(this.index+=this.right.length);break}this.left=this.right,this.right=this.right.right}}const Hb=(r,n,i)=>{for(;n.right!==null&&i>0;){switch(n.right.content.constructor){case an:n.right.deleted||Ps(n.currentAttributes,n.right.content);break;default:n.right.deleted||(i<n.right.length&&Hl(r,ht(n.right.id.client,n.right.id.clock+i)),n.index+=n.right.length,i-=n.right.length);break}n.left=n.right,n.right=n.right.right}return n},af=(r,n,i,a)=>{const o=new Map,u=a?ad(n,i):null;if(u){const p=new $p(u.p.left,u.p,u.index,o);return Hb(r,p,i-u.index)}else{const p=new $p(null,n._start,0,o);return Hb(r,p,i)}},e_=(r,n,i,a)=>{for(;i.right!==null&&(i.right.deleted===!0||i.right.content.constructor===an&&Nl(a.get(i.right.content.key),i.right.content.value));)i.right.deleted||a.delete(i.right.content.key),i.forward();const o=r.doc,u=o.clientID;a.forEach((p,y)=>{const g=i.left,m=i.right,b=new rn(ht(u,hn(o.store,u)),g,g&&g.lastId,m,m&&m.id,n,null,new an(y,p));b.integrate(r,0),i.right=b,i.forward()})},Ps=(r,n)=>{const{key:i,value:a}=n;a===null?r.delete(i):r.set(i,a)},t_=(r,n)=>{for(;r.right!==null;){if(!(r.right.deleted||r.right.content.constructor===an&&Nl(n[r.right.content.key]??null,r.right.content.value)))break;r.forward()}},n_=(r,n,i,a)=>{const o=r.doc,u=o.clientID,p=new Map;for(const y in a){const g=a[y],m=i.currentAttributes.get(y)??null;if(!Nl(m,g)){p.set(y,m);const{left:b,right:x}=i;i.right=new rn(ht(u,hn(o.store,u)),b,b&&b.lastId,x,x&&x.id,n,null,new an(y,g)),i.right.integrate(r,0),i.forward()}}return p},Ep=(r,n,i,a,o)=>{i.currentAttributes.forEach((S,A)=>{o[A]===void 0&&(o[A]=null)});const u=r.doc,p=u.clientID;t_(i,o);const y=n_(r,n,i,o),g=a.constructor===String?new si(a):a instanceof kn?new Zi(a):new ja(a);let{left:m,right:b,index:x}=i;n._searchMarker&&ku(n._searchMarker,i.index,g.getLength()),b=new rn(ht(p,hn(u.store,p)),m,m&&m.lastId,b,b&&b.id,n,null,g),b.integrate(r,0),i.right=b,i.index=x,i.forward(),e_(r,n,i,y)},Kb=(r,n,i,a,o)=>{const u=r.doc,p=u.clientID;t_(i,o);const y=n_(r,n,i,o);e:for(;i.right!==null&&(a>0||y.size>0&&(i.right.deleted||i.right.content.constructor===an));){if(!i.right.deleted)switch(i.right.content.constructor){case an:{const{key:g,value:m}=i.right.content,b=o[g];if(b!==void 0){if(Nl(b,m))y.delete(g);else{if(a===0)break e;y.set(g,m)}i.right.delete(r)}else i.currentAttributes.set(g,m);break}default:a<i.right.length&&Hl(r,ht(i.right.id.client,i.right.id.clock+a)),a-=i.right.length;break}i.forward()}if(a>0){let g="";for(;a>0;a--)g+=`
`;i.right=new rn(ht(p,hn(u.store,p)),i.left,i.left&&i.left.lastId,i.right,i.right&&i.right.id,n,null,new si(g)),i.right.integrate(r,0),i.forward()}e_(r,n,i,y)},r_=(r,n,i,a,o)=>{let u=n;const p=$n();for(;u&&(!u.countable||u.deleted);){if(!u.deleted&&u.content.constructor===an){const m=u.content;p.set(m.key,m)}u=u.right}let y=0,g=!1;for(;n!==u;){if(i===n&&(g=!0),!n.deleted){const m=n.content;switch(m.constructor){case an:{const{key:b,value:x}=m,S=a.get(b)??null;(p.get(b)!==m||S===x)&&(n.delete(r),y++,!g&&(o.get(b)??null)===x&&S!==x&&(S===null?o.delete(b):o.set(b,S))),!g&&!n.deleted&&Ps(o,m);break}}}n=n.right}return y},Ak=(r,n)=>{for(;n&&n.right&&(n.right.deleted||!n.right.countable);)n=n.right;const i=new Set;for(;n&&(n.deleted||!n.countable);){if(!n.deleted&&n.content.constructor===an){const a=n.content.key;i.has(a)?n.delete(r):i.add(a)}n=n.left}},kk=r=>{let n=0;return Dt(r.doc,i=>{let a=r._start,o=r._start,u=$n();const p=Ip(u);for(;o;){if(o.deleted===!1)switch(o.content.constructor){case an:Ps(p,o.content);break;default:n+=r_(i,a,o,u,p),u=Ip(p),a=o;break}o=o.right}}),n},Ok=r=>{const n=new Set,i=r.doc;for(const[a,o]of r.afterState.entries()){const u=r.beforeState.get(a)||0;o!==u&&Lw(r,i.store.clients.get(a),u,o,p=>{!p.deleted&&p.content.constructor===an&&p.constructor!==Or&&n.add(p.parent)})}Dt(i,a=>{Cw(r,r.deleteSet,o=>{if(o instanceof Or||!o.parent._hasFormatting||n.has(o.parent))return;const u=o.parent;o.content.constructor===an?n.add(u):Ak(a,o)});for(const o of n)kk(o)})},Yb=(r,n,i)=>{const a=i,o=Ip(n.currentAttributes),u=n.right;for(;i>0&&n.right!==null;){if(n.right.deleted===!1)switch(n.right.content.constructor){case Zi:case ja:case si:i<n.right.length&&Hl(r,ht(n.right.id.client,n.right.id.clock+i)),i-=n.right.length,n.right.delete(r);break}n.forward()}u&&r_(r,u,n.right,o,n.currentAttributes);const p=(n.left||n.right).parent;return p._searchMarker&&ku(p._searchMarker,n.index,-a+i),n};class Tk extends ld{constructor(n,i,a){super(n,i),this.childListChanged=!1,this.keysChanged=new Set,a.forEach(o=>{o===null?this.childListChanged=!0:this.keysChanged.add(o)})}get changes(){if(this._changes===null){const n={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=n}return this._changes}get delta(){if(this._delta===null){const n=this.target.doc,i=[];Dt(n,a=>{const o=new Map,u=new Map;let p=this.target._start,y=null;const g={};let m="",b=0,x=0;const S=()=>{if(y!==null){let A=null;switch(y){case"delete":x>0&&(A={delete:x}),x=0;break;case"insert":(typeof m=="object"||m.length>0)&&(A={insert:m},o.size>0&&(A.attributes={},o.forEach((C,U)=>{C!==null&&(A.attributes[U]=C)}))),m="";break;case"retain":b>0&&(A={retain:b},XE(g)||(A.attributes=VE({},g))),b=0;break}A&&i.push(A),y=null}};for(;p!==null;){switch(p.content.constructor){case Zi:case ja:this.adds(p)?this.deletes(p)||(S(),y="insert",m=p.content.getContent()[0],S()):this.deletes(p)?(y!=="delete"&&(S(),y="delete"),x+=1):p.deleted||(y!=="retain"&&(S(),y="retain"),b+=1);break;case si:this.adds(p)?this.deletes(p)||(y!=="insert"&&(S(),y="insert"),m+=p.content.str):this.deletes(p)?(y!=="delete"&&(S(),y="delete"),x+=p.length):p.deleted||(y!=="retain"&&(S(),y="retain"),b+=p.length);break;case an:{const{key:A,value:C}=p.content;if(this.adds(p)){if(!this.deletes(p)){const U=o.get(A)??null;Nl(U,C)?C!==null&&p.delete(a):(y==="retain"&&S(),Nl(C,u.get(A)??null)?delete g[A]:g[A]=C)}}else if(this.deletes(p)){u.set(A,C);const U=o.get(A)??null;Nl(U,C)||(y==="retain"&&S(),g[A]=U)}else if(!p.deleted){u.set(A,C);const U=g[A];U!==void 0&&(Nl(U,C)?U!==null&&p.delete(a):(y==="retain"&&S(),C===null?delete g[A]:g[A]=C))}p.deleted||(y==="insert"&&S(),Ps(o,p.content));break}}p=p.right}for(S();i.length>0;){const A=i[i.length-1];if(A.retain!==void 0&&A.attributes===void 0)i.pop();else break}}),this._delta=i}return this._delta}}class Ks extends kn{constructor(n){super(),this._pending=n!==void 0?[()=>this.insert(0,n)]:[],this._searchMarker=[],this._hasFormatting=!1}get length(){return this.doc??Mn(),this._length}_integrate(n,i){super._integrate(n,i);try{this._pending.forEach(a=>a())}catch(a){console.error(a)}this._pending=null}_copy(){return new Ks}clone(){const n=new Ks;return n.applyDelta(this.toDelta()),n}_callObserver(n,i){super._callObserver(n,i);const a=new Tk(this,n,i);sd(this,n,a),!n.local&&this._hasFormatting&&(n._needFormattingCleanup=!0)}toString(){this.doc??Mn();let n="",i=this._start;for(;i!==null;)!i.deleted&&i.countable&&i.content.constructor===si&&(n+=i.content.str),i=i.right;return n}toJSON(){return this.toString()}applyDelta(n,{sanitize:i=!0}={}){this.doc!==null?Dt(this.doc,a=>{const o=new $p(null,this._start,0,new Map);for(let u=0;u<n.length;u++){const p=n[u];if(p.insert!==void 0){const y=!i&&typeof p.insert=="string"&&u===n.length-1&&o.right===null&&p.insert.slice(-1)===`
`?p.insert.slice(0,-1):p.insert;(typeof y!="string"||y.length>0)&&Ep(a,this,o,y,p.attributes||{})}else p.retain!==void 0?Kb(a,this,o,p.retain,p.attributes||{}):p.delete!==void 0&&Yb(a,o,p.delete)}}):this._pending.push(()=>this.applyDelta(n))}toDelta(n,i,a){this.doc??Mn();const o=[],u=new Map,p=this.doc;let y="",g=this._start;function m(){if(y.length>0){const x={};let S=!1;u.forEach((C,U)=>{S=!0,x[U]=C});const A={insert:y};S&&(A.attributes=x),o.push(A),y=""}}const b=()=>{for(;g!==null;){if(Ts(g,n)||i!==void 0&&Ts(g,i))switch(g.content.constructor){case si:{const x=u.get("ychange");n!==void 0&&!Ts(g,n)?(x===void 0||x.user!==g.id.client||x.type!=="removed")&&(m(),u.set("ychange",a?a("removed",g.id):{type:"removed"})):i!==void 0&&!Ts(g,i)?(x===void 0||x.user!==g.id.client||x.type!=="added")&&(m(),u.set("ychange",a?a("added",g.id):{type:"added"})):x!==void 0&&(m(),u.delete("ychange")),y+=g.content.str;break}case Zi:case ja:{m();const x={insert:g.content.getContent()[0]};if(u.size>0){const S={};x.attributes=S,u.forEach((A,C)=>{S[C]=A})}o.push(x);break}case an:Ts(g,n)&&(m(),Ps(u,g.content));break}g=g.right}m()};return n||i?Dt(p,x=>{n&&Qp(x,n),i&&Qp(x,i),b()},"cleanup"):b(),o}insert(n,i,a){if(i.length<=0)return;const o=this.doc;o!==null?Dt(o,u=>{const p=af(u,this,n,!a);a||(a={},p.currentAttributes.forEach((y,g)=>{a[g]=y})),Ep(u,this,p,i,a)}):this._pending.push(()=>this.insert(n,i,a))}insertEmbed(n,i,a){const o=this.doc;o!==null?Dt(o,u=>{const p=af(u,this,n,!a);Ep(u,this,p,i,a||{})}):this._pending.push(()=>this.insertEmbed(n,i,a||{}))}delete(n,i){if(i===0)return;const a=this.doc;a!==null?Dt(a,o=>{Yb(o,af(o,this,n,!0),i)}):this._pending.push(()=>this.delete(n,i))}format(n,i,a){if(i===0)return;const o=this.doc;o!==null?Dt(o,u=>{const p=af(u,this,n,!1);p.right!==null&&Kb(u,this,p,i,a)}):this._pending.push(()=>this.format(n,i,a))}removeAttribute(n){this.doc!==null?Dt(this.doc,i=>{Uf(i,this,n)}):this._pending.push(()=>this.removeAttribute(n))}setAttribute(n,i){this.doc!==null?Dt(this.doc,a=>{Uy(a,this,n,i)}):this._pending.push(()=>this.setAttribute(n,i))}getAttribute(n){return My(this,n)}getAttributes(){return Ww(this)}_write(n){n.writeTypeRef(Zk)}}const Ck=r=>new Ks;class Ap{constructor(n,i=()=>!0){this._filter=i,this._root=n,this._currentNode=n._start,this._firstCall=!0,n.doc??Mn()}[Symbol.iterator](){return this}next(){let n=this._currentNode,i=n&&n.content&&n.content.type;if(n!==null&&(!this._firstCall||n.deleted||!this._filter(i)))do if(i=n.content.type,!n.deleted&&(i.constructor===Ys||i.constructor===Ca)&&i._start!==null)n=i._start;else for(;n!==null;){const a=n.next;if(a!==null){n=a;break}else n.parent===this._root?n=null:n=n.parent._item}while(n!==null&&(n.deleted||!this._filter(n.content.type)));return this._firstCall=!1,n===null?{value:void 0,done:!0}:(this._currentNode=n,{value:n.content.type,done:!1})}}class Ca extends kn{constructor(){super(),this._prelimContent=[]}get firstChild(){const n=this._first;return n?n.content.getContent()[0]:null}_integrate(n,i){super._integrate(n,i),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new Ca}clone(){const n=new Ca;return n.insert(0,this.toArray().map(i=>i instanceof kn?i.clone():i)),n}get length(){return this.doc??Mn(),this._prelimContent===null?this._length:this._prelimContent.length}createTreeWalker(n){return new Ap(this,n)}querySelector(n){n=n.toUpperCase();const a=new Ap(this,o=>o.nodeName&&o.nodeName.toUpperCase()===n).next();return a.done?null:a.value}querySelectorAll(n){return n=n.toUpperCase(),ql(new Ap(this,i=>i.nodeName&&i.nodeName.toUpperCase()===n))}_callObserver(n,i){sd(this,n,new Nk(this,i,n))}toString(){return Qw(this,n=>n.toString()).join("")}toJSON(){return this.toString()}toDOM(n=document,i={},a){const o=n.createDocumentFragment();return a!==void 0&&a._createAssociation(o,this),Ou(this,u=>{o.insertBefore(u.toDOM(n,i,a),null)}),o}insert(n,i){this.doc!==null?Dt(this.doc,a=>{Jw(a,this,n,i)}):this._prelimContent.splice(n,0,...i)}insertAfter(n,i){if(this.doc!==null)Dt(this.doc,a=>{const o=n&&n instanceof kn?n._item:n;Nf(a,this,o,i)});else{const a=this._prelimContent,o=n===null?0:a.findIndex(u=>u===n)+1;if(o===0&&n!==null)throw li("Reference item not found");a.splice(o,0,...i)}}delete(n,i=1){this.doc!==null?Dt(this.doc,a=>{Fw(a,this,n,i)}):this._prelimContent.splice(n,i)}toArray(){return Xw(this)}push(n){this.insert(this.length,n)}unshift(n){this.insert(0,n)}get(n){return Zw(this,n)}slice(n=0,i=this.length){return Gw(this,n,i)}forEach(n){Ou(this,n)}_write(n){n.writeTypeRef(Jk)}}const Dk=r=>new Ca;class Ys extends Ca{constructor(n="UNDEFINED"){super(),this.nodeName=n,this._prelimAttrs=new Map}get nextSibling(){const n=this._item?this._item.next:null;return n?n.content.type:null}get prevSibling(){const n=this._item?this._item.prev:null;return n?n.content.type:null}_integrate(n,i){super._integrate(n,i),this._prelimAttrs.forEach((a,o)=>{this.setAttribute(o,a)}),this._prelimAttrs=null}_copy(){return new Ys(this.nodeName)}clone(){const n=new Ys(this.nodeName),i=this.getAttributes();return GE(i,(a,o)=>{n.setAttribute(o,a)}),n.insert(0,this.toArray().map(a=>a instanceof kn?a.clone():a)),n}toString(){const n=this.getAttributes(),i=[],a=[];for(const y in n)a.push(y);a.sort();const o=a.length;for(let y=0;y<o;y++){const g=a[y];i.push(g+'="'+n[g]+'"')}const u=this.nodeName.toLocaleLowerCase(),p=i.length>0?" "+i.join(" "):"";return`<${u}${p}>${super.toString()}</${u}>`}removeAttribute(n){this.doc!==null?Dt(this.doc,i=>{Uf(i,this,n)}):this._prelimAttrs.delete(n)}setAttribute(n,i){this.doc!==null?Dt(this.doc,a=>{Uy(a,this,n,i)}):this._prelimAttrs.set(n,i)}getAttribute(n){return My(this,n)}hasAttribute(n){return Pw(this,n)}getAttributes(n){return n?wk(this,n):Ww(this)}toDOM(n=document,i={},a){const o=n.createElement(this.nodeName),u=this.getAttributes();for(const p in u){const y=u[p];typeof y=="string"&&o.setAttribute(p,y)}return Ou(this,p=>{o.appendChild(p.toDOM(n,i,a))}),a!==void 0&&a._createAssociation(o,this),o}_write(n){n.writeTypeRef($k),n.writeKey(this.nodeName)}}const jk=r=>new Ys(r.readKey());class Nk extends ld{constructor(n,i,a){super(n,a),this.childListChanged=!1,this.attributesChanged=new Set,i.forEach(o=>{o===null?this.childListChanged=!0:this.attributesChanged.add(o)})}}class Mf extends Hs{constructor(n){super(),this.hookName=n}_copy(){return new Mf(this.hookName)}clone(){const n=new Mf(this.hookName);return this.forEach((i,a)=>{n.set(a,i)}),n}toDOM(n=document,i={},a){const o=i[this.hookName];let u;return o!==void 0?u=o.createDom(this):u=document.createElement(this.hookName),u.setAttribute("data-yjs-hook",this.hookName),a!==void 0&&a._createAssociation(u,this),u}_write(n){n.writeTypeRef(Fk),n.writeKey(this.hookName)}}const Uk=r=>new Mf(r.readKey());class Rf extends Ks{get nextSibling(){const n=this._item?this._item.next:null;return n?n.content.type:null}get prevSibling(){const n=this._item?this._item.prev:null;return n?n.content.type:null}_copy(){return new Rf}clone(){const n=new Rf;return n.applyDelta(this.toDelta()),n}toDOM(n=document,i,a){const o=n.createTextNode(this.toString());return a!==void 0&&a._createAssociation(o,this),o}toString(){return this.toDelta().map(n=>{const i=[];for(const o in n.attributes){const u=[];for(const p in n.attributes[o])u.push({key:p,value:n.attributes[o][p]});u.sort((p,y)=>p.key<y.key?-1:1),i.push({nodeName:o,attrs:u})}i.sort((o,u)=>o.nodeName<u.nodeName?-1:1);let a="";for(let o=0;o<i.length;o++){const u=i[o];a+=`<${u.nodeName}`;for(let p=0;p<u.attrs.length;p++){const y=u.attrs[p];a+=` ${y.key}="${y.value}"`}a+=">"}a+=n.insert;for(let o=i.length-1;o>=0;o--)a+=`</${i[o].nodeName}>`;return a}).join("")}toJSON(){return this.toString()}_write(n){n.writeTypeRef(Wk)}}const Mk=r=>new Rf;class Ry{constructor(n,i){this.id=n,this.length=i}get deleted(){throw Lr()}mergeWith(n){return!1}write(n,i,a){throw Lr()}integrate(n,i){throw Lr()}}const Rk=0;class Or extends Ry{get deleted(){return!0}delete(){}mergeWith(n){return this.constructor!==n.constructor?!1:(this.length+=n.length,!0)}integrate(n,i){i>0&&(this.id.clock+=i,this.length-=i),Bw(n.doc.store,this)}write(n,i){n.writeInfo(Rk),n.writeLen(this.length-i)}getMissing(n,i){return null}}class Bu{constructor(n){this.content=n}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new Bu(this.content)}splice(n){throw Lr()}mergeWith(n){return!1}integrate(n,i){}delete(n){}gc(n){}write(n,i){n.writeBuf(this.content)}getRef(){return 3}}const zk=r=>new Bu(r.readBuf());class Tu{constructor(n){this.len=n}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new Tu(this.len)}splice(n){const i=new Tu(this.len-n);return this.len=n,i}mergeWith(n){return this.len+=n.len,!0}integrate(n,i){Df(n.deleteSet,i.id.client,i.id.clock,this.len),i.markDeleted()}delete(n){}gc(n){}write(n,i){n.writeLen(this.len-i)}getRef(){return 1}}const Bk=r=>new Tu(r.readLen()),i_=(r,n)=>new Ws({guid:r,...n,shouldLoad:n.shouldLoad||n.autoLoad||!1});class Lu{constructor(n){n._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=n;const i={};this.opts=i,n.gc||(i.gc=!1),n.autoLoad&&(i.autoLoad=!0),n.meta!==null&&(i.meta=n.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new Lu(i_(this.doc.guid,this.opts))}splice(n){throw Lr()}mergeWith(n){return!1}integrate(n,i){this.doc._item=i,n.subdocsAdded.add(this.doc),this.doc.shouldLoad&&n.subdocsLoaded.add(this.doc)}delete(n){n.subdocsAdded.has(this.doc)?n.subdocsAdded.delete(this.doc):n.subdocsRemoved.add(this.doc)}gc(n){}write(n,i){n.writeString(this.doc.guid),n.writeAny(this.opts)}getRef(){return 9}}const Lk=r=>new Lu(i_(r.readString(),r.readAny()));class ja{constructor(n){this.embed=n}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new ja(this.embed)}splice(n){throw Lr()}mergeWith(n){return!1}integrate(n,i){}delete(n){}gc(n){}write(n,i){n.writeJSON(this.embed)}getRef(){return 5}}const qk=r=>new ja(r.readJSON());class an{constructor(n,i){this.key=n,this.value=i}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new an(this.key,this.value)}splice(n){throw Lr()}mergeWith(n){return!1}integrate(n,i){const a=i.parent;a._searchMarker=null,a._hasFormatting=!0}delete(n){}gc(n){}write(n,i){n.writeKey(this.key),n.writeJSON(this.value)}getRef(){return 6}}const Hk=r=>new an(r.readKey(),r.readJSON());class zf{constructor(n){this.arr=n}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new zf(this.arr)}splice(n){const i=new zf(this.arr.slice(n));return this.arr=this.arr.slice(0,n),i}mergeWith(n){return this.arr=this.arr.concat(n.arr),!0}integrate(n,i){}delete(n){}gc(n){}write(n,i){const a=this.arr.length;n.writeLen(a-i);for(let o=i;o<a;o++){const u=this.arr[o];n.writeString(u===void 0?"undefined":JSON.stringify(u))}}getRef(){return 2}}const Kk=r=>{const n=r.readLen(),i=[];for(let a=0;a<n;a++){const o=r.readString();o==="undefined"?i.push(void 0):i.push(JSON.parse(o))}return new zf(i)},Yk=kf("node_env")==="development";class Da{constructor(n){this.arr=n,Yk&&rw(n)}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new Da(this.arr)}splice(n){const i=new Da(this.arr.slice(n));return this.arr=this.arr.slice(0,n),i}mergeWith(n){return this.arr=this.arr.concat(n.arr),!0}integrate(n,i){}delete(n){}gc(n){}write(n,i){const a=this.arr.length;n.writeLen(a-i);for(let o=i;o<a;o++){const u=this.arr[o];n.writeAny(u)}}getRef(){return 8}}const Vk=r=>{const n=r.readLen(),i=[];for(let a=0;a<n;a++)i.push(r.readAny());return new Da(i)};class si{constructor(n){this.str=n}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new si(this.str)}splice(n){const i=new si(this.str.slice(n));this.str=this.str.slice(0,n);const a=this.str.charCodeAt(n-1);return a>=55296&&a<=56319&&(this.str=this.str.slice(0,n-1)+"",i.str=""+i.str.slice(1)),i}mergeWith(n){return this.str+=n.str,!0}integrate(n,i){}delete(n){}gc(n){}write(n,i){n.writeString(i===0?this.str:this.str.slice(i))}getRef(){return 4}}const Ik=r=>new si(r.readString()),Gk=[xk,Ek,Ck,jk,Dk,Uk,Mk],Xk=0,Qk=1,Zk=2,$k=3,Jk=4,Fk=5,Wk=6;class Zi{constructor(n){this.type=n}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new Zi(this.type._copy())}splice(n){throw Lr()}mergeWith(n){return!1}integrate(n,i){this.type._integrate(n.doc,i)}delete(n){let i=this.type._start;for(;i!==null;)i.deleted?i.id.clock<(n.beforeState.get(i.id.client)||0)&&n._mergeStructs.push(i):i.delete(n),i=i.right;this.type._map.forEach(a=>{a.deleted?a.id.clock<(n.beforeState.get(a.id.client)||0)&&n._mergeStructs.push(a):a.delete(n)}),n.changed.delete(this.type)}gc(n){let i=this.type._start;for(;i!==null;)i.gc(n,!0),i=i.right;this.type._start=null,this.type._map.forEach(a=>{for(;a!==null;)a.gc(n,!0),a=a.left}),this.type._map=new Map}write(n,i){this.type._write(n)}getRef(){return 7}}const Pk=r=>new Zi(Gk[r.readTypeRef()](r)),Bf=(r,n,i)=>{const{client:a,clock:o}=n.id,u=new rn(ht(a,o+i),n,ht(a,o+i-1),n.right,n.rightOrigin,n.parent,n.parentSub,n.content.splice(i));return n.deleted&&u.markDeleted(),n.keep&&(u.keep=!0),n.redone!==null&&(u.redone=ht(n.redone.client,n.redone.clock+i)),n.right=u,u.right!==null&&(u.right.left=u),r._mergeStructs.push(u),u.parentSub!==null&&u.right===null&&u.parent._map.set(u.parentSub,u),n.length=i,u};class rn extends Ry{constructor(n,i,a,o,u,p,y,g){super(n,g.getLength()),this.origin=a,this.left=i,this.right=o,this.rightOrigin=u,this.parent=p,this.parentSub=y,this.redone=null,this.content=g,this.info=this.content.isCountable()?ab:0}set marker(n){(this.info&pp)>0!==n&&(this.info^=pp)}get marker(){return(this.info&pp)>0}get keep(){return(this.info&lb)>0}set keep(n){this.keep!==n&&(this.info^=lb)}get countable(){return(this.info&ab)>0}get deleted(){return(this.info&hp)>0}set deleted(n){this.deleted!==n&&(this.info^=hp)}markDeleted(){this.info|=hp}getMissing(n,i){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=hn(i,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=hn(i,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===Ns&&this.id.client!==this.parent.client&&this.parent.clock>=hn(i,this.parent.client))return this.parent.client;if(this.origin&&(this.left=zb(n,i,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=Hl(n,this.rightOrigin),this.rightOrigin=this.right.id),this.left&&this.left.constructor===Or||this.right&&this.right.constructor===Or)this.parent=null;else if(!this.parent)this.left&&this.left.constructor===rn?(this.parent=this.left.parent,this.parentSub=this.left.parentSub):this.right&&this.right.constructor===rn&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);else if(this.parent.constructor===Ns){const a=Sp(i,this.parent);a.constructor===Or?this.parent=null:this.parent=a.content.type}return null}integrate(n,i){if(i>0&&(this.id.clock+=i,this.left=zb(n,n.doc.store,ht(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(i),this.length-=i),this.parent){if(!this.left&&(!this.right||this.right.left!==null)||this.left&&this.left.right!==this.right){let a=this.left,o;if(a!==null)o=a.right;else if(this.parentSub!==null)for(o=this.parent._map.get(this.parentSub)||null;o!==null&&o.left!==null;)o=o.left;else o=this.parent._start;const u=new Set,p=new Set;for(;o!==null&&o!==this.right;){if(p.add(o),u.add(o),rf(this.origin,o.origin)){if(o.id.client<this.id.client)a=o,u.clear();else if(rf(this.rightOrigin,o.rightOrigin))break}else if(o.origin!==null&&p.has(Sp(n.doc.store,o.origin)))u.has(Sp(n.doc.store,o.origin))||(a=o,u.clear());else break;o=o.right}this.left=a}if(this.left!==null){const a=this.left.right;this.right=a,this.left.right=this}else{let a;if(this.parentSub!==null)for(a=this.parent._map.get(this.parentSub)||null;a!==null&&a.left!==null;)a=a.left;else a=this.parent._start,this.parent._start=this;this.right=a}this.right!==null?this.right.left=this:this.parentSub!==null&&(this.parent._map.set(this.parentSub,this),this.left!==null&&this.left.delete(n)),this.parentSub===null&&this.countable&&!this.deleted&&(this.parent._length+=this.length),Bw(n.doc.store,this),this.content.integrate(n,this),Lb(n,this.parent,this.parentSub),(this.parent._item!==null&&this.parent._item.deleted||this.parentSub!==null&&this.right!==null)&&this.delete(n)}else new Or(this.id,this.length).integrate(n,0)}get next(){let n=this.right;for(;n!==null&&n.deleted;)n=n.right;return n}get prev(){let n=this.left;for(;n!==null&&n.deleted;)n=n.left;return n}get lastId(){return this.length===1?this.id:ht(this.id.client,this.id.clock+this.length-1)}mergeWith(n){if(this.constructor===n.constructor&&rf(n.origin,this.lastId)&&this.right===n&&rf(this.rightOrigin,n.rightOrigin)&&this.id.client===n.id.client&&this.id.clock+this.length===n.id.clock&&this.deleted===n.deleted&&this.redone===null&&n.redone===null&&this.content.constructor===n.content.constructor&&this.content.mergeWith(n.content)){const i=this.parent._searchMarker;return i&&i.forEach(a=>{a.p===n&&(a.p=this,!this.deleted&&this.countable&&(a.index-=this.length))}),n.keep&&(this.keep=!0),this.right=n.right,this.right!==null&&(this.right.left=this),this.length+=n.length,!0}return!1}delete(n){if(!this.deleted){const i=this.parent;this.countable&&this.parentSub===null&&(i._length-=this.length),this.markDeleted(),Df(n.deleteSet,this.id.client,this.id.clock,this.length),Lb(n,i,this.parentSub),this.content.delete(n)}}gc(n,i){if(!this.deleted)throw Cr();this.content.gc(n),i?ak(n,this,new Or(this.id,this.length)):this.content=new Tu(this.length)}write(n,i){const a=i>0?ht(this.id.client,this.id.clock+i-1):this.origin,o=this.rightOrigin,u=this.parentSub,p=this.content.getRef()&Xf|(a===null?0:or)|(o===null?0:Yi)|(u===null?0:bu);if(n.writeInfo(p),a!==null&&n.writeLeftID(a),o!==null&&n.writeRightID(o),a===null&&o===null){const y=this.parent;if(y._item!==void 0){const g=y._item;if(g===null){const m=ik(y);n.writeParentInfo(!0),n.writeString(m)}else n.writeParentInfo(!1),n.writeLeftID(g.id)}else y.constructor===String?(n.writeParentInfo(!0),n.writeString(y)):y.constructor===Ns?(n.writeParentInfo(!1),n.writeLeftID(y)):Cr();u!==null&&n.writeString(u)}this.content.write(n,i)}}const l_=(r,n)=>e2[n&Xf](r),e2=[()=>{Cr()},Bk,Kk,zk,Ik,qk,Hk,Pk,Vk,Lk,()=>{Cr()}],t2=10;class Tr extends Ry{get deleted(){return!0}delete(){}mergeWith(n){return this.constructor!==n.constructor?!1:(this.length+=n.length,!0)}integrate(n,i){Cr()}write(n,i){n.writeInfo(t2),We(n.restEncoder,this.length-i)}getMissing(n,i){return null}}const a_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{},s_="__ $YJS$ __";a_[s_]===!0&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438");a_[s_]=!0;const kp=new FinalizationRegistry(({cache:r,key:n})=>{delete r[n]});function o_(r){var n,i;return(n=(i=r._novip)._docCache)!==null&&n!==void 0?n:i._docCache={cache:{},get size(){return Object.keys(this.cache).length},find(a,o,u){const p=Op(a,o,u),y=this.cache[p];return y?y.deref():void 0},add(a){var o;const{parentTable:u,parentId:p,parentProp:y}=a.meta;if(!u||!y||p==null)throw new Error("Missing Dexie-related metadata in Y.Doc");const g=Op(u,p,y),m=(o=this.cache[g])===null||o===void 0?void 0:o.deref();m&&kp.unregister(m),this.cache[g]=new WeakRef(a),kp.register(a,{cache:this.cache,key:g},a)},delete(a){kp.unregister(a);const o=Op(a.meta.parentTable,a.meta.parentId,a.meta.parentProp),u=this.cache[o];(u==null?void 0:u.deref())===a&&delete this.cache[o]}}}const hu=new WeakSet;function Jp(r){if(hu.has(r))throw new Error(`Y.Doc ${r.meta.parentId} has been destroyed`)}function Op(r,n,i){return`${r}[${n}].${i}`}function n2(r,n,i,a,o,u){let p=n.find(i,u,a);return p||(p=new Ws({meta:{db:r,updatesTable:o,parentProp:a,parentTable:i,parentId:u}}),n.add(p),p.on("destroy",()=>{hu.add(p),n.delete(p)}),p)}const{getByKeyPath:vT}=dt;let u_=null;function Vb(r){u_=r}function r2(r,n,i,a,o,u){let p=0,y=!0;const g=Ml(()=>{Jp(n);const x=i.table(o);return Promise.all([(p>0?x.where("i").between(p,1/0,!1).toArray().then(S=>S.filter(A=>Gf(A.k,u)===0)):x.where({k:u}).toArray()).then(S=>S),i.table(a).where(":id").equals(u).toArray()])}).subscribe(([x,S])=>{if(x.length>0&&(p=x[x.length-1].i),S.length===0){n.destroy();return}Jp(n),x.length>0&&Dt(n,()=>{x.forEach(A=>{try{Vb(A),Mw(n,A.u)}finally{Vb(null)}})},r,!1),y&&(y=!1,n.emit("load",[n]))},x=>{r.on("error").fire(x)}),m=(x,S)=>{S!==r&&i.table(o).add({k:u,u:x,f:1}).then(A=>{A===p-1&&++p}).catch(A=>{r.on("error").fire(A)})},b=()=>{g.unsubscribe(),n.off("updateV2",m),n.off("destroy",b)};return n.on("updateV2",m),n.on("destroy",b),b}function c_(){}function i2(r,n){return r===c_?n:function(){var i=r.apply(this,arguments);if(i&&typeof i.then=="function"){for(var a=this,o=arguments.length,u=new Array(o);o--;)u[o]=arguments[o];return i.then(function(){return n.apply(a,u)})}return n.apply(this,arguments)}}function l2(r,n){return r===c_?n:function(){r.apply(this,arguments),n.apply(this,arguments)}}const ou=new WeakMap;function Ib(){return dt.Events(null,"load","sync","error")}class Un{static getOrCreateDocument(n,i,a,o){var u,p;const y=o_(n),g=(p=(u=n.table(i).schema.yProps)===null||u===void 0?void 0:u.find(m=>m.prop===a))===null||p===void 0?void 0:p.updatesTable;if(!g)throw new Error(`Updates table for ${i}.${a} not found`);return n2(n,y,i,a,g,o)}static load(n,i){var a;let o=ou.get(n);return o?(++o.refCount,(i==null?void 0:i.gracePeriod)!=null&&o.graceTimeout<i.gracePeriod&&(o.graceTimeout=i.gracePeriod),o.graceTimer&&(clearTimeout(o.graceTimer),o.graceTimer=null)):(o=new Un(n),o.graceTimeout=(a=i==null?void 0:i.gracePeriod)!==null&&a!==void 0?a:-1,ou.set(n,o)),o}static release(n){if(!n||hu.has(n))return;const i=ou.get(n);i?--i.refCount<=0&&(i.graceTimeout<0?i._release():i.graceTimer||(i.graceTimer=setTimeout(()=>{i.graceTimer=null,i.refCount===0&&i._release()},i.graceTimeout))):n.destroy()}_release(){this.doc&&Promise.resolve(Un.on("beforeunload").fire(this)).finally(()=>{var n;this.refCount===0&&((n=this.doc)===null||n===void 0||n.destroy())})}static for(n){return ou.get(n)}static get currentUpdateRow(){return u_}get whenLoaded(){return this._whenLoaded||(this._whenLoaded=new Promise((n,i)=>{if(!this.doc){i(new Error("No Y.Doc associated with this provider"));return}this.doc.isLoaded?n():this._error?i(this._error):hu.has(this.doc)?i(new dt.AbortError("Document was destroyed before loaded")):(this.on("load",n),this.on("error",i),this.doc.on("destroy",()=>i(new dt.AbortError("Document was destroyed before loaded"))))})),this._whenLoaded}get whenSynced(){return this._whenSynced||(this._whenSynced=new Promise((n,i)=>{if(!this.doc){i(new Error("No Y.Doc associated with this provider"));return}this.doc.isSynced?n():this._error?i(this._error):hu.has(this.doc)?i(new dt.AbortError("Document was destroyed before synced")):(this.on("sync",n),this.on("error",i),this.doc.on("destroy",()=>i(new dt.AbortError("Document was destroyed before synced"))))})),this._whenSynced}constructor(n){this.refCount=1,this.cleanupHandlers=[],this.graceTimeout=-1,this.doc=null,this.destroyed=!1,this.on=Ib(),this.doc=n,this.off=(p,y)=>{var g;return(g=this.on[p])===null||g===void 0?void 0:g.unsubscribe(y)},"dispose"in Symbol&&(this[Symbol.dispose]=()=>Un.release(n)),n.on("load",()=>this.on("load").fire()),n.on("sync",p=>p!==!1&&this.on("sync").fire()),n.on("destroy",this.destroy.bind(this)),this.on("error",p=>{this._error=p});const{db:i,parentTable:a,parentId:o,updatesTable:u}=n.meta||{};if(!i||!a||!u)throw new Error("Missing Dexie-related metadata in Y.Doc. Documents need to be obtained through Y.Doc properties from dexie queries.");if(!i.table(a)||!i.table(u))throw new Error(`Table ${a} or ${u} not found in db`);Jp(n),this.stopObserving=r2(this,n,i,a,u,o),Un.on("new").fire(this)}destroy(){var n,i,a;console.debug(`Y.Doc ${(i=(n=this.doc)===null||n===void 0?void 0:n.meta)===null||i===void 0?void 0:i.parentId} was destroyed`),ou.delete(this.doc),this.doc=null,this.destroyed=!0,this.refCount=0,(a=this.stopObserving)===null||a===void 0||a.call(this),this.on=Ib(),this.cleanupHandlers.forEach(o=>o())}addCleanupHandler(n){this.cleanupHandlers.push(typeof n=="function"?n:()=>n.unsubscribe())}}Un.on=dt.Events(null,{new:[l2],beforeunload:[i2]});Un.getDocCache=o_;dt.DexieYProvider?Un=dt.DexieYProvider||Un:dt.DexieYProvider=Un;const Tp=3e4;class a2 extends RE{constructor(n){super(),this.doc=n,this.clientID=n.clientID,this.states=new Map,this.meta=new Map,this._checkInterval=setInterval(()=>{const i=Ef();this.getLocalState()!==null&&Tp/2<=i-this.meta.get(this.clientID).lastUpdated&&this.setLocalState(this.getLocalState());const a=[];this.meta.forEach((o,u)=>{u!==this.clientID&&Tp<=i-o.lastUpdated&&this.states.has(u)&&a.push(u)}),a.length>0&&f_(this,a,"timeout")},qr(Tp/10)),n.on("destroy",()=>{this.destroy()}),this.setLocalState({})}destroy(){this.emit("destroy",[this]),this.setLocalState(null),super.destroy(),clearInterval(this._checkInterval)}getLocalState(){return this.states.get(this.clientID)||null}setLocalState(n){const i=this.clientID,a=this.meta.get(i),o=a===void 0?0:a.clock+1,u=this.states.get(i);n===null?this.states.delete(i):this.states.set(i,n),this.meta.set(i,{clock:o,lastUpdated:Ef()});const p=[],y=[],g=[],m=[];n===null?m.push(i):u==null?n!=null&&p.push(i):(y.push(i),Ds(u,n)||g.push(i)),(p.length>0||g.length>0||m.length>0)&&this.emit("change",[{added:p,updated:g,removed:m},"local"]),this.emit("update",[{added:p,updated:y,removed:m},"local"])}setLocalStateField(n,i){const a=this.getLocalState();a!==null&&this.setLocalState({...a,[n]:i})}getStates(){return this.states}}const f_=(r,n,i)=>{const a=[];for(let o=0;o<n.length;o++){const u=n[o];if(r.states.has(u)){if(r.states.delete(u),u===r.clientID){const p=r.meta.get(u);r.meta.set(u,{clock:p.clock+1,lastUpdated:Ef()})}a.push(u)}}a.length>0&&(r.emit("change",[{added:[],updated:[],removed:a},i]),r.emit("update",[{added:[],updated:[],removed:a},i]))},s2=(r,n,i=r.states)=>{const a=n.length,o=Qs();We(o,a);for(let u=0;u<a;u++){const p=n[u],y=i.get(p)||null,g=r.meta.get(p).clock;We(o,p),We(o,g),Ar(o,JSON.stringify(y))}return sr(o)},o2=(r,n,i)=>{const a=Uu(n),o=Ef(),u=[],p=[],y=[],g=[],m=Ot(a);for(let b=0;b<m;b++){const x=Ot(a);let S=Ot(a);const A=JSON.parse(kr(a)),C=r.meta.get(x),U=r.states.get(x),X=C===void 0?0:C.clock;(X<S||X===S&&A===null&&r.states.has(x))&&(A===null?x===r.clientID&&r.getLocalState()!=null?S++:r.states.delete(x):r.states.set(x,A),r.meta.set(x,{clock:S,lastUpdated:o}),C===void 0&&A!==null?u.push(x):C!==void 0&&A===null?g.push(x):A!==null&&(Ds(A,U)||y.push(x),p.push(x)))}(u.length>0||y.length>0||g.length>0)&&r.emit("change",[{added:u,updated:y,removed:g},i]),(u.length>0||p.length>0||g.length>0)&&r.emit("update",[{added:u,updated:p,removed:g},i])};function De(r,n,i,a){return new(i||(i=Promise))((function(o,u){function p(m){try{g(a.next(m))}catch(b){u(b)}}function y(m){try{g(a.throw(m))}catch(b){u(b)}}function g(m){var b;m.done?o(m.value):(b=m.value,b instanceof i?b:new i((function(x){x(b)}))).then(p,y)}g((a=a.apply(r,n||[])).next())}))}function u2(r){var n=typeof Symbol=="function"&&Symbol.iterator,i=n&&r[n],a=0;if(i)return i.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&a>=r.length&&(r=void 0),{value:r&&r[a++],done:!r}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function An(r){return this instanceof An?(this.v=r,this):new An(r)}function Fp(r,n,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a,o=i.apply(r,n||[]),u=[];return a={},p("next"),p("throw"),p("return"),a[Symbol.asyncIterator]=function(){return this},a;function p(x){o[x]&&(a[x]=function(S){return new Promise((function(A,C){u.push([x,S,A,C])>1||y(x,S)}))})}function y(x,S){try{(function(A){A.value instanceof An?Promise.resolve(A.value.v).then(g,m):b(u[0][2],A)})(o[x](S))}catch(A){b(u[0][3],A)}}function g(x){y("next",x)}function m(x){y("throw",x)}function b(x,S){x(S),u.shift(),u.length&&y(u[0][0],u[0][1])}}function Wp(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,i=r[Symbol.asyncIterator];return i?i.call(r):(r=u2(r),n={},a("next"),a("throw"),a("return"),n[Symbol.asyncIterator]=function(){return this},n);function a(o){n[o]=r[o]&&function(u){return new Promise((function(p,y){(function(g,m,b,x){Promise.resolve(x).then((function(S){g({value:S,done:b})}),m)})(p,y,(u=r[o](u)).done,u.value)}))}}}const c2={}.hasOwnProperty;function Lf(r,n,i){if(r&&n!==void 0&&(!("isFrozen"in Object)||!Object.isFrozen(r)))if(typeof n!="string"&&"length"in n){(function(m){if(!m)throw new Error("Assertion Failed")})(typeof i!="string"&&"length"in i);for(var a=0,o=n.length;a<o;++a)Lf(r,n[a],i[a])}else{var u=n.indexOf(".");if(u!==-1){var p=n.substr(0,u),y=n.substr(u+1);if(y==="")i===void 0?Array.isArray(r)?isNaN(parseInt(p))||r.splice(parseInt(p),1):delete r[p]:r[p]=i;else{var g=r[p];g&&(function(m,b){return c2.call(m,b)})(r,p)||(g=r[p]={}),Lf(g,y,i)}}else i===void 0?Array.isArray(r)&&!isNaN(parseInt(n))?r.splice(n,1):delete r[n]:r[n]=i}}const d_=typeof self<"u"&&typeof crypto<"u"?(r,n=crypto.getRandomValues.bind(crypto))=>{const i=new Uint8Array(r);return n(i),self.btoa(String.fromCharCode.apply(null,i))}:typeof Buffer<"u"?(r,n=f2)=>{const i=Buffer.alloc(r);return n(i),i.toString("base64")}:()=>{throw new Error("No implementation of randomString was found")};function f2(r){for(let n=0;n<r.length;++n)r[n]=Math.floor(256*Math.random())}function zy(r){return typeof r=="string"||!!(Array.isArray(r)&&r.some((n=>zy(n)))&&r.every(h_))}function h_(r){return typeof r=="string"||typeof r=="number"||Array.isArray(r)&&r.every(h_)}function d2(r,n,i){const a=r[n]||(r[n]={}),o=i.keys.map((u=>typeof u=="string"?u:JSON.stringify(u)));switch(i.type){case"insert":case"upsert":o.forEach(((u,p)=>{a[u]={type:"ups",val:i.values[p]}}));break;case"update":case"modify":o.forEach(((u,p)=>{const y=i.type==="update"?i.changeSpecs[p]:i.changeSpec,g=a[u];if(g)switch(g.type){case"ups":for(const[m,b]of Object.entries(y))Lf(g.val,m,b);break;case"del":break;case"upd":Object.assign(g.mod,y)}else a[u]={type:"upd",mod:y}}));break;case"delete":o.forEach((u=>{a[u]={type:"del"}}))}return r}function Gb(r,n){for(const{table:i,muts:a}of n)for(const o of a)d2(r,i,o)}function h2(r){return Fp(this,arguments,(function*(){var n,i,a,o;let u=0,p=new Uint8Array(4),y=0,g=[],m=0;try{for(var b,x=!0,S=Wp(r);!(n=(b=yield An(S.next())).done);x=!0){o=b.value,x=!1;const A=o,C=new DataView(A.buffer,A.byteOffset,A.byteLength);let U=0;for(;U<A.byteLength;)switch(u){case 0:if(U+4>A.byteLength){for(const X of A.slice(U)){if(y===4)break;p[y++]=X,++U}if(y<4)break}else if(y>0&&y<4)for(const X of A.slice(U,U+4-y))p[y++]=X,++U;case 1:m=y===4?new DataView(p.buffer,0,4).getUint32(0,!1):C.getUint32(U,!1),y?y=0:U+=4;case 2:if(U>=A.byteLength){u=2;break}if(U+m>A.byteLength)g.push(A.slice(U)),m-=A.byteLength-U,u=2,U=A.byteLength;else{if(g.length>0){const X=new Uint8Array(g.reduce(((W,z)=>W+z.byteLength),m));let ie=0;for(const W of g)X.set(W,ie),ie+=W.byteLength;X.set(A.slice(U,U+m),ie),g=[],yield yield An(X)}else yield yield An(A.slice(U,U+m));U+=m,u=0}}}}catch(A){i={error:A}}finally{try{x||n||!(a=S.return)||(yield An(a.call(S)))}finally{if(i)throw i.error}}}))}function p_(r,n){return De(this,void 0,void 0,(function*(){try{const i=yield navigator.serviceWorker.ready;if(n==="push"&&i.sync&&(yield i.sync.register(`dexie-cloud:${r.name}`)),!i.active)throw new Error("Failed to trigger sync - there's no active service worker");return void i.active.postMessage({type:"dexie-cloud-sync",dbName:r.name,purpose:n})}catch{}}))}function Ki(r,n){r.cloud.usingServiceWorker?p_(r,n):r.localSyncEvent.next({purpose:n})}const p2="fromBase64"in Uint8Array,y2="toBase64"in Uint8Array.prototype,By=typeof Buffer<"u"?r=>Buffer.from(r,"base64"):p2?r=>Uint8Array.fromBase64(r):r=>{const n=atob(r),i=n.length,a=new Uint8Array(i);for(var o=0;o<i;o++)a[o]=n.charCodeAt(o);return a},eo=typeof Buffer<"u"?r=>ArrayBuffer.isView(r)?Buffer.from(r.buffer,r.byteOffset,r.byteLength).toString("base64"):Buffer.from(r).toString("base64"):y2?r=>(ArrayBuffer.isView(r)?r:new Uint8Array(r)).toBase64():r=>{const n=ArrayBuffer.isView(r)?r:new Uint8Array(r),i=[];for(let a=0,o=n.length;a<o;a+=4096){const u=n.subarray(a,a+4096);i.push(String.fromCharCode.apply(null,u))}return btoa(i.join(""))};class Pp extends Error{constructor({title:n,message:i,messageCode:a,messageParams:o}){super(i),this.name="TokenErrorResponseError",this.title=n,this.messageCode=a,this.messageParams=o}}function qu(r,n){return new Promise(((i,a)=>{const o=Object.assign(Object.assign({submitLabel:"Submit",cancelLabel:"Cancel"},n),{onSubmit:u=>{r.next(void 0),i(u)},onCancel:()=>{r.next(void 0),a(new dt.AbortError("User cancelled"))}});r.next(o)}))}function ey(r,n,...i){return qu(r,{type:"message-alert",title:n,alerts:i,fields:{},submitLabel:"OK",cancelLabel:null})}function Xb(r,n,i){return De(this,void 0,void 0,(function*(){let a=i||"";for(;!a||!/^[\w-+.]+@([\w-]+\.)+[\w-]{2,10}(\sas\s[\w-+.]+@([\w-]+\.)+[\w-]{2,10})?$/.test(a);)a=(yield qu(r,{type:"email",title:n,alerts:a?[{type:"error",messageCode:"INVALID_EMAIL",message:"Please enter a valid email address",messageParams:{}}]:[],fields:{email:{type:"email",placeholder:"you@somedomain.com"}}})).email;return a}))}function Qb(r,n,i){return De(this,void 0,void 0,(function*(){const a=[{type:"info",messageCode:"OTP_SENT",message:"A One-Time password has been sent to {email}",messageParams:{email:n}}];i&&a.push(i);const{otp:o}=yield qu(r,{type:"otp",title:"Enter OTP",alerts:a,fields:{otp:{type:"otp",label:"OTP",placeholder:"Paste OTP here"}}});return o}))}function od(r){return De(this,void 0,void 0,(function*(){var n,i,a;const o=yield r.getCurrentUser(),{accessToken:u,accessTokenExpiration:p,refreshToken:y,refreshTokenExpiration:g,claims:m}=o;if(!u)return null;if(((n=p==null?void 0:p.getTime())!==null&&n!==void 0?n:1/0)>Date.now()&&(((i=o.license)===null||i===void 0?void 0:i.status)||"ok")==="ok")return o;if(!y)throw new Error("Refresh token missing");if(((a=g==null?void 0:g.getTime())!==null&&a!==void 0?a:1/0)<=Date.now())throw new Error("Refresh token has expired");const b=yield ud(r.cloud.options.databaseUrl,o);return yield r.table("$logins").update(m.sub,{accessToken:b.accessToken,accessTokenExpiration:b.accessTokenExpiration,claims:b.claims,license:b.license,data:b.data}),b}))}function m2(r,n,i,a,o){return De(this,void 0,void 0,(function*(){return n.accessToken&&n.accessTokenExpiration.getTime()>Date.now()?n:n.refreshToken&&(!n.refreshTokenExpiration||n.refreshTokenExpiration.getTime()>Date.now())?yield ud(r,n):yield(function(u,p,y,g){return De(this,void 0,void 0,(function*(){if(!crypto.subtle)throw typeof location<"u"&&location.protocol==="http:"?new Error("Dexie Cloud Addon needs to use WebCrypto, but your browser has disabled it due to being served from an insecure location. Please serve it from https or http://localhost:<port> (See https://stackoverflow.com/questions/46670556/how-to-enable-crypto-subtle-for-unsecure-origins-in-chrome/46671627#46671627)"):new Error("This browser does not support WebCrypto.");const{privateKey:m,publicKey:b}=yield crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!1,["sign","verify"]);if(!m||!b)throw new Error("Could not generate RSA keypair");u.nonExportablePrivateKey=m;const x=(function(S){const A=eo(S);return(function(C){let U=`-----BEGIN PUBLIC KEY-----
`;for(;C.length>0;)U+=C.substring(0,64)+`
`,C=C.substring(64);return U+="-----END PUBLIC KEY-----",U})(A)})(yield crypto.subtle.exportKey("spki",b));u.publicKey=b;try{const S=yield p({public_key:x,hints:g});if(S.type==="error")throw new Pp(S);if(S.type!=="tokens")throw new Error(`Unexpected response type from token endpoint: ${S.type}`);return u.accessToken=S.accessToken,u.accessTokenExpiration=new Date(S.accessTokenExpiration),u.refreshToken=S.refreshToken,S.refreshTokenExpiration&&(u.refreshTokenExpiration=new Date(S.refreshTokenExpiration)),u.userId=S.claims.sub,u.email=S.claims.email,u.name=S.claims.name,u.claims=S.claims,u.license={type:S.userType,status:S.claims.license||"ok"},u.data=S.data,S.evalDaysLeft!=null&&(u.license.evalDaysLeft=S.evalDaysLeft),S.userValidUntil!=null&&(u.license.validUntil=new Date(S.userValidUntil)),S.alerts&&S.alerts.length>0&&(yield qu(y,{type:"message-alert",title:"Authentication Alert",fields:{},alerts:S.alerts})),u}catch(S){if(S instanceof Pp)throw yield ey(y,S.title,{type:"error",messageCode:S.messageCode,message:S.message,messageParams:{}}),S;let A="We're having a problem authenticating right now.";throw S instanceof TypeError&&(A=typeof navigator!==void 0&&!navigator.onLine?"You seem to be offline. Please connect to the internet and try again.":dt.debug||typeof location<"u"&&(location.hostname==="localhost"||location.hostname==="127.0.0.1")?`Could not connect to server. Please verify that your origin '${location.origin}' is whitelisted using \`npx dexie-cloud whitelist\``:"Could not connect to server. Please verify the connection.",yield ey(y,"Authentication Failed",{type:"error",messageCode:"GENERIC_ERROR",message:A,messageParams:{}}).catch((()=>{}))),S}}))})(n,i,a,o)}))}function ud(r,n){return De(this,void 0,void 0,(function*(){if(!n.refreshToken)throw new Error("Cannot refresh token - refresh token is missing.");if(!n.nonExportablePrivateKey)throw new Error("login.nonExportablePrivateKey is missing - cannot sign refresh token without a private key.");const i=Date.now(),a="RSASSA-PKCS1-v1_5",o=new TextEncoder().encode(n.refreshToken+i),u=yield crypto.subtle.sign(a,n.nonExportablePrivateKey,o),p=eo(u),y={grant_type:"refresh_token",refresh_token:n.refreshToken,scopes:["ACCESS_DB"],signature:p,signing_algorithm:a,time_stamp:i},g=yield fetch(`${r}/token`,{body:JSON.stringify(y),method:"post",headers:{"Content-Type":"application/json"},mode:"cors"});if(g.status!==200)throw new Error(`RefreshToken: Status ${g.status} from ${r}/token`);const m=yield g.json();if(m.type==="error")throw new Pp(m);return n.accessToken=m.accessToken,n.accessTokenExpiration=m.accessTokenExpiration?new Date(m.accessTokenExpiration):void 0,n.claims=m.claims,n.license={type:m.userType,status:m.claims.license||"ok"},m.evalDaysLeft!=null&&(n.license.evalDaysLeft=m.evalDaysLeft),m.userValidUntil!=null&&(n.license.validUntil=new Date(m.userValidUntil)),m.data&&(n.data=m.data),n}))}const Zb=new WeakMap;class Ly{constructor(n,i){Zb.set(this,n),Object.assign(this,i)}static load(n,i){return n.table("$logins").get(i).then((a=>new Ly(n,a||{userId:i,claims:{sub:i},lastLogin:new Date(0)})))}save(){return De(this,void 0,void 0,(function*(){Zb.get(this).table("$logins").put(this)}))}}const Zn={userId:"unauthorized",name:"Unauthorized",claims:{sub:"unauthorized"},lastLogin:new Date(0)};try{Object.freeze(Zn),Object.freeze(Zn.claims)}catch{}function y_(r,n){return Ea(ur(r).pipe(Er(n)))}function m_(r){return De(this,void 0,void 0,(function*(){const n=yield ty(r);if(n){if(!(yield(function(i,a,o){return De(this,void 0,void 0,(function*(){const u=[{type:"warning",messageCode:"LOGOUT_CONFIRMATION",message:`{numUnsyncedChanges} unsynced changes will get lost!
                Logout anyway?`,messageParams:{currentUserId:a,numUnsyncedChanges:o.toString()}}];return yield qu(i,{type:"logout-confirmation",title:"Confirm Logout",alerts:u,fields:{},submitLabel:"Confirm logout",cancelLabel:"Cancel"}).then((()=>!0)).catch((()=>!1))}))})(r.cloud.userInteraction,r.cloud.currentUserId,n)))throw new Error("User cancelled logout due to unsynced changes");yield ty(r,{deleteUnsyncedData:!0})}}))}function ty(r){return De(this,arguments,void 0,(function*(n,{deleteUnsyncedData:i=!1}={}){const[a,o]=yield n.dx.transaction("rw",n.dx.tables,(u=>De(this,void 0,void 0,(function*(){const p=u.idbtrans;p.disableChangeTracking=!0,p.disableAccessControl=!0;const y=u.storeNames.filter((m=>m.endsWith("_mutations"))),g=(yield Promise.all(y.map((m=>u.table(m).count())))).reduce(((m,b)=>m+b),0);if(g>0&&!i)return[g,!1];n.$syncState.delete("syncState");for(const m of n.dx.tables)m.name!=="$jobs"&&m.name!=="$syncState"&&m.clear();return[g,!0]}))));return o&&(yield y_(n.cloud.currentUser,(u=>u.userId===Zn.userId)),yield n.cloud.sync({purpose:"pull",wait:!0})),a}))}class ny extends Error{constructor(n,i){super(i||`${n.status} ${n.statusText}`),this.httpStatus=n.status}get name(){return"HttpError"}}function sf(r,...n){globalThis.console[r](...n)}function Cp(r,n){return De(this,void 0,void 0,(function*(){var i;const a=yield r.getCurrentUser(),o=a.userId;if(a.isLoggedIn&&(!n||!n.email&&!n.userId)){if((((i=a.license)===null||i===void 0?void 0:i.status)||"ok")==="ok"&&a.accessToken&&(!a.accessTokenExpiration||a.accessTokenExpiration.getTime()>Date.now()))return!1;if(a.refreshToken&&(!a.refreshTokenExpiration||a.refreshTokenExpiration.getTime()>Date.now()))return yield od(r),!1}const u=new Ly(r,{claims:{},lastLogin:new Date(0)});return yield m2(r.cloud.options.databaseUrl,u,r.cloud.options.fetchTokens||(function(p){const{userInteraction:y}=p.cloud;return function(g){return De(this,arguments,void 0,(function*({public_key:m,hints:b}){var x;let S;const A=(x=p.cloud.options)===null||x===void 0?void 0:x.databaseUrl;if(!A)throw new Error("No database URL given.");if((b==null?void 0:b.grant_type)==="demo")S={demo_user:yield Xb(y,"Enter a demo user email",(b==null?void 0:b.email)||(b==null?void 0:b.userId)),grant_type:"demo",scopes:["ACCESS_DB"],public_key:m};else if(b!=null&&b.otpId&&b.otp)S={grant_type:"otp",otp_id:b.otpId,otp:b.otp,scopes:["ACCESS_DB"],public_key:m};else{const X=yield Xb(y,"Enter email address",b==null?void 0:b.email);S=/@demo.local$/.test(X)?{demo_user:X,grant_type:"demo",scopes:["ACCESS_DB"],public_key:m}:{email:X,grant_type:"otp",scopes:["ACCESS_DB"]}}const C=yield fetch(`${A}/token`,{body:JSON.stringify(S),method:"post",headers:{"Content-Type":"application/json",mode:"cors"}});if(C.status!==200){const X=yield C.text();throw yield ey(y,"Token request failed",{type:"error",messageCode:"GENERIC_ERROR",message:X,messageParams:{}}).catch((()=>{})),new ny(C,X)}const U=yield C.json();if(U.type==="tokens"||U.type==="error")return U;if(S.grant_type==="otp"&&"email"in S){if(U.type!=="otp-sent")throw new Error(`Unexpected response from ${A}/token`);const X=yield Qb(y,S.email),ie=Object.assign(Object.assign({},S),{otp:X||"",otp_id:U.otp_id,public_key:m});let W=yield fetch(`${A}/token`,{body:JSON.stringify(ie),method:"post",headers:{"Content-Type":"application/json"},mode:"cors"});for(;W.status===401;){const z=yield W.text();ie.otp=yield Qb(y,S.email,{type:"error",messageCode:"INVALID_OTP",message:z,messageParams:{}}),W=yield fetch(`${A}/token`,{body:JSON.stringify(ie),method:"post",headers:{"Content-Type":"application/json"},mode:"cors"})}if(W.status!==200){const z=yield W.text();throw new ny(W,z)}return yield W.json()}throw new Error(`Unexpected response from ${A}/token`)}))}})(r),r.cloud.userInteraction,n),o!==Zn.userId&&u.userId!==o&&(yield m_(r)),yield(function(p,y){return De(this,void 0,void 0,(function*(){const g=p.table("$logins");yield p.transaction("rw",g,(m=>De(this,void 0,void 0,(function*(){const b=yield g.toArray();yield Promise.all(b.filter((x=>x.userId!==y.userId&&x.isLoggedIn)).map((x=>(x.isLoggedIn=!1,g.put(x))))),y.isLoggedIn=!0,y.lastLogin=new Date;try{yield y.save()}catch(x){try{x.name==="DataCloneError"&&(sf("debug","Login context property names:",Object.keys(y)),sf("debug","Login context property names:",Object.keys(y)),sf("debug","Login context:",y),sf("debug","Login context JSON:",JSON.stringify(y)))}catch{}throw x}})))),yield y_(p.cloud.currentUser,(m=>m.userId===y.userId))}))})(r,u),Ki(r,"pull"),u.userId!==o}))}const ry={},pu=typeof self<"u"&&self.document&&typeof navigator<"u"&&navigator.serviceWorker;pu&&pu.ready.then((r=>ry.registration=r)),typeof self<"u"&&"clients"in self&&!self.document&&addEventListener("message",(r=>{var n,i;!((i=(n=r.data)===null||n===void 0?void 0:n.type)===null||i===void 0)&&i.startsWith("sw-broadcast-")&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach((a=>{var o;return a.id!==((o=r.source)===null||o===void 0?void 0:o.id)&&a.postMessage(r.data)}))}));class Dp{constructor(n){this.name=n}subscribe(n){if(!pu)return()=>{};const i=a=>{var o;((o=a.data)===null||o===void 0?void 0:o.type)===`sw-broadcast-${this.name}`&&n(a.data.message)};return pu.addEventListener("message",i),()=>pu.removeEventListener("message",i)}postMessage(n){var i;typeof self.clients=="object"?[...self.clients.matchAll({includeUncontrolled:!0})].forEach((a=>a.postMessage({type:`sw-broadcast-${this.name}`,message:n}))):ry.registration&&((i=ry.registration.active)===null||i===void 0||i.postMessage({type:`sw-broadcast-${this.name}`,message:n}))}}const uu=globalThis["lbc-events"]||(globalThis["lbc-events"]=new Map);class of extends ln{constructor(n){const i=typeof BroadcastChannel>"u"?new Dp(n):new BroadcastChannel(n);super((a=>{function o(y){a.next(y.detail)}function u(y){a.next(y.data)}let p;(function(y,g){uu.has(y)?uu.get(y).push(g):uu.set(y,[g])})(`lbc-${n}`,o);try{i instanceof Dp?p=i.subscribe((y=>a.next(y))):i.addEventListener("message",u)}catch{}return()=>{(function(y,g){const m=uu.get(y);if(m){const b=m.indexOf(g);b!==-1&&m.splice(b,1)}})(`lbc-${n}`,o),i instanceof Dp?p():i.removeEventListener("message",u)}})),this.name=n,this.bc=i}next(n){this.bc.postMessage(n),(function(i){const a=uu.get(i.type);a&&a.forEach((o=>{try{o(i)}catch{}}))})(new CustomEvent(`lbc-${this.name}`,{detail:n}))}}function iy(r){return De(this,arguments,void 0,(function*({realms:n,inviteRealms:i}){const a=JSON.stringify([...n.map((p=>({realmId:p,accepted:!0}))),...i.map((p=>({realmId:p,accepted:!1})))].sort(((p,y)=>p.realmId<y.realmId?-1:p.realmId>y.realmId?1:0))),o=new TextEncoder().encode(a),u=yield crypto.subtle.digest("SHA-1",o);return eo(u)}))}function gf(r){return Object.entries(r.cloud.schema||{}).filter((([,{markedForSync:n}])=>n)).map((([n])=>r.tables.filter((({name:i})=>i===n))[0])).filter((n=>n))}function qy(r){return`$${r}_mutations`}function v_(r){var n;const i=(n=/^\$(.*)_mutations$/.exec(r))===null||n===void 0?void 0:n[1];if(!i)throw new Error(`Given mutationTable ${r} is not correct`);return i}const v2=[].concat;function Hy(r){return v2.apply([],r)}function ly(r,n){return De(this,arguments,void 0,(function*(i,a,{since:o={},limit:u=1/0}={}){const p=yield Promise.all(i.map((x=>De(this,void 0,void 0,(function*(){const S=v_(x.name),A=o[S];let C=A?x.where("rev").above(A):x;u<1/0&&(C=C.limit(u));let U=yield C.toArray();return U=(function(X){return X=X.map((ie=>{if(ie.type==="modify"&&ie.criteria.index===null){const W=Object.assign(Object.assign({},ie),{criteria:void 0,changeSpec:void 0,type:"update",keys:ie.keys,changeSpecs:[ie.changeSpec]});return delete W.criteria,delete W.changeSpec,W}return ie})),X})(U),U=(function(X){const ie=new Map;for(const W of X)if(W.type==="update"){if(W.keys.length!==1||W.changeSpecs.length!==1)continue;const z=""+W.keys[0],fe=W.changeSpecs[0];if(Object.values(fe).some((ye=>typeof ye=="object"&&ye&&"@@propmod"in ye)))continue;let xe=ie.get(z);xe?xe.push({txid:W.txid,updateSpec:fe}):ie.set(z,[{txid:W.txid,updateSpec:fe}])}return X=X.filter((W=>{if(W.type!=="update"||W.keys.length!==1||W.changeSpecs.length!==1)return!0;const z=new Set(Object.keys(W.changeSpecs[0])),fe=""+W.keys[0],xe=ie.get(fe);for(let ye=xe.length-1;ye>=0;--ye){const{txid:pe,updateSpec:Le}=xe[ye];if(pe===W.txid)break;for(const Re of Object.keys(Le))z.delete(Re)}return z.size!==0})),X})(U),U.map((X=>({table:S,mut:X})))}))))),y=Hy(p).sort(((x,S)=>x.mut.txid===S.mut.txid?x.mut.opNo-S.mut.opNo:x.mut.ts-S.mut.ts)),g=[];let m=null,b=null;for(const{table:x,mut:S}of y)m&&m.table===x&&b===S.txid?m.muts.push(S):(m={table:x,muts:[S]},b=S.txid,g.push(m));return g}))}function g_(r){const n=new Uint8Array(r);if(typeof crypto<"u")crypto.getRandomValues(n);else for(let i=0;i<r;i++)n[i]=Math.floor(256*Math.random());if(typeof Buffer<"u"&&Buffer.from)return Buffer.from(n).toString("base64");if(typeof btoa<"u")return btoa(String.fromCharCode.apply(null,n));throw new Error("No btoa or Buffer available")}const{toString:g2}={},$b={replace:function(r){const n=Object.keys(r);let i=null;for(let o=0,u=n.length;o<u;++o)n[o][0]==="$"&&(i=i||[],i.push(n[o]));if(!i)return r;const a={...r};for(const o of i)delete a[o];for(const o of i)a["$"+o]=r[o];return a}};function b_(...r){const n=r.reduce(((a,o)=>({...a,...o})),r.reduce(((a,o)=>({...o,...a})),{})),i=new WeakMap;return{stringify(a,o,u){return JSON.stringify(a,(function(y){const g=this[y],m=(function(b){const x=typeof b;switch(typeof b){case"object":case"function":{if(b===null)return null;const A=Object.getPrototypeOf(b);if(!A)return $b;let C=i.get(A);if(C!==void 0)return C;const U=(S=b,g2.call(S).slice(8,-1)),X=Object.entries(n).find((([ie,W])=>{var z,fe;return(fe=(z=W==null?void 0:W.test)===null||z===void 0?void 0:z.call(W,b,U))!==null&&fe!==void 0?fe:ie===U}));return C=X==null?void 0:X[1],C||(C=Array.isArray(b)?null:typeof b=="function"?n.function||null:$b),i.set(A,C),C}default:return n[x]}var S})(g);return m?m.replace(g,o,n):g}),u)},parse(a,o){const u=[];return JSON.parse(a,(function(p,y){const g=y==null?void 0:y.$t;if(g){const b=n[g];y=b?b.revive(y,o,n):y}let m=u[u.length-1];if(m&&m[0]===y){y={...y};for(const b of m[1])delete y[b];for(const[b,x]of Object.entries(m[2]))y[b]=x;u.pop()}if(y===void 0||p[0]==="$"&&p!=="$t"){let b,x;m=u[u.length-1],m&&m[0]===this?(b=m[1],x=m[2]):u.push([this,b=[],x={}]),p[0]==="$"&&p!=="$t"?(b.push(p),x[p.substr(1)]=y):x[p]=void 0}return y}))}}}const b2={Blob:{test:(r,n)=>n==="Blob",replace:(r,n)=>{const i=n.length;return n.push(r),{$t:"Blob",mimeType:r.type,i}},revive:({i:r,mimeType:n},i)=>new Blob([i[r]],{type:n})}};var w2={number:{replace:r=>{switch(!0){case isNaN(r):return{$t:"number",v:"NaN"};case r===1/0:return{$t:"number",v:"Infinity"};case r===-1/0:return{$t:"number",v:"-Infinity"};default:return r}},revive:({v:r})=>Number(r)}};const _2={bigint:{replace:r=>({$t:"bigint",v:""+r}),revive:r=>BigInt(r.v)}};var x2={Date:{replace:r=>({$t:"Date",v:isNaN(r.getTime())?"NaN":r.toISOString()}),revive:({v:r})=>new Date(r==="NaN"?NaN:Date.parse(r))}},S2={Set:{replace:r=>({$t:"Set",v:Array.from(r.entries())}),revive:({v:r})=>new Set(r)}},E2={Map:{replace:r=>({$t:"Map",v:Array.from(r.entries())}),revive:({v:r})=>new Map(r)}};const A2=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof global<"u"?global:void 0;var k2=["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","DataView","BigInt64Array","BigUint64Array"].reduce(((r,n)=>({...r,[n]:{replace:(i,a,o)=>({$t:n,v:o.ArrayBuffer.replace(i.byteOffset===0&&i.byteLength===i.buffer.byteLength?i.buffer:i.buffer.slice(i.byteOffset,i.byteOffset+i.byteLength),a,o).v}),revive:({v:i},a,o)=>{const u=A2[n];return u&&new u(o.ArrayBuffer.revive({v:i},a,o))}}})),{});function w_(r){return(function(n){for(var i="",a=0,o=n.length;a<o;a++)i+=__[n[a]];return i})(eo(r))}function O2(r){return By((function(n){if(typeof n!="string")throw new Error("invalid decoder input: "+n);for(var i="",a=0,o=n.length;a<o;a++)i+=ay[n[a]];return i})(r))}const ay={"-":"=",0:"A",1:"B",2:"C",3:"D",4:"E",5:"F",6:"G",7:"H",8:"I",9:"J",A:"K",B:"L",C:"M",D:"N",E:"O",F:"P",G:"Q",H:"R",I:"S",J:"T",K:"U",L:"V",M:"W",N:"X",O:"Y",P:"Z",Q:"a",R:"b",S:"c",T:"d",U:"e",V:"f",W:"g",X:"h",Y:"i",Z:"j",_:"k",a:"l",b:"m",c:"n",d:"o",e:"p",f:"q",g:"r",h:"s",i:"t",j:"u",k:"v",l:"w",m:"x",n:"y",o:"z",p:"0",q:"1",r:"2",s:"3",t:"4",u:"5",v:"6",w:"7",x:"8",y:"9",z:"+","|":"/"},__={};for(const r of Object.keys(ay))__[ay[r]]=r;var T2={ArrayBuffer:{replace:r=>({$t:"ArrayBuffer",v:w_(r)}),revive:({v:r})=>{const n=O2(r);return n.buffer.byteLength===n.byteLength?n.buffer:n.buffer.slice(n.byteOffset,n.byteOffset+n.byteLength)}}};class jp{constructor(n,i){this.buf=n,this.type=i}}function x_(r){const n=new XMLHttpRequest;if(n.overrideMimeType("text/plain; charset=x-user-defined"),n.open("GET",URL.createObjectURL(r),!1),n.send(),n.status!==200&&n.status!==0)throw new Error("Bad Blob access: "+n.status);return n.responseText}function S_(r){const n=new Uint8Array(r.length);for(let i=0;i<r.length;++i)n[i]=r.charCodeAt(i);return n.buffer}var C2={Blob:{test:(r,n)=>n==="Blob"||r instanceof jp,replace:r=>({$t:"Blob",v:eo(r instanceof jp?r.buf:S_(x_(r))),type:r.type}),revive:({type:r,v:n})=>{const i=By(n);return typeof Blob!==void 0?new Blob([i]):new jp(i.buffer,r)}}};const E_={...w2,..._2,...x2,...S2,...E2,...k2,...T2,...C2};function Jb(r){return new Promise(((n,i)=>{const a=new FileReader;a.onabort=o=>i(new Error("file read aborted")),a.onerror=o=>i(o.target.error),a.onload=o=>n(o.target.result),a.readAsArrayBuffer(r)}))}var D2={undefined:{replace:()=>({$t:"undefined"}),revive:()=>{}}},j2={File:{test:(r,n)=>n==="File",replace:r=>({$t:"File",v:eo(S_(x_(r))),type:r.type,name:r.name,lastModified:new Date(r.lastModified).toISOString()}),revive:({type:r,v:n,name:i,lastModified:a})=>{const o=By(n);return new File([o],i,{type:r,lastModified:new Date(a).getTime()})}}};const N2=typeof BigInt=="function"&&typeof BigInt(0)=="bigint";class Fb{toString(){return this.v}constructor(n){this.v=n}}const U2=N2?{}:{bigint:{test:r=>r instanceof Fb,replace:r=>Object.assign({$t:"bigint"},r),revive:({v:r})=>new Fb(r)}},A_=Object.assign(Object.assign(Object.assign(Object.assign({},D2),U2),j2),{PropModification:{test:r=>r instanceof ib,replace:r=>Object.assign({$t:"PropModification"},r["@@propmod"]),revive:r=>{var n=(function(i,a){var o={};for(var u in i)Object.prototype.hasOwnProperty.call(i,u)&&a.indexOf(u)<0&&(o[u]=i[u]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function"){var p=0;for(u=Object.getOwnPropertySymbols(i);p<u.length;p++)a.indexOf(u[p])<0&&Object.prototype.propertyIsEnumerable.call(i,u[p])&&(o[u[p]]=i[u[p]])}return o})(r,["$t"]);return new ib(n)}}}),Cu=b_(E_,A_),M2=(function(...r){const n=b_(E_,b2,...r);return{toBinary(i){const[a,o]=this.stringify(i),u=new ArrayBuffer(4);return new DataView(u).setUint32(0,a.size),new Blob([u,a,o])},stringify(i){const a=[],o=n.stringify(i,a);return[new Blob(a.map((p=>{const y=new ArrayBuffer(4);return new DataView(y).setUint32(0,"byteLength"in p?p.byteLength:p.size),new Blob([y,p])}))),o]},async parse(i,a){let o=0;const u=[],p=await Jb(a),y=new DataView(p);for(;o<p.byteLength;){const g=y.getUint32(o);o+=4;const m=p.slice(o,o+g);o+=g,u.push(m)}return n.parse(i,u)},async fromBinary(i){const a=new DataView(await Jb(i.slice(0,4))).getUint32(0),o=i.slice(4,a+4),u=await(function(p){return new Promise(((y,g)=>{const m=new FileReader;m.onabort=b=>g(new Error("file read aborted")),m.onerror=b=>g(b.target.error),m.onload=b=>y(b.target.result),m.readAsText(p)}))})(i.slice(a+4));return await this.parse(u,o)}}})(A_);function R2(r,n,i){const a=[];for(let o of i){const{table:u,muts:p}=o,y=r.tables.find((b=>b.name===u));if(!y)throw new Error(`Internal error: table ${u} not found in DBCore schema`);const{primaryKey:g}=y;let m=o;p.forEach(((b,x)=>{const S=!g.outbound&&(b.type==="upsert"||b.type==="insert");b.keys.forEach(((A,C)=>{if(Array.isArray(A)){m===o&&(m=Wb(o,S));const U=m.muts[x],X=JSON.stringify(A);U.keys[C]=X}else if(A[0]==="#"){m===o&&(m=Wb(o,S));const U=m.muts[x];if(!n.isLoggedIn)throw new Error("Internal error: Cannot sync private IDs before authenticated");const X=`${A}:${n.userId}`;U.keys[C]=X,S&&dt.setByKeyPath(U.values[C],g.keyPath,X)}}))})),a.push(m)}return a}function Wb(r,n){return Object.assign(Object.assign({},r),{muts:n?r.muts.map((i=>i.type!=="insert"&&i.type!=="upsert"||!i.values?Object.assign(Object.assign({},i),{keys:i.keys.slice()}):Object.assign(Object.assign({},i),{keys:i.keys.slice(),values:i.values.slice()}))):r.muts.map((i=>Object.assign(Object.assign({},i),{keys:i.keys.slice()})))})}let sy=new WeakMap;function k_(r){return De(this,void 0,void 0,(function*(){var n,i;const a=((i=(n=sy.get(r))===null||n===void 0?void 0:n.getTime())!==null&&i!==void 0?i:0)-Date.now();a>0&&(yield new Promise((o=>setTimeout(o,a))))}))}function z2(r,n,i,a,o,u,p,y,g){return De(this,void 0,void 0,(function*(){const m={Accept:"application/json, application/x-bison, application/x-bison-stream","Content-Type":"application/tson"},b=yield od(o),x=b==null?void 0:b.accessToken;x&&(m.Authorization=`Bearer ${x}`);const S={v:2,dbID:i==null?void 0:i.remoteDbId,clientIdentity:y,schema:p||{},lastPull:i?{serverRevision:i.serverRevision,yServerRevision:i.yServerRevision,realms:i.realms,inviteRealms:i.inviteRealms}:void 0,baseRevs:a,changes:R2(o.dx.core.schema,g,r),y:n,dxcv:o.cloud.version};o.syncStateChangedEvent.next({phase:"pushing"});const A=Cu.stringify(S),C=yield fetch(`${u}/sync`,{method:"post",headers:m,credentials:"include",body:A});if(o.syncStateChangedEvent.next({phase:"pulling"}),(function(U,X){const ie=X.headers.get("Ratelimit-Limit"),W=X.headers.get("Ratelimit-Remaining"),z=X.headers.get("Ratelimit-Reset");if(ie&&W&&z){const fe=Number(ie),xe=Math.max(0,Number(W)),ye=Number(z);if(xe<fe/2){const pe=Math.ceil(ye/(xe+1));sy.set(U,new Date(Date.now()+1e3*pe))}else sy.delete(U)}})(o,C),!C.ok)throw new ny(C);if(C.headers.get("content-type")==="application/x-bison")return M2.fromBinary(yield C.blob());{const U=yield C.text();return Cu.parse(U)}}))}function cu(r){if(r!=null&&r.cancelled)throw new dt.AbortError("Operation was cancelled")}let Ms=!1;function O_(r,n,i,a){return De(this,void 0,void 0,(function*(){yield r.$baseRevs.bulkPut(Object.keys(n).filter((o=>n[o].markedForSync)).map((o=>({tableName:o,clientRev:(i[o]||0)+1,serverRev:a})))),yield r.$baseRevs.where("tableName").noneOf(Object.keys(n).filter((o=>n[o].markedForSync))).delete()}))}function oy(r,n={}){for(const{table:i,muts:a}of r){const o=a.length>0?a[a.length-1].rev:null;n[i]=o||n[i]||0}return n}function B2(r,n,i){return De(this,void 0,void 0,(function*(){const a=yield r.bulkGet(n),o=[],u=[];n.forEach(((p,y)=>{const g=a[y];if(g){for(const[m,b]of Object.entries(i[y]))if(m===r.schema.primKey.keyPath){if(Gf(b,p)!==0)throw new Error("Cannot change primary key")}else dt.setByKeyPath(g,m,b);o.push(p),u.push(g)}})),yield r.schema.primKey.keyPath==null?r.bulkPut(u,o):r.bulkPut(u)}))}function T_(r,n){return De(this,void 0,void 0,(function*(){for(const{table:i,muts:a}of r){if(!n.dx._allTables[i])continue;const o=n.table(i),{primaryKey:u}=o.core.schema,p=y=>{switch(y[0]){case"[":if(y.endsWith("]"))try{return JSON.parse(y)}catch{}return y;case"#":return y.endsWith(":"+n.cloud.currentUserId)?y.substr(0,y.length-n.cloud.currentUserId.length-1):y;default:return y}};for(const y of a){const g=y.keys.map(p);switch(y.type){case"insert":u.outbound?yield o.bulkAdd(y.values,g):(g.forEach(((m,b)=>{dt.setByKeyPath(y.values[b],u.keyPath,m)})),yield o.bulkAdd(y.values));break;case"upsert":u.outbound?yield o.bulkPut(y.values,g):(g.forEach(((m,b)=>{dt.setByKeyPath(y.values[b],u.keyPath,m)})),yield o.bulkPut(y.values));break;case"modify":g.length===1?yield o.update(g[0],y.changeSpec):yield o.where(":id").anyOf(g).modify(y.changeSpec);break;case"update":yield B2(o,g,y.changeSpecs);break;case"delete":yield o.bulkDelete(g)}}}}))}typeof self<"u"&&typeof navigator<"u"&&(Ms=navigator.onLine,self.addEventListener("online",(()=>Ms=!0)),self.addEventListener("offline",(()=>Ms=!1)));const Ll="dexie-cloud-syncer";function C_(r,n){return r.where("i").between(n,1/0,!0).toArray()}function yu(r,n,i){var a,o,u;if(!r.dx._allTables[n])return;const p=(u=(o=(a=r.table(n))===null||a===void 0?void 0:a.schema.yProps)===null||o===void 0?void 0:o.find((y=>y.prop===i)))===null||u===void 0?void 0:u.updatesTable;return p&&r.dx._allTables[p]?r.table(p):void 0}function D_(r,n){return De(this,void 0,void 0,(function*(){var i;const a={};let o,u=!1;for(const p of r)try{switch(p.type){case"u-s":{const y=yu(n,p.table,p.prop);if(y){const g={k:p.k,u:p.u};p.r&&(g.r=p.r,o=p.r),a[y.name]=yield y.add(g)}break}case"u-ack":{const y=yu(n,p.table,p.prop);y&&(yield n.transaction("rw",y,(g=>De(this,void 0,void 0,(function*(){let m=yield g.table(y.name).get(Ll);yield g.table(y.name).put(Object.assign(Object.assign({},m||{i:Ll}),{unsentFrom:Math.max((m==null?void 0:m.unsentFrom)||1,p.i+1)}))})))));break}case"u-reject":{const y=yu(n,p.table,p.prop);if(!y)break;const g=(i=yield y.get(p.i))===null||i===void 0?void 0:i.k;if(g!=null){yield n.transaction("rw",y,(b=>(b.idbtrans._rejecting_y_ypdate=!0,y.where("i").aboveOrEqual(p.i).filter((x=>Gf(x.k,g)===0&&(1&(x.f||0))==1)).delete())));const m=Un.getDocCache(n.dx).find(p.table,g,p.prop);m&&m.destroy()}break}case"in-sync":{const y=Un.getDocCache(n.dx).find(p.table,p.k,p.prop);y&&!y.isSynced&&y.emit("sync",[!0,y]);break}case"y-complete-sync-done":o=p.yServerRev;break;case"outdated-server-rev":u=!0}}catch{}return{receivedUntils:a,resyncNeeded:u,yServerRevision:o}}))}const L2=1,q2=2,H2=3;function K2(r,n,i){return De(this,arguments,void 0,(function*(a,o,{yDownloadedRealms:u,realms:p}){if(u&&p&&p.every((b=>u[b]==="*")))return;const y=yield od(a),g={"Content-Type":"application/json",Accept:"application/octet-stream"};y&&(g.Authorization=`Bearer ${y.accessToken}`);const m=yield fetch(`${o}/y/download`,{body:Cu.stringify({downloadedRealms:u||{}}),method:"POST",headers:g,credentials:"include"});if(!m.ok)throw new Error(`Failed to download Yjs documents from server. Status: ${m.status}`);yield(async function(b,...x){var S,A,C;let U=b();for(let z=0;z<x.length;z++)U=x[z](U);try{for(var X,ie=!0,W=Wp(U);!(S=(X=await W.next()).done);ie=!0)X.value,ie=!1}catch(z){A={error:z}}finally{try{ie||S||!(C=W.return)||await C.call(W)}finally{if(A)throw A.error}}})((function(b){return function(){return Fp(this,arguments,(function*(){if(!b.body)throw new Error("Response body is not readable");const x=b.body.getReader();try{for(;;){const{done:S,value:A}=yield An(x.read());if(S)return yield An(void 0);yield yield An(A)}}finally{x.releaseLock()}}))}})(m),h2,(function(b){return Fp(this,arguments,(function*(){var x,S,A,C;let U=null,X=null,ie=null,W=[];function z(pe){return De(this,void 0,void 0,(function*(){const Le=W[W.length-1];if(W.length>0){if(!U||!X||!ie)throw new Error(`Protocol error from ${o}/y/download`);const Re=yu(a,X,ie);Re&&(yield Re.bulkAdd(W)),W=[]}U&&(X&&ie&&Le||pe)&&(yield a.$syncState.update("syncState",(Re=>{const Pe=Re.yDownloadedRealms||{};Pe[U]=pe?"*":{tbl:X,prop:ie,key:Le.k},Re.yDownloadedRealms=Pe})))}))}try{try{for(var fe,xe=!0,ye=Wp(b);!(x=(fe=yield An(ye.next())).done);xe=!0){C=fe.value,xe=!1;const pe=new Zs(C);for(;C0(pe);)switch(Rs(pe)){case L2:yield An(z(!0)),U=kr(pe);break;case q2:yield An(z(!1)),X=kr(pe),ie=kr(pe);break;case H2:{const Le=zl(pe),Re=En(pe);W.push({k:Le,u:Re});break}}yield An(z(!1))}}catch(pe){S={error:pe}}finally{try{xe||x||!(A=ye.return)||(yield An(A.call(ye)))}finally{if(S)throw S.error}}yield An(z(!0))}catch(pe){throw pe instanceof dt.DexieError||(yield An(z(!1))),pe}}))}))}))}const j_="currentSyncWorker";function cd(r,n,i,a){return N_(r,n,i,a).then((o=>(a!=null&&a.justCheckIfNeeded||r.syncStateChangedEvent.next({phase:"in-sync"}),o))).catch((o=>De(this,void 0,void 0,(function*(){return a!=null&&a.justCheckIfNeeded?Promise.reject(o):Ms&&(a!=null&&a.retryImmediatelyOnFetchError)&&(o==null?void 0:o.name)==="TypeError"&&/fetch/.test(o==null?void 0:o.message)?(r.syncStateChangedEvent.next({phase:"error",error:o}),yield new Promise((u=>setTimeout(u,500))),yield cd(r,n,i,Object.assign(Object.assign({},a),{retryImmediatelyOnFetchError:!1}))):(yield r.$syncState.update("syncState",{timestamp:new Date,error:""+o}),r.syncStateChangedEvent.next({phase:Ms?"error":"offline",error:new Error(""+(o==null?void 0:o.message)||o)}),Promise.reject(o))}))))}function N_(r,n,i){return De(this,arguments,void 0,(function*(a,o,u,{isInitialSync:p,cancelToken:y,justCheckIfNeeded:g,purpose:m}={isInitialSync:!1}){var b;if(!(!((b=a.cloud.options)===null||b===void 0)&&b.databaseUrl))throw new Error("Internal error: sync must not be called when no databaseUrl is configured");const{databaseUrl:x}=o,S=yield a.getCurrentUser(),A=S.isLoggedIn?gf(a):[],C=A.map((K=>a.table(qy(K.name)))),U=yield a.getPersistedSyncState(),X=S.isLoggedIn,ie=X?(function(K,re){const se=(re==null?void 0:re.syncedTables)||[];return gf(K).filter((Oe=>!se.includes(Oe.name)))})(a,U):[];cu(y);const W=ie.length>0;if(W){if(g)return!0;yield a.transaction("rw",ie,(K=>De(this,void 0,void 0,(function*(){K.idbtrans.disableChangeTracking=!0,K.idbtrans.disableAccessControl=!0,yield(function(re,se,Oe){return De(this,void 0,void 0,(function*(){const ze=new Set(Oe||[]);for(const N of re)N.name==="members"?yield N.toCollection().modify((J=>{ze.has(J.realmId)||J.userId&&J.userId!==Zn.userId||(J.userId=se.userId)})):N.name==="roles"||(N.name==="realms"?yield N.toCollection().modify((J=>{ze.has(J.realmId)||J.owner!==void 0&&J.owner!==Zn.userId||(J.owner=se.userId)})):yield N.toCollection().modify((J=>{J.realmId&&ze.has(J.realmId)||(J.owner&&J.owner!==Zn.userId||(J.owner=se.userId),J.realmId&&J.realmId!==Zn.userId||(J.realmId=se.userId))})))}))})(ie,S,U==null?void 0:U.realms)})))),cu(y)}const[z,fe,xe,{yMessages:ye,lastUpdateIds:pe}]=yield a.transaction("r",a.tables,(()=>De(this,void 0,void 0,(function*(){const K=yield a.getPersistedSyncState();let re=yield a.$baseRevs.toArray();re=re.filter((ze=>A.some((N=>N.name===ze.tableName))));let se=yield ly(C,a);const Oe=yield(function(ze,N){return De(this,void 0,void 0,(function*(){const J=[],he={};for(const Se of N)if(Se.schema.yProps)for(const Ne of Se.schema.yProps){const Me=ze.table(Ne.updatesTable),Qe=yield Me.get(Ll),ut=(Qe==null?void 0:Qe.unsentFrom)||1,ge=(Qe==null?void 0:Qe.receivedUntil)||0,vt=Math.min(ut,ge+1),Nt=yield C_(Me,vt);Nt.length>0&&(he[Me.name]=Nt[Nt.length-1].i);const Ve={};for(const it of Nt){const tt=(1&(it.f||0))==1;if(tt&&it.i<ut)continue;const pt=JSON.stringify(it.k)+"/"+tt;let yn=Ve[pt];yn?(yn.u.push(it.u),yn.i=Math.max(it.i,yn.i)):(Ve[pt]=yn={i:it.i,k:it.k,isLocal:tt,u:[]},yn.u.push(it.u))}for(const{k:it,isLocal:tt,u:pt,i:yn}of Object.values(Ve)){const oi=pt.length===1?pt[0]:jf(pt);if(tt)J.push({type:"u-c",table:Se.name,prop:Ne.prop,k:it,u:oi,i:yn});else{const Jn=Kw(oi);J.push({type:"sv",table:Se.name,prop:Ne.prop,k:it,sv:Jn})}}}return{yMessages:J,lastUpdateIds:he}}))})(a,A);if(cu(y),W){const ze=[...(U==null?void 0:U.realms)||[],...(U==null?void 0:U.inviteRealms)||[]],N=yield(function(J,he,Se,Ne){return De(this,void 0,void 0,(function*(){const Me=`upload-${g_(8)}`;if(he.isLoggedIn&&J.length>0){const Qe=new Set(Ne||[]);return(yield Promise.all(J.map((ut=>De(this,void 0,void 0,(function*(){const{extractKey:ge}=ut.core.schema.primaryKey;if(!ge)return{table:ut.name,muts:[]};const vt=Se[ut.name],Nt=vt!=null&&vt.generatedGlobalId?ut.filter((it=>{return ge(it),!Qe.has(it.realmId||"")&&(tt=ge(it),!(pt=vt==null?void 0:vt.idPrefix)||typeof tt=="string"&&tt.startsWith(pt));var tt,pt})):ut.filter((it=>{const tt=ge(it);return!Qe.has(it.realmId||"")&&zy(tt)})),Ve=yield Nt.toArray();if(Ve.length>0){const it={type:"upsert",values:Ve,keys:Ve.map(ge),userId:he.userId,txid:Me};return{table:ut.name,muts:[it]}}return{table:ut.name,muts:[]}})))))).filter((ut=>ut.muts.length>0))}return[]}))})(ie,S,u,ze);return cu(y),se=se.concat(N),[se,K,re,Oe]}return[se,K,re,Oe]})))),Le=z.some((K=>K.muts.some((re=>re.keys.length>0))))||ye.some((K=>K.type==="u-c"));if(g)return Le;if(m==="push"&&!Le)return!1;const Re=oy(z,fe==null?void 0:fe.latestRevisions),Pe=(fe==null?void 0:fe.clientIdentity)||d_(16);cu(y);const de=yield z2(z,ye,fe,xe,a,x,u,Pe,S),{done:ke,newSyncState:qe}=yield a.transaction("rw",a.tables,(K=>De(this,void 0,void 0,(function*(){K.idbtrans.disableChangeTracking=!0,K.idbtrans.disableAccessControl=!0;for(const N of Object.keys(u))de.schema[N]&&(u[N]=de.schema[N]);yield a.$syncState.put(u,"schema");const re=yield ly(C,a,{since:Re});for(const N of C){const J=v_(N.name);if(re.some((he=>he.table===J&&he.muts.length>0))){if(Re[J]){const he=Re[J]||0;yield Promise.all([N.where("rev").belowOrEqual(he).delete(),a.$baseRevs.where(":id").between([J,-1/0],[J,he+1],!0,!0).reverse().offset(1).delete()])}}else yield Promise.all([N.clear(),a.$baseRevs.where({tableName:J}).delete()])}oy(re,Re),yield O_(a,u,Re,de.serverRevision);const se=yield a.getPersistedSyncState();yield(function(N,J,he){return De(this,void 0,void 0,(function*(){const Se=new Set,Ne=new Set,Me=he?he.realms:[],Qe=he?he.inviteRealms:[],ut=new Set(J.realms),ge=new Set(J.realms.concat(J.inviteRealms));for(const vt of Me)ut.has(vt)||(Ne.add(vt),ge.has(vt)||Se.add(vt));for(const vt of Qe.concat(Me))ge.has(vt)||Se.add(vt);if(Se.size>0||Ne.size>0){const vt=gf(N);for(const Nt of vt){let Ve=["realms","members","roles"].includes(Nt.name)?Se:Ne;Ve.size!==0&&(Nt.schema.indexes.some((it=>it.keyPath==="realmId"||Array.isArray(it.keyPath)&&it.keyPath[0]==="realmId"))?yield Nt.where("realmId").anyOf([...Ve]).delete():yield Nt.filter((it=>!!(it!=null&&it.realmId)&&Ve.has(it.realmId))).delete())}}if(Ne.size>0&&(he!=null&&he.yDownloadedRealms))for(const vt of Ne)delete he.yDownloadedRealms[vt]}))})(a,de,se);const Oe=se||{syncedTables:[],latestRevisions:{},realms:[],inviteRealms:[],clientIdentity:Pe};X&&(Oe.syncedTables=A.map((N=>N.name)).concat(ie.map((N=>N.name)))),Oe.latestRevisions=Re,Oe.remoteDbId=de.dbId,Oe.initiallySynced=!0,Oe.realms=de.realms,Oe.inviteRealms=de.inviteRealms,Oe.serverRevision=de.serverRevision,Oe.yServerRevision=de.serverRevision,Oe.timestamp=new Date,delete Oe.error;const ze=U_(de.changes,re);if(yield T_(ze,a),de.yMessages){const{receivedUntils:N,resyncNeeded:J,yServerRevision:he}=yield D_(de.yMessages,a);he&&(Oe.yServerRevision=he),yield(function(Se,Ne,Me){return De(this,void 0,void 0,(function*(){var Qe,ut,ge,vt,Nt;const Ve={};for(const[tt,pt]of Object.entries(Se))(Qe=Ve[tt])!==null&&Qe!==void 0||(Ve[tt]={}),Ve[tt].unsentFrom=pt+1;for(const[tt,pt]of Object.entries(Ne))(ut=Ve[tt])!==null&&ut!==void 0||(Ve[tt]={}),Ve[tt].receivedUntil=pt;const it=Object.values(Me.dx._dbSchema).filter((tt=>tt.yProps)).map((tt=>tt.yProps.map((pt=>pt.updatesTable)))).flat();for(const tt of it){const pt=Ve[tt],yn=(ge=pt==null?void 0:pt.unsentFrom)!==null&&ge!==void 0?ge:1,oi=(Nt=(vt=pt==null?void 0:pt.receivedUntil)!==null&&vt!==void 0?vt:(yield Me.table(tt).where("i").between(1,1/0).reverse().limit(1).primaryKeys())[0])!==null&&Nt!==void 0?Nt:0;yield Me.transaction("rw",tt,(()=>De(this,void 0,void 0,(function*(){const Jn=yield Me.table(tt).get(Ll);Jn?(Jn.unsentFrom=Math.max(yn,Jn.unsentFrom||1),Jn.receivedUntil=Math.max(oi,Jn.receivedUntil||0),yield Me.table(tt).put(Jn)):yield Me.table(tt).add({i:Ll,unsentFrom:yn,receivedUntil:oi})}))))}}))})(pe,N,a),J&&(Oe.yDownloadedRealms={})}return a.$syncState.put(Oe,"syncState"),{done:re.length===0,newSyncState:Oe}}))));if(!ke)return yield k_(a),yield N_(a,o,u,{isInitialSync:p,cancelToken:y});const Xe=Object.values(u).some((K=>{var re;return(re=K.yProps)===null||re===void 0?void 0:re.length})),He=!!de.yMessages;if(Xe&&He)try{yield K2(a,x,qe)}catch{}return a.syncCompleteEvent.next(),!1}))}function U_(r,n){const i={};Gb(i,r);const a={};return Gb(a,n),(function(o,u){var p,y,g;for(const[m,b]of Object.entries(u))for(const[x,S]of Object.entries(b))switch(S.type){case"ups":{const A=(p=o[m])===null||p===void 0?void 0:p[x];if(A)switch(A.type){case"ups":case"upd":delete o[m][x]}}break;case"del":(y=o[m])===null||y===void 0||delete y[x];break;case"upd":{const A=(g=o[m])===null||g===void 0?void 0:g[x];if(A)switch(A.type){case"ups":for(const[C,U]of Object.entries(S.mod))Lf(A.val,C,U);break;case"del":break;case"upd":for(const C of Object.keys(S.mod))delete A.mod[C]}break}}})(i,a),(function(o,u=""){u||(u=d_(16));const p={};for(const[g,m]of Object.entries(o))for(const[b,x]of Object.entries(m)){const S=p[g]||(p[g]={});(S[x.type]||(S[x.type]=[])).push(Object.assign({key:b},x))}const y=[];for(const[g,m]of Object.entries(p)){const b={table:g,muts:[]};for(const[x,S]of Object.entries(m))switch(x){case"ups":{const A={type:"upsert",keys:S.map((C=>C.key)),values:S.map((C=>C.val)),txid:u};b.muts.push(A);break}case"upd":{const A={type:"update",keys:S.map((C=>C.key)),changeSpecs:S.map((C=>C.mod)),txid:u};b.muts.push(A);break}case"del":{const A={type:"delete",keys:S.map((C=>C.key)),txid:u};b.muts.push(A);break}}y.push(b)}return y})(i)}const Y2=10,V2=1e4,I2=1e3;function G2(r){const n=[],i=new Br(!0),a=new Br(null);let o=!1,u=new Array(Y2).fill(0);return a.subscribe((()=>De(this,void 0,void 0,(function*(){if(!o&&n.length>0){o=!0,u.shift(),u.push(Date.now()),i.next(!1);try{yield(function(){return De(this,void 0,void 0,(function*(){for(var p,y,g,m,b,x;n.length>0;){const S=n.shift();try{yield Ea(r.cloud.syncState.pipe(Er((({phase:C})=>C==="in-sync"||C==="error"))));const A=r.cloud.persistedSyncState.value;if(!S)continue;switch(S.type){case"token-expired":const C=r.cloud.currentUser.value,U=yield ud(r.cloud.options.databaseUrl,C);yield r.table("$logins").update(C.userId,{accessToken:U.accessToken,accessTokenExpiration:U.accessTokenExpiration,claims:U.claims,license:U.license,data:U.data});break;case"realm-added":!((p=A==null?void 0:A.realms)===null||p===void 0)&&p.includes(S.realm)||!((y=A==null?void 0:A.inviteRealms)===null||y===void 0)&&y.includes(S.realm)||(yield r.cloud.sync({purpose:"pull",wait:!0}));break;case"realm-accepted":!((g=A==null?void 0:A.realms)===null||g===void 0)&&g.includes(S.realm)||(yield r.cloud.sync({purpose:"pull",wait:!0}));break;case"realm-removed":(!((m=A==null?void 0:A.realms)===null||m===void 0)&&m.includes(S.realm)||!((b=A==null?void 0:A.inviteRealms)===null||b===void 0)&&b.includes(S.realm))&&(yield r.cloud.sync({purpose:"pull",wait:!0}));break;case"realms-changed":yield r.cloud.sync({purpose:"pull",wait:!0});break;case"changes":if(((x=r.cloud.syncState.value)===null||x===void 0?void 0:x.phase)==="error"){Ki(r,"pull");break}yield r.transaction("rw",r.dx.tables,(X=>De(this,void 0,void 0,(function*(){X.idbtrans.disableChangeTracking=!0,X.idbtrans.disableAccessControl=!0;const[ie,W,z]=yield Promise.all([r.getSchema(),r.getPersistedSyncState(),r.getCurrentUser()]);if(!W||!ie||!z)return;if(S.baseRev!==W.serverRevision)return void(typeof S.baseRev!="string"||typeof W.serverRevision!="bigint"&&typeof W.serverRevision!="object"||Ki(r,"pull"));if((yield dt.waitFor(iy(W)))!==S.realmSetHash)return void Ki(r,"pull");let fe=[];if(z.isLoggedIn){const xe=gf(r).map((ye=>r.table(qy(ye.name))));fe=yield ly(xe,r)}if(S.changes.length>0){const xe=U_(S.changes,fe);yield T_(xe,r)}W.latestRevisions=oy(fe,W.latestRevisions),W.serverRevision=S.newRev,yield O_(r,ie,W.latestRevisions,S.newRev),yield r.$syncState.put(W,"syncState")}))))}}catch{}}}))})()}finally{u[u.length-1]-u[0]<V2&&(yield new Promise((p=>setTimeout(p,I2)))),o=!1,i.next(!0)}}})))),{enqueue:function(p){n.push(p),a.next(null)},readyToServe:i}}const Pb=new WeakMap,uf={members:"@id, [userId+realmId], [email+realmId], realmId",roles:"[realmId+name]",realms:"@realmId",$jobs:"",$syncState:"",$baseRevs:"[tableName+clientRev]",$logins:"claims.sub, lastLogin"};let X2=0;function qi(r){"vip"in r&&(r=r.vip);let n=Pb.get(r.cloud);if(!n){const i=new Ta;let a=new of(`syncstatechanged-${r.name}`),o=new of(`synccomplete-${r.name}`);i.id=++X2;let u=!1;n={get name(){return r.name},close:()=>r.close(),transaction:r.transaction.bind(r),table:r.table.bind(r),get tables(){return r.tables},cloud:r.cloud,get $jobs(){return r.table("$jobs")},get $syncState(){return r.table("$syncState")},get $baseRevs(){return r.table("$baseRevs")},get $logins(){return r.table("$logins")},get realms(){return r.realms},get members(){return r.members},get roles(){return r.roles},get initiallySynced(){return u},localSyncEvent:i,get syncStateChangedEvent(){return a},get syncCompleteEvent(){return o},dx:r},Object.assign(n,{getCurrentUser:()=>n.$logins.toArray().then((y=>y.find((g=>g.isLoggedIn))||Zn)),getPersistedSyncState:()=>n.$syncState.get("syncState"),getSchema:()=>n.$syncState.get("schema").then((y=>{if(y)for(const m of n.tables)m.schema.primKey&&m.schema.primKey.keyPath&&y[m.name]&&(y[m.name].primaryKey=typeof(g=m.schema.primKey.keyPath)=="string"?g:g?"["+[].join.call(g,"+")+"]":"");var g;return y})),getOptions:()=>n.$syncState.get("options"),setInitiallySynced(y){u=y},reconfigure(){a=new of(`syncstatechanged-${r.name}`),o=new of(`synccomplete-${r.name}`)}}),n.messageConsumer=G2(n),n.messageProducer=new Ta,Pb.set(r.cloud,n)}return n}const Q2=typeof InstallTrigger<"u",M_=typeof navigator<"u"&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\/|Edge\//.test(navigator.userAgent),Z2=M_?[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]:NaN,$2=M_&&Z2<=605||Q2,J2=typeof self<"u"&&"clients"in self&&!self.document,{toString:F2}={};function e0(r){return F2.call(r).slice(8,-1)}function Np(r,n){var i;return n.type==="delete"?n.keys:((i=n.keys)===null||i===void 0?void 0:i.slice())||n.values.map(r.extractKey)}const W2=/b|c|d|f|g|h|j|k|l|m|n|p|q|r|s|t|v|x|y|z/i;let Hi=0;function R_(r,n){const i=new Uint8Array(18),a=new Uint8Array(i.buffer,0,6),o=Date.now();Hi>=o?++Hi:Hi=o,a[0]=Hi/1099511627776,a[1]=Hi/4294967296,a[2]=Hi/16777216,a[3]=Hi/65536,a[4]=Hi/256,a[5]=Hi;const u=new Uint8Array(i.buffer,6);return crypto.getRandomValues(u),r+w_(new Uint8Array(i.buffer))+(n||"")}function P2(r){return{stack:"dbcore",name:"idGenerationMiddleware",level:1,create:n=>Object.assign(Object.assign({},n),{table:i=>{const a=n.table(i);return Object.assign(Object.assign({},a),{mutate:o=>{var u,p;const y=o.trans;if(y.mode==="versionchange"&&(y.disableChangeTracking=!0,y.disableAccessControl=!0),y.disableChangeTracking)return a.mutate(o);if(o.type==="add"||o.type==="put"){const g=(u=r.cloud.schema)===null||u===void 0?void 0:u[i];if(g!=null&&g.generatedGlobalId){if(!((p=r.cloud.options)===null||p===void 0)&&p.databaseUrl&&!r.initiallySynced){const m=Np(a.schema.primaryKey,o);return a.getMany({keys:m,trans:o.trans,cache:"immutable"}).then((b=>{if(b.length<m.length)throw new Error("Unable to create new objects without an initial sync having been performed.");return a.mutate(o)}))}return(function(m,b){let x=null;const S=Np(a.schema.primaryKey,m);return S.forEach(((A,C)=>{if(A===void 0){const U=m.values[C].realmId||r.cloud.currentUserId,X=U.substr(U.length-3);S[C]=R_(b,X),a.schema.primaryKey.outbound||(x||(x=m.values.slice()),x[C]=dt.deepClone(x[C]),dt.setByKeyPath(x[C],a.schema.primaryKey.keyPath,S[C]))}else if(typeof A!="string"||!A.startsWith(b)&&!A.startsWith("#"+b))throw new dt.ConstraintError(`The ID "${A}" is not valid for table "${i}". Primary '@' keys requires the key to be prefixed with "${b}" (or "#${b}).
If you want to generate IDs programmatically, remove '@' from the schema to get rid of this constraint. Dexie Cloud supports custom IDs as long as they are random and globally unique.`)})),a.mutate(Object.assign(Object.assign({},m),{keys:S,values:x||m.values}))})(o,g.idPrefix)}g!=null&&g.markedForSync&&Np(a.schema.primaryKey,o).forEach(((m,b)=>{if(!zy(m)){const x=Array.isArray(m)?m.map(e0).join(","):e0(m);throw new dt.ConstraintError(`Invalid primary key type ${x} for table ${i}. Tables marked for sync has primary keys of type string or Array of string (and optional numbers)`)}}))}return a.mutate(o)}})}})}}let eO=0;function fu(r,n){return function(i){const{readers:a,writers:o}=i.trans[n]||(i.trans[n]={writers:[],readers:[]}),u=o.length,p=(u>0?o[u-1].then((()=>r(i)),(()=>r(i))):r(i)).finally((()=>{a.splice(a.indexOf(p))}));return a.push(p),p}}function tO(r,n){return function(i){const{readers:a,writers:o}=i.trans[n]||(i.trans[n]={writers:[],readers:[]});let u=(o.length>0?o[o.length-1].then((()=>r(i)),(()=>r(i))):a.length>0?(p=a,new Promise((y=>{p.length===0&&y([]);let g=p.length;const m=new Array(g);p.forEach(((b,x)=>Promise.resolve(b).then((S=>m[x]={status:"fulfilled",value:S}),(S=>m[x]={status:"rejected",reason:S})).then((()=>--g||y(m)))))}))).then((()=>r(i))):r(i)).finally((()=>{o.shift()}));var p;return o.push(u),u}}const ks=new Br(new Set);function Du(r){var n,i,a,o;return((n=r.cloud.options)===null||n===void 0?void 0:n.disableEagerSync)||((a=(i=r.cloud.currentUser.value)===null||i===void 0?void 0:i.license)===null||a===void 0?void 0:a.status)!=="ok"||!(!((o=r.cloud.options)===null||o===void 0)&&o.databaseUrl)}function nO({currentUserObservable:r,db:n}){return{stack:"dbcore",name:"MutationTrackingMiddleware",level:1,create:i=>{const a=new Set(i.schema.tables.map((p=>p.name))),o=i.schema.tables.filter((p=>!/^\$/.test(p.name))),u=new Map;for(const p of o){const y=`$${p.name}_mutations`;a.has(y)&&u.set(p.name,i.table(y))}return Object.assign(Object.assign({},i),{transaction:(p,y)=>{let g;if(y==="readwrite"){const m=p.filter((b=>{var x,S;return(S=(x=n.cloud.schema)===null||x===void 0?void 0:x[b])===null||S===void 0?void 0:S.markedForSync})).map((b=>qy(b)));g=i.transaction([...p,...m],y)}else g=i.transaction(p,y);if(y==="readwrite"){g.txid=g_(16),g.opCount=0,g.currentUser=r.value,ks.value.add(g),ks.next(ks.value);const m=()=>{g.removeEventListener("complete",b),g.removeEventListener("error",m),g.removeEventListener("abort",m),ks.value.delete(g),ks.next(ks.value)},b=()=>{g.mutationsAdded&&!Du(n)&&Ki(n,"push"),m()};g.addEventListener("complete",b),g.addEventListener("error",m),g.addEventListener("abort",m)}return g},table:p=>{const y=i.table(p);if(/^\$/.test(p))return p.endsWith("_mutations")?Object.assign(Object.assign({},y),{mutate:x=>(x.type!=="add"&&x.type!=="put"||(x.trans.mutationsAdded=!0),y.mutate(x))}):p==="$logins"?Object.assign(Object.assign({},y),{mutate:x=>y.mutate(x).then((S=>(x.trans.mutationsAdded=!0,S))).catch((S=>Promise.reject(S)))}):y;const{schema:g}=y,m=u.get(p);return m?(function(x){const S="$lock"+ ++eO;return Object.assign(Object.assign({},x),{count:fu(x.count,S),get:fu(x.get,S),getMany:fu(x.getMany,S),openCursor:fu(x.openCursor,S),query:fu(x.query,S),mutate:tO(x.mutate,S)})})(Object.assign(Object.assign({},y),{mutate:x=>{var S,A,C;const U=x.trans;return U.txid?U.disableChangeTracking?y.mutate(x):!((A=(S=n.cloud.schema)===null||S===void 0?void 0:S[p])===null||A===void 0)&&A.markedForSync&&(!((C=U.currentUser)===null||C===void 0)&&C.isLoggedIn)?x.type==="deleteRange"?y.query({query:{range:x.range,index:g.primaryKey},trans:x.trans,values:!1}).then((X=>b({type:"delete",keys:X.result,trans:x.trans,criteria:{index:null,range:x.range}}))):b(x):y.mutate(x):y.mutate(x)}})):y;function b(x){var S,A;const C=x.trans,U=(A=(S=n.cloud.options)===null||S===void 0?void 0:S.unsyncedProperties)===null||A===void 0?void 0:A[p],{txid:X,currentUser:{userId:ie}}=C,{type:W}=x,z=++C.opCount;function fe(xe){if(!U)return xe;let ye=xe;for(const pe of Object.keys(xe))U.some((Le=>pe===Le||pe.startsWith(Le+".")))&&(ye===xe&&(ye=Object.assign({},xe)),delete ye[pe]);return ye}return y.mutate(x).then((xe=>{var ye;const{numFailures:pe,failures:Le}=xe;let Re=W==="delete"?x.keys:xe.results,Pe="values"in x?x.values:[],de="changeSpec"in x?x.changeSpec:void 0,ke="updates"in x?x.updates:void 0,qe=!(!ke||!("upsert"in x))&&x.upsert;if(pe&&(Re=Re.filter(((re,se)=>!Le[se])),Pe=Pe.filter(((re,se)=>!Le[se]))),U){if(Pe=Pe.map((re=>{const se=Object.assign({},re);for(const Oe of U)delete se[Oe];return se})),de&&(de=fe(de),Object.keys(de).length===0))return xe;if(ke){let re=ke.changeSpecs.map(fe),se={keys:[],changeSpecs:[]};const Oe=new $S;let ze=!1;if(!qe){for(let N=0,J=re.length;N<J;++N)Object.keys(re[N]).length>0?(se.keys.push(ke.keys[N]),se.changeSpecs.push(re[N]),Oe.addKey(ke.keys[N])):ze=!0;if(ke=se,ze){let N=[],J=[];for(let he=0,Se=Re.length;he<Se;++he)Oe.hasKey(Re[he])&&(N.push(Re[he]),J.push(Pe[he]));Re=N,Pe=J}}}}const Xe=Date.now();let He="criteria"in x&&x.criteria?Object.assign(Object.assign({},x.criteria),{index:x.criteria.index===g.primaryKey.keyPath?null:x.criteria.index}):void 0;if(U&&(He!=null&&He.index)){const re=(ye=g.indexes.find((se=>se.name===He.index)))===null||ye===void 0?void 0:ye.keyPath;(re?typeof re=="string"?[re]:re:[]).some((se=>U==null?void 0:U.includes(se)))&&(He=void 0)}const K=x.type==="delete"?{type:"delete",ts:Xe,opNo:z,keys:Re,criteria:He,txid:X,userId:ie}:x.type==="add"?{type:"insert",ts:Xe,opNo:z,keys:Re,txid:X,userId:ie,values:Pe}:qe&&ke?{type:"upsert",ts:Xe,opNo:z,keys:Re,values:Pe,changeSpecs:ke.changeSpecs.filter(((re,se)=>!Le[se])),txid:X,userId:ie}:He&&de?{type:"modify",ts:Xe,opNo:z,keys:Re,criteria:He,changeSpec:de,txid:X,userId:ie}:de?{type:"update",ts:Xe,opNo:z,keys:Re,changeSpecs:Re.map((()=>de)),txid:X,userId:ie}:ke?{type:"update",ts:Xe,opNo:z,keys:ke.keys,changeSpecs:ke.changeSpecs,txid:X,userId:ie}:{type:"upsert",ts:Xe,opNo:z,keys:Re,values:Pe,txid:X,userId:ie};return"isAdditionalChunk"in x&&x.isAdditionalChunk&&(K.isAdditionalChunk=!0),Re.length>0||He?m.mutate({type:"add",trans:C,values:[K]}).then((()=>(C.mutationsAdded=!0,xe))):xe}))}}})}}}function rO(r,n){return function(i,a){var o;const u=Object.assign(Object.assign({},uf),i);Object.keys(uf).forEach((m=>{const b=u[m];if(b==null)throw new Error(`Cannot delete table ${m} as it is needed for access control of Dexie Cloud`);if(!i[m])return;const x=b.split(",").map((C=>C.trim())),S=uf[m].split(",").map((C=>C.trim())),A=new Set(x.map((C=>C.replace(/([&*]|\+\+)/g,""))));if(x[0]!==S[0])throw new Error(`Cannot override primary key of table ${m}. Please declare it as {${m}: ${JSON.stringify(uf[m])}`);for(let C=1;C<S.length;++C){const U=S[C];A.has(U.replace(/([&*]|\+\+)/g,""))||(u[m]+=`,${U}`)}}));const p=n.cloud.schema||(n.cloud.schema={}),y=new Set;Object.keys(u).forEach((m=>{const b=u[m],x=p[m]||(p[m]={});b!=null?(/^\@/.test(b)&&(u[m]=u[m].substr(1),x.generatedGlobalId=!0,x.idPrefix=(function(S,A){let C=S[0].toLocaleLowerCase();for(let W=1,z=S.length;W<z&&C.length<3;++W)(W2.test(S[W])||(U=S[W])>="A"&&U<="Z")&&(C+=S[W].toLowerCase());for(var U,X,ie;A.has(C);){if(/\d/g.test(C)){if(C=C.substr(0,C.length-1)+(C[C.length-1]+1),!(C.length>3))continue;C=C.substr(0,3)}else if(C.length<3){C+="2";continue}let W=1,z=C;for(;A.has(z)&&W<8;)X=C,z=(1&(ie=W)?X[0].toUpperCase():X[0].toLowerCase())+(2&ie?X[1].toUpperCase():X[1].toLowerCase())+(4&ie?X[2].toUpperCase():X[2].toLowerCase()),++W;if(W<8)C=z;else{let fe=C.charCodeAt(2)+1&127;C=C.substr(0,2)+String.fromCharCode(fe)}}return C})(m,y),y.add(x.idPrefix)),/^\$/.test(m)||(u[`$${m}_mutations`]="++rev",x.markedForSync=!0),x.deleted&&(x.deleted=!1)):(x.deleted=!0,x.markedForSync=!1,u[`$${m}_mutations`]=null)}));const g=r.call(this,u,a);for(const[m,b]of Object.entries(a))if(!((o=b.yProps)===null||o===void 0)&&o.length){const x=p[m];x&&(x.yProps=b.yProps.map((S=>S.prop)))}return g}}function z_(r,n,i){return typeof navigator<"u"&&navigator.locks?navigator.locks.request(r.name+"|"+n,(()=>i())):i()}const mu=new Br(!0),uy=new Br(!0);mu.pipe(Nn((r=>r?Vi(!0):Vi(!1).pipe(F0(2e4)))),W0()).subscribe(uy);const B_=typeof document<"u"?ii(document,"visibilitychange"):Vi({}),iO=B_.pipe(Er((()=>document.visibilityState==="hidden"))),lO=B_.pipe(Er((()=>document.visibilityState==="visible"))),L_=typeof window<"u"?Jf(lO,ii(window,"mousedown"),ii(window,"mousemove"),ii(window,"keydown"),ii(window,"wheel"),ii(window,"touchmove")):Vi({});typeof document<"u"&&Jf(Vi(!0),iO,L_).pipe(ar((()=>document.visibilityState==="visible")),Vp((r=>{mu.value!==r&&mu.next(r)})),Nn((r=>r?Vi(0).pipe(F0(16e4),Vp((()=>mu.next(!1)))):Vi(0)))).subscribe((()=>{}));class aO extends Error{constructor(){super(...arguments),this.name="TokenExpiredError"}}const q_=new WeakMap,t0=new WeakMap;function H_(r){let n=t0.get(r);return n||(n=new Ta,t0.set(r,n)),n}class sO extends ln{constructor(n,i,a,o,u,p,y,g){super((m=>new uO(n,i,a,o,u,g,m,p,y)))}}let oO=0;class uO extends $s{constructor(n,i,a,o,u,p,y,g,m){super((()=>this.teardown())),this.id=++oO,this.subscriptions=new Set,this.reconnecting=!1,this.db=n,this.databaseUrl=n.cloud.options.databaseUrl,this.rev=i,this.yrev=a,this.realmSetHash=o,this.clientIdentity=u,this.user=p,this.subscriber=y,this.lastUserActivity=new Date,this.messageProducer=g,this.webSocketStatus=m,this.connect()}teardown(){this.disconnect()}disconnect(){if(this.webSocketStatus.next("disconnected"),this.pinger&&(clearInterval(this.pinger),this.pinger=null),this.ws)try{this.ws.close()}catch{}this.ws=null;for(const n of this.subscriptions)n.unsubscribe();this.subscriptions.clear()}reconnect(){if(!this.reconnecting){this.reconnecting=!0;try{this.disconnect()}catch{}this.connect().catch((()=>{})).then((()=>this.reconnecting=!1))}}connect(){return De(this,void 0,void 0,(function*(){if(this.lastServerActivity=new Date,this.pauseUntil&&this.pauseUntil>new Date)return;if(this.ws)throw new Error("Called connect() when a connection is already open");if(!this.databaseUrl)throw new Error("Cannot connect without a database URL");if(this.closed)return;const n=this.user.accessTokenExpiration;if(n&&n<new Date)return void this.subscriber.error(new aO);this.webSocketStatus.next("connecting"),this.pinger=setInterval((()=>De(this,void 0,void 0,(function*(){if(this.closed)this.teardown();else if(this.ws)try{this.ws.send(JSON.stringify({type:"ping"})),setTimeout((()=>{this.pinger&&(this.closed?this.teardown():this.lastServerActivity<new Date(Date.now()-2e4)&&this.reconnect())}),2e4)}catch{this.reconnect()}else this.reconnect()}))),3e4);const i=new URL(this.databaseUrl);i.protocol=i.protocol==="http:"?"ws":"wss";const a=new URLSearchParams;if(this.subscriber.closed)return;a.set("v","2"),this.rev&&a.set("rev",this.rev),this.yrev&&a.set("yrev",this.yrev),a.set("realmsHash",this.realmSetHash),a.set("clientId",this.clientIdentity),a.set("dxcv",this.db.cloud.version),this.user.accessToken&&a.set("token",this.user.accessToken);const o=this.ws=new WebSocket(`${i}/changes?${a}`);o.binaryType="arraybuffer",o.onclose=u=>{this.pinger&&this.reconnect()},o.onmessage=u=>{if(this.pinger){this.lastServerActivity=new Date;try{const p=typeof u.data=="string"?Cu.parse(u.data):(function(y){const g=new Zs(y),m=kr(g);if(m==="outdated-server-rev")return{type:m};if(m==="y-complete-sync-done")return{type:m,yServerRev:kr(g)};const b=kr(g),x=kr(g);switch(m){case"u-ack":case"u-reject":return{type:m,table:b,prop:x,i:Number(pb(g))};default:{const S=zl(g);switch(m){case"in-sync":case"doc-close":return{type:m,table:b,prop:x,k:S};case"aware":return{type:m,table:b,prop:x,k:S,u:En(g)};case"doc-open":return{type:m,table:b,prop:x,k:S,serverRev:zl(g),sv:zl(g)};case"sv":return{type:m,table:b,prop:x,k:S,sv:En(g)};case"u-c":return{type:m,table:b,prop:x,k:S,u:En(g),i:Number(pb(g))};case"u-s":return{type:m,table:b,prop:x,k:S,u:En(g),r:g.pos<g.arr.length&&kr(g)||void 0};default:throw new TypeError(`Unknown message type: ${m}`)}}}})(new Uint8Array(u.data));if(p.type==="error")throw new Error(`Error message from dexie-cloud: ${p.error}`);if(p.type==="aware"){const y=Un.getDocCache(this.db.dx).find(p.table,p.k,p.prop);if(y){const g=(m=>q_.get(m))(y);g&&o2(g,p.u,"server")}}else if(p.type!=="pong")if(p.type==="doc-open"){const y=Un.getDocCache(this.db.dx).find(p.table,p.k,p.prop);y&&H_(y).next()}else p.type==="u-ack"||p.type==="u-reject"||p.type==="u-s"||p.type==="in-sync"||p.type==="outdated-server-rev"||p.type==="y-complete-sync-done"?D_([p],this.db).then((y=>De(this,[y],void 0,(function*({resyncNeeded:g,yServerRevision:m,receivedUntils:b}){if(m&&(yield this.db.$syncState.update("syncState",{yServerRevision:m})),p.type==="u-s"&&b){const x=yu(this.db,p.table,p.prop);if(x){const S=b[x.name];S&&(yield x.update(Ll,{receivedUntil:S}))}}g&&(yield this.db.cloud.sync({purpose:"pull",wait:!0}))})))):this.subscriber.next(p)}catch(p){this.subscriber.error(p)}}};try{let u=!1;yield new Promise(((p,y)=>{o.onopen=g=>{u=!0,p(null)},o.onerror=g=>{if(u)this.reconnect();else{const m=g.error||new Error("WebSocket Error");this.subscriber.error(m),this.webSocketStatus.next("error"),y(m)}}})),this.subscriptions.add(this.messageProducer.subscribe((p=>{var y,g;this.closed||(p.type==="ready"&&this.webSocketStatus.value!=="connected"&&this.webSocketStatus.next("connected"),p.type==="ready"?(this.rev=p.rev,(y=this.ws)===null||y===void 0||y.send(Cu.stringify(p))):(g=this.ws)===null||g===void 0||g.send((function(m){const b=new Xs;switch(Ar(b,m.type),"table"in m&&Ar(b,m.table),"prop"in m&&Ar(b,m.prop),m.type){case"u-ack":case"u-reject":ub(b,BigInt(m.i));break;case"outdated-server-rev":break;case"y-complete-sync-done":Ar(b,m.yServerRev);break;default:switch(Rl(b,m.k),m.type){case"aware":Sn(b,m.u);break;case"doc-open":Rl(b,m.serverRev),Rl(b,m.sv);break;case"doc-close":break;case"sv":Sn(b,m.sv);break;case"u-c":Sn(b,m.u),ub(b,BigInt(m.i));break;case"u-s":Sn(b,m.u),Ar(b,m.r||"")}}return sr(b)})(p)))}))),this.user.isLoggedIn&&!Du(this.db)&&this.subscriptions.add((function(p){const y=Hy(p.tables.filter((g=>{var m,b;return((b=(m=p.cloud.schema)===null||m===void 0?void 0:m[g.name])===null||b===void 0?void 0:b.markedForSync)&&g.schema.yProps})).map((g=>g.schema.yProps.map((m=>({table:g.name,ydocProp:m.prop,updatesTable:m.updatesTable}))))));return Jf(...y.map((({table:g,ydocProp:m,updatesTable:b})=>{const x=p.table(b);return ur(x.get(Ll)).pipe(Nn((S=>{let A=(S==null?void 0:S.unsentFrom)||1;return ur(Ml((()=>De(this,void 0,void 0,(function*(){return(yield C_(x,A)).filter((C=>C.f&&1&C.f)).map((C=>({type:"u-c",table:g,prop:m,k:C.k,u:C.u,i:C.i})))}))))).pipe(Vp((C=>{C.length>0&&(A=C.at(-1).i+1)})))})))}))).pipe(Ru((g=>g)))})(this.db).subscribe(this.db.messageProducer))}catch{this.pauseUntil=new Date(Date.now()+6e4)}}))}}class cO extends Error{constructor(n){super(n==="expired"?"License expired":n==="deactivated"?"User deactivated":"Invalid license"),this.name="InvalidLicenseError",n&&(this.license=n)}}function fO(r){return De(this,void 0,void 0,(function*(){var n;yield(n=3e3,new Promise((i=>setTimeout(i,n)))),yield Ea(L_)}))}function n0(r){return De(this,void 0,void 0,(function*(){var n;return!(!(!((n=r.cloud.options)===null||n===void 0)&&n.databaseUrl)||!r.cloud.schema)&&(yield cd(r,r.cloud.options,r.cloud.schema,{justCheckIfNeeded:!0}))}))}const cf=new WeakMap;function K_(r,n,i,a){const o=cf.get(r);if(o){if(o.pull||(a==null?void 0:a.purpose)==="push")return o.promise;{let p=!1;const y=r.cloud.syncState.subscribe((g=>{g.phase==="pulling"&&(p=!0)}));return o.promise.then((()=>{y.unsubscribe()})).catch((g=>(y.unsubscribe(),Promise.reject(g)))).then((()=>{if(!p)return K_(r,n,i,a)}))}}const u=(function(){return De(this,void 0,void 0,(function*(){try{yield k_(r),yield z_(r,j_,(()=>cd(r,n,i,a))),cf.delete(r)}catch(p){throw cf.delete(r),p}}))})();return cf.set(r,{promise:u,pull:(a==null?void 0:a.purpose)!=="push"}),u}const dO=1e3;function hO(r,n,i){let a=null,o={cancelled:!1},u=0,p=0;function y(S=1){setTimeout((()=>{const A=g?"pull":"push";p=Date.now(),K_(r,n,i,{cancelToken:o,retryImmediatelyOnFetchError:!0,purpose:A}).then((()=>{if(o.cancelled)x();else if(g||m)return g=!1,m=!1,y();b=!1,u=0,p=0})).catch((C=>{if(o.cancelled)x(),b=!1,u=0,p=0;else if(S<5){const U=[0,20,40,300,900][S]*dO;u=Date.now()+U,p=0,setTimeout((()=>y(S+1)),U)}else b=!1,u=0,p=0}))}),0)}let g=!1,m=!1,b=!1;const x=()=>{o.cancelled=!0,a&&a.unsubscribe()};return{start:()=>{a=r.localSyncEvent.subscribe((({purpose:S})=>{(A=>{o.cancelled||(A==="pull"&&(g=!0),A==="push"&&(m=!0),b?u||p>0&&Date.now():(b=!0,y()))})(S||"pull")}))},stop:x}}function Up(r,n){if(r&&n&&n.unsyncedTables)for(const i of n.unsyncedTables)r[i]&&(r[i].markedForSync=!1)}var fd,rt,Y_,vu,r0,qf={},V_=[],pO=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function Ul(r,n){for(var i in n)r[i]=n[i];return r}function I_(r){var n=r.parentNode;n&&n.removeChild(r)}function tn(r,n,i){var a,o,u,p={};for(u in n)u=="key"?a=n[u]:u=="ref"?o=n[u]:p[u]=n[u];if(arguments.length>2&&(p.children=arguments.length>3?fd.call(arguments,2):i),typeof r=="function"&&r.defaultProps!=null)for(u in r.defaultProps)p[u]===void 0&&(p[u]=r.defaultProps[u]);return bf(r,p,a,o,null)}function bf(r,n,i,a,o){var u={type:r,props:n,key:i,ref:a,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:o??++Y_};return o==null&&rt.vnode!=null&&rt.vnode(u),u}function Vs(r){return r.children}function gu(r,n){this.props=r,this.context=n}function Is(r,n){if(n==null)return r.__?Is(r.__,r.__.__k.indexOf(r)+1):null;for(var i;n<r.__k.length;n++)if((i=r.__k[n])!=null&&i.__e!=null)return i.__e;return typeof r.type=="function"?Is(r):null}function G_(r){var n,i;if((r=r.__)!=null&&r.__c!=null){for(r.__e=r.__c.base=null,n=0;n<r.__k.length;n++)if((i=r.__k[n])!=null&&i.__e!=null){r.__e=r.__c.base=i.__e;break}return G_(r)}}function i0(r){(!r.__d&&(r.__d=!0)&&vu.push(r)&&!Hf.__r++||r0!==rt.debounceRendering)&&((r0=rt.debounceRendering)||setTimeout)(Hf)}function Hf(){for(var r;Hf.__r=vu.length;)r=vu.sort((function(n,i){return n.__v.__b-i.__v.__b})),vu=[],r.some((function(n){var i,a,o,u,p,y;n.__d&&(p=(u=(i=n).__v).__e,(y=i.__P)&&(a=[],(o=Ul({},u)).__v=u.__v+1,Ky(y,u,o,i.__n,y.ownerSVGElement!==void 0,u.__h!=null?[p]:null,a,p??Is(u),u.__h),$_(a,u),u.__e!=p&&G_(u)))}))}function X_(r,n,i,a,o,u,p,y,g,m){var b,x,S,A,C,U,X,ie=a&&a.__k||V_,W=ie.length;for(i.__k=[],b=0;b<n.length;b++)if((A=i.__k[b]=(A=n[b])==null||typeof A=="boolean"?null:typeof A=="string"||typeof A=="number"||typeof A=="bigint"?bf(null,A,null,null,A):Array.isArray(A)?bf(Vs,{children:A},null,null,null):A.__b>0?bf(A.type,A.props,A.key,null,A.__v):A)!=null){if(A.__=i,A.__b=i.__b+1,(S=ie[b])===null||S&&A.key==S.key&&A.type===S.type)ie[b]=void 0;else for(x=0;x<W;x++){if((S=ie[x])&&A.key==S.key&&A.type===S.type){ie[x]=void 0;break}S=null}Ky(r,A,S=S||qf,o,u,p,y,g,m),C=A.__e,(x=A.ref)&&S.ref!=x&&(X||(X=[]),S.ref&&X.push(S.ref,null,A),X.push(x,A.__c||C,A)),C!=null?(U==null&&(U=C),typeof A.type=="function"&&A.__k===S.__k?A.__d=g=Q_(A,g,r):g=Z_(r,A,S,ie,C,g),typeof i.type=="function"&&(i.__d=g)):g&&S.__e==g&&g.parentNode!=r&&(g=Is(S))}for(i.__e=U,b=W;b--;)ie[b]!=null&&(typeof i.type=="function"&&ie[b].__e!=null&&ie[b].__e==i.__d&&(i.__d=Is(a,b+1)),F_(ie[b],ie[b]));if(X)for(b=0;b<X.length;b++)J_(X[b],X[++b],X[++b])}function Q_(r,n,i){for(var a,o=r.__k,u=0;o&&u<o.length;u++)(a=o[u])&&(a.__=r,n=typeof a.type=="function"?Q_(a,n,i):Z_(i,a,a,o,a.__e,n));return n}function Z_(r,n,i,a,o,u){var p,y,g;if(n.__d!==void 0)p=n.__d,n.__d=void 0;else if(i==null||o!=u||o.parentNode==null)e:if(u==null||u.parentNode!==r)r.appendChild(o),p=null;else{for(y=u,g=0;(y=y.nextSibling)&&g<a.length;g+=2)if(y==o)break e;r.insertBefore(o,u),p=u}return p!==void 0?p:o.nextSibling}function l0(r,n,i){n[0]==="-"?r.setProperty(n,i):r[n]=i==null?"":typeof i!="number"||pO.test(n)?i:i+"px"}function ff(r,n,i,a,o){var u;e:if(n==="style")if(typeof i=="string")r.style.cssText=i;else{if(typeof a=="string"&&(r.style.cssText=a=""),a)for(n in a)i&&n in i||l0(r.style,n,"");if(i)for(n in i)a&&i[n]===a[n]||l0(r.style,n,i[n])}else if(n[0]==="o"&&n[1]==="n")u=n!==(n=n.replace(/Capture$/,"")),n=n.toLowerCase()in r?n.toLowerCase().slice(2):n.slice(2),r.l||(r.l={}),r.l[n+u]=i,i?a||r.addEventListener(n,u?s0:a0,u):r.removeEventListener(n,u?s0:a0,u);else if(n!=="dangerouslySetInnerHTML"){if(o)n=n.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(n!=="href"&&n!=="list"&&n!=="form"&&n!=="tabIndex"&&n!=="download"&&n in r)try{r[n]=i??"";break e}catch{}typeof i=="function"||(i!=null&&(i!==!1||n[0]==="a"&&n[1]==="r")?r.setAttribute(n,i):r.removeAttribute(n))}}function a0(r){this.l[r.type+!1](rt.event?rt.event(r):r)}function s0(r){this.l[r.type+!0](rt.event?rt.event(r):r)}function Ky(r,n,i,a,o,u,p,y,g){var m,b,x,S,A,C,U,X,ie,W,z,fe,xe,ye=n.type;if(n.constructor!==void 0)return null;i.__h!=null&&(g=i.__h,y=n.__e=i.__e,n.__h=null,u=[y]),(m=rt.__b)&&m(n);try{e:if(typeof ye=="function"){if(X=n.props,ie=(m=ye.contextType)&&a[m.__c],W=m?ie?ie.props.value:m.__:a,i.__c?U=(b=n.__c=i.__c).__=b.__E:("prototype"in ye&&ye.prototype.render?n.__c=b=new ye(X,W):(n.__c=b=new gu(X,W),b.constructor=ye,b.render=mO),ie&&ie.sub(b),b.props=X,b.state||(b.state={}),b.context=W,b.__n=a,x=b.__d=!0,b.__h=[]),b.__s==null&&(b.__s=b.state),ye.getDerivedStateFromProps!=null&&(b.__s==b.state&&(b.__s=Ul({},b.__s)),Ul(b.__s,ye.getDerivedStateFromProps(X,b.__s))),S=b.props,A=b.state,x)ye.getDerivedStateFromProps==null&&b.componentWillMount!=null&&b.componentWillMount(),b.componentDidMount!=null&&b.__h.push(b.componentDidMount);else{if(ye.getDerivedStateFromProps==null&&X!==S&&b.componentWillReceiveProps!=null&&b.componentWillReceiveProps(X,W),!b.__e&&b.shouldComponentUpdate!=null&&b.shouldComponentUpdate(X,b.__s,W)===!1||n.__v===i.__v){b.props=X,b.state=b.__s,n.__v!==i.__v&&(b.__d=!1),b.__v=n,n.__e=i.__e,n.__k=i.__k,n.__k.forEach((function(pe){pe&&(pe.__=n)})),b.__h.length&&p.push(b);break e}b.componentWillUpdate!=null&&b.componentWillUpdate(X,b.__s,W),b.componentDidUpdate!=null&&b.__h.push((function(){b.componentDidUpdate(S,A,C)}))}if(b.context=W,b.props=X,b.__v=n,b.__P=r,z=rt.__r,fe=0,"prototype"in ye&&ye.prototype.render)b.state=b.__s,b.__d=!1,z&&z(n),m=b.render(b.props,b.state,b.context);else do b.__d=!1,z&&z(n),m=b.render(b.props,b.state,b.context),b.state=b.__s;while(b.__d&&++fe<25);b.state=b.__s,b.getChildContext!=null&&(a=Ul(Ul({},a),b.getChildContext())),x||b.getSnapshotBeforeUpdate==null||(C=b.getSnapshotBeforeUpdate(S,A)),xe=m!=null&&m.type===Vs&&m.key==null?m.props.children:m,X_(r,Array.isArray(xe)?xe:[xe],n,i,a,o,u,p,y,g),b.base=n.__e,n.__h=null,b.__h.length&&p.push(b),U&&(b.__E=b.__=null),b.__e=!1}else u==null&&n.__v===i.__v?(n.__k=i.__k,n.__e=i.__e):n.__e=yO(i.__e,n,i,a,o,u,p,g);(m=rt.diffed)&&m(n)}catch(pe){n.__v=null,(g||u!=null)&&(n.__e=y,n.__h=!!g,u[u.indexOf(y)]=null),rt.__e(pe,n,i)}}function $_(r,n){rt.__c&&rt.__c(n,r),r.some((function(i){try{r=i.__h,i.__h=[],r.some((function(a){a.call(i)}))}catch(a){rt.__e(a,i.__v)}}))}function yO(r,n,i,a,o,u,p,y){var g,m,b,x=i.props,S=n.props,A=n.type,C=0;if(A==="svg"&&(o=!0),u!=null){for(;C<u.length;C++)if((g=u[C])&&"setAttribute"in g==!!A&&(A?g.localName===A:g.nodeType===3)){r=g,u[C]=null;break}}if(r==null){if(A===null)return document.createTextNode(S);r=o?document.createElementNS("http://www.w3.org/2000/svg",A):document.createElement(A,S.is&&S),u=null,y=!1}if(A===null)x===S||y&&r.data===S||(r.data=S);else{if(u=u&&fd.call(r.childNodes),m=(x=i.props||qf).dangerouslySetInnerHTML,b=S.dangerouslySetInnerHTML,!y){if(u!=null)for(x={},C=0;C<r.attributes.length;C++)x[r.attributes[C].name]=r.attributes[C].value;(b||m)&&(b&&(m&&b.__html==m.__html||b.__html===r.innerHTML)||(r.innerHTML=b&&b.__html||""))}if((function(U,X,ie,W,z){var fe;for(fe in ie)fe==="children"||fe==="key"||fe in X||ff(U,fe,null,ie[fe],W);for(fe in X)z&&typeof X[fe]!="function"||fe==="children"||fe==="key"||fe==="value"||fe==="checked"||ie[fe]===X[fe]||ff(U,fe,X[fe],ie[fe],W)})(r,S,x,o,y),b)n.__k=[];else if(C=n.props.children,X_(r,Array.isArray(C)?C:[C],n,i,a,o&&A!=="foreignObject",u,p,u?u[0]:i.__k&&Is(i,0),y),u!=null)for(C=u.length;C--;)u[C]!=null&&I_(u[C]);y||("value"in S&&(C=S.value)!==void 0&&(C!==r.value||A==="progress"&&!C||A==="option"&&C!==x.value)&&ff(r,"value",C,x.value,!1),"checked"in S&&(C=S.checked)!==void 0&&C!==r.checked&&ff(r,"checked",C,x.checked,!1))}return r}function J_(r,n,i){try{typeof r=="function"?r(n):r.current=n}catch(a){rt.__e(a,i)}}function F_(r,n,i){var a,o;if(rt.unmount&&rt.unmount(r),(a=r.ref)&&(a.current&&a.current!==r.__e||J_(a,null,n)),(a=r.__c)!=null){if(a.componentWillUnmount)try{a.componentWillUnmount()}catch(u){rt.__e(u,n)}a.base=a.__P=null}if(a=r.__k)for(o=0;o<a.length;o++)a[o]&&F_(a[o],n,typeof r.type!="function");i||r.__e==null||I_(r.__e),r.__e=r.__d=void 0}function mO(r,n,i){return this.constructor(r,i)}function o0(r,n,i){var a,o,u;rt.__&&rt.__(r,n),o=(a=!1)?null:n.__k,u=[],Ky(n,r=n.__k=tn(Vs,null,[r]),o||qf,qf,n.ownerSVGElement!==void 0,o?null:n.firstChild?fd.call(n.childNodes):null,u,o?o.__e:n.firstChild,a),$_(u,r)}fd=V_.slice,rt={__e:function(r,n,i,a){for(var o,u,p;n=n.__;)if((o=n.__c)&&!o.__)try{if((u=o.constructor)&&u.getDerivedStateFromError!=null&&(o.setState(u.getDerivedStateFromError(r)),p=o.__d),o.componentDidCatch!=null&&(o.componentDidCatch(r,a||{}),p=o.__d),p)return o.__E=o}catch(y){r=y}throw r}},Y_=0,gu.prototype.setState=function(r,n){var i;i=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Ul({},this.state),typeof r=="function"&&(r=r(Ul({},i),this.props)),r&&Ul(i,r),r!=null&&this.__v&&(n&&this.__h.push(n),i0(this))},gu.prototype.forceUpdate=function(r){this.__v&&(this.__e=!0,r&&this.__h.push(r),i0(this))},gu.prototype.render=Vs,vu=[],Hf.__r=0;const ri={Alert:{error:{color:"red",fontWeight:"bold"},warning:{color:"#f80",fontWeight:"bold"},info:{color:"black"}},Darken:{position:"fixed",top:0,left:0,opacity:.5,backgroundColor:"#000",width:"100vw",height:"100vh",zIndex:150,webkitBackdropFilter:"blur(2px)",backdropFilter:"blur(2px)"},DialogOuter:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:150,alignItems:"center",display:"flex",justifyContent:"center",padding:"16px",boxSizing:"border-box"},DialogInner:{position:"relative",color:"#222",backgroundColor:"#fff",padding:"24px",marginBottom:"2em",maxWidth:"400px",width:"100%",maxHeight:"90%",overflowY:"auto",border:"3px solid #3d3d5d",borderRadius:"8px",boxShadow:"0 0 80px 10px #666",fontFamily:"sans-serif",boxSizing:"border-box"},Input:{height:"35px",width:"100%",maxWidth:"100%",borderColor:"#ccf4",outline:"none",fontSize:"16px",padding:"8px",boxSizing:"border-box",backgroundColor:"#f9f9f9",borderRadius:"4px",border:"1px solid #ccc",marginTop:"6px",fontFamily:"inherit"},Button:{padding:"10px 20px",margin:"0 4px",border:"1px solid #d1d5db",borderRadius:"6px",backgroundColor:"#ffffff",cursor:"pointer",fontSize:"14px",fontWeight:"500",color:"#374151",transition:"all 0.2s ease"},PrimaryButton:{padding:"10px 20px",margin:"0 4px",border:"1px solid #3b82f6",borderRadius:"6px",backgroundColor:"#3b82f6",color:"white",cursor:"pointer",fontSize:"14px",fontWeight:"500",transition:"all 0.2s ease"},ButtonsDiv:{display:"flex",justifyContent:"flex-end",gap:"12px",marginTop:"24px",paddingTop:"20px"},Label:{display:"block",marginBottom:"12px",fontSize:"14px",fontWeight:"500",color:"#333"},WindowHeader:{margin:"0 0 20px 0",fontSize:"18px",fontWeight:"600",color:"#333",borderBottom:"1px solid #eee",paddingBottom:"10px"}};function vO({children:r,className:n}){return tn("div",{className:`dexie-dialog ${n||""}`},tn("div",{style:ri.Darken}),tn("div",{style:ri.DialogOuter},tn("div",{style:ri.DialogInner},r)))}var dd,nn,Mp,u0,Kf=0,W_=[],wf=[],c0=rt.__b,f0=rt.__r,d0=rt.diffed,h0=rt.__c,p0=rt.unmount;function Yy(r,n){rt.__h&&rt.__h(nn,r,Kf||n),Kf=0;var i=nn.__H||(nn.__H={__:[],__h:[]});return r>=i.__.length&&i.__.push({__V:wf}),i.__[r]}function gO(r){return Kf=1,(function(n,i,a){var o=Yy(dd++,2);if(o.t=n,!o.__c&&(o.__=[m0(void 0,i),function(p){var y=o.__N?o.__N[0]:o.__[0],g=o.t(y,p);y!==g&&(o.__N=[g,o.__[1]],o.__c.setState({}))}],o.__c=nn,!nn.u)){nn.u=!0;var u=nn.shouldComponentUpdate;nn.shouldComponentUpdate=function(p,y,g){if(!o.__c.__H)return!0;var m=o.__c.__H.__.filter((function(x){return x.__c}));if(m.every((function(x){return!x.__N})))return!u||u.call(this,p,y,g);var b=!1;return m.forEach((function(x){if(x.__N){var S=x.__[0];x.__=x.__N,x.__N=void 0,S!==x.__[0]&&(b=!0)}})),!!b&&(!u||u.call(this,p,y,g))}}return o.__N||o.__})(m0,r)}function bO(r){return Kf=5,(function(n,i){var a=Yy(dd++,7);return P_(a.__H,i)?(a.__V=n(),a.i=i,a.__h=n,a.__V):a.__})((function(){return{current:r}}),[])}function wO(){for(var r;r=W_.shift();)if(r.__P&&r.__H)try{r.__H.__h.forEach(_f),r.__H.__h.forEach(cy),r.__H.__h=[]}catch(n){r.__H.__h=[],rt.__e(n,r.__v)}}rt.__b=function(r){nn=null,c0&&c0(r)},rt.__r=function(r){f0&&f0(r),dd=0;var n=(nn=r.__c).__H;n&&(Mp===nn?(n.__h=[],nn.__h=[],n.__.forEach((function(i){i.__N&&(i.__=i.__N),i.__V=wf,i.__N=i.i=void 0}))):(n.__h.forEach(_f),n.__h.forEach(cy),n.__h=[])),Mp=nn},rt.diffed=function(r){d0&&d0(r);var n=r.__c;n&&n.__H&&(n.__H.__h.length&&(W_.push(n)!==1&&u0===rt.requestAnimationFrame||((u0=rt.requestAnimationFrame)||function(i){var a,o=function(){clearTimeout(u),y0&&cancelAnimationFrame(a),setTimeout(i)},u=setTimeout(o,100);y0&&(a=requestAnimationFrame(o))})(wO)),n.__H.__.forEach((function(i){i.i&&(i.__H=i.i),i.__V!==wf&&(i.__=i.__V),i.i=void 0,i.__V=wf}))),Mp=nn=null},rt.__c=function(r,n){n.some((function(i){try{i.__h.forEach(_f),i.__h=i.__h.filter((function(a){return!a.__||cy(a)}))}catch(a){n.some((function(o){o.__h&&(o.__h=[])})),n=[],rt.__e(a,i.__v)}})),h0&&h0(r,n)},rt.unmount=function(r){p0&&p0(r);var n,i=r.__c;i&&i.__H&&(i.__H.__.forEach((function(a){try{_f(a)}catch(o){n=o}})),n&&rt.__e(n,i.__v))};var y0=typeof requestAnimationFrame=="function";function _f(r){var n=nn,i=r.__c;typeof i=="function"&&(r.__c=void 0,i()),nn=n}function cy(r){var n=nn;r.__c=r.__(),nn=n}function P_(r,n){return!r||r.length!==n.length||n.some((function(i,a){return i!==r[a]}))}function m0(r,n){return typeof n=="function"?n(r):n}function _O({message:r,messageCode:n,messageParams:i}){return r.replace(/\{\w+\}/gi,(a=>i[a.substring(1,a.length-1)]))}function xO({title:r,type:n,alerts:i,fields:a,submitLabel:o,cancelLabel:u,onCancel:p,onSubmit:y}){const[g,m]=gO({}),b=bO(null);return(function(x,S){var A=Yy(dd++,4);!rt.__s&&P_(A.__H,S)&&(A.__=x,A.i=S,nn.__h.push(A))})((()=>{var x;return(x=b.current)===null||x===void 0?void 0:x.focus()}),[]),tn(vO,{className:"dxc-login-dlg"},tn(Vs,null,tn("h3",{style:ri.WindowHeader},r),i.map((x=>tn("p",{style:ri.Alert[x.type]},_O(x)))),tn("form",{onSubmit:x=>{x.preventDefault(),y(g)}},Object.entries(a).map((([x,{type:S,label:A,placeholder:C}],U)=>tn("label",{style:ri.Label,key:U},A?`${A}: `:"",tn("input",{ref:U===0?b:void 0,type:S,name:x,autoComplete:"on",style:ri.Input,autoFocus:!0,placeholder:C,value:g[x]||"",onInput:X=>{var ie;const W=(function(fe,xe){switch(fe){case"email":return xe.toLowerCase();case"otp":return xe.toUpperCase();default:return xe}})(S,(ie=X.target)===null||ie===void 0?void 0:ie.value);let z=Object.assign(Object.assign({},g),{[x]:W});m(z),S==="otp"&&(W==null?void 0:W.trim().length)===8&&y(z)}})))))),tn("div",{style:ri.ButtonsDiv},tn(Vs,null,tn("button",{type:"submit",style:ri.PrimaryButton,onClick:()=>y(g)},o),u&&tn("button",{style:ri.Button,onClick:p},u))))}class v0 extends gu{constructor(n){super(n),this.observer=i=>this.setState({userInteraction:i}),this.state={userInteraction:void 0}}componentDidMount(){this.subscription=ur(this.props.db.cloud.userInteraction).subscribe(this.observer)}componentWillUnmount(){this.subscription&&(this.subscription.unsubscribe(),delete this.subscription)}render(n,{userInteraction:i}){return i?tn(xO,Object.assign({},i)):null}}function Hu(r){const n=new WeakMap;return i=>{let a=n.get(i);return a||(a=r(i),n.set(i,a)),a}}const Yf=Hu((r=>new Br(Zn)));function hd(r,n){let i=n,a=ur(r).pipe(ar((u=>i=u)),jE({resetOnRefCountZero:()=>J0(1e3)}));const o=new ln((u=>{let p=!1;const y=a.subscribe({next(g){p=!0,u.next(g)},error(g){u.error(g)},complete(){u.complete()}});return p||y.closed||u.next(i),y}));return o.getValue=()=>i,o}const ex=Hu((r=>hd(Ml((()=>r.roles.where({realmId:"rlm-public"}).toArray().then((n=>{const i={};for(const a of n.slice().sort(((o,u)=>(o.sortOrder||0)-(u.sortOrder||0))))i[a.name]=a;return i})))),{}))),tx=Hu((r=>hd(Yf(r._novip).pipe(Nn((n=>Ml((()=>r.transaction("r","realms","members",(()=>Promise.all([r.members.where({userId:n.userId}).toArray(),r.realms.toArray(),n.userId]).then((([i,a,o])=>({selfMembers:i,realms:a,userId:o})))))))))),{selfMembers:[],realms:[],get userId(){return r.cloud.currentUserId}})));function SO(...r){return r.length===0?{}:r.reduce(((i,a)=>{const o=Object.assign({},i);for(const[u,p]of Object.entries(a))if(u in o&&o[u]){if(o[u]==="*")continue;if(p==="*")o[u]="*";else if(Array.isArray(p)&&Array.isArray(o[u])){const y=o,g=y[u];y[u]=[...new Set([...g,...p])]}else if(typeof p=="object"&&p&&typeof o[u]=="object"){const y=o[u];for(const[g,m]of Object.entries(p))y[g]!=="*"&&(m==="*"?y[g]="*":Array.isArray(y[g])&&Array.isArray(m)&&(y[g]=[...new Set([...y[g],...m])]))}}else o[u]=a[u];return o}))}const nx=Hu((r=>(function(n,i){let a;const o=n.pipe(ar((u=>a=i(u))));return o.getValue=()=>a!==void 0?a:a=i(n.getValue()),o})(hd(_u([tx(r._novip),ex(r._novip)]).pipe(ar((([{selfMembers:n,realms:i,userId:a},o])=>({selfMembers:n,realms:i,userId:a,globalRoles:o})))),{selfMembers:[],realms:[],userId:Zn.userId,globalRoles:{}}),(({selfMembers:n,realms:i,userId:a,globalRoles:o})=>i.map((p=>{const y=n.filter((b=>b.realmId===p.realmId)),g=y.map((b=>b.permissions)).filter((b=>b)),m=Hy(y.map((b=>b.roles)).filter((b=>b))).map((b=>o[b])).filter((b=>b)).map((b=>b.permissions));return Object.assign(Object.assign({},p),{permissions:p.owner===a?{manage:"*"}:SO(...g,...m)})})).reduce(((p,y)=>Object.assign(Object.assign({},p),{[y.realmId]:y})),{[a]:{realmId:a,owner:a,name:a,permissions:{manage:"*"}}})))));class g0{constructor(n,i,a){this.permissions=n||{},this.tableName=i,this.isOwner=a}add(...n){var i;return this.permissions.manage==="*"||!!(!((i=this.permissions.manage)===null||i===void 0)&&i.includes(this.tableName))||this.permissions.add==="*"||!!n.every((a=>{var o;return(o=this.permissions.add)===null||o===void 0?void 0:o.includes(a)}))}update(...n){var i,a;if(this.isOwner||this.permissions.manage==="*"||!((i=this.permissions.manage)===null||i===void 0)&&i.includes(this.tableName))return!0;if(this.permissions.update==="*")return n.every((u=>u!=="owner"));const o=(a=this.permissions.update)===null||a===void 0?void 0:a[this.tableName];return o==="*"?n.every((u=>u!=="owner")):n.every((u=>o==null?void 0:o.some((p=>p===u||p==="*"&&u!=="owner"))))}delete(){var n;return!(!this.isOwner&&this.permissions.manage!=="*")||!!(!((n=this.permissions.manage)===null||n===void 0)&&n.includes(this.tableName))}}const EO=Hu((r=>{const n=Yf(r._novip).pipe(Nn((o=>Ml((()=>r.members.where({email:o.email||""}).toArray()))))),i=nx(r._novip),a=tx(r._novip);return hd(_u([n,a,i]).pipe(ar((([o,u,p])=>{const y=(b,x)=>Object.assign(Object.assign({},b),{[x.id]:Object.assign(Object.assign({},x),{realm:p[x.realmId]})}),g=o.reduce(y,{}),m=u.selfMembers.reduce(y,g);return Object.values(m).filter((b=>!b.accepted)).map((b=>Object.assign(Object.assign({},b),{accept(){return De(this,void 0,void 0,(function*(){yield r.members.update(b.id,{accepted:new Date})}))},reject(){return De(this,void 0,void 0,(function*(){yield r.members.update(b.id,{rejected:new Date})}))}})))}))),[])}));function AO(r){return n=>{var i;const a=n.doc;if(!a)throw new Error("Internal error: DexieYProvider.createYHandler called without a doc. This is unexpected.");const{parentTable:o}=a.meta||{};if(!(!((i=r.cloud.schema)===null||i===void 0)&&i[o].markedForSync))return;let u;Object.defineProperty(n,"awareness",{get:()=>u||(u=(function(p,y,g){const{parentTable:m,parentId:b,parentProp:x,updatesTable:S}=y.meta,A=new a2(y),C=H_(y);return A.on("update",(({added:U,updated:X,removed:ie},W)=>{const z=U.concat(X).concat(ie),fe=p.cloud.currentUser.value;if(W!=="server"&&fe.isLoggedIn&&!Du(p)){const xe=s2(A,z);p.messageProducer.next({type:"aware",table:m,prop:x,k:y.meta.parentId,u:xe}),g.destroyed&&p.messageProducer.next({type:"doc-close",table:m,prop:x,k:y.meta.parentId})}})),A.on("destroy",(()=>{f_(A,[y.clientID],"provider destroyed")})),De(this,void 0,void 0,(function*(){if(g.destroyed)return;let U=!1,X=1;const ie=_u([p.cloud.webSocketStatus,C.pipe(P0(null))]).subscribe((([z])=>{if(g.destroyed)return;U=z==="connected";const fe=p.cloud.currentUser.value;z==="connected"&&fe.isLoggedIn&&!Du(p)&&(++X,W().catch((xe=>{})))}));function W(){return De(this,void 0,void 0,(function*(){const z=X,fe=p.table(S),xe=p.$syncState,[ye,pe]=yield p.transaction("r",xe,fe,(()=>De(this,void 0,void 0,(function*(){const Pe=yield fe.get(Ll),de=yield xe.get("syncState");return[(Pe==null?void 0:Pe.receivedUntil)||0,(de==null?void 0:de.yServerRevision)||(de==null?void 0:de.serverRevision)]}))));if(g.destroyed||X!==z||!U)return;const Le={type:"doc-open",table:m,prop:x,k:b,serverRev:pe},Re=yield fe.where("i").between(ye,1/0,!1).filter((Pe=>Gf(Pe.k,b)===0&&(1&(Pe.f||0))==0)).toArray();if(!g.destroyed&&X===z&&U){if(Re.length>0){const Pe=jf(Re.map((ke=>ke.u))),de=Kw(Pe);Le.sv=de}p.messageProducer.next(Le)}}))}g.addCleanupHandler(ie)})),A})(r,a,n),q_.set(a,u),u)})}}const kO={nameSuffix:!0};function b0(r){const n=r.name,i=Yf(r),a=[];let o=!1,u=null;r.on("ready",(b=>De(this,void 0,void 0,(function*(){try{yield(function(x){return De(this,void 0,void 0,(function*(){var S,A,C,U,X,ie,W;p=!1;const z=qi(x);typeof window<"u"&&typeof document<"u"&&(!((S=z.cloud.options)===null||S===void 0)&&S.customLoginGui||a.push((function(de){let ke=!1;const qe=document.createElement("div");return document.body?(document.body.appendChild(qe),o0(tn(v0,{db:de.vip}),qe)):addEventListener("DOMContentLoaded",(()=>{ke||(document.body.appendChild(qe),o0(tn(v0,{db:de.vip}),qe))})),{unsubscribe(){try{qe.remove()}catch{}ke=!0},get closed(){return ke}}})(x))),z.cloud.isServiceWorkerDB||a.push((function(de){let ke=de.cloud.webSocketStatus.value;const qe=de.cloud.webSocketStatus.pipe(Nn((Xe=>{const He=ke;ke=Xe;const K=Vi(Xe);switch(Xe){case"disconnected":return mu.value?K.pipe(kb(500)):K;case"connecting":return He==="not-started"||He==="error"?K:K.pipe(kb(4e3));default:return K}})));return _u([qe,de.syncStateChangedEvent.pipe(P0({phase:"initial"})),Yf(de.dx._novip),uy]).pipe(ar((([Xe,He,K,re])=>{var se;if(!((se=K.license)===null||se===void 0)&&se.status&&K.license.status!=="ok")return{phase:"offline",status:"offline",license:K.license.status};let{phase:Oe,error:ze,progress:N}=He,J=Xe;return Oe==="error"&&(J="error"),Xe==="not-started"&&(Oe!=="pushing"&&Oe!=="pulling"||(J="connecting")),de.cloud.syncState.value.phase!=="error"||He.phase!=="pushing"&&He.phase!=="pulling"||(J="connecting"),re||(J="disconnected"),{phase:Oe,error:ze,progress:N,status:Ms?J:"offline",license:"ok"}})))})(z).subscribe(x.cloud.syncState)),a.push(z.syncCompleteEvent.subscribe(g)),z.tables.every((de=>de.core))||(function(){throw new dt.SchemaError("Version increment needed to allow dexie-cloud change tracking")})();const fe="serviceWorker"in navigator?yield navigator.serviceWorker.getRegistrations():[],[xe,ye]=yield z.transaction("rw",z.$syncState,(()=>De(this,void 0,void 0,(function*(){var de,ke;const{options:qe,schema:Xe}=z.cloud,[He,K,re]=yield Promise.all([z.getOptions(),z.getSchema(),z.getPersistedSyncState()]);if(o){if(!He||JSON.stringify(He)!==JSON.stringify(qe)){if(!qe)throw new Error("Internal error");const se=Object.assign({},qe);delete se.fetchTokens,delete se.awarenessProtocol,yield z.$syncState.put(se,"options")}}else z.cloud.options=He||null;if(!((de=z.cloud.options)===null||de===void 0)&&de.tryUseServiceWorker&&"serviceWorker"in navigator&&fe.length>0&&!$2?z.cloud.usingServiceWorker=!0:(!((ke=z.cloud.options)===null||ke===void 0)&&ke.tryUseServiceWorker&&z.cloud.isServiceWorkerDB,z.cloud.usingServiceWorker=!1),Up(Xe,z.cloud.options),Up(K,z.cloud.options),Xe){if(!K||JSON.stringify(K)!==JSON.stringify(Xe)){const se=K||{};for(const[Oe,ze]of Object.entries(Xe)){const N=se[Oe];N?(N.markedForSync=ze.markedForSync,ze.deleted=N.deleted,N.generatedGlobalId=ze.generatedGlobalId):se[Oe]=Object.assign({},ze)}yield z.$syncState.put(se,"schema"),Object.assign(Xe,se)}}else z.cloud.schema=K||null;return[re==null?void 0:re.initiallySynced,re==null?void 0:re.realms]}))));if(xe&&z.setInitiallySynced(!0),(function(de){var ke,qe;for(const Xe of de.tables)if(!((qe=(ke=de.cloud.schema)===null||ke===void 0?void 0:ke[Xe.name])===null||qe===void 0)&&qe.markedForSync){if(Xe.schema.primKey.auto)throw new dt.SchemaError(`Table ${Xe.name} is both autoIncremented and synced. Use db.cloud.configure({unsyncedTables: [${JSON.stringify(Xe.name)}]}) to blacklist it from sync`);if(!Xe.schema.primKey.keyPath)throw new dt.SchemaError(`Table ${Xe.name} cannot be both synced and outbound. Use db.cloud.configure({unsyncedTables: [${JSON.stringify(Xe.name)}]}) to blacklist it from sync`)}})(z),y(),!z.cloud.isServiceWorkerDB){a.push(Ml((()=>z.getCurrentUser())).subscribe(i)),a.push(Ml((()=>z.getPersistedSyncState())).subscribe(z.cloud.persistedSyncState)),yield Ea(_u([i.pipe(Ob(1),Os(1)),z.cloud.persistedSyncState.pipe(Ob(1),Os(1))]));const de=AO(z);Un.on.new.subscribe(de),z.dx.once("close",(()=>{Un.on.new.unsubscribe(de)}))}let pe=!1;const Le=yield z.getCurrentUser(),Re=(A=z.cloud.options)===null||A===void 0?void 0:A.requireAuth;Re&&(z.cloud.isServiceWorkerDB?yield Ea(i.pipe(Er((de=>!!de.isLoggedIn)),Os(1))):typeof Re=="object"?(!Le.isLoggedIn||Re.userId&&Le.userId!==Re.userId||Re.email&&Le.email!==Re.email)&&(pe=yield Cp(z,Re)):Le.isLoggedIn||(pe=yield Cp(z))),!Le.isLoggedIn||ye&&ye.includes(Le.userId)||(pe=!0),u&&u.stop(),u=null,y();const Pe=((C=z.cloud.options)===null||C===void 0?void 0:C.databaseUrl)&&(!xe||pe);Pe&&(yield(function(de,ke,qe){return De(this,void 0,void 0,(function*(){yield z_(de,j_,(()=>cd(de,ke,qe,{isInitialSync:!0})))}))})(z,z.cloud.options,z.cloud.schema),z.setInitiallySynced(!0)),y(),z.cloud.usingServiceWorker&&(!((U=z.cloud.options)===null||U===void 0)&&U.databaseUrl)?(Pe||p_(z,"push").catch((()=>{})),(function(de){return De(this,void 0,void 0,(function*(){var ke;try{const{periodicSync:qe}=yield navigator.serviceWorker.ready;if(qe)try{yield qe.register(`dexie-cloud:${de.name}`,(ke=de.cloud.options)===null||ke===void 0?void 0:ke.periodicSync)}catch{}}catch{}}))})(z).catch((()=>{}))):!((X=z.cloud.options)===null||X===void 0)&&X.databaseUrl&&z.cloud.schema&&!z.cloud.isServiceWorkerDB&&(u=hO(z,z.cloud.options,z.cloud.schema),u.start(),Pe||Ki(z,"push")),y(),z.cloud.isServiceWorkerDB||a.push(ii(self,"online").subscribe((()=>{z.syncStateChangedEvent.next({phase:"not-in-sync"}),Du(z)||Ki(z,"push")})),ii(self,"offline").subscribe((()=>{z.syncStateChangedEvent.next({phase:"offline"})}))),!(!((ie=z.cloud.options)===null||ie===void 0)&&ie.databaseUrl)||!((W=z.cloud.options)===null||W===void 0)&&W.disableWebSocket||J2||a.push((function(de){var ke;if(!(!((ke=de.cloud.options)===null||ke===void 0)&&ke.databaseUrl))throw new Error("No database URL to connect WebSocket to");const qe=de.messageConsumer.readyToServe.pipe(Er((He=>He)),Nn((()=>de.getPersistedSyncState())),Er((He=>He&&He.serverRevision)),Nn((He=>De(this,void 0,void 0,(function*(){return{type:"ready",rev:He.serverRevision,realmSetHash:yield iy(He)}}))))),Xe=Jf(qe,de.messageProducer);return(function He(){return de.cloud.persistedSyncState.pipe(Er((K=>K==null?void 0:K.serverRevision)),Os(1),Nn((K=>de.cloud.currentUser.pipe(ar((re=>[re,K]))))),Nn((([K,re])=>uy.pipe(ar((se=>[se?K:null,re]))))),Nn((([K,re])=>K!=null&&K.isLoggedIn&&!(re!=null&&re.realms.includes(K.userId))?de.cloud.persistedSyncState.pipe(Er((se=>(se==null?void 0:se.realms.includes(K.userId))||!1)),Os(1),ar((se=>[K,se]))):new Br([K,re]))),Nn((K=>De(this,[K],void 0,(function*([re,se]){return[re,yield iy(se)]})))),W0((([K,re],[se,Oe])=>K===se&&re===Oe)),Nn((([K,re])=>{var se;return!((se=de.cloud.persistedSyncState)===null||se===void 0)&&se.value?K?new sO(de,de.cloud.persistedSyncState.value.serverRevision,de.cloud.persistedSyncState.value.yServerRevision,re,de.cloud.persistedSyncState.value.clientIdentity,Xe,de.cloud.webSocketStatus,K):ur([]):He()})),Yp((K=>(K==null?void 0:K.name)==="TokenExpiredError"?Vi(!0).pipe(Nn((()=>De(this,void 0,void 0,(function*(){const re=yield de.getCurrentUser(),se=yield ud(de.cloud.options.databaseUrl,re);yield de.table("$logins").update(re.userId,{accessToken:se.accessToken,accessTokenExpiration:se.accessTokenExpiration,claims:se.claims,license:se.license,data:se.data})})))),Nn((()=>He()))):xb((()=>K)))),Yp((K=>(de.cloud.webSocketStatus.next("error"),K instanceof cO?xb((()=>K)):ur(fO()).pipe(Nn((()=>He())))))))})().subscribe({next:He=>{He&&de.messageConsumer.enqueue(He)},error:He=>{},complete:()=>{}})})(z))}))})(b)}catch{}}))),!0);let p=!1;function y(){if(p)throw new dt.DatabaseClosedError}r.once("close",(()=>{a.forEach((b=>b.unsubscribe())),a.splice(0,a.length),p=!0,u&&u.stop(),u=null,i.next(Zn)}));const g=new Ta;var m;r.cloud={version:"4.2.4",options:Object.assign({},kO),schema:null,get currentUserId(){return i.value.userId||Zn.userId},currentUser:i,syncState:new Br({phase:"initial",status:"not-started"}),events:{syncComplete:g},persistedSyncState:new Br(void 0),userInteraction:new Br(void 0),webSocketStatus:new Br("not-started"),login(b){return De(this,void 0,void 0,(function*(){const x=qi(r);yield x.cloud.sync(),yield Cp(x,b)}))},invites:EO(r),roles:ex(r),configure(b){b=r.cloud.options=Object.assign(Object.assign({},r.cloud.options),b),o=!0,b.databaseUrl&&b.nameSuffix&&(r.name=`${n}-${(function(x){const S=new URL(x);return S.pathname==="/"?S.hostname.split(".")[0]:S.pathname.split("/")[1]})(b.databaseUrl)}`,qi(r).reconfigure()),Up(r.cloud.schema,r.cloud.options)},logout(){return De(this,arguments,void 0,(function*({force:b}={}){b?yield ty(qi(r),{deleteUnsyncedData:!0}):yield m_(qi(r))}))},sync(){return De(this,arguments,void 0,(function*({wait:b,purpose:x}={wait:!0,purpose:"push"}){var S;b===void 0&&(b=!0);const A=qi(r);if((((S=A.cloud.currentUser.value.license)===null||S===void 0?void 0:S.status)||"ok")!=="ok"&&(yield od(A)),x==="pull"){const C=A.cloud.persistedSyncState.value;if(Ki(A,x),b){const U=yield Ea(A.cloud.persistedSyncState.pipe(Er((X=>(X==null?void 0:X.timestamp)!=null&&(!C||X.timestamp>C.timestamp)))));if(U!=null&&U.error)throw new Error("Sync error: "+U.error)}}else if(yield n0(A)){const C=A.cloud.persistedSyncState.value;Ki(A,x),b&&(yield Ea(ur(Ml((()=>De(this,void 0,void 0,(function*(){const U=yield n0(A),X=yield A.getPersistedSyncState();if((X==null?void 0:X.timestamp)!==(C==null?void 0:C.timestamp)&&(X!=null&&X.error))throw new Error("Sync error: "+X.error);return U}))))).pipe(Er((U=>!U)))))}}))},permissions:(b,x)=>(function(S,A,C){if(!A)throw new TypeError("Cannot check permissions of undefined or null. A Dexie Cloud object with realmId and owner expected.");const{owner:U,realmId:X}=A;if(!C){if(typeof A.table!="function")throw new TypeError("Missing 'table' argument to permissions and table could not be extracted from entity");C=A.table()}const ie=nx(S),W=fe=>{const xe=fe[X||S.cloud.currentUserId];return xe?new g0(xe.permissions,C,X===void 0||X===S.cloud.currentUserId||U===S.cloud.currentUserId):new g0({},C,!U||U===S.cloud.currentUserId)},z=ie.pipe(ar(W));return z.getValue=()=>W(ie.getValue()),z})(r._novip,b,x)},r.Version.prototype._parseStoresSpec=dt.override(r.Version.prototype._parseStoresSpec,(b=>rO(b,r))),r.Table.prototype.newId=function({colocateWith:b}={}){const x=b&&b.substr(b.length-3);return R_(r.cloud.schema[this.name].idPrefix||"",x)},r.Table.prototype.idPrefix=function(){var b,x;return((x=(b=this.db.cloud.schema)===null||b===void 0?void 0:b[this.name])===null||x===void 0?void 0:x.idPrefix)||""},r.use(nO({currentUserObservable:r.cloud.currentUser,db:qi(r)})),r.use((m=qi(r),{stack:"dbcore",name:"implicitPropSetterMiddleware",level:1,create:b=>Object.assign(Object.assign({},b),{table:x=>{const S=b.table(x);return Object.assign(Object.assign({},S),{mutate:A=>{var C,U,X,ie,W,z;const fe=A.trans;if(fe.disableChangeTracking)return S.mutate(A);const xe=(U=(C=fe.currentUser)===null||C===void 0?void 0:C.userId)!==null&&U!==void 0?U:Zn.userId;if(!((ie=(X=m.cloud.schema)===null||X===void 0?void 0:X[x])===null||ie===void 0)&&ie.markedForSync&&(A.type==="add"||A.type==="put")){if(x==="members")for(const ye of A.values)typeof ye.email=="string"&&(ye.email=ye.email.trim().toLowerCase());for(const ye of A.values){ye.owner||(ye.owner=xe),ye.realmId||(ye.realmId=xe);const pe=(z=(W=S.schema.primaryKey).extractKey)===null||z===void 0?void 0:z.call(W,ye);typeof pe=="string"&&pe[0]==="#"&&A.type==="put"&&(delete A.criteria,delete A.changeSpec,A.upsert||delete A.updates,ye.$ts=Date.now())}}return S.mutate(A)}})}})})),r.use(P2(qi(r)))}b0.version="4.2.4",dt.Cloud=b0;const fy={deviceId:"",deviceName:"",category:"any",workMode:!1,retentionDays:7,defaultTargetCategory:"any",rememberPassphrase:"off",isSetupComplete:!1,enableBrowserNotifications:!1};class OO extends dt{constructor(){super("handoff-lite",void 0);Sa(this,"handoffItems");Sa(this,"persistedState");Sa(this,"knownDevices");this.version(1).stores({handoffItems:"id, createdAt, status, targetCategory, kind, [status+createdAt]",persistedState:"key"}),this.version(2).stores({handoffItems:"id, createdAt, status, targetCategory, targetDeviceId, kind, [status+createdAt]",persistedState:"key",knownDevices:"deviceId, lastSeen"})}get isCloudEnabled(){return!1}async getDeviceProfile(){const i=await this.persistedState.get("deviceProfile");return i!=null&&i.value?{...fy,...i.value}:fy}async saveDeviceProfile(i){await this.persistedState.put({key:"deviceProfile",value:i,updatedAt:Date.now()})}async initializeDevice(){let i=await this.getDeviceProfile();return i.deviceId||(i={...i,deviceId:crypto.randomUUID()},await this.saveDeviceProfile(i)),i}async addItem(i){const a=Date.now(),o=crypto.randomUUID(),u={...i,id:o,createdAt:a,updatedAt:a};return await this.handoffItems.add(u),await this.registerDevice({deviceId:i.senderDeviceId,deviceName:i.senderDeviceName,category:i.senderCategory,lastSeen:a}),o}async updateItemStatus(i,a){const o=Date.now(),u={status:a,updatedAt:o};a==="opened"?u.openedAt=o:a==="done"?u.doneAt=o:a==="archived"&&(u.archivedAt=o),await this.handoffItems.update(i,u)}async getItemsByFilter(i,a,o){const p=await this.handoffItems.orderBy("createdAt").reverse().toArray();let y=p;switch(i){case"new":y=p.filter(g=>g.status==="new");break;case"active":y=p.filter(g=>["new","opened","done"].includes(g.status));break;case"archived":y=p.filter(g=>g.status==="archived");break}return o?y=y.filter(g=>g.targetDeviceId?g.targetDeviceId===o:a&&a!=="any"?g.targetCategory==="any"||g.targetCategory===a:!0):a&&a!=="any"&&(y=y.filter(g=>g.targetDeviceId?!1:g.targetCategory==="any"||g.targetCategory===a)),y}async runRetentionCleanup(i){const a=Date.now()-i*24*60*60*1e3,o=await this.handoffItems.where("createdAt").below(a).filter(p=>p.status!=="archived").toArray(),u=Date.now();for(const p of o)await this.handoffItems.update(p.id,{status:"archived",archivedAt:u,updatedAt:u});return o.length}async deleteItem(i){await this.handoffItems.delete(i)}async clearArchived(){const a=(await this.handoffItems.where("status").equals("archived").toArray()).map(o=>o.id);return await this.handoffItems.bulkDelete(a),a.length}async registerDevice(i){await this.knownDevices.put(i)}async getKnownDevices(){return await this.knownDevices.orderBy("lastSeen").reverse().toArray()}async getKnownDevice(i){return await this.knownDevices.get(i)}}const Ii=new OO,w0=Ii,rx=Be.createContext(null);function TO({children:r}){return T.jsx(rx.Provider,{value:Ii,children:r})}function Vy(){const r=Be.useContext(rx);if(!r)throw new Error("useDb must be used within DbProvider");return r}const ix=Be.createContext(null);function CO({children:r}){const[n,i]=Be.useState([]),a=Be.useCallback(u=>{const p=`notif-${Date.now()}-${Math.random().toString(36).slice(2)}`,y=u.duration??4e3;return i(g=>[...g,{...u,id:p}]),y>0&&setTimeout(()=>{i(g=>g.filter(m=>m.id!==p))},y),p},[]),o=Be.useCallback(u=>{i(p=>p.filter(y=>y.id!==u))},[]);return T.jsx(ix.Provider,{value:{notifications:n,addNotification:a,removeNotification:o},children:r})}function lx(){const r=Be.useContext(ix);if(!r)throw new Error("useNotificationContext must be used within NotificationProvider");return r}function Ku(){const{addNotification:r,removeNotification:n}=lx();return{info:(i,a)=>r({type:"info",message:i,duration:a==null?void 0:a.duration}),success:(i,a)=>r({type:"success",message:i,duration:a==null?void 0:a.duration}),warning:(i,a)=>r({type:"warning",message:i,duration:a==null?void 0:a.duration}),error:(i,a)=>r({type:"error",message:i,duration:a==null?void 0:a.duration}),dismiss:n}}function ax(r){try{const n=new URL(r);return n.protocol==="http:"||n.protocol==="https:"}catch{return!1}}function sx(r,n=50){try{const i=new URL(r),a=i.hostname+i.pathname;return a.length>n?a.substring(0,n-3)+"...":a}catch{return r.substring(0,n)}}function ox(r,n=100){const i=r.replace(/\s+/g," ").trim();return i.length>n?i.substring(0,n-3)+"...":i}function DO(r){const n=new URLSearchParams(r);return{content:n.get("content")??n.get("url")??n.get("text")??void 0,title:n.get("title")??void 0,category:n.get("category")??void 0,sensitive:n.get("sensitive")==="true"}}function jO(r){return ax(r.trim())?"url":"text"}function NO(r){try{return new URL(r).hostname.replace(/^www\./,"")}catch{return r}}function UO(r){try{return`https://www.google.com/s2/favicons?domain=${new URL(r).hostname}&sz=32`}catch{return""}}const ux=Be.createContext(null);function MO({children:r}){const[n,i]=Be.useState("inbox"),[a,o]=Be.useState(fy),[u,p]=Be.useState(!0),[y,g]=Be.useState("active"),[m,b]=Be.useState(null),[x,S]=Be.useState(null),[A,C]=Be.useState(0);Be.useEffect(()=>{(async()=>{try{const fe=await Ii.initializeDevice();o(fe);const xe=window.location.search,ye=window.location.hash;if(xe||ye.includes("?")){const pe=xe||ye.split("?")[1]||"",Le=DO(pe);Le.content&&(b({content:Le.content,title:Le.title,category:Le.category,sensitive:Le.sensitive}),i("send"))}window.location.pathname.includes("/share")&&i("send"),fe.isSetupComplete||i("setup"),fe.retentionDays>0&&await Ii.runRetentionCleanup(fe.retentionDays)}catch(fe){console.error("Failed to initialize app:",fe)}finally{p(!1)}})()},[]);const U=Be.useCallback(async z=>{const fe={...a,...z};o(fe),await Ii.saveDeviceProfile(fe)},[a]),X=Be.useCallback(z=>{i(z),z!=="setup"&&(window.location.hash=z)},[]);Be.useEffect(()=>{const z=()=>{const fe=window.location.hash.slice(1);["inbox","send","settings","share"].includes(fe)&&i(fe)};return window.addEventListener("hashchange",z),()=>window.removeEventListener("hashchange",z)},[]);const ie=Be.useCallback(()=>{b(null)},[]),W=Be.useCallback(()=>{C(z=>z+1)},[]);return T.jsx(ux.Provider,{value:{route:n,navigate:X,deviceProfile:a,updateDeviceProfile:U,isLoading:u,inboxFilter:y,setInboxFilter:g,sharePayload:m,setSharePayload:b,clearSharePayload:ie,sessionPassphrase:x,setSessionPassphrase:S,refreshItems:W,refreshTrigger:A},children:r})}function $i(){const r=Be.useContext(ux);if(!r)throw new Error("useApp must be used within AppProvider");return r}const RO={info:"info",success:"check_circle",warning:"warning",error:"error"},zO={info:"bg-blue-500",success:"bg-green-500",warning:"bg-yellow-500",error:"bg-red-500"};function BO(){const{notifications:r,removeNotification:n}=lx();return r.length===0?null:T.jsx("div",{className:"fixed bottom-20 right-4 z-[3000] flex flex-col gap-2 pointer-events-none",children:r.slice(-5).map(i=>T.jsxs("div",{className:`\r
                        pointer-events-auto\r
                        flex items-center gap-3 px-4 py-3\r
                        glass-card rounded-lg shadow-xl\r
                        animate-slide-in-right\r
                        max-w-sm\r
                    `,children:[T.jsx("div",{className:`w-8 h-8 rounded-full ${zO[i.type]} flex items-center justify-center flex-shrink-0`,children:T.jsx("span",{className:"material-symbols-outlined text-white text-lg",children:RO[i.type]})}),T.jsx("span",{className:"text-white text-sm flex-1",children:i.message}),T.jsx("button",{onClick:()=>n(i.id),className:"text-white/50 hover:text-white",children:T.jsx("span",{className:"material-symbols-outlined text-lg",children:"close"})})]},i.id))})}const LO=[{id:"inbox",icon:"inbox",label:"Inbox"},{id:"send",icon:"send",label:"Send"},{id:"settings",icon:"settings",label:"Settings"}];function qO(){const{route:r,navigate:n}=$i();return T.jsx("nav",{className:"fixed bottom-0 left-0 right-0 z-50 glass-card border-t border-white/10",style:{height:"var(--bottom-nav-height)"},children:T.jsx("div",{className:"flex items-center justify-around h-full max-w-md mx-auto",children:LO.map(i=>{const a=r===i.id;return T.jsxs("button",{onClick:()=>n(i.id),className:`
                                flex flex-col items-center justify-center
                                w-20 h-full
                                transition-colors duration-150
                                ${a?"text-primary":"text-gray-400 hover:text-white"}
                            `,children:[T.jsx("span",{className:"material-symbols-outlined text-2xl",style:{fontVariationSettings:a?"'FILL' 1, 'wght' 500":"'FILL' 0, 'wght' 400"},children:i.icon}),T.jsx("span",{className:"text-xs mt-1",children:i.label})]},i.id)})})})}function HO(){Be.useEffect(()=>{var n;const r=()=>{var o,u;const i=((o=window.visualViewport)==null?void 0:o.height)??window.innerHeight,a=((u=window.visualViewport)==null?void 0:u.width)??window.innerWidth;document.documentElement.style.setProperty("--app-vh",`${i}px`),document.documentElement.style.setProperty("--app-vw",`${a}px`)};return r(),window.addEventListener("resize",r),(n=window.visualViewport)==null||n.addEventListener("resize",r),()=>{var i;window.removeEventListener("resize",r),(i=window.visualViewport)==null||i.removeEventListener("resize",r)}},[])}function cx(){const[r,n]=Be.useState(null),i=Ku(),a=typeof navigator<"u"&&!!navigator.clipboard&&typeof navigator.clipboard.writeText=="function",o=Be.useCallback(async p=>{if(!a)return i.error("Clipboard not supported in this browser"),!1;try{return await navigator.clipboard.writeText(p),n(p),!0}catch(y){return console.error("Failed to copy to clipboard:",y),i.error("Failed to copy to clipboard"),!1}},[a,i]),u=Be.useCallback(async()=>{if(!a)return i.error("Clipboard not supported in this browser"),null;try{return await navigator.clipboard.readText()}catch(p){return console.error("Failed to read from clipboard:",p),null}},[a,i]);return{copiedText:r,copy:o,paste:u,isSupported:a}}function KO(r,n,i){var a,o;typeof r=="function"?(a=n||[],o=i):(a=[],o=n);var u=au.useRef({hasResult:!1,result:o,error:null}),p=au.useReducer(function(m){return m+1},0);p[0];var y=p[1],g=au.useMemo(function(){var m=typeof r=="function"?r():r;if(!m||typeof m.subscribe!="function")throw r===m?new TypeError("Given argument to useObservable() was neither a valid observable nor a function."):new TypeError("Observable factory given to useObservable() did not return a valid observable.");if(!u.current.hasResult&&typeof window<"u"&&(typeof m.hasValue!="function"||m.hasValue()))if(typeof m.getValue=="function")u.current.result=m.getValue(),u.current.hasResult=!0;else{var b=m.subscribe(function(x){u.current.result=x,u.current.hasResult=!0});typeof b=="function"?b():b.unsubscribe()}return m},a);if(au.useDebugValue(u.current.result),au.useEffect(function(){var m=g.subscribe(function(b){var x=u.current;(x.error!==null||x.result!==b)&&(x.error=null,x.result=b,x.hasResult=!0,y())},function(b){var x=u.current;x.error!==b&&(x.error=b,y())});return typeof m=="function"?m:m.unsubscribe.bind(m)},a),u.current.error)throw u.current.error;return u.current.result}function YO(r,n,i){return KO(function(){return dt.liveQuery(r)},n||[],i)}typeof FinalizationRegistry<"u"&&new FinalizationRegistry(function(r){var n=dt.DexieYProvider;n&&n.release(r)});function fx(r,n,i){const[a,o]=Be.useState(null),u=YO(async()=>{try{const g=await Ii.getItemsByFilter(r,n);return o(null),g}catch(g){const m=g instanceof Error?g:new Error(String(g));return o(m),[]}},[r,n,i],[]),p=u===void 0,y=Be.useCallback(()=>{},[]);return{items:u??[],isLoading:p,error:a,refresh:y}}function VO(){const{deviceProfile:r,navigate:n}=$i(),{items:i}=fx("new",r.category,0),a=Be.useRef(i.length);Be.useEffect(()=>{if(!r.enableBrowserNotifications||!("Notification"in window)||Notification.permission!=="granted")return;const o=i.length,u=a.current;if(o>u&&u!==-1){const p=o-u,y=p===1?"New item received":`${p} new items received`,g=new Notification(y,{body:"Click to view in your inbox",icon:"/favicon.ico",tag:"handoff-new-item",requireInteraction:!1});g.onclick=()=>{window.focus(),n("inbox"),g.close()}}a.current=o},[i.length,r.enableBrowserNotifications,n])}function dx(){const[r,n]=Be.useState({status:Ii.isCloudEnabled?"connecting":"local-only",isCloudEnabled:Ii.isCloudEnabled,lastSyncTime:null,error:null});return Be.useEffect(()=>{if(!Ii.isCloudEnabled)return;const i=w0.cloud.webSocketStatus.subscribe({next:o=>{let u;switch(o){case"connecting":u="connecting";break;case"connected":u="connected";break;case"disconnected":u="disconnected";break;case"error":u="error";break;default:u="disconnected"}n(p=>({...p,status:u,error:null}))},error:o=>{n(u=>({...u,status:"error",error:(o==null?void 0:o.message)||"Connection error"}))}}),a=w0.cloud.syncState.subscribe({next:o=>{o.phase==="pushing"||o.phase==="pulling"?n(u=>({...u,status:"syncing"})):o.phase==="in-sync"&&n(u=>({...u,status:"connected",lastSyncTime:Date.now()}))}});return()=>{i.unsubscribe(),a.unsubscribe()}},[]),r}function IO(r){switch(r){case"local-only":return{color:"text-gray-500",icon:"cloud_off",title:"Local-only mode"};case"connecting":return{color:"text-yellow-400 animate-pulse",icon:"cloud_sync",title:"Connecting..."};case"connected":return{color:"text-green-400",icon:"cloud_done",title:"Synced"};case"syncing":return{color:"text-blue-400 animate-pulse",icon:"sync",title:"Syncing..."};case"disconnected":return{color:"text-orange-400",icon:"cloud_off",title:"Disconnected"};case"error":return{color:"text-red-400",icon:"cloud_off",title:"Sync error"};default:return{color:"text-gray-500",icon:"help",title:"Unknown"}}}function Iy({title:r,subtitle:n,showBack:i,onBack:a,actions:o,showSyncStatus:u=!0}){const{navigate:p}=$i(),y=dx(),g=()=>{a?a():p("inbox")},m=IO(y.status);return T.jsx("header",{className:"fixed top-0 left-0 right-0 z-50 glass-card border-b border-white/10",style:{height:"var(--nav-height)"},children:T.jsxs("div",{className:"flex items-center justify-between h-full px-4 max-w-2xl mx-auto",children:[T.jsxs("div",{className:"flex items-center gap-3",children:[i&&T.jsx("button",{onClick:g,className:"p-2 -ml-2 rounded-lg hover:bg-white/10 transition-colors",children:T.jsx("span",{className:"material-symbols-outlined",children:"arrow_back"})}),T.jsxs("div",{children:[T.jsx("h1",{className:"text-lg font-semibold",children:r}),n&&T.jsx("p",{className:"text-xs text-gray-400",children:n})]})]}),T.jsxs("div",{className:"flex items-center gap-2",children:[u&&T.jsx("span",{className:`material-symbols-outlined text-xl ${m.color}`,title:m.title,children:m.icon}),o]})]})})}const hx=1e5,GO=16,XO=12,QO=256,px=1;function Rp(r){const n=new Uint8Array(r);let i="";for(let a=0;a<n.byteLength;a++)i+=String.fromCharCode(n[a]);return btoa(i)}function zp(r){const n=atob(r),i=new Uint8Array(n.length);for(let a=0;a<n.length;a++)i[a]=n.charCodeAt(a);return i.buffer}async function yx(r,n){const i=new TextEncoder,a=await crypto.subtle.importKey("raw",i.encode(r),"PBKDF2",!1,["deriveKey"]);return crypto.subtle.deriveKey({name:"PBKDF2",salt:n.buffer,iterations:hx,hash:"SHA-256"},a,{name:"AES-GCM",length:QO},!1,["encrypt","decrypt"])}async function ZO(r,n){const i=crypto.getRandomValues(new Uint8Array(GO)),a=crypto.getRandomValues(new Uint8Array(XO)),o=await yx(n,i),p=new TextEncoder().encode(JSON.stringify(r)),y=await crypto.subtle.encrypt({name:"AES-GCM",iv:a},o,p);return{ciphertext:Rp(y),crypto:{alg:"AES-GCM",keyDerivation:"PBKDF2",salt:Rp(i.buffer),iv:Rp(a.buffer),iterations:hx,version:px}}}async function $O(r,n){const{ciphertext:i,crypto:a}=r;if(a.version!==px)throw new Error(`Unsupported encryption version: ${a.version}`);const o=new Uint8Array(zp(a.salt)),u=new Uint8Array(zp(a.iv)),p=await yx(n,o),y=zp(i);try{const g=await crypto.subtle.decrypt({name:"AES-GCM",iv:u},p,y),m=new TextDecoder;return JSON.parse(m.decode(g))}catch{throw new Error("Decryption failed. Incorrect passphrase or corrupted data.")}}function JO({item:r,onStatusChange:n}){const{deviceProfile:i,sessionPassphrase:a,setSessionPassphrase:o}=$i(),u=Ku(),p=Vy(),{copy:y}=cx(),[g,m]=Be.useState(!1),[b,x]=Be.useState(null),[S,A]=Be.useState(!1),[C,U]=Be.useState(""),[X,ie]=Be.useState(!1),W=r.isSensitive&&"ciphertext"in r.content,z=b??(W?null:r.content),fe=async ke=>{if(W){m(!0);try{const qe=await $O(r.content,ke);x(qe),A(!1),i.rememberPassphrase==="session"&&o(ke),u.success("Decrypted successfully")}catch{u.error("Incorrect passphrase")}finally{m(!1)}}},xe=async()=>{if(W&&!b){a?await fe(a):A(!0);return}r.status==="new"&&(await p.updateItemStatus(r.id,"opened"),n==null||n()),z!=null&&z.url?window.open(z.url,"_blank","noopener,noreferrer"):z!=null&&z.text&&ie(!X)},ye=async()=>{if(W&&!b){a?await fe(a):A(!0);return}const ke=(z==null?void 0:z.url)??(z==null?void 0:z.text)??"";ke&&await y(ke)&&u.success("Copied to clipboard")},pe=async()=>{await p.updateItemStatus(r.id,"done"),n==null||n(),u.success("Marked as done")},Le=async()=>{await p.updateItemStatus(r.id,"archived"),n==null||n(),u.success("Archived")},Re=async()=>{await p.updateItemStatus(r.id,"done"),n==null||n(),u.success("Unarchived")},Pe=()=>W&&!b?" Encrypted content":z!=null&&z.url?sx(z.url):z!=null&&z.text?ox(z.text):"",de=ke=>{const qe=new Date(ke),He=new Date().getTime()-qe.getTime(),K=Math.floor(He/(1e3*60*60*24));return K===0?qe.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):K===1?"Yesterday":K<7?qe.toLocaleDateString([],{weekday:"short"}):qe.toLocaleDateString([],{month:"short",day:"numeric"})};return T.jsx("div",{className:"glass-card rounded-xl overflow-hidden animate-fade-in-up",children:T.jsxs("div",{className:"p-4",children:[T.jsxs("div",{className:"flex items-start justify-between gap-3 mb-2",children:[T.jsxs("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[T.jsx("div",{className:"flex-shrink-0",children:r.kind==="url"&&(z!=null&&z.url)?T.jsx("img",{src:UO(z.url),alt:"",className:"w-8 h-8 rounded",onError:ke=>{ke.target.style.display="none"}}):T.jsx("div",{className:`w-8 h-8 rounded flex items-center justify-center ${r.kind==="url"?"kind-url":"kind-text"}`,children:T.jsx("span",{className:"material-symbols-outlined text-sm",children:r.kind==="url"?"link":"notes"})})}),T.jsxs("div",{className:"min-w-0 flex-1",children:[T.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.kind==="url"&&(z==null?void 0:z.url)&&T.jsx("span",{className:"text-sm font-medium truncate",children:NO(z.url)}),r.title&&T.jsx("span",{className:"text-sm font-medium truncate",children:r.title})]}),T.jsx("p",{className:"text-sm text-gray-400 truncate",children:Pe()})]})]}),T.jsx("span",{className:"text-xs text-gray-500 flex-shrink-0",children:de(r.createdAt)})]}),T.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[T.jsx("span",{className:`status-badge status-${r.status}`,children:r.status}),T.jsxs("span",{className:`status-badge category-${r.targetCategory}`,children:[r.targetCategory==="work"?"":r.targetCategory==="private"?"":""," ",r.targetCategory]}),r.isSensitive&&T.jsx("span",{className:"status-badge encrypted-badge",children:" encrypted"}),T.jsxs("span",{className:"text-xs text-gray-500",children:["from ",r.senderDeviceName]})]}),X&&(z==null?void 0:z.text)&&T.jsx("div",{className:"mb-3 p-3 bg-black/20 rounded-lg",children:T.jsx("p",{className:"text-sm whitespace-pre-wrap break-words",children:z.text})}),S&&T.jsxs("div",{className:"mb-3 p-3 bg-black/20 rounded-lg",children:[T.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Enter passphrase to decrypt"}),T.jsxs("div",{className:"flex gap-2",children:[T.jsx("input",{type:"password",value:C,onChange:ke=>U(ke.target.value),placeholder:"Passphrase",className:"flex-1 px-3 py-2 bg-white/10 rounded-lg text-sm border border-white/10 focus:border-primary outline-none",onKeyDown:ke=>{ke.key==="Enter"&&fe(C)}}),T.jsx("button",{onClick:()=>fe(C),disabled:g||!C,className:"px-4 py-2 bg-primary rounded-lg text-sm font-medium disabled:opacity-50",children:g?"Decrypting...":"Unlock"})]})]}),T.jsxs("div",{className:"flex items-center gap-2",children:[T.jsxs("button",{onClick:xe,className:"flex items-center gap-1.5 px-3 py-1.5 bg-primary/20 hover:bg-primary/30 text-primary rounded-lg text-sm transition-colors",children:[T.jsx("span",{className:"material-symbols-outlined text-lg",children:r.kind==="url"?"open_in_new":"visibility"}),r.kind==="url"?"Open":X?"Hide":"View"]}),T.jsxs("button",{onClick:ye,className:"flex items-center gap-1.5 px-3 py-1.5 bg-white/10 hover:bg-white/20 rounded-lg text-sm transition-colors",children:[T.jsx("span",{className:"material-symbols-outlined text-lg",children:"content_copy"}),"Copy"]}),r.status!=="done"&&r.status!=="archived"&&T.jsxs("button",{onClick:pe,className:"flex items-center gap-1.5 px-3 py-1.5 bg-green-500/20 hover:bg-green-500/30 text-green-400 rounded-lg text-sm transition-colors",children:[T.jsx("span",{className:"material-symbols-outlined text-lg",children:"check"}),"Done"]}),r.status!=="archived"?T.jsx("button",{onClick:Le,className:"p-1.5 bg-white/10 hover:bg-white/20 rounded-lg transition-colors",title:"Archive",children:T.jsx("span",{className:"material-symbols-outlined text-lg",children:"archive"})}):T.jsx("button",{onClick:Re,className:"p-1.5 bg-white/10 hover:bg-white/20 rounded-lg transition-colors",title:"Unarchive",children:T.jsx("span",{className:"material-symbols-outlined text-lg",children:"unarchive"})})]})]})})}const FO=[{id:"new",label:"New"},{id:"active",label:"Active"},{id:"archived",label:"Archived"},{id:"all",label:"All"}];function WO({value:r,onChange:n,counts:i}){return T.jsx("div",{className:"flex gap-1 p-1 bg-white/5 rounded-lg",children:FO.map(a=>{const o=r===a.id,u=i==null?void 0:i[a.id];return T.jsxs("button",{onClick:()=>n(a.id),className:`
                            flex items-center gap-1.5 px-3 py-1.5 rounded-md text-sm font-medium
                            transition-colors duration-150
                            ${o?"bg-primary text-white":"text-gray-400 hover:text-white hover:bg-white/10"}
                        `,children:[a.label,u!==void 0&&u>0&&T.jsx("span",{className:`
                                px-1.5 py-0.5 text-xs rounded-full
                                ${o?"bg-white/20":"bg-white/10"}
                            `,children:u})]},a.id)})})}const PO=[{id:"work",label:"Work",emoji:"",color:"category-work"},{id:"private",label:"Private",emoji:"",color:"category-private"},{id:"any",label:"Any",emoji:"",color:"category-any"}];function Vf({value:r,onChange:n,label:i}){return T.jsxs("div",{children:[i&&T.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:i}),T.jsx("div",{className:"flex gap-2",children:PO.map(a=>{const o=r===a.id;return T.jsxs("button",{onClick:()=>n(a.id),className:`
                                flex items-center gap-2 px-4 py-2 rounded-lg border
                                transition-all duration-150
                                ${o?`${a.color} border-current`:"bg-white/5 border-white/10 text-gray-400 hover:bg-white/10"}
                            `,children:[T.jsx("span",{children:a.emoji}),T.jsx("span",{className:"text-sm font-medium",children:a.label})]},a.id)})})]})}function ju({size:r="md",text:n}){const i={sm:"w-4 h-4",md:"w-8 h-8",lg:"w-12 h-12"};return T.jsxs("div",{className:"flex flex-col items-center justify-center gap-3",children:[T.jsx("div",{className:`${i[r]} animate-spin`,children:T.jsxs("svg",{className:"w-full h-full text-primary",viewBox:"0 0 24 24",fill:"none",children:[T.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"3"}),T.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"})]})}),n&&T.jsx("p",{className:"text-sm text-gray-400",children:n})]})}function eT({icon:r,title:n,description:i,action:a}){return T.jsxs("div",{className:"flex flex-col items-center justify-center py-16 px-4 text-center",children:[T.jsx("div",{className:"w-16 h-16 rounded-full bg-white/5 flex items-center justify-center mb-4",children:T.jsx("span",{className:"material-symbols-outlined text-3xl text-gray-400",children:r})}),T.jsx("h3",{className:"text-lg font-medium mb-2",children:n}),i&&T.jsx("p",{className:"text-sm text-gray-400 max-w-xs mb-4",children:i}),a&&T.jsx("button",{onClick:a.onClick,className:"px-4 py-2 bg-primary rounded-lg text-sm font-medium hover:bg-primary-dark transition-colors",children:a.label})]})}function tT(){const{deviceProfile:r,inboxFilter:n,setInboxFilter:i,refreshTrigger:a,navigate:o}=$i(),[u,p]=Be.useState(""),{items:y,isLoading:g}=fx(n,r.category,a),m=Be.useMemo(()=>({new:y.filter(S=>S.status==="new").length,active:y.filter(S=>["new","opened","done"].includes(S.status)).length,archived:y.filter(S=>S.status==="archived").length,all:y.length}),[y]),b=Be.useMemo(()=>{let S=y;switch(n){case"new":S=y.filter(A=>A.status==="new");break;case"active":S=y.filter(A=>["new","opened","done"].includes(A.status));break;case"archived":S=y.filter(A=>A.status==="archived");break}if(u.trim()){const A=u.toLowerCase();S=S.filter(C=>{var U;return!!(C.url&&C.url.toLowerCase().includes(A)||C.text&&C.text.toLowerCase().includes(A)||C.preview&&C.preview.toLowerCase().includes(A)||(U=C.source)!=null&&U.toLowerCase().includes(A))})}return S},[y,n,u]),x=()=>{if(u.trim())return{icon:"search_off",title:"No results found",description:`No items match "${u}". Try a different search term.`};switch(n){case"new":return{icon:"mark_email_read",title:"All caught up!",description:"No new items waiting for you."};case"active":return{icon:"inbox",title:"Inbox is empty",description:"Send something from another device to get started."};case"archived":return{icon:"archive",title:"No archived items",description:"Items you archive will appear here."};default:return{icon:"inbox",title:"No items yet",description:"Start by sending your first handoff."}}};return T.jsxs("div",{className:"min-h-[var(--app-vh)] bg-background-dark",children:[T.jsx(Iy,{title:"Inbox",subtitle:`${r.deviceName}  ${r.category}`}),T.jsx("main",{className:"pt-[var(--nav-height)] pb-[calc(var(--bottom-nav-height)+16px)] px-4",children:T.jsxs("div",{className:"max-w-2xl mx-auto",children:[T.jsx("div",{className:"py-4 sticky top-[var(--nav-height)] z-10 bg-background-dark",children:T.jsx(WO,{value:n,onChange:i,counts:m})}),T.jsx("div",{className:"pb-4",children:T.jsxs("div",{className:"relative",children:[T.jsx("span",{className:"material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-text-secondary text-xl",children:"search"}),T.jsx("input",{type:"text",placeholder:"Search items...",value:u,onChange:S=>p(S.target.value),className:"w-full pl-11 pr-10 py-2.5 bg-card-dark border border-border-color rounded-lg text-text-primary placeholder:text-text-secondary focus:outline-none focus:border-accent transition-colors"}),u&&T.jsx("button",{onClick:()=>p(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-text-secondary hover:text-text-primary transition-colors","aria-label":"Clear search",children:T.jsx("span",{className:"material-symbols-outlined text-xl",children:"close"})})]})}),g?T.jsx("div",{className:"py-16",children:T.jsx(ju,{text:"Loading items..."})}):b.length===0?T.jsx(eT,{...x(),action:{label:"Send something",onClick:()=>o("send")}}):T.jsx("div",{className:"space-y-3 pb-4",children:b.map(S=>T.jsx(JO,{item:S},S.id))})]})})]})}function _0(){const{deviceProfile:r,sharePayload:n,clearSharePayload:i,navigate:a,refreshItems:o,sessionPassphrase:u,setSessionPassphrase:p}=$i(),y=Ku(),g=Vy(),{paste:m}=cx(),[b,x]=Be.useState(""),[S,A]=Be.useState(r.defaultTargetCategory||"any"),[C,U]=Be.useState(!1),[X,ie]=Be.useState(""),[W,z]=Be.useState(""),[fe,xe]=Be.useState(!1),[ye,pe]=Be.useState("url");Be.useEffect(()=>{n&&(x(n.content),n.category&&A(n.category),n.sensitive&&U(!0))},[n]),Be.useEffect(()=>{b.trim()&&pe(jO(b))},[b]);const Le=r.workMode&&ye==="text"&&b.trim(),Re=async()=>{const de=await m();de?x(de):y.warning("Could not read clipboard. Try pasting manually.")},Pe=async()=>{if(!b.trim()){y.error("Please enter content to send");return}if(Le){y.error("Work Mode is enabled. Only URLs are allowed.");return}if(ye==="url"&&!ax(b.trim())){y.error("Please enter a valid URL (starting with http:// or https://)");return}if(C){if(!X){y.error("Please enter a passphrase for encryption");return}if(X!==W){y.error("Passphrases do not match");return}if(X.length<4){y.error("Passphrase must be at least 4 characters");return}}xe(!0);try{const de=ye==="url"?{url:b.trim()}:{text:b.trim()};let ke=de;C&&(ke=await ZO(de,X),r.rememberPassphrase==="session"&&p(X));const qe=ye==="url"?sx(b.trim()):ox(b.trim());await g.addItem({senderDeviceId:r.deviceId,senderDeviceName:r.deviceName,senderCategory:r.category,targetCategory:S,kind:ye,status:"new",isSensitive:C,content:ke,preview:qe,title:n==null?void 0:n.title}),x(""),ie(""),z(""),U(!1),i(),o(),y.success("Sent successfully!"),a("inbox")}catch(de){console.error("Failed to send:",de),y.error("Failed to send. Please try again.")}finally{xe(!1)}};return T.jsxs("div",{className:"min-h-[var(--app-vh)] bg-background-dark",children:[T.jsx(Iy,{title:"Send",subtitle:n?"From share":void 0}),T.jsx("main",{className:"pt-[var(--nav-height)] pb-[calc(var(--bottom-nav-height)+16px)] px-4",children:T.jsxs("div",{className:"max-w-2xl mx-auto py-6 space-y-6",children:[T.jsxs("button",{onClick:Re,className:"w-full flex items-center justify-center gap-3 px-6 py-4 bg-primary/20 hover:bg-primary/30 border-2 border-dashed border-primary/50 rounded-xl transition-colors",children:[T.jsx("span",{className:"material-symbols-outlined text-2xl text-primary",children:"content_paste"}),T.jsx("span",{className:"text-lg font-medium text-primary",children:"Paste from Clipboard"})]}),T.jsxs("div",{className:"flex items-center gap-4",children:[T.jsx("div",{className:"flex-1 h-px bg-white/10"}),T.jsx("span",{className:"text-sm text-gray-500",children:"or type/paste below"}),T.jsx("div",{className:"flex-1 h-px bg-white/10"})]}),T.jsxs("div",{children:[T.jsxs("label",{className:"block text-sm text-gray-400 mb-2",children:["Content",T.jsx("span",{className:"ml-2 text-xs",children:ye==="url"?" URL detected":" Text detected"})]}),T.jsx("textarea",{value:b,onChange:de=>x(de.target.value),placeholder:r.workMode?"Enter a URL...":"Enter URL or text...",rows:4,className:"w-full px-4 py-3 bg-white/5 rounded-xl text-white placeholder-gray-500 border border-white/10 focus:border-primary outline-none resize-none"}),Le&&T.jsxs("p",{className:"mt-2 text-sm text-red-400 flex items-center gap-2",children:[T.jsx("span",{className:"material-symbols-outlined text-lg",children:"warning"}),"Work Mode is enabled. Only URLs are allowed."]})]}),T.jsx(Vf,{label:"Target devices",value:S,onChange:A}),T.jsxs("div",{className:"glass-card rounded-xl p-4",children:[T.jsxs("label",{className:"flex items-center justify-between cursor-pointer",children:[T.jsxs("div",{className:"flex items-center gap-3",children:[T.jsx("span",{className:"material-symbols-outlined text-rose-400",children:"lock"}),T.jsxs("div",{children:[T.jsx("span",{className:"font-medium",children:"Sensitive Mode"}),T.jsx("p",{className:"text-sm text-gray-400",children:"Encrypt with a passphrase (AES-256-GCM)"})]})]}),T.jsxs("div",{className:"relative",children:[T.jsx("input",{type:"checkbox",checked:C,onChange:de=>U(de.target.checked),className:"sr-only"}),T.jsx("div",{className:`w-12 h-6 rounded-full transition-colors ${C?"bg-rose-500":"bg-white/20"}`,children:T.jsx("div",{className:`w-5 h-5 rounded-full bg-white shadow transform transition-transform ${C?"translate-x-6":"translate-x-0.5"} mt-0.5`})})]})]}),C&&T.jsxs("div",{className:"mt-4 space-y-3",children:[T.jsx("input",{type:"password",value:X,onChange:de=>ie(de.target.value),placeholder:"Enter passphrase",className:"w-full px-4 py-2 bg-white/10 rounded-lg text-white placeholder-gray-500 border border-white/10 focus:border-rose-500 outline-none"}),T.jsx("input",{type:"password",value:W,onChange:de=>z(de.target.value),placeholder:"Confirm passphrase",className:"w-full px-4 py-2 bg-white/10 rounded-lg text-white placeholder-gray-500 border border-white/10 focus:border-rose-500 outline-none"}),X&&W&&X!==W&&T.jsx("p",{className:"text-sm text-red-400",children:"Passphrases do not match"})]})]}),T.jsx("button",{onClick:Pe,disabled:fe||!b.trim()||!!Le,className:"w-full flex items-center justify-center gap-3 px-6 py-4 bg-primary hover:bg-primary-dark rounded-xl font-medium text-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:fe?T.jsx(ju,{size:"sm"}):T.jsxs(T.Fragment,{children:[T.jsx("span",{className:"material-symbols-outlined",children:"send"}),"Send"]})})]})})]})}function nT(r){switch(r){case"local-only":return{color:"bg-gray-500",label:"Local-only mode",icon:"cloud_off"};case"connecting":return{color:"bg-yellow-500",label:"Connecting...",icon:"cloud_sync"};case"connected":return{color:"bg-green-500",label:"Connected",icon:"cloud_done"};case"syncing":return{color:"bg-blue-500",label:"Syncing...",icon:"sync"};case"disconnected":return{color:"bg-orange-500",label:"Disconnected",icon:"cloud_off"};case"error":return{color:"bg-red-500",label:"Sync error",icon:"cloud_off"};default:return{color:"bg-gray-500",label:"Unknown",icon:"help"}}}const x0=[{id:"device",label:"Device",icon:"devices"},{id:"behavior",label:"Behavior",icon:"tune"},{id:"data",label:"Data",icon:"storage"},{id:"about",label:"About",icon:"info"}];function rT(){const{deviceProfile:r,updateDeviceProfile:n}=$i(),i=Ku(),a=Vy(),o=dx(),[u,p]=Be.useState("device"),[y,g]=Be.useState(!1),m=nT(o.status),b=async()=>{if(confirm("Are you sure you want to delete all archived items? This cannot be undone.")){g(!0);try{const S=await a.clearArchived();i.success(`Cleared ${S} archived items`)}catch{i.error("Failed to clear archived items")}finally{g(!1)}}},x=async()=>{try{const S=await a.runRetentionCleanup(r.retentionDays);i.success(`Archived ${S} old items`)}catch{i.error("Failed to run retention cleanup")}};return T.jsxs("div",{className:"min-h-[var(--app-vh)] bg-background-dark",children:[T.jsx(Iy,{title:"Settings"}),T.jsx("main",{className:"pt-[var(--nav-height)] pb-[calc(var(--bottom-nav-height)+16px)] px-4",children:T.jsxs("div",{className:"max-w-2xl mx-auto py-4",children:[T.jsxs("div",{className:"flex gap-4",children:[T.jsx("nav",{className:"hidden sm:block w-48 flex-shrink-0",children:T.jsx("div",{className:"sticky top-[calc(var(--nav-height)+16px)] space-y-1",children:x0.map(S=>T.jsxs("button",{onClick:()=>p(S.id),className:`
                                            w-full flex items-center gap-3 px-3 py-2 rounded-lg text-left
                                            transition-colors duration-150
                                            ${u===S.id?"bg-primary/20 text-primary":"text-gray-400 hover:text-white hover:bg-white/5"}
                                        `,children:[T.jsx("span",{className:"material-symbols-outlined text-lg",children:S.icon}),T.jsx("span",{className:"text-sm font-medium",children:S.label})]},S.id))})}),T.jsx("div",{className:"sm:hidden w-full mb-4 overflow-x-auto",children:T.jsx("div",{className:"flex gap-1 p-1 bg-white/5 rounded-lg w-max min-w-full",children:x0.map(S=>T.jsxs("button",{onClick:()=>p(S.id),className:`
                                            flex items-center gap-2 px-3 py-2 rounded-md text-sm
                                            ${u===S.id?"bg-primary text-white":"text-gray-400"}
                                        `,children:[T.jsx("span",{className:"material-symbols-outlined text-lg",children:S.icon}),S.label]},S.id))})})]}),T.jsxs("div",{className:"flex-1 space-y-6",children:[u==="device"&&T.jsxs("div",{className:"space-y-6",children:[T.jsxs("div",{className:"glass-card rounded-xl p-4 space-y-4",children:[T.jsxs("h3",{className:"font-medium flex items-center gap-2",children:[T.jsx("span",{className:"material-symbols-outlined",children:"badge"}),"Device Name"]}),T.jsx("input",{type:"text",value:r.deviceName,onChange:S=>n({deviceName:S.target.value}),placeholder:"My Device",className:"w-full px-4 py-2 bg-white/10 rounded-lg border border-white/10 focus:border-primary outline-none"}),T.jsx("p",{className:"text-sm text-gray-400",children:"This name will be shown when you send items to other devices."})]}),T.jsxs("div",{className:"glass-card rounded-xl p-4 space-y-4",children:[T.jsxs("h3",{className:"font-medium flex items-center gap-2",children:[T.jsx("span",{className:"material-symbols-outlined",children:"category"}),"Device Category"]}),T.jsx(Vf,{value:r.category,onChange:S=>n({category:S})}),T.jsx("p",{className:"text-sm text-gray-400",children:"Items targeted to a specific category will only appear on matching devices."})]}),T.jsxs("div",{className:"glass-card rounded-xl p-4 space-y-4",children:[T.jsxs("h3",{className:"font-medium flex items-center gap-2",children:[T.jsx("span",{className:"material-symbols-outlined",children:"share"}),"Default Target"]}),T.jsx(Vf,{value:r.defaultTargetCategory,onChange:S=>n({defaultTargetCategory:S})}),T.jsx("p",{className:"text-sm text-gray-400",children:"Default target category when sending new items."})]})]}),u==="behavior"&&T.jsxs("div",{className:"space-y-6",children:[T.jsx("div",{className:"glass-card rounded-xl p-4",children:T.jsxs("label",{className:"flex items-center justify-between cursor-pointer",children:[T.jsxs("div",{className:"flex items-center gap-3",children:[T.jsx("span",{className:"material-symbols-outlined text-amber-400",children:"work"}),T.jsxs("div",{children:[T.jsx("span",{className:"font-medium",children:"Work Mode"}),T.jsx("p",{className:"text-sm text-gray-400",children:"Only allow sending URLs, block plain text"})]})]}),T.jsxs("div",{className:"relative",children:[T.jsx("input",{type:"checkbox",checked:r.workMode,onChange:S=>n({workMode:S.target.checked}),className:"sr-only"}),T.jsx("div",{className:`w-12 h-6 rounded-full transition-colors ${r.workMode?"bg-amber-500":"bg-white/20"}`,children:T.jsx("div",{className:`w-5 h-5 rounded-full bg-white shadow transform transition-transform ${r.workMode?"translate-x-6":"translate-x-0.5"} mt-0.5`})})]})]})}),T.jsx("div",{className:"glass-card rounded-xl p-4",children:T.jsxs("label",{className:"flex items-center justify-between cursor-pointer",children:[T.jsxs("div",{className:"flex items-center gap-3",children:[T.jsx("span",{className:"material-symbols-outlined text-blue-400",children:"notifications_active"}),T.jsxs("div",{children:[T.jsx("span",{className:"font-medium",children:"Browser Notifications"}),T.jsx("p",{className:"text-sm text-gray-400",children:"Get notified when new items arrive"})]})]}),T.jsxs("div",{className:"relative",children:[T.jsx("input",{type:"checkbox",checked:r.enableBrowserNotifications,onChange:async S=>{S.target.checked&&"Notification"in window?await Notification.requestPermission()==="granted"?(n({enableBrowserNotifications:!0}),i.success("Browser notifications enabled")):i.warning("Notification permission denied"):(n({enableBrowserNotifications:!1}),i.info("Browser notifications disabled"))},className:"sr-only"}),T.jsx("div",{className:`w-12 h-6 rounded-full transition-colors ${r.enableBrowserNotifications?"bg-blue-500":"bg-white/20"}`,children:T.jsx("div",{className:`w-5 h-5 rounded-full bg-white shadow transform transition-transform ${r.enableBrowserNotifications?"translate-x-6":"translate-x-0.5"} mt-0.5`})})]})]})}),T.jsxs("div",{className:"glass-card rounded-xl p-4 space-y-4",children:[T.jsxs("h3",{className:"font-medium flex items-center gap-2",children:[T.jsx("span",{className:"material-symbols-outlined",children:"schedule"}),"Auto-Archive Retention"]}),T.jsxs("div",{className:"flex items-center gap-4",children:[T.jsx("input",{type:"range",min:"1",max:"30",value:r.retentionDays,onChange:S=>n({retentionDays:Number(S.target.value)}),className:"flex-1"}),T.jsxs("span",{className:"text-lg font-medium w-20 text-right",children:[r.retentionDays," days"]})]}),T.jsx("p",{className:"text-sm text-gray-400",children:"Items older than this will be automatically archived."})]}),T.jsxs("div",{className:"glass-card rounded-xl p-4 space-y-4",children:[T.jsxs("h3",{className:"font-medium flex items-center gap-2",children:[T.jsx("span",{className:"material-symbols-outlined",children:"key"}),"Remember Passphrase"]}),T.jsxs("select",{value:r.rememberPassphrase,onChange:S=>n({rememberPassphrase:S.target.value}),className:"w-full px-4 py-2 bg-white/10 rounded-lg border border-white/10 focus:border-primary outline-none",children:[T.jsx("option",{value:"off",children:"Never (always ask)"}),T.jsx("option",{value:"session",children:"For this session only"})]}),T.jsx("p",{className:"text-sm text-gray-400",children:"Whether to remember the passphrase for encrypted items."})]})]}),u==="data"&&T.jsxs("div",{className:"space-y-6",children:[T.jsxs("div",{className:"glass-card rounded-xl p-4 space-y-4",children:[T.jsxs("h3",{className:"font-medium flex items-center gap-2",children:[T.jsx("span",{className:"material-symbols-outlined",children:"auto_delete"}),"Run Retention Now"]}),T.jsxs("p",{className:"text-sm text-gray-400",children:["Archive items older than ",r.retentionDays," days."]}),T.jsx("button",{onClick:x,className:"px-4 py-2 bg-primary/20 text-primary rounded-lg hover:bg-primary/30 transition-colors",children:"Run Cleanup"})]}),T.jsxs("div",{className:"glass-card rounded-xl p-4 space-y-4",children:[T.jsxs("h3",{className:"font-medium flex items-center gap-2 text-red-400",children:[T.jsx("span",{className:"material-symbols-outlined",children:"delete_forever"}),"Clear Archived Items"]}),T.jsx("p",{className:"text-sm text-gray-400",children:"Permanently delete all archived items. This cannot be undone."}),T.jsx("button",{onClick:b,disabled:y,className:"px-4 py-2 bg-red-500/20 text-red-400 rounded-lg hover:bg-red-500/30 transition-colors disabled:opacity-50",children:y?"Clearing...":"Clear Archived"})]}),T.jsxs("div",{className:"glass-card rounded-xl p-4 space-y-4",children:[T.jsxs("h3",{className:"font-medium flex items-center gap-2",children:[T.jsx("span",{className:"material-symbols-outlined",children:"cloud_sync"}),"Sync Status"]}),T.jsxs("div",{className:"flex items-center gap-3",children:[T.jsx("span",{className:`w-3 h-3 rounded-full ${m.color} ${o.status==="syncing"||o.status==="connecting"?"animate-pulse":""}`}),T.jsx("span",{className:"material-symbols-outlined text-lg text-gray-400",children:m.icon}),T.jsx("span",{className:"text-gray-300",children:m.label})]}),o.isCloudEnabled?T.jsxs("div",{className:"space-y-2",children:[T.jsx("p",{className:"text-sm text-gray-400",children:"Connected to Dexie Cloud. Items sync automatically across devices."}),o.lastSyncTime&&T.jsxs("p",{className:"text-xs text-gray-500",children:["Last synced: ",new Date(o.lastSyncTime).toLocaleTimeString()]}),o.error&&T.jsxs("p",{className:"text-xs text-red-400",children:["Error: ",o.error]})]}):T.jsxs("p",{className:"text-sm text-gray-400",children:["Data is stored locally on this device. Configure"," ",T.jsx("code",{className:"text-xs bg-black/30 px-1 rounded",children:"VITE_DEXIE_CLOUD_URL"})," ","environment variable to enable cross-device sync."]})]})]}),u==="about"&&T.jsxs("div",{className:"space-y-6",children:[T.jsxs("div",{className:"glass-card rounded-xl p-6 text-center",children:[T.jsx("div",{className:"w-20 h-20 rounded-2xl bg-primary/20 flex items-center justify-center mx-auto mb-4",children:T.jsx("span",{className:"material-symbols-outlined text-4xl text-primary",children:"swap_horiz"})}),T.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Handoff Lite"}),T.jsx("p",{className:"text-gray-400 mb-4",children:"Version 0.1.0"}),T.jsx("p",{className:"text-sm text-gray-400 max-w-md mx-auto",children:"A minimal, cross-device inbox for URLs and text with device targeting and optional end-to-end encryption."})]}),T.jsxs("div",{className:"glass-card rounded-xl p-4 space-y-3",children:[T.jsx("h3",{className:"font-medium",children:"Features"}),T.jsxs("ul",{className:"space-y-2 text-sm text-gray-400",children:[T.jsxs("li",{className:"flex items-center gap-2",children:[T.jsx("span",{className:"material-symbols-outlined text-green-400 text-lg",children:"check_circle"}),"Send URLs and text between devices"]}),T.jsxs("li",{className:"flex items-center gap-2",children:[T.jsx("span",{className:"material-symbols-outlined text-green-400 text-lg",children:"check_circle"}),"Device targeting (Work/Private/Any)"]}),T.jsxs("li",{className:"flex items-center gap-2",children:[T.jsx("span",{className:"material-symbols-outlined text-green-400 text-lg",children:"check_circle"}),"Optional AES-256-GCM encryption"]}),T.jsxs("li",{className:"flex items-center gap-2",children:[T.jsx("span",{className:"material-symbols-outlined text-green-400 text-lg",children:"check_circle"}),"Offline-first with IndexedDB"]}),T.jsxs("li",{className:"flex items-center gap-2",children:[T.jsx("span",{className:"material-symbols-outlined text-green-400 text-lg",children:"check_circle"}),"Optional Dexie Cloud sync"]}),T.jsxs("li",{className:"flex items-center gap-2",children:[T.jsx("span",{className:"material-symbols-outlined text-green-400 text-lg",children:"check_circle"}),"Status tracking (New  Done  Archived)"]})]})]}),T.jsxs("div",{className:"glass-card rounded-xl p-4 space-y-3",children:[T.jsx("h3",{className:"font-medium",children:"Device ID"}),T.jsx("code",{className:"block text-xs text-gray-400 bg-black/20 p-2 rounded break-all",children:r.deviceId})]})]})]})]})})]})}function iT(){const{deviceProfile:r,updateDeviceProfile:n,navigate:i}=$i(),a=Ku(),[o,u]=Be.useState("welcome"),[p,y]=Be.useState(r.deviceName||X()),[g,m]=Be.useState(r.category||"any"),[b,x]=Be.useState(r.workMode),[S,A]=Be.useState(r.retentionDays||7),[C,U]=Be.useState(!1);function X(){const W=navigator.userAgent;return W.includes("Windows")?"Windows Device":W.includes("Mac")?"Mac Device":W.includes("iPhone")?"iPhone":W.includes("iPad")?"iPad":W.includes("Android")?"Android Device":W.includes("Linux")?"Linux Device":"My Device"}const ie=async()=>{if(!p.trim()){a.error("Please enter a device name");return}U(!0);try{await n({deviceName:p.trim(),category:g,workMode:b,retentionDays:S,defaultTargetCategory:g==="work"?"private":g==="private"?"work":"any",isSetupComplete:!0}),u("complete"),setTimeout(()=>{i("inbox")},1500)}catch{a.error("Failed to save settings"),U(!1)}};return T.jsx("div",{className:"min-h-[var(--app-vh)] bg-background-dark flex items-center justify-center p-4",children:T.jsxs("div",{className:"w-full max-w-md",children:[o==="welcome"&&T.jsxs("div",{className:"text-center animate-fade-in-up",children:[T.jsx("div",{className:"w-24 h-24 rounded-3xl bg-primary/20 flex items-center justify-center mx-auto mb-6",children:T.jsx("span",{className:"material-symbols-outlined text-5xl text-primary",children:"swap_horiz"})}),T.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Handoff Lite"}),T.jsx("p",{className:"text-gray-400 mb-8",children:"Send URLs and text between devices instantly with optional encryption and device targeting."}),T.jsx("button",{onClick:()=>u("device"),className:"w-full py-4 bg-primary hover:bg-primary-dark rounded-xl font-medium text-lg transition-colors",children:"Get Started"})]}),o==="device"&&T.jsxs("div",{className:"animate-fade-in-up",children:[T.jsxs("div",{className:"text-center mb-8",children:[T.jsx("span",{className:"material-symbols-outlined text-4xl text-primary mb-2",children:"devices"}),T.jsx("h2",{className:"text-2xl font-bold",children:"Set up this device"}),T.jsx("p",{className:"text-gray-400 mt-2",children:"Give this device a name and category"})]}),T.jsxs("div",{className:"space-y-6",children:[T.jsxs("div",{children:[T.jsx("label",{className:"block text-sm text-gray-400 mb-2",children:"Device Name"}),T.jsx("input",{type:"text",value:p,onChange:W=>y(W.target.value),placeholder:"My Device",className:"w-full px-4 py-3 bg-white/5 rounded-xl text-white placeholder-gray-500 border border-white/10 focus:border-primary outline-none"})]}),T.jsx(Vf,{label:"Device Category",value:g,onChange:m}),T.jsxs("p",{className:"text-sm text-gray-400",children:[g==="work"&&" Work devices only receive work-targeted items",g==="private"&&" Private devices only receive private-targeted items",g==="any"&&" This device will receive all items"]})]}),T.jsxs("div",{className:"flex gap-3 mt-8",children:[T.jsx("button",{onClick:()=>u("welcome"),className:"flex-1 py-3 bg-white/10 hover:bg-white/20 rounded-xl font-medium transition-colors",children:"Back"}),T.jsx("button",{onClick:()=>u("preferences"),className:"flex-1 py-3 bg-primary hover:bg-primary-dark rounded-xl font-medium transition-colors",children:"Next"})]})]}),o==="preferences"&&T.jsxs("div",{className:"animate-fade-in-up",children:[T.jsxs("div",{className:"text-center mb-8",children:[T.jsx("span",{className:"material-symbols-outlined text-4xl text-primary mb-2",children:"tune"}),T.jsx("h2",{className:"text-2xl font-bold",children:"Preferences"}),T.jsx("p",{className:"text-gray-400 mt-2",children:"Configure how Handoff Lite works"})]}),T.jsxs("div",{className:"space-y-6",children:[T.jsx("div",{className:"glass-card rounded-xl p-4",children:T.jsxs("label",{className:"flex items-center justify-between cursor-pointer",children:[T.jsxs("div",{className:"flex items-center gap-3",children:[T.jsx("span",{className:"material-symbols-outlined text-amber-400",children:"work"}),T.jsxs("div",{children:[T.jsx("span",{className:"font-medium",children:"Work Mode"}),T.jsx("p",{className:"text-sm text-gray-400",children:"Only allow sending URLs"})]})]}),T.jsxs("div",{className:"relative",children:[T.jsx("input",{type:"checkbox",checked:b,onChange:W=>x(W.target.checked),className:"sr-only"}),T.jsx("div",{className:`w-12 h-6 rounded-full transition-colors ${b?"bg-amber-500":"bg-white/20"}`,children:T.jsx("div",{className:`w-5 h-5 rounded-full bg-white shadow transform transition-transform ${b?"translate-x-6":"translate-x-0.5"} mt-0.5`})})]})]})}),T.jsxs("div",{className:"glass-card rounded-xl p-4",children:[T.jsxs("h3",{className:"font-medium flex items-center gap-2 mb-4",children:[T.jsx("span",{className:"material-symbols-outlined",children:"schedule"}),"Auto-Archive After"]}),T.jsxs("div",{className:"flex items-center gap-4",children:[T.jsx("input",{type:"range",min:"1",max:"30",value:S,onChange:W=>A(Number(W.target.value)),className:"flex-1"}),T.jsxs("span",{className:"text-lg font-medium w-20 text-right",children:[S," days"]})]})]})]}),T.jsxs("div",{className:"flex gap-3 mt-8",children:[T.jsx("button",{onClick:()=>u("device"),className:"flex-1 py-3 bg-white/10 hover:bg-white/20 rounded-xl font-medium transition-colors",children:"Back"}),T.jsx("button",{onClick:ie,disabled:C,className:"flex-1 py-3 bg-primary hover:bg-primary-dark rounded-xl font-medium transition-colors disabled:opacity-50 flex items-center justify-center gap-2",children:C?T.jsx(ju,{size:"sm"}):T.jsxs(T.Fragment,{children:["Complete Setup",T.jsx("span",{className:"material-symbols-outlined",children:"arrow_forward"})]})})]})]}),o==="complete"&&T.jsxs("div",{className:"text-center animate-pop-in",children:[T.jsx("div",{className:"w-24 h-24 rounded-full bg-green-500/20 flex items-center justify-center mx-auto mb-6",children:T.jsx("span",{className:"material-symbols-outlined text-5xl text-green-500",children:"check_circle"})}),T.jsx("h2",{className:"text-2xl font-bold mb-4",children:"You're all set!"}),T.jsx("p",{className:"text-gray-400",children:"Opening your inbox..."})]}),o!=="complete"&&T.jsx("div",{className:"flex justify-center gap-2 mt-8",children:["welcome","device","preferences"].map((W,z)=>T.jsx("div",{className:`w-2 h-2 rounded-full transition-colors ${["welcome","device","preferences"].indexOf(o)>=z?"bg-primary":"bg-white/20"}`},W))})]})})}function lT(){const{route:r,isLoading:n}=$i();return n?T.jsx("div",{className:"min-h-[var(--app-vh)] flex items-center justify-center bg-background-dark",children:T.jsx(ju,{size:"lg",text:"Loading..."})}):r==="setup"?T.jsx(iT,{}):T.jsxs(T.Fragment,{children:[T.jsxs(Be.Suspense,{fallback:T.jsx("div",{className:"min-h-[var(--app-vh)] flex items-center justify-center bg-background-dark",children:T.jsx(ju,{text:"Loading..."})}),children:[r==="inbox"&&T.jsx(tT,{}),r==="send"&&T.jsx(_0,{}),r==="share"&&T.jsx(_0,{}),r==="settings"&&T.jsx(rT,{})]}),T.jsx(qO,{})]})}function aT(){return HO(),VO(),T.jsxs("div",{className:"min-h-[var(--app-vh)] bg-background-dark text-white",children:[T.jsx(lT,{}),T.jsx(BO,{})]})}const sT=()=>T.jsx(TO,{children:T.jsx(CO,{children:T.jsx(MO,{children:T.jsx(aT,{})})})}),mx=document.getElementById("root");if(!mx)throw new Error("Root element not found");const oT=GS.createRoot(mx);oT.render(T.jsx(sT,{}));
